(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,a){"use strict";var n=a(6),o=a(0),i=o.useCallback,r=o.useState,l=o.useLayoutEffect,s=o.useRef,c=function(e,t){return e?t?{width:Math.max(t.width,e.offsetWidth),height:Math.max(t.height,e.offsetHeight)}:{width:e.offsetWidth,height:e.offsetHeight}:t||{width:0,height:0}};t.a=function(e,t){var a=s(),o=r(!0),u=Object(n.a)(o,2),p=u[0],d=u[1];a.current=p;var m=r(c(e?e.current:{},t)),h=Object(n.a)(m,2),g=h[0],b=h[1],y=i(function(){a.current&&e.current&&b(c(e.current,t))},[e]);return l(function(){if(e.current){if(y(),"function"===typeof ResizeObserver){var t=new ResizeObserver(function(){return y()});return t.observe(e.current),function(){t.disconnect(e.current),t=null}}return window.addEventListener("resize",y),function(){window.removeEventListener("resize",y)}}},[e.current]),{size:g,setResizeActive:d}}},115:function(e,t,a){"use strict";var n=a(82),o=a(7),i=a(50),r="SERIES",l="PHOTO";t.a=function e(t){var a=this;if(Object(i.a)(this,e),this.getTagType=function(e){return a.config.tags.find(function(t){return t.id===e})},this.getTagTypeIndex=function(e){return a.config.tags.findIndex(function(t){return t.id===e})},this.getXYTagTypes=function(){return a.config.tags.filter(function(e){return e.allowXY})},this.getNonXYTagTypes=function(){return a.config.tags.filter(function(e){return e.allowNonXY})},this.getSeriesMeta=function(){return Object.keys(a.config.meta).filter(function(e){return a.config.meta[e].type===r}).reduce(function(e,t){return Object(o.a)({},e,Object(n.a)({},t,a.config.meta[t].default))},{})},this.getPhotoMeta=function(){return Object.keys(a.config.meta).filter(function(e){return a.config.meta[e].type===l}).reduce(function(e,t){return Object(o.a)({},e,Object(n.a)({},t,a.config.meta[t].default))},{})},!t)throw new Error("No seriesConfig object provided to SeriesConfig class");this.config=t}},124:function(e,t,a){"use strict";var n=a(38),o=a(0),i=a.n(o),r=a(108),l=a.n(r),s=a(80),c=a.n(s),u=a(5),p=20;t.a=Object(u.withStyles)(function(e){return{root:{fontSize:"0.6em",height:p,marginRight:e.spacing.unit/2,marginTop:e.spacing.unit/2},deleteIcon:{width:p-1,height:p-1},chipAvatar:{width:p,height:p}}},{withTheme:!0})(function(e){var t=e.classes,a=e.theme,o=e.edit,r=e.tag,s=e.color,u=e.onDelete,p=Object(n.a)(e,["classes","theme","edit","tag","color","onDelete"]);return i.a.createElement(l.a,Object.assign({style:{background:s||null,color:s?"".concat(a.palette.getContrastText(s)):null},label:r.label,data:r.id,onDelete:o?function(){return u(r)}:null,deleteIcon:i.a.createElement(c.a,{className:t.deleteIcon,onClick:function(e){console.log("this click")},style:{opacity:.5,color:s?"".concat(a.palette.getContrastText(s)):null}}),className:t.root},p))})},14:function(e,t,a){"use strict";a.d(t,"g",function(){return o}),a.d(t,"e",function(){return r}),a.d(t,"d",function(){return l}),a.d(t,"f",function(){return s}),a.d(t,"b",function(){return c}),a.d(t,"a",function(){return u});var n=a(174);t.c={tagColors:["#418CF0","#FCB441","#E0400A","#056492","#BFBFBF","#1A3B69","#FFE382","#129CDD","#CA6B4B","#005CDB","#F3D288","#506381","#F1B9A8","#E0830A","#7893BE"]};var o={mapBoxToken:"pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",styles:n.a},i=Object({NODE_ENV:"production",PUBLIC_URL:"/photomon_v0",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",REACT_APP_GRAPHQL:"https://11w2bia702.execute-api.us-west-2.amazonaws.com/prod/api",REACT_APP_CDN:"https://d2astr0kuf5k1.cloudfront.net",REACT_APP_AWS_REGION:"us-west-2",REACT_APP_COGNITO_IDPOOLID:"us-west-2:ab544d6d-6ea9-430d-8c8f-d895ce172d0f",REACT_APP_COGNITO_USER_POOL_ID:"us-west-2_ninoe7B9g",REACT_APP_COGNITO_CLIENT_ID:"ndtqsua64n6qqp9hef5fh4560",REACT_APP_DOMAIN:"northarrowresearchlabs.github.io",REACT_APP_BASENAME:"photomon_v0"}).REACT_APP_BASEURL;console.log("config: ",i,"photomon_v0");var r={AppStateTypes:{MAP:"map",LIST:"list",USER:"user",SERIES:"series",NEW_SERIES_CAMERA:"new_series_camera",NEW_SERIES_LIBRARY:"new_series_library"},MapModeTypes:{FREE:"free",USER:"user",TAG:"tag"}},l={graphql:"https://11w2bia702.execute-api.us-west-2.amazonaws.com/prod/api",cdn:"https://d2astr0kuf5k1.cloudfront.net"},s={imgStore:"imgStore"},c={Auth:{region:"us-west-2",userPoolId:"us-west-2_ninoe7B9g",userPoolWebClientId:"ndtqsua64n6qqp9hef5fh4560",mandatorySignIn:!0,cookieStorage:{domain:"".concat("northarrowresearchlabs.github.io"),expires:20,secure:!1}}},u={OPEN:{label:"Open",description:"Open series can be seen and contributed to by anyone",color:"green"},PRIVATE:{label:"Private",description:"Private series can only be seen by their createors",color:"red"},PUBLIC:{label:"Public",description:"Public series can be seen by everyone",color:"blue"}}},151:function(e,t,a){"use strict";var n=a(0),o=a.n(n),i=a(8),r=a.n(i),l=a(12),s=a.n(l),c=a(68),u=a.n(c),p=a(5),d=function(e){var t=e.classes,a=e.label,n=e.text,i=e.height,l=e.onClick;return o.a.createElement("div",{onClick:l},a&&o.a.createElement(u.a,{className:t.formLabel},a),o.a.createElement(s.a,{variant:"body1",color:"inherit",style:{height:i},className:r()(t.root)},n))};d.defaultProps={height:100},t.a=Object(p.withStyles)(function(e){return{root:{position:"relative",display:"block",overflow:"hidden",whiteSpace:"pre-line","&::before":{content:'"  "',display:"block",position:"absolute",bottom:0,width:"100%",height:100,background:"linear-gradient(180deg, rgba(255,255,255,0) 0%, ".concat(e.palette.background.paper," 100%)")}}}})(d)},152:function(e,t,a){"use strict";var n=a(7),o=a(50),i=a(69),r=a.n(i),l=a(115);t.a=function e(t,a){var i=this;Object(o.a)(this,e),this.findTagById=function(e,t){return i.seriesConfig.getTagType(e).values.find(function(e){return e.id===t})},this.getXYTags=function(){var e=i.seriesConfig.getXYTagTypes().map(function(e){return e.id});return i.tags.filter(function(t){return e.indexOf(t.typeId)>-1&&t.coords&&t.coords.x})},this.getNonXYTags=function(){var e=i.seriesConfig.getNonXYTagTypes().map(function(e){return e.id});return i.tags.filter(function(t){return e.indexOf(t.typeId)>-1})},this.createNewTagObj=function(e,t){return{id:r()(),label:e,typeId:t}},this.createExistingTagObj=function(e,t){return Object(n.a)({},i.findTagById(t,e),{typeId:t})},this.createNewXYTagObj=function(e,t,a){return{id:r()(),label:e,typeId:t,coords:a}},this.createExistingXYTagObj=function(e,t,a){return Object(n.a)({},i.findTagById(t,e),{typeId:t,coords:a})},this.getRelXYTags=function(e){return i.getXYTags().map(function(t){return Object(n.a)({},t,{group:i.seriesConfig.getTagTypeIndex(t.typeId),relCoords:{x:t.coords.x*e,y:t.coords.y*e}})})},this.tags=a,this.seriesConfig=new l.a(t)}},154:function(e,t,a){"use strict";var n=a(38),o=a(0),i=a.n(o),r=a(5),l=a(70),s=a(246),c=Object(r.withStyles)(function(e){return{root:{color:e.palette.primary.main,position:"absolute",top:"50%",left:"50%",textAlign:"center",transformOrigin:"50% 50%",transform:"translateY(-50%) translateX(-50%)",zIndex:1},rootActive:{zIndex:1e3},svgDot:{zIndex:102,width:20,height:20,position:"absolute",top:"50%",left:"50%",textAlign:"center",transformOrigin:"50% 50%",transform:"translateY(-50%) translateX(-50%)"},dot:{stroke:e.palette.secondary.contrastText,strokeWidth:"1",fill:e.palette.secondary.main},directionIndicator:{position:"absolute",left:"50%",zIndex:100},name:{color:"white",fontWeight:"bold",textShadow:"\n        0px 0px 4px #000000, \n        0px 0px 4px #000000 \n    ",zIndex:122,position:"relative"},nameActive:{color:e.palette.secondary.dark,textShadow:"\n    0px 0px 2px #FFFFFF, \n    0px 0px 2px #FFFFFF,\n    0px 0px 4px #FFFFFF \n"}}})(function(e){var t=e.classes,a=e.direction;return i.a.createElement("div",{className:t.root},i.a.createElement("svg",{className:t.svgDot,version:"1.1",viewBox:"0, 0, 10, 10"},i.a.createElement("circle",{cx:"5",cy:"5",r:"4",className:t.dot})),a&&a>=0?i.a.createElement("div",{className:t.directionIndicator},i.a.createElement("svg",{className:t.svgArc,version:"1.1",width:"100",height:"100",viewBox:"0, 0, 100, 100",style:{transform:"translateY(-50%) translateX(-50%) rotateZ(".concat(a,"deg)")}},i.a.createElement("path",{d:"M50,0 C60.946,0.151 72.136,3.514 80.675,10.56 L50,50 L19.325,10.56 C27.938,3.461 39,0.278 50,0 z",fill:"#009DC1",fillOpacity:"0.444",strokeWidth:"0.5",strokeOpacity:"0.6",stroke:"#FFFFFF"}))):null)}),u=a(6),p=a(300),d=a(114),m=a(233),h=a(14),g=a(8),b=a.n(g),y=(a(352),a(353),function(e){var t=e.controlPadding,a=e.viewport,r=e.children,s=e.mapStyles,c=e.onMapDataEvent,g=Object(n.a)(e,["controlPadding","viewport","children","mapStyles","onMapDataEvent"]),y=Object(o.useRef)(null),v=Object(d.a)(y,{width:100,height:50}).size,w=Object(o.useState)(0),x=Object(u.a)(w,2),E=x[0],O=x[1],S=Object(o.useState)(null),k=Object(u.a)(S,2),j=k[0],C=k[1],N=function(){if(!(!v||v.width<10||v.height<10))try{var e=Object(p.a)(a);C(e)}catch(t){console.error(t)}};return j||N(),Object(o.useMemo)(N,[v]),i.a.createElement("div",{className:b()("BaseMap",e.className),ref:y,style:{height:"100%",width:"100%"}},i.a.createElement(l.e,Object.assign({},a,{height:v.height,width:v.width,mapStyle:s[E].style,onData:c,mapboxApiAccessToken:h.g.mapBoxToken},g),s&&s.length>1?i.a.createElement(m.a,{controlPadding:t,currStyle:E,mapStyles:s,setCurrStyle:O}):null,r&&Array.isArray(r)?r.map(function(e){return f(e,a,v.height,v.width,j)}):f(r,a,v.height,v.width,j)))});function f(e,t,a,n,o){return"function"===typeof e?e(t,a,n,o):e}y.defaultProps={controlPadding:{},stylechooser:!0,initStyle:0,mapStyles:h.g.styles};var v=y;t.a=Object(r.withStyles)(function(e){return{mapWrapper:{width:"100%"},svgDot:{zIndex:2,position:"absolute",width:"5%",height:"5%",top:"50%",left:"50%",transformOrigin:"50% 50%",transform:"translateY(-50%) translateX(-50%)"},svgArc:{zIndex:1,position:"absolute",width:"85%",height:"85%",top:"50%",left:"50%",transformOrigin:"50% 50%"}}})(function(e){e.classes;var t=e.staticMap,a=e.editable,o=e.latitude,r=e.longitude,u=e.onChange,p=e.direction,d=Object(n.a)(e,["classes","staticMap","editable","latitude","longitude","onChange","direction"]),m=t?v:s.a,h=t?{}:{touchRotate:!1,dragRotate:!1,showMe:a,onViewportChange:u};return i.a.createElement(m,Object.assign({},h,d),o&&r?i.a.createElement(l.c,{className:"singleMarker",latitude:o,longitude:r},i.a.createElement(c,{direction:p})):i.a.createElement(c,{direction:p}))})},174:function(e,t,a){"use strict";var n=a(438),o=a(439),i=a(179);t.a=[{toolTip:"Sat",Icon:i.b,ActiveIcon:i.a,color:"green",style:n},{toolTip:"Topo",Icon:i.d,ActiveIcon:i.c,color:"blue",style:o}]},176:function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"a",function(){return r});var n=a(6),o=a(0),i=function(){var e=Object(o.useState)({accuracy:null,altitude:null,altitudeAccuracy:null,heading:null,latitude:null,longitude:null,speed:null,timestamp:Date.now()}),t=Object(n.a)(e,2),a=t[0],i=t[1],r=Object(o.useRef)(),l=Object(o.useRef)();r.current=!0;var s=function(e){r.current&&i({accuracy:e.coords.accuracy,altitude:e.coords.altitude,altitudeAccuracy:e.coords.altitudeAccuracy,heading:e.coords.heading,latitude:e.coords.latitude,longitude:e.coords.longitude,speed:e.coords.speed,timestamp:e.timestamp})};return Object(o.useEffect)(function(){return navigator.geolocation.getCurrentPosition(s),l.current=navigator.geolocation.watchPosition(s),function(){r.current=!1,navigator.geolocation.clearWatch(l.current)}},[navigator.geolocation]),a};function r(){var e=Object(o.useState)({absolute:!1,alpha:null,beta:null,gamma:null}),t=Object(n.a)(e,2),a=t[0],i=t[1];function r(e){i({absolute:e.absolute,alpha:e.alpha,beta:e.beta,gamma:e.gamma})}return Object(o.useEffect)(function(){return window.addEventListener("deviceorientation",r,!0),function(){window.removeEventListener("deviceorientation",r)}},[]),a}},233:function(e,t,a){"use strict";var n=a(6),o=a(0),i=a.n(o),r=a(234),l=a.n(r),s=a(177),c=a.n(s),u=a(5),p=function(e){var t=e.classes,a=e.theme,r=e.controlPadding,s=e.currStyle,u=e.mapStyles,p=e.setCurrStyle,d=Object(o.useState)(!1),m=Object(n.a)(d,2),h=m[0],g=m[1],b=function(e,t){console.log("noEventSetOpen",e,t),e.preventDefault(),e.stopPropagation(),g(t)};if(!u||!Array.isArray(u)||u.length<2||!u[s])return null;var y=u[s].ActiveIcon;return i.a.createElement("div",{className:t.root,style:{top:r.top?r.top:2*a.spacing.unit,right:r.right?r.right:2*a.spacing.unit}},u.length>1&&i.a.createElement(l.a,{ariaLabel:"SpeedDial example",className:t.speedDial,classes:{fab:t.speedDialFab},icon:i.a.createElement(y,{className:t.icon}),onClick:function(e){return b(e,!h)},onClose:function(e){return b(e,!1)},open:h,direction:"left"},u.map(function(e,a){var n=e.Icon,o=(e.ActiveIcon,e.toolTip);return i.a.createElement(c.a,{key:"stylebutton".concat(a),icon:i.a.createElement(n,{className:t.speedDialIcon}),tooltipPlacement:"bottom",ButtonProps:{classes:{root:t.speedDialAction}},TooltipClasses:{tooltip:t.speedDialLabel},tooltipTitle:o,tooltipOpen:!0,onClick:function(){console.log("SET",a),p(a),g(!1)}})})))};p.defaultProps={controlPadding:{}},t.a=Object(u.withStyles)(function(e){return{root:{zIndex:10,position:"absolute"},speedDialFab:{border:"2px solid",background:e.palette.secondary.main,color:e.palette.secondary.contrastText,width:40,height:40},speedDialAction:{border:"2px solid",background:e.palette.primary.main,color:e.palette.primary.contrastText,marginTop:0,marginBottom:0},speedDialIcon:{},speedDialLabel:{background:"black",color:"white"}}},{withTheme:!0})(p)},235:function(e,t,a){"use strict";var n=a(0),o=a.n(n),i=a(12),r=a.n(i),l=a(49),s=a.n(l),c=a(41),u=a.n(c),p=a(30),d=a.n(p),m=a(42),h=a.n(m),g=a(92),b=a.n(g),y=a(5);t.a=Object(y.withStyles)(function(e){return{root:{},body:{overflow:"hidden",whiteSpace:"pre-line",paddingBottom:e.spacing.unit},title:{margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.classes,a=e.open,n=e.onClose,i=e.title,l=e.body;return o.a.createElement(u.a,{scroll:"paper",open:a,onClose:n,"aria-labelledby":"simple-dialog-title"},o.a.createElement(h.a,{className:t.title},i,o.a.createElement(d.a,{className:t.closeButton,onClick:n},o.a.createElement(b.a,null))),o.a.createElement(s.a,null,o.a.createElement(r.a,{variant:"body1",className:t.body},l)))})},239:function(e,t,a){"use strict";var n=a(0),o=a.n(n),i=a(41),r=a.n(i),l=a(42),s=a.n(l),c=a(49),u=a.n(c),p=a(15),d=a.n(p),m=a(12),h=a.n(m),g=a(53),b=a.n(g),y=a(5);t.a=Object(y.withStyles)(function(e){return{}})(function(e){var t=e.classes,a=e.title,n=e.message,i=e.onConfirm,l=e.open;return o.a.createElement(r.a,{className:t.root,disableBackdropClick:!0,open:l,disableEscapeKeyDown:!0,maxWidth:"xl","aria-labelledby":"confirmation-dialog-title"},o.a.createElement(s.a,{id:"confirmation-dialog-title"},a),o.a.createElement(u.a,null,o.a.createElement(h.a,null,n)),o.a.createElement(b.a,null,o.a.createElement(d.a,{onClick:function(){return i(!1)},color:"primary"},"No"),o.a.createElement(d.a,{onClick:function(){return i(!0)},color:"primary"},"Yes")))})},241:function(e,t,a){"use strict";var n=a(6),o=a(0),i=a.n(o),r=a(49),l=a.n(r),s=a(41),c=a.n(s),u=a(53),p=a.n(u),d=a(36),m=a.n(d),h=a(15),g=a.n(h),b=a(42),y=a.n(b),f=a(5);t.a=Object(f.withStyles)(function(e){return{root:{},body:{overflow:"hidden",whiteSpace:"pre-line",paddingBottom:e.spacing.unit},title:{margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.classes,a=e.open,r=e.onOk,s=e.title,u=e.body,d=e.multiline,h=Object(o.useState)(u||""),b=Object(n.a)(h,2),f=b[0],v=b[1];return i.a.createElement(c.a,{scroll:"paper",open:a,fullWidth:!0,onClose:function(){return r(f)}},i.a.createElement(y.a,{className:t.title},s),i.a.createElement(l.a,null,i.a.createElement(m.a,{className:t.body,multiline:d,fullWidth:!0,rows:6,rowsMax:20,onChange:function(e){return v(e.target.value)},defaultValue:u})),i.a.createElement(p.a,null,i.a.createElement(g.a,{onClick:function(){return r(u)}},"Cancel"),i.a.createElement("div",{style:{flexGrow:1}}),i.a.createElement(g.a,{onClick:function(){return r(f)}},"Ok")))})},243:function(e,t,a){"use strict";var n=a(6),o=a(0),i=a.n(o),r=a(12),l=a.n(r),s=a(240),c=a.n(s),u=a(5),p=function(e){var t=e.classes,a=e.defaultValue,r=e.onChange,s=Object(o.useState)(a),u=Object(n.a)(s,2),p=u[0],d=u[1];return i.a.createElement("div",{className:t.root},i.a.createElement(l.a,{className:t.sliderLabel,color:"inherit",variant:"caption"},"New"),i.a.createElement(c.a,{classes:{container:t.container,track:t.track,thumb:t.thumb},value:p,"aria-labelledby":"label",onChange:function(e,t){d(t),r(t)},vertical:!0}),i.a.createElement(l.a,{className:t.sliderLabel,color:"inherit",variant:"caption"},"Reference"))};p.defaultProps={defaultValue:100,onChange:function(){}},t.a=Object(u.withStyles)(function(e){return{root:{color:"white",zIndex:10,display:"flex",flexDirection:"column",position:"absolute",height:"50%",top:"45%",left:"0",transform:"translateY(-50%)"},sliderLabel:{display:"block",flexGrow:1,textAlign:"center",padding:e.spacing.unit},container:{padding:"10px 36px"},track:{width:"4px!important",background:"white"},thumb:{background:"white",width:30,height:30}}})(p)},245:function(e,t,a){"use strict";var n=a(6),o=a(0),i=a.n(o),r=a(12),l=a.n(r),s=a(81),c=a.n(s),u=a(62),p=a.n(u),d=a(58),m=a.n(d),h=a(63),g=a.n(h),b=a(5),y=a(8),f=a.n(y),v=a(124),w=function(e){return{root:{width:"100%"},tagContainer:{},formControl:{},actionButtons:{textAlign:"right"},noOptionsMessage:{padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,fontSize:16},input:{display:"flex",padding:0},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},paper:{position:"absolute",zIndex:1,marginTop:e.spacing.unit,left:0,right:0}}},x=Object(b.withStyles)(w)(function(e){var t=e.classes,a=e.tags,n=(e.label,e.tagConfig),o=e.className,r=a.filter(function(e){return e.typeId===n.id&&!e.coords});return i.a.createElement("div",{className:f()(t.root,o)},i.a.createElement(l.a,{variant:"overline",className:t.fieldTitle},n.label),i.a.createElement("div",{className:t.tagContainer},r.map(function(e,t){return i.a.createElement(v.a,{tag:e,key:"tagchip".concat(t),color:n.color})})))}),E=a(151),O=a(89),S=a(54),k=Object(b.withStyles)(function(e){return{root:{},rootEdit:{},formControl:{width:"100%"},textBody:{whiteSpace:"pre-line"},actionButtons:{textAlign:"right"}}})(function(e){var t=e.classes,a=e.label,n=e.value,o=e.hint,r=e.onChange,l=e.className;return i.a.createElement("div",{className:f()(t.root,l)},i.a.createElement(O.e,{variant:"overline",className:t.fieldTitle},a),i.a.createElement(O.d,{type:"datetime-local",fullWidth:!0,value:Object(S.d)(n),className:t.textField,onChange:function(e){return r(Object(S.a)(e.target.value))}}),o&&i.a.createElement(O.e,{variant:"caption",className:t.hint},o))}),j=a(152),C=a(241),N=a(235),I=a(49),P=a.n(I),T=a(41),A=a.n(T),_=a(53),z=a.n(_),L=a(15),R=a.n(L),D=a(42),M=a.n(D),F=a(30),B=a.n(F),U=a(92),$=a.n(U),W=a(38),G=a(31),Y=a(7),q=a(69),H=a.n(q),X=a(67),V=a.n(X),Q=a(36),J=a.n(Q),Z=a(142),K=a.n(Z),ee=a(236),te=a(238),ae=a.n(te),ne=Object(b.withStyles)(w)(function(e){var t=e.classes,a=e.tags,n=e.onChange,o=e.hint,r=e.tagConfig,s=e.className,c=function(e,t){var o=t.action,i=t.removedValue,l=t.option;switch(o){case"clear":n([]);break;case"remove-value":n(a.filter(function(e){return e.id!==i.value}));break;case"select-option":var s=Object(Y.a)({},r.values.find(function(e){return e.id===l.value}),{typeId:r.id});n([].concat(Object(G.a)(a),[s]));break;case"create-option":var c={label:e.find(function(e){return e.__isNew__}).value,id:H()(),typeId:r.id};n([].concat(Object(G.a)(a),[c]))}},u=a.filter(function(e){return e.typeId===r.id&&!e.coords}),p=u.map(function(e){return{label:e.label,value:e.id}}),d=r.values.filter(function(e){return-1===u.map(function(e){return e.id}).indexOf(e.id)}).map(function(e){return{label:e.label,value:e.id}});return i.a.createElement("div",{className:f()(t.root,s)},i.a.createElement(l.a,{variant:"overline",className:t.fieldTitle},r.label),!r.allowAdditions&&i.a.createElement(ee.a,{options:d,classes:t,isFocused:!0,components:{Control:oe,Menu:re,NoOptionsMessage:ie,Option:ce,Placeholder:se,ValueContainer:ue},deleteRemoves:!0,value:p,isClearable:!1,onChange:c,placeholder:"Select Tags",isMulti:!0,isSearchable:!0}),r.allowAdditions&&i.a.createElement(ae.a,{options:d,classes:t,isFocused:!0,deleteRemoves:!0,components:{Control:oe,Menu:re,NoOptionsMessage:ie,Option:ce,Placeholder:se,ValueContainer:ue},value:p,isClearable:!1,onChange:c,placeholder:"Select Tags",isMulti:!0,isSearchable:!0}),o&&i.a.createElement(l.a,{variant:"caption",className:t.hint},o))});function oe(e){return i.a.createElement(J.a,Object.assign({fullWidth:!0,InputProps:{inputComponent:le,inputProps:{className:e.selectProps.classes.input,inputRef:e.innerRef,children:e.children,onMouseDown:function(t){e.innerProps.onMouseDown(t)},onTouchEnd:function(t){e.innerProps.onTouchEnd(t)}}}},e.selectProps.textFieldProps))}var ie=function(e){var t=e.innerProps,a=e.selectProps,n=e.children;return i.a.createElement(l.a,Object.assign({color:"textSecondary",className:a.classes.noOptionsMessage},t),n)},re=function(e){var t=e.selectProps,a=e.innerProps,n=e.children;return i.a.createElement(V.a,Object.assign({square:!0,className:t.classes.paper},a),n)},le=function(e){var t=e.inputRef,a=Object(W.a)(e,["inputRef"]);return i.a.createElement("div",Object.assign({ref:t},a))},se=function(e){return i.a.createElement(l.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},ce=function(e){var t=e.innerRef,a=e.isFocused,n=e.isSelected,o=e.innerProps,r=e.children;return i.a.createElement(K.a,Object.assign({buttonRef:t,selected:a,component:"div",style:{fontWeight:n?500:400}},o),r)},ue=function(e){var t=e.selectProps,a=e.children;return i.a.createElement("div",{className:t.classes.valueContainer},a)},pe=Object(b.withStyles)(function(e){return{root:{},dlgContent:{overflowY:"visible!important",paddingBottom:300},title:{},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.classes,a=e.open,r=e.title,l=e.onOk,s=e.onCancel,c=e.tags,u=e.tagConfig,p=Object(o.useState)(c),d=Object(n.a)(p,2),m=d[0],h=d[1];return i.a.createElement(A.a,{className:t.root,scroll:"body",fullScreen:!0,open:a,onClose:function(){return l(m)}},i.a.createElement(M.a,{className:t.title},r,i.a.createElement(B.a,{className:t.closeButton,onClick:s},i.a.createElement($.a,null))),i.a.createElement(P.a,{className:t.dlgContent},i.a.createElement(ne,{className:t.field,tags:m,tagConfig:u,onChange:h})),i.a.createElement(z.a,null,i.a.createElement(R.a,{onClick:s},"Cancel"),i.a.createElement("div",{style:{flexGrow:1}}),i.a.createElement(R.a,{onClick:function(){return h(c)}},"Reset"),i.a.createElement(R.a,{onClick:function(){return l(m)}},"Ok")))}),de=a(43),me=Object(b.withStyles)(function(e){return{root:{},rootEdit:{},formControl:{width:"100%"},textBody:{whiteSpace:"pre-line"},actionButtons:{textAlign:"right"}}})(function(e){var t=e.classes,a=e.label,n=e.value,o=e.className;return i.a.createElement("div",{className:f()(t.root,o)},i.a.createElement(l.a,{variant:"overline",className:t.fieldTitle},a),i.a.createElement(l.a,{variant:"body1",className:t.hint},n?Object(S.c)(n):""))}),he="noteEdit",ge="noteView",be="tag";t.a=Object(b.withStyles)(function(e){return{root:{height:"90%",width:"85%"},dlgTitleContainer:{display:"flex",padding:0},catTagTitle:{marginTop:2*e.spacing.unit},dlgTitle:{flexGrow:1,paddingTop:2*e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:3*e.spacing.unit},field:{marginBottom:2*e.spacing.unit}}})(function(e){var t=e.classes,a=e.canEdit,r=e.photo,s=e.delta,u=e.onChange,d=Object(o.useContext)(de.a).seriesConfig,h=Object(o.useState)({}),b=Object(n.a)(h,2),y=b[0],f=y.activeDialog,v=y.activeDialogContext,w=b[1],O=new j.a(d,s.tags||r.tags),S=[];try{S=r.meta?Object.keys(JSON.parse(r.meta)):[]}catch(I){console.error(I)}return i.a.createElement("div",null,a?i.a.createElement(k,{className:t.field,label:"Photo taken on",value:s.takenOn||r.takenOn,onChange:function(e){return u({takenOn:e})},canEdit:a}):i.a.createElement(me,{label:"Photo taken on",value:s.takenOn||r.takenOn}),(a||r.note)&&i.a.createElement(E.a,{label:"Photo Note",text:s.note||r.note,onClick:function(){w(a?{activeDialog:he}:{activeDialog:ge})}}),i.a.createElement(l.a,{variant:"subtitle1",className:t.catTagTitle},"Category tags"),i.a.createElement(c.a,null),O.seriesConfig.getNonXYTagTypes().map(function(e,n){return i.a.createElement("div",{key:"tagtype-".concat(n),onClick:function(){return a?w({activeDialog:be,activeDialogContext:e}):null}},i.a.createElement(x,{className:t.field,label:e.label,tags:s.tags||r.tags,tagConfig:e}))}),S.length>0&&Object.keys(d.meta).length>0&&i.a.createElement(i.a.Fragment,null,i.a.createElement(l.a,{className:t.heading},"Metadata"),i.a.createElement(c.a,null),i.a.createElement(p.a,{className:t.list},S.map(function(e,t){return d.meta[e]?i.a.createElement(m.a,{key:"metadata".concat(t)},i.a.createElement(g.a,{primary:d.meta[e].label,secondary:d.meta[e].render(r.meta[e])})):null}))),f&&f===he&&i.a.createElement(C.a,{open:!0,multiline:!0,onOk:function(e){u({note:e}),w({})},title:"Edit Photo Note",body:s.note||r.note}),f&&f===ge&&i.a.createElement(N.a,{open:!0,multiline:!0,onClose:function(){return w({})},title:"Photo Note",body:s.note||r.note}),f&&f===be&&i.a.createElement(pe,{open:!0,title:"Edit Tags: ".concat(v.label),onOk:function(e){w({}),u({tags:e})},onCancel:function(){return w({})},tags:s.tags||r.tags,tagConfig:v}))})},246:function(e,t,a){"use strict";var n=a(7),o=a(6),i=a(38),r=a(0),l=a.n(r),s=a(70),c=a(178),u=a(300),p=a(6149),d=a(114),m=a(5),h=Object(m.withStyles)(function(e){return{root:{width:1,height:1,zIndex:1},svgDot:{width:20,height:20,position:"absolute",top:"50%",left:"50%",textAlign:"center",transformOrigin:"50% 50%",transform:"translateY(-50%) translateX(-50%)"},svgAccuracyDot:{position:"absolute",top:"50%",left:"50%",textAlign:"center",transformOrigin:"50% 50%",transform:"translateY(-50%) translateX(-50%)"}}})(function(e){var t=e.classes,a=(e.position,e.projection),n=20*a.pixelsPerMeter[0],o=20*a.pixelsPerMeter[1];return l.a.createElement("div",{className:t.root},l.a.createElement("svg",{style:{height:n,width:o},className:t.svgAccuracyDot,version:"1.1",viewBox:"0, 0, 100, 100"},l.a.createElement("circle",{cx:"50",cy:"50",r:49,stroke:"#8888FF",fillOpacity:"0.4",strokeWidth:"1",fill:"#AAAAFF"})),l.a.createElement("svg",{className:t.svgDot,version:"1.1",viewBox:"0, 0, 10, 10"},l.a.createElement("circle",{cx:"5",cy:"5",r:"4",stroke:"#FFFFFF",strokeWidth:"1",fill:"#4444FF"})))}),g=a(176),b=a(233),y=a(79),f=a.n(y),v=a(139),w=a.n(v),x=Object(m.withStyles)(function(e){return{root:{border:"1px solid",background:e.palette.grey[100],color:"black",width:40,height:40,zIndex:10,position:"absolute"}}},{withTheme:!0})(function(e){var t=e.classes,a=e.theme,n=e.onClick,o=e.controlPadding,i=e.disabled;return l.a.createElement(f.a,{disabled:i,style:{top:56+(o.top?o.top:2*a.spacing.unit),right:o.right?o.right:2*a.spacing.unit},"aria-label":"myLocation",className:t.root,onClick:n},l.a.createElement(w.a,null))}),E=a(14),O=a(8),S=a.n(O),k=(a(352),a(353),function(e){var t=e.showMe,a=e.children,m=e.mapStyles,y=e.controlPadding,f=e.viewport,v=e.bounds,w=e.lockToBounds,O=e.lockPan,k=e.initStyle,N=e.onViewportChange,I=e.onTransitionStart,P=e.onTransitionEnd,T=e.transitions,A=e.onMapDataEvent,_=e.stylechooser,z=Object(i.a)(e,["showMe","children","mapStyles","controlPadding","viewport","bounds","lockToBounds","lockPan","initStyle","onViewportChange","onTransitionStart","onTransitionEnd","transitions","onMapDataEvent","stylechooser"]),L=Object(r.useRef)(null),R=Object(r.useRef)(null),D=Object(r.useRef)(null),M=Object(d.a)(L,{width:100,height:50}).size,F=Object(r.useState)(k),B=Object(o.a)(F,2),U=B[0],$=B[1],W=Object(r.useState)(!1),G=Object(o.a)(W,2),Y=G[0],q=G[1],H=Object(r.useState)(Object(n.a)({},j,f)),X=Object(o.a)(H,2),V=X[0],Q=X[1],J=Object(r.useState)(null),Z=Object(o.a)(J,2),K=Z[0],ee=Z[1],te=Object(r.useState)(null),ae=Object(o.a)(te,2),ne=ae[0],oe=ae[1];D.current=K;var ie={};t&&(ie=Object(g.b)());var re=ie.latitude&&ie.longitude?l.a.createElement(s.c,{key:"myPos",className:"myPosMarker",latitude:ie.latitude,longitude:ie.longitude,style:{zIndex:1}},l.a.createElement(h,{position:ie,projection:ne})):null;Object(r.useMemo)(function(){if(!(!M||M.width<10||M.height<10)){m.length<=U&&$(k);try{var e=Object(u.a)(V);oe(e)}catch(t){console.log("ERROR",V),console.error(t)}}},[V.zoom,M]);var le=function(e){var t=Object(n.a)({},e);v&&w&&(t.longitude<v[0]?t.longitude=v[0]:t.longitude>v[2]&&(t.longitude=v[2]),t.latitude<v[1]?t.latitude=v[1]:t.latitude>v[3]&&(t.latitude=v[3])),O&&(t.latitude=V.latitude,t.longitude=V.longitude),Y||"function"!==typeof N||N({viewport:t,size:M,projection:ne,map:R.current&&R.current.getMap()}),Q(t)};return Object(r.useMemo)(function(){if(!(!v||!M||M.width<10||M.height<10||Y)){var e=Object(o.a)(v,4),t=e[0],a=e[1],i=e[2],r=e[3];try{var l=new p.a(V).fitBounds([[t,a],[i,r]],{padding:40,offset:[0,0]}),s=l.longitude,c=l.latitude,u=l.zoom;console.log("Changing Zoom ",v,V.zoom,u,V),Q(Object(n.a)({},V,{longitude:s,latitude:c,zoom:u}))}catch(d){console.error(d)}}},[M,v]),Object(r.useEffect)(function(){console.log("SOMETHING CHANGED"),Q(Object(n.a)({},V,f))},[f]),l.a.createElement("div",{className:S()("BaseMap",e.className),ref:L,style:{height:"100%",width:"100%"}},l.a.createElement(s.f,Object.assign({},V,K||T,{ref:function(e){R.current=e},height:M.height,width:M.width,mapStyle:U<m.length?m[U].style:m[0].style,onData:A,onTransitionStart:function(){q(!0),console.log("handleTransitionStart (internal)"),I&&I()},onTransitionEnd:function(){q(!1),ee(null),console.log("handleTransitionEnd (internal)"),P&&P(),"function"===typeof N&&N({viewport:V,size:M,projection:ne,map:R.current&&R.current.getMap()})},dragPan:!O,onViewportChange:le,mapboxApiAccessToken:E.g.mapBoxToken},z),a&&Array.isArray(a)?a.map(function(e,t){return e?l.a.cloneElement(C(e,V,M.height,M.width,ne),{key:"mapChild-".concat(t)}):null}):C(a,V,M.height,M.width,ne),_&&l.a.createElement(b.a,{controlPadding:y,currStyle:U,mapStyles:m,setCurrStyle:$}),!e.hideNavControls&&l.a.createElement(s.d,{onViewportChange:function(e){return le(Object(n.a)({},e,M))},showZoom:!1===!e.touchZoom&&!1===!e.scrollZoom,showCompass:!1===!e.touchRotate&&!1===!e.dragRotate}),t&&l.a.createElement(l.a.Fragment,null,re,l.a.createElement(x,{disabled:!ie||!ie.latitude,controlPadding:y,onClick:function(){ie.latitude&&ie.longitude&&(ee({transitionDuration:2e3,transitionInterpolator:new s.a,transitionEasing:c.a}),setTimeout(function(){D.current&&ee(null)},2e3),Q(Object(n.a)({},V,{latitude:ie.latitude,longitude:ie.longitude,zoom:V.zoom>10?V.zoom:12})))}}))))});k.defaultProps={controlPadding:{},stylechooser:!0,initStyle:0,mapStyles:E.g.styles,lockToBounds:!1};t.a=k;var j={latitude:49.3050394,longitude:-123.1398254,bearing:0,pitch:0,zoom:12};function C(e,t,a,n,o){return"function"===typeof e?e(t,a,n,o):e}},247:function(e,t,a){"use strict";var n=a(7),o=a(6),i=a(0),r=a.n(i),l=a(36),s=a.n(l),c=a(68),u=a.n(c),p=a(12),d=a.n(p),m=a(171),h=a.n(m),g=a(172),b=a.n(g),y=a(5),f=a(154),v=a(49),w=a.n(v),x=a(41),E=a.n(x),O=a(53),S=a.n(O),k=a(15),j=a.n(k),C=a(42),N=a.n(C),I=a(240),P=a.n(I),T=Object(y.withStyles)(function(e){return{root:{},dlgContent:{display:"flex",flexDirection:"column",padding:0},mapWrapper:{flexGrow:1},sliderWrapper:{padding:"20px"},slider:{padding:"22px 0px"},sliderRoor:{padding:"0 20px"},body:{overflow:"hidden",whiteSpace:"pre-line",paddingBottom:e.spacing.unit},title:{background:e.palette.primary.main,color:e.palette.primary.contrastText,margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.classes,a=e.open,n=e.onOk,l=e.onCancel,s=e.title,c=e.latitude,p=e.longitude,m=e.direction,h=Object(i.useState)({longitude:p,latitude:c}),g=Object(o.a)(h,2),b=g[0],y=b.longitude,v=b.latitude,x=g[1],O=Object(i.useState)(m),k=Object(o.a)(O,2),C=k[0],I=k[1],T=Object(i.useMemo)(function(){return{zoom:18,latitude:c,longitude:p}},[c,p]);return r.a.createElement(E.a,{scroll:"paper",open:a,fullWidth:!0,fullScreen:!0,onClose:l},r.a.createElement(N.a,{className:t.title,disableTypography:!0},r.a.createElement(d.a,{color:"inherit"},s)),r.a.createElement(w.a,{className:t.dlgContent},r.a.createElement("div",{className:t.mapWrapper},r.a.createElement(f.a,{editable:!0,className:t.map,direction:C>0?C:null,viewport:T,onChange:function(e){var t=e.viewport,a=t.longitude,n=t.latitude;return x({longitude:a,latitude:n})}})),r.a.createElement("div",{className:t.sliderWrapper},r.a.createElement(u.a,{className:t.mapFormLabel},"Direction ",C>-1?"":"(off)"),r.a.createElement(P.a,{classes:{root:t.sliderRoor,container:t.slider},value:C||-1,min:-1,max:360,step:1,onChange:function(e,t){return I(t)}}))),r.a.createElement(S.a,null,r.a.createElement(j.a,{onClick:l},"Cancel"),r.a.createElement("div",{style:{flexGrow:1}}),r.a.createElement(j.a,{onClick:function(){return n({longitude:y,latitude:v,direction:C})}},"Ok")))}),A=a(241),_=a(14),z=a(151),L="mapPicker",R="noteEdit";t.a=Object(y.withStyles)(function(e){return{root:{},inner:{display:"flex",flexDirection:"column"},dlgTitle:{background:e.palette.primary.main,color:e.palette.primary.contrastText},access:{display:"flex"},accessRadio:{flex:"1 1 50%"},grow:{flexGrow:1},field:{flexGrow:0,marginBottom:2*e.spacing.unit},slider:{paddingLeft:e.spacing.unit,paddingRight:e.spacing.unit},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"100%"},formLabel:{display:"block",marginTop:e.spacing.unit,marginBottom:e.spacing.unit},mapFormLabel:{display:"block",marginTop:e.spacing.unit,marginBottom:e.spacing.unit},mapInnerWrap:{flexGrow:1,height:"200px",minHeight:"200px"},mapWrapper:{flexGrow:1,display:"flex",flexDirection:"column",paddingBottom:2*e.spacing.unit},formControl:{margin:e.spacing.unit,minWidth:120},chips:{display:"flex",flexWrap:"wrap"}}})(function(e){var t=e.classes,a=e.series,l=e.delta,c=e.onChange,p=Object(i.useState)(null),m=Object(o.a)(p,2),g=m[0],y=m[1],v={zoom:18};(l.latitude||a.latitude)&&(l.longitude||a.longitude)&&(v.latitude=l.latitude||a.latitude,v.longitude=l.longitude||a.longitude);var w=l.access||a.access||"PRIVATE";return r.a.createElement("div",null,r.a.createElement(s.a,{label:"Series Name",fullWidth:!0,placeholder:"New Series",className:t.field,value:l.name||a.name||"",onChange:function(e){return c(Object(n.a)({},l,{name:e.target.value}))}}),r.a.createElement("div",{className:t.mapWrapper,onClick:function(){return y(L)}},r.a.createElement(u.a,{className:t.mapFormLabel},"Location"),r.a.createElement("div",{className:t.mapInnerWrap},r.a.createElement(f.a,{staticMap:!0,className:t.map,direction:l.direction||a.direction,viewport:v}))),r.a.createElement("div",{className:t.field},r.a.createElement(u.a,null,"Series Access"),r.a.createElement("div",{className:t.access},r.a.createElement(h.a,{className:t.accessRadio,control:r.a.createElement(b.a,{checked:["OPEN","PUBLIC"].indexOf(w)>-1,onChange:function(e){c(Object(n.a)({},l,{access:e.target.checked?"PUBLIC":"PRIVATE"}))},value:"PUBLIC"}),label:r.a.createElement("div",null,r.a.createElement(d.a,{variant:"body2",component:"div"},_.a.PUBLIC.label),r.a.createElement(d.a,{variant:"caption",component:"div"},_.a.PUBLIC.description))}),r.a.createElement(h.a,{className:t.accessRadio,disabled:["PRIVATE"].indexOf(w)>-1,control:r.a.createElement(b.a,{checked:["OPEN"].indexOf(w)>-1,onChange:function(e){return c(Object(n.a)({},l,{access:e.target.checked?"OPEN":"PUBLIC"}))},value:"OPEN"}),label:r.a.createElement("div",null,r.a.createElement(d.a,{variant:"body2",component:"div"},_.a.OPEN.label),r.a.createElement(d.a,{variant:"caption",component:"div"},_.a.OPEN.description))}))),r.a.createElement(z.a,{onClick:function(){return y(R)},className:t.field,label:"Series Note",text:l.note||a.note}),g===L&&r.a.createElement(T,{open:!0,title:"Series Location & Direction",latitude:l.latitude||a.latitude,longitude:l.longitude||a.longitude,direction:l.direction||a.direction,onOk:function(e){c(Object(n.a)({},l,e)),y(null)},onCancel:function(){return y(null)}}),g===R&&r.a.createElement(A.a,{open:!0,title:"Series Note",body:l.note||a.note,multiline:!0,onOk:function(e){c(Object(n.a)({},l,{note:e})),y(null)},onCancel:function(){return y(null)}}))})},248:function(e,t,a){"use strict";var n=a(31),o=a(82),i=a(7),r=a(6),l=a(0),s=a.n(l),c=a(8),u=a.n(c),p=a(221),d=a.n(p),m=a(144),h=a.n(m),g=a(110),b=a.n(g),y=a(146),f=a.n(y),v=a(15),w=a.n(v),x=a(79),E=a.n(x),O=a(145),S=a.n(O),k=a(222),j=a.n(k),C=a(43),N=a(5),I=a(239),P=a(54),T=function(e){var t=e.classes,a=e.photos,c=e.columns,p=e.multiSelect,m=e.onDelete,g=e.onTileClick,y=Object(l.useState)(!1),v=Object(r.a)(y,2),x=v[0],O=v[1],k=Object(l.useState)({}),N=Object(r.a)(k,2),T=N[0],A=N[1],_=Object(l.useRef)();_.current=T;var z=Object(l.useState)([]),L=Object(r.a)(z,2),R=L[0],D=L[1],M=Object(l.useState)(!1),F=Object(r.a)(M,2),B=F[0],U=F[1],$=Object(l.useContext)(C.a),W=$.seriesConfig,G=$.ac;Object(l.useEffect)(function(){a.forEach(function(e){e.base64?A(Object(i.a)({},_.current,Object(o.a)({},e.id,e.base64))):W.getPhotoUrl(e,"thumb").then(function(t){A(Object(i.a)({},_.current,Object(o.a)({},e.id,t)))})})},[a]);var Y=function(){O(!1),D([])},q=function(e){if(R.indexOf(e)<0)D([].concat(Object(n.a)(R),[e]));else{var t=R.filter(function(t){return t!==e});0===t.length&&Y(),D(t)}},H=Object(n.a)(a);return H.sort(function(e,t){return parseInt(t.takenOn,10)-parseInt(e.takenOn,10)}),s.a.createElement("div",null,s.a.createElement(d.a,{cols:c,cellHeight:200,className:t.root},H.map(function(e,a){var n=R.indexOf(e.id)>-1,o=G.canUser("delete",e,"photo");return s.a.createElement(h.a,{key:"gridTile".concat(a),onClick:function(t){return o&&function(e,t){e.preventDefault(),e.stopPropagation(),x?q(t.id):g(t.id)}(t,e)},className:u()(t.tile,x&&!o&&t.notDeleteable,x&&o&&!n&&t.unSelectedTile,x&&n&&t.selectedTile)},s.a.createElement("img",{src:T[e.id],alt:T[e.id],className:t.img}),o&&p&&s.a.createElement(E.a,{size:"small","aria-label":"Add",className:t.addFab,onClick:function(t){return function(e,t){e.preventDefault(),e.stopPropagation(),O(!0),q(t)}(t,e.id)}},x&&n?s.a.createElement(j.a,null):s.a.createElement(S.a,null)),s.a.createElement(b.a,{title:s.a.createElement("span",null,Object(P.c)(e.takenOn))}))})),s.a.createElement(f.a,{open:x,autoHideDuration:null,ContentProps:{"aria-describedby":"snackbar-fab-message-id",className:t.snackbarContent},message:s.a.createElement("span",{id:"snackbar-fab-message-id"},R.length," Photos selected"),action:s.a.createElement("div",null,s.a.createElement(w.a,{color:"inherit",disabled:R.length>=a.length,size:"small",onClick:function(){return U(!0)}},"Delete"),s.a.createElement(w.a,{color:"inherit",size:"small",onClick:function(){return Y()}},"Cancel")),className:t.snackbar}),s.a.createElement(I.a,{open:B,onConfirm:function(e){U(!1),!0===e&&R.length<a.length&&m(R),Y()},title:"Delete ".concat(R.length," Photos"),message:"Are you sure you want to delete these photos?"}))};T.defaultProps={multiSelect:!0,columns:2};t.a=Object(N.withStyles)(function(e){return{root:{},tile:{},addFab:{position:"absolute",zIndex:10,top:e.spacing.unit,left:e.spacing.unit,opacity:.3},notDeleteable:{background:"black",opacity:.1},unSelectedTile:{"& img":{opacity:.7}},selectedTile:{padding:"".concat(2*e.spacing.unit,"px!important"),"& img":{opacity:1}},img:{}}})(T)},287:function(e,t){},304:function(e,t,a){"use strict";(function(e){var n=a(31),o=a(7),i=a(6),r=a(0),l=a.n(r),s=a(305),c=a.n(s),u=a(306),p=a(459),d=a(457),m=a(460),h=a(307),g=a(445),b=a(176),y=a(446),f=a(43),v="camera",w="library",x="photoreview",E="photoinfoedit";t.a=function(t){var a=t.inputMethod,s=t.onCreate,O=t.onCancel,S=t.isNewSeries,k=Object(r.useContext)(f.a),j=k.seriesConfig,C=k.series,N=Object(r.useState)(null),I=Object(i.a)(N,2),P=I[0],T=I[1],A=Object(r.useState)(S?new g.a(j).series:null),_=Object(i.a)(A,2),z=_[0],L=_[1],R=Object(r.useState)(null),D=Object(i.a)(R,2),M=D[0],F=D[1],B=Object(r.useState)({current:a,history:[]}),U=Object(i.a)(B,2),$=U[0],W=U[1],G=Object(b.a)(),Y=Object(b.b)(),q=C&&C.photos?C.photos:[],H=Object(y.a)(function(t){console.log("onLibraryAdd Debug GOT DATA",{data:t});var a={},n=t.indexOf("base64,")+"base64,".length,i=t.slice(n),r=c.a.create(e.from(i,"base64"));console.log("onLibraryAdd Buffered");try{a=r.parse(),console.log("got EXIF",JSON.stringify(a))}catch(g){console.error("EXIF ERROR",g)}var l=String(Date.now());try{l=String(a.tags.DateTimeOriginal)}catch(g){console.log("EXIF",a),console.error("ERROR GETTING TIMESTAMP",g)}if(console.log("isNewSeries",{isNewSeries:S}),S){var s=Y.latitude,p=Y.longitude;s&&p||(s=49.3050394,p=-123.1398254);try{a.tags.GPSLatitude&&Object(u.a)(a.tags.GPSLatitude)&&a.tags.GPSLongitude&&Object(u.a)(a.tags.GPSLongitude)&&(s=a.tags.GPSLatitude,p=a.tags.GPSLongitude)}catch(b){console.error("GPS Longitude and Latitude could not be determined")}console.log("LATLONG FOR LIB PICK",{geo:Y,latitude:s,longitude:p}),L(Object(o.a)({},z,{latitude:s,longitude:p}))}var d=new h.a(j).photo,m=Object(o.a)({},d,{takenOn:l,rawData:{exif:a},base64:t});T(m),X(x),console.log("onLibraryAdd FINISHED",m)}),X=function(e){console.log("NEWPHOTO changeMode",$,e),W({current:e,history:[].concat(Object(n.a)($.history),[$.current])})},V=null;switch($.current){case v:V=l.a.createElement(d.a,{photos:q,onShutter:function(t,a){var n=new h.a(j).photo;console.log("onShutter Debug GOT DATA",{data:t});var i={},r=t.base64.indexOf("base64,")+"base64,".length,l=t.base64.slice(r),s=c.a.create(e.from(l,"base64"));console.log("onLibraryAdd Buffered");try{i=s.parse(),console.log("got EXIF",JSON.stringify(i))}catch(d){console.error("EXIF ERROR",d)}if(S){var u=Y.latitude,p=Y.longitude;u&&p||(u=49.3050394,p=-123.1398254),L(Object(o.a)({},z,{latitude:u,longitude:p}))}T(Object(o.a)({},n,{rawData:{orient:G,geolocate:Y},base64:t.base64})),F(a),X(x)},onCancel:O});break;case w:console.log("RENDERING",H),V=H;break;case x:V=l.a.createElement(p.a,{defaultRefPhotoId:M,photos:q,captured:P,onConfirm:function(){return X(E)},onCancel:O,onRetry:function(){if($.history.length>0){var e=Object(n.a)($.history),t=e.pop();W({current:t,history:e})}else O()}});break;case E:V=l.a.createElement(m.a,{photo:P,newSeries:z,onSave:s,onCancel:O});break;default:console.log("NEWPHOTO: default state. you should NEVER see this",$),O()}return V}}).call(this,a(32).Buffer)},306:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return n});a(242);var n=function(e){try{return!isNaN(parseFloat(e))&&isFinite(e)}catch(t){return!1}}}).call(this,a(32).Buffer)},307:function(e,t,a){"use strict";var n=a(50),o=a(69),i=a.n(o),r=a(54),l=a(115);t.a=function e(t,a){var o=this;Object(n.a)(this,e),this.setMeta=function(){o.meta=JSON.stringify(o.config.getPhotoMeta())},this.newPhoto=function(){return{id:"_"+i()(),takenOn:Object(r.b)(new Date),meta:JSON.stringify(o.config.getPhotoMeta()),tags:[]}},this.config=new l.a(t),this.photo=a||this.newPhoto()}},353:function(e,t,a){},43:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(0),o=a.n(n).a.createContext({})},438:function(e){e.exports={version:8,name:"TheProductMapboxGL",glyphs:"mapbox://fonts/raychaser/{fontstack}/{range}.pbf",metadata:{"mapbox:autocomposite":!0,"mapbox:type":"default"},sources:{MapBaseLayer:{url:"mapbox://mapbox.satellite",type:"raster",tileSize:256}},layers:[{id:"background",type:"background",paint:{"background-color":"rgb(0,0,0)"},interactive:!1},{id:"MapBaseLayer",type:"raster",source:"MapBaseLayer","source-layer":"MapBaseLayer",interactive:!1,paint:{"raster-opacity":1}}]}},439:function(e){e.exports={version:8,name:"Outdoors",metadata:{"mapbox:autocomposite":!0,"mapbox:type":"default","mapbox:groups":{1444934828655.3389:{name:"Aeroways",collapsed:!0},1444933322393.2852:{name:"POI labels  (scalerank 1)",collapsed:!0},1444934749452.0452:{name:"Wetlands",collapsed:!0},1444855786460.0557:{name:"Roads",collapsed:!0},1444933575858.6992:{name:"Highway shields",collapsed:!0},1444934295202.7542:{name:"Admin boundaries",collapsed:!0},1444856151690.9143:{name:"State labels",collapsed:!0},1444933721429.3076:{name:"Road labels",collapsed:!0},1444933358918.2366:{name:"POI labels (scalerank 2)",collapsed:!0},1444933808272.805:{name:"Water labels",collapsed:!0},1444855815295.714:{name:"Hillshading",collapsed:!0},1444855831248.8289:{name:"Landcover",collapsed:!0},1444933372896.5967:{name:"POI labels (scalerank 3)",collapsed:!0},1444855799204.86:{name:"Bridges",collapsed:!0},1444856087950.3635:{name:"Marine labels",collapsed:!0},1444862510685.128:{name:"City labels",collapsed:!0},1444855769305.6016:{name:"Tunnels",collapsed:!0},1444856144497.7825:{name:"Country labels",collapsed:!0},1444933456003.5437:{name:"POI labels (scalerank 4)",collapsed:!0},1444933837268.9458:{name:"Contour lines",collapsed:!0}},"mapbox:trackposition":!0},sources:{composite:{url:"mapbox://mapbox.mapbox-terrain-v2,mapbox.mapbox-streets-v7",type:"vector"}},sprite:"mapbox://sprites/pipbailey/cj66v6i8c4hnc2so16ngtlovn",glyphs:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",layers:[{id:"background",type:"background",layout:{},paint:{"background-color":{base:1,stops:[[11,"hsl(35, 32%, 91%)"],[13,"hsl(35, 12%, 89%)"]]}},interactive:!0},{id:"landcover_crop",type:"fill",metadata:{"mapbox:group":"1444855831248.8289"},source:"composite","source-layer":"landcover",maxzoom:12,filter:["==","class","crop"],layout:{},paint:{"fill-color":"hsl(75, 62%, 81%)","fill-opacity":{base:1.5,stops:[[2,.3],[12,0]]},"fill-antialias":!1},interactive:!0},{id:"landcover_grass",type:"fill",metadata:{"mapbox:group":"1444855831248.8289"},source:"composite","source-layer":"landcover",maxzoom:12,filter:["==","class","grass"],layout:{},paint:{"fill-color":"hsl(75, 62%, 81%)","fill-opacity":{base:1.5,stops:[[2,.3],[12,0]]},"fill-antialias":!1},interactive:!0},{id:"landcover_scrub",type:"fill",metadata:{"mapbox:group":"1444855831248.8289"},source:"composite","source-layer":"landcover",maxzoom:12,filter:["==","class","scrub"],layout:{},paint:{"fill-color":"hsl(75, 62%, 81%)","fill-opacity":{base:1.5,stops:[[2,.3],[12,0]]},"fill-antialias":!1},interactive:!0},{id:"landcover_wood",type:"fill",metadata:{"mapbox:group":"1444855831248.8289"},source:"composite","source-layer":"landcover",maxzoom:12,filter:["==","class","wood"],layout:{},paint:{"fill-color":"hsl(75, 62%, 81%)","fill-opacity":{base:1.5,stops:[[2,.3],[12,0]]},"fill-antialias":!1},interactive:!0},{id:"landcover_snow",type:"fill",metadata:{"mapbox:group":"1444855831248.8289"},source:"composite","source-layer":"landcover",filter:["==","class","snow"],layout:{},paint:{"fill-color":"hsl(0, 0%, 100%)","fill-opacity":.2,"fill-antialias":!1},interactive:!0},{id:"national_park",type:"fill",source:"composite","source-layer":"landuse_overlay",filter:["==","class","national_park"],layout:{},paint:{"fill-color":"hsl(100, 59%, 76%)","fill-opacity":{base:1,stops:[[5,0],[5.5,.75],[9,.75],[10,.35]]}},interactive:!0},{id:"scrub",type:"fill",source:"composite","source-layer":"landuse",minzoom:9,filter:["==","class","scrub"],layout:{},paint:{"fill-color":"hsl(75, 41%, 74%)","fill-opacity":{base:1,stops:[[9,0],[15,.2]]}},interactive:!0},{id:"grass",type:"fill",source:"composite","source-layer":"landuse",minzoom:9,filter:["==","class","grass"],layout:{},paint:{"fill-color":"hsl(75, 41%, 74%)","fill-opacity":{base:1,stops:[[9,0],[15,.4]]}},interactive:!0},{id:"wood",type:"fill",source:"composite","source-layer":"landuse",minzoom:6,filter:["==","class","wood"],layout:{},paint:{"fill-color":"hsl(75, 41%, 74%)","fill-opacity":{base:1,stops:[[7,0],[15,.5]]}},interactive:!0},{id:"agriculture",type:"fill",source:"composite","source-layer":"landuse",minzoom:11,filter:["==","class","agriculture"],layout:{},paint:{"fill-opacity":{base:1,stops:[[11,0],[14,.75]]},"fill-color":"hsl(75, 37%, 81%)","fill-outline-color":"hsl(75, 32%, 68%)"},interactive:!0},{id:"national_park-tint-band",type:"line",source:"composite","source-layer":"landuse_overlay",minzoom:9,filter:["==","class","national_park"],layout:{"line-cap":"round"},paint:{"line-color":"hsl(100, 62%, 74%)","line-width":{base:1.4,stops:[[9,1],[14,8]]},"line-offset":{base:1.4,stops:[[9,0],[14,-2.5]]},"line-opacity":{base:1,stops:[[9,0],[10,.75]]},"line-blur":3},interactive:!0},{id:"national_park-outline",type:"line",source:"composite","source-layer":"landuse_overlay",minzoom:9,filter:["==","class","national_park"],layout:{},paint:{"line-color":{base:1,stops:[[12,"hsl(100, 49%, 71%)"],[14,"hsl(100, 40%, 67%)"]]},"line-width":{base:1,stops:[[9,.75],[12,1]]},"line-offset":0,"line-opacity":{base:1,stops:[[9,0],[10,1]]}},interactive:!0},{id:"park",type:"fill",source:"composite","source-layer":"landuse",filter:["all",["!in","type","garden","golf_course","playground","zoo"],["==","class","park"]],layout:{},paint:{"fill-color":"hsl(100, 59%, 76%)","fill-opacity":{base:1,stops:[[5,0],[6,1]]}},interactive:!0},{id:"other-green-areas",type:"fill",source:"composite","source-layer":"landuse",filter:["all",["==","class","park"],["in","type","garden","golf_course","playground","zoo"]],layout:{},paint:{"fill-color":"hsl(100, 59%, 81%)","fill-opacity":{base:1,stops:[[5,0],[6,1]]}},interactive:!0},{id:"glacier",type:"fill",source:"composite","source-layer":"landuse",minzoom:9,filter:["==","class","glacier"],layout:{},paint:{"fill-color":"hsl(196, 71%, 93%)","fill-opacity":{base:1,stops:[[9,0],[10,.5]]}},interactive:!0},{id:"pitch",type:"fill",source:"composite","source-layer":"landuse",filter:["==","class","pitch"],layout:{},paint:{"fill-color":"hsl(100, 57%, 72%)"},interactive:!0},{id:"pitch-line",type:"line",source:"composite","source-layer":"landuse",minzoom:15,filter:["==","class","pitch"],layout:{"line-join":"miter"},paint:{"line-color":"hsl(75, 57%, 84%)"},interactive:!0},{id:"sand",type:"fill",source:"composite","source-layer":"landuse",filter:["==","class","sand"],layout:{},paint:{"fill-color":"hsl(60, 46%, 87%)"},interactive:!0},{id:"contour-line",type:"line",metadata:{"mapbox:group":"1444933837268.9458"},source:"composite","source-layer":"contour",minzoom:11,filter:["!in","index",10,5],layout:{},paint:{"line-opacity":{base:1,stops:[[11,.15],[12,.3]]},"line-color":"hsl(100, 100%, 20%)","line-width":{base:1,stops:[[13,.5],[16,.8]]},"line-offset":{base:1,stops:[[13,1],[16,1.6]]}},interactive:!0},{id:"contour-line-index",type:"line",metadata:{"mapbox:group":"1444933837268.9458"},source:"composite","source-layer":"contour",minzoom:11,filter:["in","index",10,5],layout:{},paint:{"line-opacity":{base:1,stops:[[11,.25],[12,.5]]},"line-color":"hsl(100, 100%, 20%)","line-width":{base:1,stops:[[13,.6],[16,1.2]]},"line-offset":{base:1,stops:[[13,.6],[16,1.2]]}},interactive:!0},{id:"hillshade_highlight_bright",type:"fill",metadata:{"mapbox:group":"1444855815295.714"},source:"composite","source-layer":"hillshade",maxzoom:18,filter:["==","level",94],layout:{},paint:{"fill-color":"hsl(0, 0%, 100%)","fill-opacity":{stops:[[15,.15],[18,0]]},"fill-antialias":!1},interactive:!0},{id:"hillshade_highlight_med",type:"fill",metadata:{"mapbox:group":"1444855815295.714"},source:"composite","source-layer":"hillshade",filter:["==","level",90],layout:{},paint:{"fill-color":"hsl(0, 0%, 100%)","fill-opacity":{stops:[[15,.15],[18,0]]},"fill-antialias":!1},interactive:!0},{id:"hillshade_shadow_faint",type:"fill",metadata:{"mapbox:group":"1444855815295.714"},source:"composite","source-layer":"hillshade",maxzoom:17,filter:["==","level",89],layout:{},paint:{"fill-color":"hsl(56, 59%, 22%)","fill-opacity":{stops:[[15,.07],[17,0]]},"fill-antialias":!1},interactive:!0},{id:"hillshade_shadow_med",type:"fill",metadata:{"mapbox:group":"1444855815295.714"},source:"composite","source-layer":"hillshade",filter:["==","level",78],layout:{},paint:{"fill-color":"hsl(56, 59%, 22%)","fill-opacity":{stops:[[15,.07],[17,0]]},"fill-antialias":!1},interactive:!0},{id:"hillshade_shadow_dark",type:"fill",metadata:{"mapbox:group":"1444855815295.714"},source:"composite","source-layer":"hillshade",filter:["==","level",67],layout:{},paint:{"fill-color":"hsl(56, 59%, 22%)","fill-opacity":{stops:[[15,.08],[17,0]]},"fill-antialias":!1},interactive:!0},{id:"hillshade_shadow_extreme",type:"fill",metadata:{"mapbox:group":"1444855815295.714"},source:"composite","source-layer":"hillshade",maxzoom:17,filter:["==","level",56],layout:{},paint:{"fill-color":"hsl(56, 59%, 22%)","fill-opacity":{stops:[[15,.08],[17,0]]},"fill-antialias":!1},interactive:!0},{id:"waterway-river-canal-shadow",type:"line",source:"composite","source-layer":"waterway",minzoom:8,filter:["in","class","canal","river"],layout:{"line-cap":{base:1,stops:[[0,"butt"],[11,"round"]]},"line-join":"round"},paint:{"line-color":"hsl(215, 84%, 69%)","line-width":{base:1.3,stops:[[8.5,.4],[20,8]]},"line-opacity":{base:1,stops:[[8,0],[8.5,1]]},"line-translate":{base:1.2,stops:[[7,[0,0]],[16,[-1,-1]]]},"line-translate-anchor":"viewport"},interactive:!0},{id:"waterway-river-canal",type:"line",source:"composite","source-layer":"waterway",minzoom:8,filter:["in","class","canal","river"],layout:{"line-cap":{base:1,stops:[[0,"butt"],[11,"round"]]},"line-join":"round"},paint:{"line-color":"hsl(205, 87%, 76%)","line-width":{base:1.3,stops:[[8.5,.4],[20,8]]},"line-opacity":{base:1,stops:[[8,0],[8.5,1]]}},interactive:!0},{id:"waterway-small",type:"line",source:"composite","source-layer":"waterway",minzoom:13,filter:["!in","class","canal","river"],layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"hsl(205, 87%, 76%)","line-width":{base:1.35,stops:[[13.5,.4],[20,3]]},"line-opacity":{base:1,stops:[[13,0],[13.5,1]]}},interactive:!0},{id:"water-shadow",type:"fill",source:"composite","source-layer":"water",layout:{},paint:{"fill-color":"hsl(215, 84%, 69%)","fill-translate":{base:1.2,stops:[[7,[0,0]],[16,[-1,-1]]]},"fill-translate-anchor":"viewport","fill-opacity":1},interactive:!0},{id:"water",type:"fill",source:"composite","source-layer":"water",layout:{},paint:{"fill-color":"hsl(196, 80%, 70%)"},interactive:!0},{id:"wetlands",type:"fill",metadata:{"mapbox:group":"1444934749452.0452"},source:"composite","source-layer":"landuse_overlay",filter:["in","class","wetland","wetland_noveg"],layout:{},paint:{"fill-color":"hsl(185, 43%, 74%)","fill-opacity":{base:1,stops:[[10,.25],[10.5,.15]]}},interactive:!0},{id:"wetlands-pattern",type:"fill",metadata:{"mapbox:group":"1444934749452.0452"},source:"composite","source-layer":"landuse_overlay",filter:["in","class","wetland","wetland_noveg"],layout:{},paint:{"fill-color":"hsl(185, 43%, 74%)","fill-opacity":{base:1,stops:[[10,0],[10.5,1]]},"fill-pattern":"wetland","fill-translate-anchor":"viewport"},interactive:!0},{id:"barrier_line-land-polygon",type:"fill",source:"composite","source-layer":"barrier_line",filter:["all",["==","$type","Polygon"],["==","class","land"]],layout:{},paint:{"fill-color":"hsl(35, 12%, 89%)"},interactive:!0},{id:"barrier_line-land-line",type:"line",source:"composite","source-layer":"barrier_line",filter:["all",["==","$type","LineString"],["==","class","land"]],layout:{"line-cap":"round"},paint:{"line-width":{base:1.99,stops:[[14,.75],[20,40]]},"line-color":"hsl(35, 12%, 89%)"},interactive:!0},{id:"tunnel-street-low",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{stops:[[11.5,0],[12,1],[14,1],[14.01,0]]}},interactive:!0},{id:"tunnel-street_limited-low",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{stops:[[11.5,0],[12,1],[14,1],[14.01,0]]}},interactive:!0},{id:"tunnel-track-case",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","track"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(50, 100%, 40%)","line-gap-width":{base:1.5,stops:[[15,1],[18,12]]},"line-dasharray":[3,3]},interactive:!0},{id:"tunnel-service-link-case",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",minzoom:14,filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["==","structure","tunnel"],["in","class","link","service"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(230, 19%, 75%)","line-gap-width":{base:1.5,stops:[[14,.5],[18,12]]},"line-dasharray":[3,3]},interactive:!0},{id:"tunnel-street_limited-case",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(230, 19%, 75%)","line-gap-width":{base:1.5,stops:[[13,0],[14,2],[18,18]]},"line-dasharray":[3,3],"line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},interactive:!0},{id:"tunnel-street-case",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(230, 19%, 75%)","line-gap-width":{base:1.5,stops:[[13,0],[14,2],[18,18]]},"line-dasharray":[3,3],"line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},interactive:!0},{id:"tunnel-secondary-tertiary-case",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","tunnel"],["in","class","secondary","tertiary"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.2,stops:[[10,.75],[18,2]]},"line-dasharray":[3,3],"line-gap-width":{base:1.5,stops:[[8.5,.5],[10,.75],[18,26]]},"line-color":"hsl(230, 19%, 75%)"},interactive:!0},{id:"tunnel-primary-case",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","primary"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[16,2]]},"line-dasharray":[3,3],"line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":"hsl(230, 19%, 75%)"},interactive:!0},{id:"tunnel-trunk_link-case",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["==","structure","tunnel"],["==","type","trunk_link"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-dasharray":[3,3]},interactive:!0},{id:"tunnel-motorway_link-case",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["==","class","motorway_link"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-dasharray":[3,3]},interactive:!0},{id:"tunnel-trunk-case",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","tunnel"],["==","type","trunk"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[16,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-opacity":1,"line-dasharray":[3,3]},interactive:!0},{id:"tunnel-motorway-case",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","motorway"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[16,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-opacity":1,"line-dasharray":[3,3]},interactive:!0},{id:"tunnel-construction",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",minzoom:14,filter:["all",["==","$type","LineString"],["all",["==","class","construction"],["==","structure","tunnel"]]],layout:{"line-join":"miter"},paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(230, 24%, 87%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-dasharray":{base:1,stops:[[14,[.4,.8]],[15,[.3,.6]],[16,[.2,.3]],[17,[.2,.25]],[18,[.15,.15]]]}},interactive:!0},{id:"tunnel-path",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","type","cycleway","piste","steps"],["==","class","path"],["==","structure","tunnel"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,1],[18,4]]},"line-dasharray":{base:1,stops:[[14,[4,.4]],[15,[3,.4]],[16,[3,.35]],[17,[3,.35]]]},"line-color":"hsl(35, 26%, 95%)","line-opacity":{base:1,stops:[[13,0],[13.25,1]]}},interactive:!0},{id:"tunnel-cycleway-piste",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","path"],["==","structure","tunnel"],["in","type","cycleway","piste"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,1],[18,4]]},"line-dasharray":{base:1,stops:[[14,[4,.4]],[15,[3,.4]],[16,[3,.35]],[17,[3,.35]]]},"line-color":"hsl(35, 26%, 95%)","line-opacity":{base:1,stops:[[13,0],[13.25,1]]}},interactive:!0},{id:"tunnel-steps",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","tunnel"],["==","type","steps"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,1],[16,1.6],[18,6]]},"line-color":"hsl(35, 26%, 95%)","line-dasharray":{base:1,stops:[[14,[4,.4]],[15,[1.75,.4]],[16,[.75,.4]],[17,[.3,.3]]]},"line-opacity":{base:1,stops:[[13,0],[13.25,1]]}},interactive:!0},{id:"tunnel-trunk_link",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["==","structure","tunnel"],["==","type","trunk_link"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-color":"hsl(46, 77%, 78%)","line-opacity":1,"line-dasharray":[1,0]},interactive:!0},{id:"tunnel-motorway_link",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["==","class","motorway_link"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-color":"hsl(26, 74%, 81%)","line-opacity":1,"line-dasharray":[1,0]},interactive:!0},{id:"tunnel-pedestrian",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["==","class","pedestrian"],["==","structure","tunnel"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[14,.5],[18,12]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":1,"line-dasharray":{base:1,stops:[[14,[1,0]],[15,[1.5,.4]],[16,[1,.2]]]}},interactive:!0},{id:"tunnel-track",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","track"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,1],[18,12]]},"line-color":"hsl(0, 0%, 100%)"},interactive:!0},{id:"tunnel-service-link",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",minzoom:14,filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["==","structure","tunnel"],["in","class","link","service"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[14,.5],[18,12]]},"line-color":"hsl(0, 0%, 100%)","line-dasharray":[1,0]},interactive:!0},{id:"tunnel-street_limited",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(35, 14%, 93%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},interactive:!0},{id:"tunnel-street",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},interactive:!0},{id:"tunnel-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","tunnel"],["in","class","secondary","tertiary"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[8.5,.5],[10,.75],[18,26]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":1,"line-dasharray":[1,0],"line-blur":0},interactive:!0},{id:"tunnel-primary",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","primary"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":1,"line-dasharray":[1,0],"line-blur":0},interactive:!0},{id:"tunnel-oneway-arrows-blue-minor",type:"symbol",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",minzoom:16,filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["==","oneway","true"],["==","structure","tunnel"],["in","class","link","path","pedestrian","service","track"]]],layout:{"symbol-placement":"line","icon-image":{base:1,stops:[[17,"oneway-small"],[18,"oneway-large"]]},"symbol-spacing":200,"icon-padding":2},paint:{},interactive:!0},{id:"tunnel-oneway-arrows-blue-major",type:"symbol",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",minzoom:15,filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["==","oneway","true"],["==","structure","tunnel"],["in","class","primary","secondary","street","street_limited","tertiary"]]],layout:{"symbol-placement":"line","icon-image":{base:1,stops:[[16,"oneway-small"],[17,"oneway-large"]]},"symbol-spacing":200,"icon-padding":2},paint:{},interactive:!0},{id:"tunnel-trunk",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","trunk"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":"hsl(46, 77%, 78%)"},interactive:!0},{id:"tunnel-motorway",type:"line",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","motorway"],["==","structure","tunnel"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-dasharray":[1,0],"line-opacity":1,"line-color":"hsl(26, 74%, 81%)","line-blur":0},interactive:!0},{id:"tunnel-oneway-arrows-white",type:"symbol",metadata:{"mapbox:group":"1444855769305.6016"},source:"composite","source-layer":"road",minzoom:16,filter:["all",["==","$type","LineString"],["all",["!in","type","primary_link","secondary_link","tertiary_link"],["==","oneway","true"],["==","structure","tunnel"],["in","class","link","trunk"]]],layout:{"symbol-placement":"line","icon-image":{base:1,stops:[[16,"oneway-white-small"],[17,"oneway-white-large"]]},"symbol-spacing":200,"icon-padding":2},paint:{"icon-opacity":.5},interactive:!0},{id:"cliffs",type:"line",source:"composite","source-layer":"barrier_line",minzoom:15,filter:["==","class","cliff"],layout:{"line-cap":"round","line-join":"round"},paint:{"line-opacity":{base:1,stops:[[15,0],[15.25,1]]},"line-width":10,"line-pattern":"cliff"},interactive:!0},{id:"ferry",type:"line",source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["==","type","ferry"]],layout:{"line-join":"round"},paint:{"line-color":{base:1,stops:[[15,"hsl(205, 73%, 63%)"],[17,"hsl(230, 73%, 63%)"]]},"line-opacity":1,"line-width":{base:1.5,stops:[[14,.5],[20,1]]},"line-dasharray":{base:1,stops:[[12,[1,0]],[13,[12,4]]]}},interactive:!0},{id:"ferry-auto",type:"line",source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["==","type","ferry_auto"]],layout:{"line-join":"round"},paint:{"line-color":{base:1,stops:[[15,"hsl(205, 73%, 63%)"],[17,"hsl(230, 73%, 63%)"]]},"line-opacity":1,"line-width":{base:1.5,stops:[[14,.5],[20,1]]}},interactive:!0},{id:"road-path-bg",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["!in","type","corridor","crossing","piste","sidewalk","steps"],["==","class","path"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,2.5],[18,8]]},"line-opacity":{base:1,stops:[[13,0],[13.25,1]]},"line-color":"hsl(50, 100%, 40%)","line-blur":{base:1,stops:[[14,0],[17,1]]}},interactive:!0},{id:"road-piste-bg",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","path"],["==","type","piste"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,2],[18,7]]},"line-opacity":{base:1,stops:[[13,0],[13.25,1]]},"line-color":"hsl(230, 85%, 67%)","line-blur":0},interactive:!0},{id:"road-sidewalk-corridor-bg",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:16,filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["in","type","corridor","crossing","sidewalk"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,2],[18,7]]},"line-dasharray":[1,0],"line-color":"hsl(230, 17%, 82%)","line-blur":0,"line-opacity":{base:1,stops:[[16,0],[16.25,.25]]}},interactive:!0},{id:"road-steps-bg",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","type","steps"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,2.5],[18,8]]},"line-color":"hsl(50, 100%, 40%)","line-blur":{base:1,stops:[[14,0],[17,1]]},"line-opacity":{base:1,stops:[[13,0],[13.25,.25]]}},interactive:!0},{id:"road-pedestrian-case",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:12,filter:["all",["==","$type","LineString"],["all",["==","class","pedestrian"],["==","structure","none"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[14,2],[18,14.5]]},"line-color":"hsl(230, 24%, 87%)","line-gap-width":0,"line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},interactive:!0},{id:"road-street-low",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","none"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{stops:[[11,0],[11.25,1],[14,1],[14.01,0]]}},interactive:!0},{id:"road-street_limited-low",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","none"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{stops:[[11,0],[11.25,1],[14,1],[14.01,0]]}},interactive:!0},{id:"road-track-case",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(50, 100%, 40%)","line-gap-width":{base:1.5,stops:[[15,1],[18,12]]}},interactive:!0},{id:"road-service-link-case",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:14,filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["!in","structure","bridge","tunnel"],["in","class","link","service"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(230, 24%, 87%)","line-gap-width":{base:1.5,stops:[[14,.5],[18,12]]}},interactive:!0},{id:"road-street_limited-case",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","none"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(230, 24%, 87%)","line-gap-width":{base:1.5,stops:[[13,0],[14,2],[18,18]]},"line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},interactive:!0},{id:"road-street-case",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","none"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(230, 24%, 87%)","line-gap-width":{base:1.5,stops:[[13,0],[14,2],[18,18]]},"line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},interactive:!0},{id:"road-secondary-tertiary-case",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["in","class","secondary","tertiary"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.2,stops:[[10,.75],[18,2]]},"line-color":"hsl(230, 24%, 87%)","line-gap-width":{base:1.5,stops:[[8.5,.5],[10,.75],[18,26]]},"line-opacity":{base:1,stops:[[9.99,0],[10,1]]}},interactive:!0},{id:"road-primary-case",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","primary"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[16,2]]},"line-color":"hsl(230, 24%, 87%)","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-opacity":{base:1,stops:[[9.99,0],[10,1]]}},interactive:!0},{id:"road-motorway_link-case",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:10,filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","motorway_link"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-opacity":{base:1,stops:[[10.99,0],[11,1]]}},interactive:!0},{id:"road-trunk_link-case",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","type","trunk_link"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-opacity":{base:1,stops:[[10.99,0],[11,1]]}},interactive:!0},{id:"road-trunk-case",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","trunk"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[10,1],[16,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-opacity":{base:1,stops:[[6,0],[6.1,1]]}},interactive:!0},{id:"road-motorway-case",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[10,1],[16,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]}},interactive:!0},{id:"road-construction",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:14,filter:["all",["==","$type","LineString"],["all",["==","class","construction"],["==","structure","none"]]],layout:{"line-join":"miter"},paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(230, 24%, 87%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-dasharray":{base:1,stops:[[14,[.4,.8]],[15,[.3,.6]],[16,[.2,.3]],[17,[.2,.25]],[18,[.15,.15]]]}},interactive:!0},{id:"road-sidewalk-corridor",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:16,filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["in","type","corridor","crossing","sidewalk"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,1],[18,4]]},"line-color":"hsl(0, 0%, 100%)","line-dasharray":{base:1,stops:[[14,[4,.4]],[15,[3,.4]],[16,[3,.35]],[17,[3,.35]]]},"line-opacity":{base:1,stops:[[16,0],[16.25,1]]}},interactive:!0},{id:"road-path-smooth",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","path"],["in","type","bridleway","footway","path"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,1],[18,4]]},"line-color":"hsl(0, 0%, 100%)","line-dasharray":{base:1,stops:[[14,[4,.4]],[15,[3,.4]],[16,[3,.35]],[17,[3,.35]]]},"line-opacity":{base:1,stops:[[13,0],[13.25,1]]}},interactive:!0},{id:"road-path-rough",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","path"],["in","type","hiking","mountain_bike","trail"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,1],[18,4]]},"line-color":"hsl(0, 0%, 100%)","line-dasharray":{base:1,stops:[[14,[4,.4]],[15,[1.75,.4]],[16,[1,.4]],[17,[1,.35]]]},"line-opacity":{base:1,stops:[[13,0],[13.25,1]]}},interactive:!0},{id:"road-cycleway-piste",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","path"],["in","type","cycleway","piste"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,1],[18,4]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{base:1,stops:[[13,0],[13.25,1]]}},interactive:!0},{id:"road-steps",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","type","steps"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,1],[16,1.6],[18,6]]},"line-color":"hsl(0, 0%, 100%)","line-dasharray":{base:1,stops:[[14,[4,.4]],[15,[1.75,.4]],[16,[.75,.4]],[17,[.3,.3]]]},"line-opacity":{base:1,stops:[[13,0],[13.25,1]]}},interactive:!0},{id:"road-trunk_link",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","type","trunk_link"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-color":"hsl(46, 69%, 68%)","line-opacity":1},interactive:!0},{id:"road-motorway_link",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:10,filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","motorway_link"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-color":"hsl(26, 67%, 70%)","line-opacity":1},interactive:!0},{id:"road-pedestrian",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:12,filter:["all",["==","$type","LineString"],["all",["==","class","pedestrian"],["==","structure","none"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[14,.5],[18,12]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":1,"line-dasharray":{base:1,stops:[[14,[1,0]],[15,[1.5,.4]],[16,[1,.2]]]}},interactive:!0},{id:"road-pedestrian-polygon-fill",type:"fill",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:12,filter:["all",["==","$type","Polygon"],["all",["==","structure","none"],["in","class","path","pedestrian"]]],layout:{},paint:{"fill-color":{base:1,stops:[[16,"hsl(230, 16%, 94%)"],[16.25,"hsl(230, 50%, 98%)"]]},"fill-outline-color":"hsl(230, 26%, 88%)","fill-opacity":1},interactive:!0},{id:"road-pedestrian-polygon-pattern",type:"fill",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:12,filter:["all",["==","$type","Polygon"],["all",["==","structure","none"],["in","class","path","pedestrian"]]],layout:{},paint:{"fill-color":"hsl(0, 0%, 100%)","fill-outline-color":"hsl(35, 10%, 83%)","fill-pattern":"pedestrian-polygon","fill-opacity":{base:1,stops:[[16,0],[16.25,1]]}},interactive:!0},{id:"road-polygon",type:"fill",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:12,filter:["all",["==","$type","Polygon"],["all",["!in","class","motorway","path","pedestrian","trunk"],["!in","structure","bridge","tunnel"]]],layout:{},paint:{"fill-color":"hsl(0, 0%, 100%)","fill-outline-color":"hsl(0, 0%, 100%)"},interactive:!0},{id:"road-track",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,1],[18,12]]},"line-color":"hsl(0, 0%, 100%)"},interactive:!0},{id:"road-service-link",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:14,filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["!in","structure","bridge","tunnel"],["in","class","link","service"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[14,.5],[18,12]]},"line-color":"hsl(0, 0%, 100%)"},interactive:!0},{id:"road-street_limited",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","none"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(35, 14%, 93%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},interactive:!0},{id:"road-street",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","none"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},interactive:!0},{id:"road-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["in","class","secondary","tertiary"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[8.5,.5],[10,.75],[18,26]]},"line-color":{base:1,stops:[[5,"hsl(35, 32%, 91%)"],[8,"hsl(0, 0%, 100%)"]]},"line-opacity":{base:1.2,stops:[[5,0],[5.5,1]]}},interactive:!0},{id:"road-primary",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","primary"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":{base:1,stops:[[5,"hsl(35, 32%, 91%)"],[8,"hsl(0, 0%, 100%)"]]},"line-opacity":{base:1.2,stops:[[5,0],[5.5,1]]}},interactive:!0},{id:"road-oneway-arrows-blue-minor",type:"symbol",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:16,filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["!in","structure","bridge","tunnel"],["==","oneway","true"],["in","class","link","path","pedestrian","service","track"]]],layout:{"symbol-placement":"line","icon-image":{base:1,stops:[[17,"oneway-small"],[18,"oneway-large"]]},"icon-rotation-alignment":"map","icon-padding":2,"symbol-spacing":200},paint:{},interactive:!0},{id:"road-oneway-arrows-blue-major",type:"symbol",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:15,filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["!in","structure","bridge","tunnel"],["==","oneway","true"],["in","class","primary","secondary","street","street_limited","tertiary"]]],layout:{"symbol-placement":"line","icon-image":{base:1,stops:[[16,"oneway-small"],[17,"oneway-large"]]},"icon-rotation-alignment":"map","icon-padding":2,"symbol-spacing":200},paint:{},interactive:!0},{id:"road-trunk",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","trunk"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":{base:1,stops:[[6,"hsl(0, 0%, 100%)"],[6.1,"hsl(46, 80%, 60%)"],[9,"hsl(46, 69%, 68%)"]]}},interactive:!0},{id:"road-motorway",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["==","class","motorway"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":{base:1,stops:[[8,"hsl(26, 87%, 62%)"],[9,"hsl(26, 67%, 70%)"]]}},interactive:!0},{id:"road-rail",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["in","class","major_rail","minor_rail"]]],layout:{"line-join":"round"},paint:{"line-color":{stops:[[13,"hsl(50, 17%, 82%)"],[16,"hsl(230, 10%, 74%)"]]},"line-width":{base:1.5,stops:[[14,.5],[20,1]]}},interactive:!0},{id:"road-rail-tracks",type:"line",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["in","class","major_rail","minor_rail"]]],layout:{"line-join":"round"},paint:{"line-color":{stops:[[13,"hsl(50, 17%, 82%)"],[16,"hsl(230, 10%, 74%)"]]},"line-width":{base:1.5,stops:[[14,4],[20,8]]},"line-dasharray":[.1,15],"line-opacity":{base:1,stops:[[13.75,0],[14,1]]}},interactive:!0},{id:"level-crossing",type:"symbol",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:16,filter:["all",["==","$type","Point"],["==","class","level_crossing"]],layout:{"icon-allow-overlap":!0,"icon-size":1,"icon-image":"level-crossing"},paint:{"icon-opacity":1},interactive:!0},{id:"road-oneway-arrows-white",type:"symbol",metadata:{"mapbox:group":"1444855786460.0557"},source:"composite","source-layer":"road",minzoom:16,filter:["all",["==","$type","LineString"],["all",["!in","structure","bridge","tunnel"],["!in","type","primary_link","secondary_link","tertiary_link"],["==","oneway","true"],["in","class","link","trunk"]]],layout:{"symbol-placement":"line","icon-image":{base:1,stops:[[16,"oneway-white-small"],[17,"oneway-white-large"]]},"icon-padding":2,"symbol-spacing":200},paint:{"icon-opacity":.5},interactive:!0},{id:"hedges",type:"line",source:"composite","source-layer":"barrier_line",minzoom:16,filter:["==","class","hedge"],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"hsl(100, 59%, 70%)","line-width":{base:1,stops:[[16,1],[20,3]]},"line-opacity":1,"line-dasharray":[1,2,5,2,1,2]},interactive:!0},{id:"fences",type:"line",source:"composite","source-layer":"barrier_line",minzoom:16,filter:["==","class","fence"],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"hsl(46, 17%, 76%)","line-width":{base:1,stops:[[16,1],[20,3]]},"line-opacity":1,"line-dasharray":[1,2,5,2,1,2]},interactive:!0},{id:"gates",type:"line",source:"composite","source-layer":"barrier_line",minzoom:17,filter:["==","class","gate"],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"hsl(46, 17%, 76%)","line-width":{base:1,stops:[[16,1],[20,3]]},"line-opacity":.5,"line-dasharray":[1,2,5,2,1,2]},interactive:!0},{id:"bridge-path-bg",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","type","piste","steps"],["==","class","path"],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,2.5],[18,8]]},"line-opacity":{base:1,stops:[[13,0],[13.25,1]]},"line-color":"hsl(50, 100%, 40%)","line-blur":{base:1,stops:[[14,0],[17,1]]}},interactive:!0},{id:"bridge-piste-bg",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","path"],["==","structure","bridge"],["==","type","piste"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,2],[18,7]]},"line-dasharray":[1,0],"line-color":"hsl(205, 63%, 60%)","line-blur":0,"line-opacity":{base:1,stops:[[13,0],[13.25,1]]}},interactive:!0},{id:"bridge-steps-bg",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["==","type","steps"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,2.5],[18,8]]},"line-color":"hsl(50, 100%, 40%)","line-opacity":{base:1,stops:[[13,0],[13.25,1]]},"line-blur":{base:1,stops:[[14,0],[17,1]]}},interactive:!0},{id:"bridge-pedestrian-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["==","class","pedestrian"],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[14,2],[18,14.5]]},"line-color":"hsl(230, 24%, 87%)","line-gap-width":0,"line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},interactive:!0},{id:"bridge-street-low",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","bridge"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{stops:[[11.5,0],[12,1],[14,1],[14.01,0]]}},interactive:!0},{id:"bridge-street_limited-low",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","bridge"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{stops:[[11.5,0],[12,1],[14,1],[14.01,0]]}},interactive:!0},{id:"bridge-track-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","track"],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(50, 100%, 40%)","line-gap-width":{base:1.5,stops:[[15,1],[18,12]]}},interactive:!0},{id:"bridge-service-link-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:14,filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["==","structure","bridge"],["in","class","link","service"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(230, 24%, 87%)","line-gap-width":{base:1.5,stops:[[14,.5],[18,12]]}},interactive:!0},{id:"bridge-street_limited-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(230, 24%, 87%)","line-gap-width":{base:1.5,stops:[[13,0],[14,2],[18,18]]}},interactive:!0},{id:"bridge-street-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(230, 24%, 87%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-gap-width":{base:1.5,stops:[[13,0],[14,2],[18,18]]}},interactive:!0},{id:"bridge-secondary-tertiary-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["in","class","secondary","tertiary"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.2,stops:[[10,.75],[18,2]]},"line-color":"hsl(230, 24%, 87%)","line-gap-width":{base:1.5,stops:[[8.5,.5],[10,.75],[18,26]]},"line-translate":[0,0]},interactive:!0},{id:"bridge-primary-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","primary"],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[16,2]]},"line-color":"hsl(230, 24%, 87%)","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-translate":[0,0]},interactive:!0},{id:"bridge-trunk_link-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["!in","layer",2,3,4,5],["==","structure","bridge"],["==","type","trunk_link"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-opacity":{base:1,stops:[[10.99,0],[11,1]]}},interactive:!0},{id:"bridge-motorway_link-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["!in","layer",2,3,4,5],["==","class","motorway_link"],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-opacity":1},interactive:!0},{id:"bridge-trunk-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","layer",2,3,4,5],["==","class","trunk"],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[16,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]}},interactive:!0},{id:"bridge-motorway-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","layer",2,3,4,5],["==","class","motorway"],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[16,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]}},interactive:!0},{id:"bridge-construction",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:14,filter:["all",["==","$type","LineString"],["all",["==","class","construction"],["==","structure","bridge"]]],layout:{"line-join":"miter"},paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(230, 24%, 87%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]},"line-dasharray":{base:1,stops:[[14,[.4,.8]],[15,[.3,.6]],[16,[.2,.3]],[17,[.2,.25]],[18,[.15,.15]]]}},interactive:!0},{id:"bridge-path",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","type","cycleway","piste","steps"],["==","class","path"],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,1],[18,4]]},"line-color":"hsl(0, 0%, 100%)","line-dasharray":{base:1,stops:[[14,[4,.4]],[15,[3,.4]],[16,[3,.35]],[17,[3,.35]]]},"line-opacity":{base:1,stops:[[13,0],[13.25,1]]}},interactive:!0},{id:"bridge-cycleway-piste",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","path"],["==","structure","bridge"],["in","type","cycleway","piste"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,1],[18,4]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{base:1,stops:[[13,0],[13.25,1]]}},interactive:!0},{id:"bridge-steps",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["==","type","steps"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,1],[16,1.6],[18,6]]},"line-color":"hsl(0, 0%, 100%)","line-dasharray":{base:1,stops:[[14,[4,.4]],[15,[1.75,.4]],[16,[.75,.4]],[17,[.3,.3]]]},"line-opacity":{base:1,stops:[[13,0],[13.25,1]]}},interactive:!0},{id:"bridge-trunk_link",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["!in","layer",2,3,4,5],["==","structure","bridge"],["==","type","trunk_link"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-color":"hsl(46, 69%, 68%)"},interactive:!0},{id:"bridge-motorway_link",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["!in","layer",2,3,4,5],["==","class","motorway_link"],["==","structure","bridge"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-color":"hsl(26, 67%, 70%)"},interactive:!0},{id:"bridge-pedestrian",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["==","class","pedestrian"],["==","structure","bridge"]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[14,.5],[18,12]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":1,"line-dasharray":{base:1,stops:[[14,[1,0]],[15,[1.5,.4]],[16,[1,.2]]]}},interactive:!0},{id:"bridge-track",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","track"],["==","structure","bridge"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[15,1],[18,12]]},"line-color":"hsl(0, 0%, 100%)"},interactive:!0},{id:"bridge-service-link",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:14,filter:["all",["==","$type","LineString"],["all",["!=","type","trunk_link"],["==","structure","bridge"],["in","class","link","service","track"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[14,.5],[18,12]]},"line-color":"hsl(0, 0%, 100%)"},interactive:!0},{id:"bridge-street_limited",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street_limited"],["==","structure","bridge"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(35, 14%, 93%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},interactive:!0},{id:"bridge-street",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:11,filter:["all",["==","$type","LineString"],["all",["==","class","street"],["==","structure","bridge"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12.5,.5],[14,2],[18,18]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{base:1,stops:[[13.99,0],[14,1]]}},interactive:!0},{id:"bridge-secondary-tertiary",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["in","type","secondary","tertiary"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[8.5,.5],[10,.75],[18,26]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{base:1.2,stops:[[5,0],[5.5,1]]}},interactive:!0},{id:"bridge-primary",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["==","type","primary"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":"hsl(0, 0%, 100%)","line-opacity":{base:1.2,stops:[[5,0],[5.5,1]]}},interactive:!0},{id:"bridge-oneway-arrows-blue-minor",type:"symbol",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:16,filter:["all",["==","$type","LineString"],["all",["==","oneway","true"],["==","structure","bridge"],["in","class","link","path","pedestrian","service","track"]]],layout:{"symbol-placement":"line","icon-image":{base:1,stops:[[17,"oneway-small"],[18,"oneway-large"]]},"symbol-spacing":200,"icon-rotation-alignment":"map","icon-padding":2},paint:{},interactive:!0},{id:"bridge-oneway-arrows-blue-major",type:"symbol",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:15,filter:["all",["==","$type","LineString"],["all",["==","oneway","true"],["==","structure","bridge"],["in","class","primary","secondary","street","street_limited","tertiary"]]],layout:{"symbol-placement":"line","icon-image":{base:1,stops:[[16,"oneway-small"],[17,"oneway-large"]]},"symbol-spacing":200,"icon-rotation-alignment":"map","icon-padding":2},paint:{},interactive:!0},{id:"bridge-trunk",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","layer",2,3,4,5],["==","class","trunk"],["==","structure","bridge"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":"hsl(46, 69%, 68%)"},interactive:!0},{id:"bridge-motorway",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["!in","layer",2,3,4,5],["==","class","motorway"],["==","structure","bridge"]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":"hsl(26, 67%, 70%)"},interactive:!0},{id:"bridge-rail",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["in","class","major_rail","minor_rail"]]],layout:{"line-join":"round"},paint:{"line-color":{stops:[[13,"hsl(50, 17%, 82%)"],[16,"hsl(230, 10%, 74%)"]]},"line-width":{base:1.5,stops:[[14,.5],[20,1]]}},interactive:!0},{id:"bridge-rail-tracks",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["in","class","major_rail","minor_rail"]]],layout:{"line-join":"round"},paint:{"line-color":{stops:[[13,"hsl(50, 17%, 82%)"],[16,"hsl(230, 10%, 74%)"]]},"line-width":{base:1.5,stops:[[14,4],[20,8]]},"line-dasharray":[.1,15],"line-opacity":{base:1,stops:[[13.75,0],[20,1]]}},interactive:!0},{id:"bridge-trunk_link-2-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["==","type","trunk_link"],[">=","layer",2]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-opacity":{base:1,stops:[[10.99,0],[11,1]]}},interactive:!0},{id:"bridge-motorway_link-2-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["==","class","motorway_link"],["==","structure","bridge"],[">=","layer",2]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.75],[20,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-opacity":1},interactive:!0},{id:"bridge-trunk-2-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","trunk"],["==","structure","bridge"],[">=","layer",2]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[10,1],[16,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]}},interactive:!0},{id:"bridge-motorway-2-case",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","motorway"],["==","structure","bridge"],[">=","layer",2]]],layout:{"line-join":"round"},paint:{"line-width":{base:1.5,stops:[[10,1],[16,2]]},"line-color":"hsl(0, 0%, 100%)","line-gap-width":{base:1.5,stops:[[5,.75],[18,32]]}},interactive:!0},{id:"bridge-trunk_link-2",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["==","structure","bridge"],["==","type","trunk_link"],[">=","layer",2]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-color":"hsl(46, 69%, 68%)"},interactive:!0},{id:"bridge-motorway_link-2",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["all",["==","class","motorway_link"],["==","structure","bridge"],[">=","layer",2]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[12,.5],[14,2],[18,18]]},"line-color":"hsl(26, 67%, 70%)"},interactive:!0},{id:"bridge-trunk-2",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","trunk"],["==","structure","bridge"],[">=","layer",2]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":"hsl(46, 69%, 68%)"},interactive:!0},{id:"bridge-motorway-2",type:"line",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",filter:["all",["==","$type","LineString"],["all",["==","class","motorway"],["==","structure","bridge"],[">=","layer",2]]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":{base:1.5,stops:[[5,.75],[18,32]]},"line-color":"hsl(26, 67%, 70%)"},interactive:!0},{id:"bridge-oneway-arrows-white",type:"symbol",metadata:{"mapbox:group":"1444855799204.86"},source:"composite","source-layer":"road",minzoom:16,filter:["all",["==","$type","LineString"],["all",["!in","type","primary_link","secondary_link","tertiary_link"],["==","oneway","true"],["==","structure","bridge"],["in","class","link","trunk"]]],layout:{"symbol-placement":"line","icon-image":{base:1,stops:[[16,"oneway-white-small"],[17,"oneway-white-large"]]},"symbol-spacing":200,"icon-padding":2},paint:{"icon-opacity":.5},interactive:!0},{id:"aerialway-bg",type:"line",source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["==","class","aerialway"]],layout:{"line-join":"round"},paint:{"line-color":"hsl(0, 0%, 100%)","line-width":{base:1.5,stops:[[14,2.5],[20,3]]},"line-blur":.5},interactive:!0},{id:"aerialway",type:"line",source:"composite","source-layer":"road",minzoom:13,filter:["all",["==","$type","LineString"],["==","class","aerialway"]],layout:{"line-join":"round"},paint:{"line-color":"hsl(230, 4%, 29%)","line-width":{base:1.5,stops:[[14,.5],[20,1]]}},interactive:!0},{id:"admin-3-4-boundaries-bg",type:"line",metadata:{"mapbox:group":"1444934295202.7542"},source:"composite","source-layer":"admin",filter:["all",["==","maritime",0],[">=","admin_level",3]],layout:{"line-join":"bevel"},paint:{"line-color":{base:1,stops:[[8,"hsl(35, 12%, 89%)"],[16,"hsl(230, 49%, 90%)"]]},"line-width":{base:1,stops:[[7,3.75],[12,5.5]]},"line-opacity":{base:1,stops:[[7,0],[8,.75]]},"line-dasharray":[1,0],"line-translate":[0,0],"line-blur":{base:1,stops:[[3,0],[8,3]]}},interactive:!0},{id:"admin-2-boundaries-bg",type:"line",metadata:{"mapbox:group":"1444934295202.7542"},source:"composite","source-layer":"admin",minzoom:1,filter:["all",["==","admin_level",2],["==","maritime",0]],layout:{"line-join":"miter"},paint:{"line-width":{base:1,stops:[[3,3.5],[10,8]]},"line-color":{base:1,stops:[[6,"hsl(35, 12%, 89%)"],[8,"hsl(230, 49%, 90%)"]]},"line-opacity":{base:1,stops:[[3,0],[4,.5]]},"line-translate":[0,0],"line-blur":{base:1,stops:[[3,0],[10,2]]}},interactive:!0},{id:"admin-3-4-boundaries",type:"line",metadata:{"mapbox:group":"1444934295202.7542"},source:"composite","source-layer":"admin",filter:["all",["==","maritime",0],[">=","admin_level",3]],layout:{"line-join":"round","line-cap":"round"},paint:{"line-dasharray":{base:1,stops:[[6,[2,0]],[7,[2,2,6,2]]]},"line-width":{base:1,stops:[[7,.75],[12,1.5]]},"line-opacity":{base:1,stops:[[2,0],[3,1]]},"line-color":{base:1,stops:[[3,"hsl(230, 14%, 77%)"],[7,"hsl(230, 8%, 62%)"]]}},interactive:!0},{id:"admin-2-boundaries",type:"line",metadata:{"mapbox:group":"1444934295202.7542"},source:"composite","source-layer":"admin",minzoom:1,filter:["all",["==","admin_level",2],["==","disputed",0],["==","maritime",0]],layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"hsl(230, 8%, 51%)","line-width":{base:1,stops:[[3,.5],[10,2]]}},interactive:!0},{id:"admin-2-boundaries-dispute",type:"line",metadata:{"mapbox:group":"1444934295202.7542"},source:"composite","source-layer":"admin",minzoom:1,filter:["all",["==","admin_level",2],["==","disputed",1],["==","maritime",0]],layout:{"line-join":"round"},paint:{"line-dasharray":[1.5,1.5],"line-color":"hsl(230, 8%, 51%)","line-width":{base:1,stops:[[3,.5],[10,2]]}},interactive:!0},{id:"contour-label",type:"symbol",source:"composite","source-layer":"contour",minzoom:11,filter:["in","index",10,5],layout:{"text-field":"{ele} m","symbol-placement":"line","text-max-angle":25,"text-padding":5,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-size":{base:1,stops:[[15,9.5],[20,12]]}},paint:{"text-color":"hsl(100, 60%, 28%)","text-halo-width":1,"text-halo-blur":0,"text-halo-color":"hsla(0, 0%, 100%, 0.5)"},interactive:!0},{id:"waterway-label",type:"symbol",source:"composite","source-layer":"waterway_label",minzoom:12,filter:["in","class","canal","river"],layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"symbol-placement":"line","text-max-angle":30,"text-size":{base:1,stops:[[13,12],[18,16]]}},paint:{"text-halo-width":.5,"text-halo-color":"hsl(196, 80%, 70%)","text-color":"hsl(230, 48%, 44%)","text-halo-blur":.5},interactive:!0},{id:"poi-parks_scalerank4",type:"symbol",metadata:{"mapbox:group":"1444933456003.5437"},source:"composite","source-layer":"poi_label",minzoom:15,filter:["all",["==","scalerank",4],["in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[16,11],[20,13]]},"icon-image":"{maki}-11","text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":1,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(100, 100%, 20%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5},interactive:!0},{id:"poi-scalerank3",type:"symbol",metadata:{"mapbox:group":"1444933372896.5967"},source:"composite","source-layer":"poi_label",filter:["all",["!in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],["==","scalerank",3]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[16,11],[20,13]]},"icon-image":"{maki}-11","text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":1,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(25, 25%, 32%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5},interactive:!0},{id:"poi-parks-scalerank3",type:"symbol",metadata:{"mapbox:group":"1444933372896.5967"},source:"composite","source-layer":"poi_label",filter:["all",["==","scalerank",3],["in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[16,11],[20,13]]},"icon-image":"{maki}-11","text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(100, 100%, 20%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5},interactive:!0},{id:"road-label-small",type:"symbol",metadata:{"mapbox:group":"1444933721429.3076"},source:"composite","source-layer":"road_label",minzoom:15,filter:["all",["!in","class","aerialway","link","motorway","path","pedestrian","primary","secondary","street","street_limited","tertiary","trunk"],["==","$type","LineString"]],layout:{"text-size":{base:1,stops:[[15,10],[20,13]]},"text-max-angle":30,"symbol-spacing":250,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-field":"{name_en}","text-letter-spacing":.01},paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1.25,"text-halo-blur":1},interactive:!0},{id:"road-label-medium",type:"symbol",metadata:{"mapbox:group":"1444933721429.3076"},source:"composite","source-layer":"road_label",minzoom:11,filter:["all",["==","$type","LineString"],["in","class","aerialway","link","path","pedestrian","street","street_limited"]],layout:{"text-size":{base:1,stops:[[11,10],[20,14]]},"text-max-angle":30,"symbol-spacing":250,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-field":"{name_en}","text-letter-spacing":.01},paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1},interactive:!0},{id:"road-label-large",type:"symbol",metadata:{"mapbox:group":"1444933721429.3076"},source:"composite","source-layer":"road_label",filter:["in","class","motorway","primary","secondary","tertiary","trunk"],layout:{"text-size":{base:1,stops:[[9,10],[20,16]]},"text-max-angle":30,"symbol-spacing":250,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-field":"{name_en}","text-letter-spacing":.01},paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":"rgba(255,255,255, 0.75)","text-halo-width":1,"text-halo-blur":1},interactive:!0},{id:"road-shields-black",type:"symbol",metadata:{"mapbox:group":"1444933575858.6992"},source:"composite","source-layer":"road_label",filter:["all",["!in","shield","at-expressway","at-motorway","at-state-b","bg-motorway","bg-national","ch-main","ch-motorway","cz-motorway","cz-road","de-motorway","e-road","fi-main","gr-motorway","gr-national","hr-motorway","hr-state","hu-main","hu-motorway","nz-state","pl-expressway","pl-motorway","pl-national","ro-county","ro-motorway","ro-national","rs-motorway","rs-state-1b","se-main","si-expressway","si-motorway","sk-highway","sk-road","us-interstate","us-interstate-business","us-interstate-duplex","us-interstate-truck","za-metropolitan","za-national","za-provincial","za-regional"],["<=","reflen",6]],layout:{"text-size":9,"icon-image":"{shield}-{reflen}","icon-rotation-alignment":"viewport","text-max-angle":38,"symbol-spacing":{base:1,stops:[[11,150],[14,200]]},"text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-padding":2,"text-rotation-alignment":"viewport","text-field":"{ref}","text-letter-spacing":.05,"icon-padding":2},paint:{"text-color":"hsl(230, 21%, 37%)","icon-halo-color":"rgba(0, 0, 0, 1)","icon-halo-width":1,"text-opacity":1,"icon-color":"white","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":0},interactive:!0},{id:"road-shields-white",type:"symbol",metadata:{"mapbox:group":"1444933575858.6992"},source:"composite","source-layer":"road_label",filter:["all",["<=","reflen",6],["in","shield","at-expressway","at-motorway","at-state-b","bg-motorway","bg-national","ch-main","ch-motorway","cz-motorway","cz-road","de-motorway","e-road","fi-main","gr-motorway","gr-national","hr-motorway","hr-state","hu-main","hu-motorway","nz-state","pl-expressway","pl-motorway","pl-national","ro-county","ro-motorway","ro-national","rs-motorway","rs-state-1b","se-main","si-expressway","si-motorway","sk-highway","sk-road","us-interstate","us-interstate-business","us-interstate-duplex","us-interstate-truck","za-metropolitan","za-national","za-provincial","za-regional"]],layout:{"text-size":9,"icon-image":"{shield}-{reflen}","icon-rotation-alignment":"viewport","text-max-angle":38,"symbol-spacing":{base:1,stops:[[11,150],[14,200]]},"text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"symbol-placement":{base:1,stops:[[10,"point"],[11,"line"]]},"text-padding":2,"text-rotation-alignment":"viewport","text-field":"{ref}","text-letter-spacing":.05,"icon-padding":2},paint:{"text-color":"hsl(0, 0%, 100%)","icon-halo-color":"rgba(0, 0, 0, 1)","icon-halo-width":1,"text-opacity":1,"icon-color":"white","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":0},interactive:!0},{id:"mountain-peak-label",type:"symbol",source:"composite","source-layer":"mountain_peak_label",layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[10,11],[18,14]]},"icon-image":"{maki}-15","text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-offset":[0,.65],"text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(100, 100%, 20%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5},interactive:!0},{id:"mountain-peak-label-with-elevation",type:"symbol",source:"composite","source-layer":"mountain_peak_label",filter:[">","elevation_m",0],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[10,11],[18,14]]},"icon-image":"{maki}-15","text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-offset":[0,.65],"text-anchor":"top","text-field":"{name_en}, {elevation_m}m","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(100, 100%, 20%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5},interactive:!0},{id:"poi-scalerank2",type:"symbol",metadata:{"mapbox:group":"1444933358918.2366"},source:"composite","source-layer":"poi_label",filter:["all",["!in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],["==","scalerank",2]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[14,11],[20,14]]},"icon-image":{stops:[[14,"{maki}-11"],[15,"{maki}-15"]]},"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(25, 25%, 32%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5},interactive:!0},{id:"poi-parks-scalerank2",type:"symbol",metadata:{"mapbox:group":"1444933358918.2366"},source:"composite","source-layer":"poi_label",filter:["all",["==","scalerank",2],["in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[14,11],[20,14]]},"icon-image":{stops:[[14,"{maki}-11"],[15,"{maki}-15"]]},"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(100, 100%, 20%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5},interactive:!0},{id:"water-label-sm",type:"symbol",metadata:{"mapbox:group":"1444933808272.805"},source:"composite","source-layer":"water_label",minzoom:15,filter:["<=","area",1e4],layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-max-width":7,"text-size":{base:1,stops:[[16,13],[20,16]]}},paint:{"text-color":"hsl(230, 48%, 44%)"},interactive:!0},{id:"water-label",type:"symbol",metadata:{"mapbox:group":"1444933808272.805"},source:"composite","source-layer":"water_label",minzoom:5,filter:[">","area",1e4],layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-max-width":7,"text-size":{base:1,stops:[[13,13],[18,18]]}},paint:{"text-color":"hsl(230, 48%, 44%)"},interactive:!0},{id:"poi-parks-scalerank1",type:"symbol",metadata:{"mapbox:group":"1444933322393.2852"},source:"composite","source-layer":"poi_label",filter:["all",["<=","scalerank",1],["in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[10,11],[18,14]]},"icon-image":{stops:[[13,"{maki}-11"],[14,"{maki}-15"]]},"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(100, 100%, 20%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5},interactive:!0},{id:"poi-scalerank1",type:"symbol",metadata:{"mapbox:group":"1444933322393.2852"},source:"composite","source-layer":"poi_label",filter:["all",["!in","maki","campsite","cemetery","dog-park","garden","golf","park","picnic-site","playground","zoo"],["<=","scalerank",1]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[10,11],[18,14]]},"icon-image":{stops:[[13,"{maki}-11"],[14,"{maki}-15"]]},"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,.65],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(25, 25%, 32%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":.5,"text-halo-blur":.5},interactive:!0},{id:"place-islet-archipelago-aboriginal",type:"symbol",source:"composite","source-layer":"place_label",maxzoom:16,filter:["in","type","aboriginal_lands","archipelago","islet"],layout:{"text-line-height":1.2,"text-size":{base:1,stops:[[10,11],[18,16]]},"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,0],"text-rotation-alignment":"viewport","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":8},paint:{"text-color":"hsl(230, 29%, 35%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1},interactive:!0},{id:"place-hamlet",type:"symbol",source:"composite","source-layer":"place_label",minzoom:10,maxzoom:16,filter:["==","type","hamlet"],layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-size":{base:1,stops:[[12,11.5],[15,16]]}},paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1.25,"text-color":"hsl(0, 0%, 0%)"},interactive:!0},{id:"place-village",type:"symbol",source:"composite","source-layer":"place_label",minzoom:8,maxzoom:15,filter:["==","type","village"],layout:{"text-field":"{name_en}","text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-max-width":7,"text-size":{base:1,stops:[[10,11.5],[16,18]]}},paint:{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1.25,"text-color":"hsl(0, 0%, 0%)"},interactive:!0},{id:"place-town",type:"symbol",source:"composite","source-layer":"place_label",minzoom:6,maxzoom:15,filter:["==","type","town"],layout:{"icon-image":"dot-9","text-font":{base:1,stops:[[11,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[12,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-offset":{base:1,stops:[[7,[0,-.15]],[8,[0,0]]]},"text-anchor":{base:1,stops:[[7,"bottom"],[8,"center"]]},"text-field":"{name_en}","text-max-width":7,"text-size":{base:1,stops:[[7,11.5],[15,20]]}},paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1.25,"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]}},interactive:!0},{id:"place-island",type:"symbol",source:"composite","source-layer":"place_label",maxzoom:16,filter:["==","type","island"],layout:{"text-line-height":1.2,"text-size":{base:1,stops:[[10,11],[18,16]]},"text-max-angle":38,"symbol-spacing":250,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-padding":2,"text-offset":[0,0],"text-rotation-alignment":"viewport","text-field":"{name_en}","text-letter-spacing":.01,"text-max-width":7},paint:{"text-color":"hsl(230, 29%, 35%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1},interactive:!0},{id:"place-city-sm",type:"symbol",metadata:{"mapbox:group":"1444862510685.128"},source:"composite","source-layer":"place_label",maxzoom:14,filter:["all",["!in","scalerank",0,1,2,3,4,5],["==","type","city"]],layout:{"text-size":{base:1,stops:[[6,12],[14,22]]},"icon-image":"dot-9","text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-offset":{base:1,stops:[[7.99,[0,-.2]],[8,[0,0]]]},"text-anchor":{base:1,stops:[[7,"bottom"],[8,"center"]]},"text-field":"{name_en}","text-max-width":7},paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1.25,"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]}},interactive:!0},{id:"place-city-md-s",type:"symbol",metadata:{"mapbox:group":"1444862510685.128"},source:"composite","source-layer":"place_label",maxzoom:14,filter:["all",["==","type","city"],["in","ldir","E","S","SE","SW"],["in","scalerank",3,4,5]],layout:{"text-field":"{name_en}","icon-image":"dot-10","text-anchor":{base:1,stops:[[7,"top"],[8,"center"]]},"text-offset":{base:1,stops:[[7.99,[0,.1]],[8,[0,0]]]},"text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-size":{base:.9,stops:[[5,12],[12,22]]}},paint:{"text-halo-width":1,"text-halo-color":"hsl(0, 0%, 100%)","text-color":"hsl(0, 0%, 0%)","text-halo-blur":1,"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]}},interactive:!0},{id:"place-city-md-n",type:"symbol",metadata:{"mapbox:group":"1444862510685.128"},source:"composite","source-layer":"place_label",maxzoom:14,filter:["all",["==","type","city"],["in","ldir","N","NE","NW","W"],["in","scalerank",3,4,5]],layout:{"icon-image":"dot-10","text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-offset":{base:1,stops:[[7.99,[0,-.25]],[8,[0,0]]]},"text-anchor":{base:1,stops:[[7,"bottom"],[8,"center"]]},"text-field":"{name_en}","text-max-width":7,"text-size":{base:.9,stops:[[5,12],[12,22]]}},paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]},"text-halo-blur":1},interactive:!0},{id:"place-city-lg-s",type:"symbol",metadata:{"mapbox:group":"1444862510685.128"},source:"composite","source-layer":"place_label",minzoom:1,maxzoom:14,filter:["all",["<=","scalerank",2],["==","type","city"],["in","ldir","E","S","SE","SW"]],layout:{"icon-image":"dot-11","text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-offset":{base:1,stops:[[7.99,[0,.15]],[8,[0,0]]]},"text-anchor":{base:1,stops:[[7,"top"],[8,"center"]]},"text-field":"{name_en}","text-max-width":7,"text-size":{base:.9,stops:[[4,12],[10,22]]}},paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]},"text-halo-blur":1},interactive:!0},{id:"place-city-lg-n",type:"symbol",metadata:{"mapbox:group":"1444862510685.128"},source:"composite","source-layer":"place_label",minzoom:1,maxzoom:14,filter:["all",["<=","scalerank",2],["==","type","city"],["in","ldir","N","NE","NW","W"]],layout:{"icon-image":"dot-11","text-font":{base:1,stops:[[7,["DIN Offc Pro Regular","Arial Unicode MS Regular"]],[8,["DIN Offc Pro Medium","Arial Unicode MS Regular"]]]},"text-offset":{base:1,stops:[[7.99,[0,-.25]],[8,[0,0]]]},"text-anchor":{base:1,stops:[[7,"bottom"],[8,"center"]]},"text-field":"{name_en}","text-max-width":7,"text-size":{base:.9,stops:[[4,12],[10,22]]}},paint:{"text-color":"hsl(0, 0%, 0%)","text-opacity":1,"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"icon-opacity":{base:1,stops:[[7.99,1],[8,0]]},"text-halo-blur":1},interactive:!0},{id:"marine-label-sm-ln",type:"symbol",metadata:{"mapbox:group":"1444856087950.3635"},source:"composite","source-layer":"marine_label",minzoom:3,maxzoom:10,filter:["all",["==","$type","LineString"],[">=","labelrank",4]],layout:{"text-line-height":1.1,"text-size":{base:1,stops:[[3,12],[6,16]]},"symbol-spacing":{base:1,stops:[[4,100],[6,400]]},"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"symbol-placement":"line","text-field":"{name_en}","text-letter-spacing":.1,"text-max-width":5},paint:{"text-color":"hsl(205, 83%, 88%)"},interactive:!0},{id:"marine-label-sm-pt",type:"symbol",metadata:{"mapbox:group":"1444856087950.3635"},source:"composite","source-layer":"marine_label",minzoom:3,maxzoom:10,filter:["all",["==","$type","Point"],[">=","labelrank",4]],layout:{"text-field":"{name_en}","text-max-width":5,"text-letter-spacing":.1,"text-line-height":1.5,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-size":{base:1,stops:[[3,12],[6,16]]}},paint:{"text-color":"hsl(205, 83%, 88%)"},interactive:!0},{id:"marine-label-md-ln",type:"symbol",metadata:{"mapbox:group":"1444856087950.3635"},source:"composite","source-layer":"marine_label",minzoom:2,maxzoom:8,filter:["all",["==","$type","LineString"],["in","labelrank",2,3]],layout:{"text-line-height":1.1,"text-size":{base:1.1,stops:[[2,12],[5,20]]},"symbol-spacing":250,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"symbol-placement":"line","text-field":"{name_en}","text-letter-spacing":.15,"text-max-width":5},paint:{"text-color":"hsl(205, 83%, 88%)"},interactive:!0},{id:"marine-label-md-pt",type:"symbol",metadata:{"mapbox:group":"1444856087950.3635"},source:"composite","source-layer":"marine_label",minzoom:2,maxzoom:8,filter:["all",["==","$type","Point"],["in","labelrank",2,3]],layout:{"text-field":"{name_en}","text-max-width":5,"text-letter-spacing":.15,"text-line-height":1.5,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-size":{base:1.1,stops:[[2,14],[5,20]]}},paint:{"text-color":"hsl(205, 83%, 88%)"},interactive:!0},{id:"marine-label-lg-ln",type:"symbol",metadata:{"mapbox:group":"1444856087950.3635"},source:"composite","source-layer":"marine_label",minzoom:1,maxzoom:4,filter:["all",["==","$type","LineString"],["==","labelrank",1]],layout:{"text-field":"{name_en}","text-max-width":4,"text-letter-spacing":.25,"text-line-height":1.1,"symbol-placement":"line","text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-size":{base:1,stops:[[1,14],[4,30]]}},paint:{"text-color":"hsl(205, 83%, 88%)"},interactive:!0},{id:"marine-label-lg-pt",type:"symbol",metadata:{"mapbox:group":"1444856087950.3635"},source:"composite","source-layer":"marine_label",minzoom:1,maxzoom:4,filter:["all",["==","$type","Point"],["==","labelrank",1]],layout:{"text-field":"{name_en}","text-max-width":4,"text-letter-spacing":.25,"text-line-height":1.5,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-size":{base:1,stops:[[1,14],[4,30]]}},paint:{"text-color":"hsl(205, 83%, 88%)"},interactive:!0},{id:"state-label-sm",type:"symbol",metadata:{"mapbox:group":"1444856151690.9143"},source:"composite","source-layer":"state_label",minzoom:3,maxzoom:9,filter:["<","area",2e4],layout:{"text-size":{base:1,stops:[[6,10],[9,14]]},"text-transform":"uppercase","text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"text-field":{base:1,stops:[[0,"{abbr}"],[6,"{name_en}"]]},"text-letter-spacing":.15,"text-max-width":5},paint:{"text-opacity":1,"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1},interactive:!0},{id:"state-label-md",type:"symbol",metadata:{"mapbox:group":"1444856151690.9143"},source:"composite","source-layer":"state_label",minzoom:3,maxzoom:8,filter:["all",["<","area",8e4],[">=","area",2e4]],layout:{"text-size":{base:1,stops:[[5,10],[8,16]]},"text-transform":"uppercase","text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"text-field":{base:1,stops:[[0,"{abbr}"],[5,"{name_en}"]]},"text-letter-spacing":.15,"text-max-width":6},paint:{"text-opacity":1,"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1},interactive:!0},{id:"state-label-lg",type:"symbol",metadata:{"mapbox:group":"1444856151690.9143"},source:"composite","source-layer":"state_label",minzoom:3,maxzoom:7,filter:[">=","area",8e4],layout:{"text-size":{base:1,stops:[[4,10],[7,18]]},"text-transform":"uppercase","text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"text-padding":1,"text-field":{base:1,stops:[[0,"{abbr}"],[4,"{name_en}"]]},"text-letter-spacing":.15,"text-max-width":6},paint:{"text-opacity":1,"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1},interactive:!0},{id:"country-label-sm",type:"symbol",metadata:{"mapbox:group":"1444856144497.7825"},source:"composite","source-layer":"country_label",minzoom:1,maxzoom:10,filter:[">=","scalerank",5],layout:{"text-field":"{name_en}","text-max-width":6,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-size":{base:.9,stops:[[5,14],[9,22]]}},paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":{base:1,stops:[[2,"rgba(255,255,255,0.75)"],[3,"hsl(0, 0%, 100%)"]]},"text-halo-width":1.25},interactive:!0},{id:"country-label-md",type:"symbol",metadata:{"mapbox:group":"1444856144497.7825"},source:"composite","source-layer":"country_label",minzoom:1,maxzoom:8,filter:["in","scalerank",3,4],layout:{"text-field":{base:1,stops:[[0,"{code}"],[2,"{name_en}"]]},"text-max-width":6,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-size":{base:1,stops:[[3,10],[8,24]]}},paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":{base:1,stops:[[2,"rgba(255,255,255,0.75)"],[3,"hsl(0, 0%, 100%)"]]},"text-halo-width":1.25},interactive:!0},{id:"country-label-lg",type:"symbol",metadata:{"mapbox:group":"1444856144497.7825"},source:"composite","source-layer":"country_label",minzoom:1,maxzoom:7,filter:["in","scalerank",1,2],layout:{"text-field":"{name_en}","text-max-width":{base:1,stops:[[0,5],[3,6]]},"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-size":{base:1,stops:[[1,10],[6,24]]}},paint:{"text-color":"hsl(0, 0%, 0%)","text-halo-color":{base:1,stops:[[2,"rgba(255,255,255,0.75)"],[3,"hsl(0, 0%, 100%)"]]},"text-halo-width":1.25},interactive:!0}],created:"2017-08-10T19:56:21.137Z",id:"cj66v6i8c4hnc2so16ngtlovn",modified:"2017-08-10T19:56:21.137Z",owner:"pipbailey",visibility:"private",draft:!1}},445:function(e,t,a){"use strict";var n=a(50),o=a(69),i=a.n(o),r=a(115);t.a=function e(t,a){var o=this;Object(n.a)(this,e),this.setMeta=function(){o.meta=JSON.stringify(o.config.getSeriesMeta())},this.newSeries=function(){return{id:"_"+i()(),meta:JSON.stringify(o.config.getSeriesMeta()),photos:[]}},this.config=new r.a(t),this.series=a||this.newSeries()}},446:function(e,t,a){"use strict";var n=a(31),o=a(0),i=a.n(o);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=Object(o.useRef)(),a=Object(o.useRef)(),r=i.a.createElement("input",{style:{display:"none"},ref:t,type:"file"});return Object(o.useEffect)(function(){var o=function(a){var o=Object(n.a)(t.current.files)[0];if(o){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.readAsDataURL(o)}t.current.value=null};return t.current&&(t.current.addEventListener("change",o),a.current||(t.current.click(),a.current=!0)),function(){t.current&&t.current.removeEventListener("change",o)}},[t.current]),r}},453:function(e,t){},457:function(e,t,a){"use strict";var n=a(6),o=a(0),i=a.n(o),r=a(8),l=a.n(r),s=a(79),c=a.n(s),u=a(229),p=a.n(u),d=a(39),m=a.n(d),h=a(12),g=a.n(h),b=a(228),y=a.n(b),f=a(80),v=a.n(f),w=a(141),x=a.n(w),E=a(243),O=a(248),S=a(87),k=a(5),j=a(50),C=a(84),N=a(33),I=a.n(N),P=a(46),T=function(){function e(t,a){Object(j.a)(this,e),this.webcamElement=t,this.canvasElement=a,"https:"!==window.location.protocol&&"localhost"!==window.location.hostname&&console.warn("getUserMedia() must be run from a secure origin: https or localhost.\nChanging protocol to https."),navigator.mediaDevices||navigator.getUserMedia||console.warn("Your browser doesn't support navigator.mediaDevices.getUserMedia and navigator.getUserMedia.")}return Object(C.a)(e,[{key:"adjustVideoSize",value:function(e,t){var a=e/t;e>=t?this.webcamElement.width=a*this.webcamElement.height:e<t&&(this.webcamElement.height=this.webcamElement.width/a)}},{key:"destroy",value:function(){var e=Object(P.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{this.webcamElement.srcObject.getTracks()[0].stop(),this.webcamElement=null,this.canvasElement=null}catch(t){console.error(t)}case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setup",value:function(){var e=Object(P.a)(I.a.mark(function e(t,a){var n=this;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,o){void 0!==navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment",width:t,height:a}}).then(function(t){"srcObject"in n.webcamElement?n.webcamElement.srcObject=t:n.webcamElement.src=window.URL.createObjectURL(t),n.webcamElement.onloadedmetadata=function(e){n.webcamElement.play()},n.webcamElement.onplaying=function(t){e()}}).catch(function(e){return o(e)}):o(new Error("Error accessing camera"))}));case 1:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"_drawImage",value:function(){var e=this.webcamElement.videoWidth,t=this.webcamElement.videoHeight,a=this.canvasElement.getContext("2d");return this.canvasElement.width=e,this.canvasElement.height=t,a.drawImage(this.webcamElement,0,0,e,t),{imageHeight:t,imageWidth:e}}},{key:"takeBlobPhoto",value:function(){var e=this,t=this._drawImage(),a=t.imageWidth,n=t.imageHeight;return new Promise(function(t,o){e.canvasElement.toBlob(function(e){t({blob:e,imageHeight:n,imageWidth:a})})})}},{key:"takeBase64Photo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"jpeg",quality:1},t=e.type,a=e.quality,n=this._drawImage(),o=n.imageHeight,i=n.imageWidth;return{base64:this.canvasElement.toDataURL("image/"+t,a),imageHeight:o,imageWidth:i}}}]),e}();t.a=Object(k.withStyles)(function(e){return{root:{background:"black",height:"100%",width:"100%"},cameraErrorText:{color:"white",position:"absolute",top:"50%",left:"50%",width:"90%",transform:"translateY(-50%) translateX(-50%)",textAlign:"center"},disabledFab:{color:"#AAAAA!important",background:"#DDDDDD!important",opacity:.2},cameraFab:{position:"absolute",zIndex:10,"@media (orientation: landscape)":{right:"20px",top:"50%",transform:"translateY(-50%)",height:"25vh",width:"25vh"},"@media (orientation: portrait)":{bottom:"20px",left:"50%",transform:"translateX(-50%)",height:"25vw",width:"25vw"}},cameraIcon:{height:"100%",width:"100%"},cancelFab:{position:"absolute",zIndex:10,"@media (orientation: landscape)":{right:"15px",top:"15px",height:"15vh",width:"15vh"},"@media (orientation: portrait)":{right:"15px",bottom:"15px",height:"15vw",width:"15vw"}},cancelIcon:{height:"100%",width:"100%"},swipeDrawer:{width:"50%"},libraryFab:{position:"absolute",zIndex:10,"@media (orientation: landscape)":{left:"15px",top:"15px",height:"15vh",width:"15vh"},"@media (orientation: portrait)":{left:"15px",top:"15px",height:"15vw",width:"15vw"}},myLocationFab:{position:"absolute",zIndex:10,"@media (orientation: landscape)":{right:"15px",bottom:"15px",height:"15vh",width:"15vh"},"@media (orientation: portrait)":{left:"15px",bottom:"15px",height:"15vw",width:"15vw"}},myLocationIcon:{height:"80%",width:"80%"},capturedContainer:{position:"absolute",zIndex:1,height:"100%",width:"100%"},referenceContainer:{position:"absolute",zIndex:2,height:"100%",width:"100%"},captured:{},reference:{},video:{position:"absolute",top:0,left:0,height:"100vh",width:"100vw",zIndex:1}}})(function(e){var t=e.classes,a=e.photos,r=e.onCancel,s=e.onShutter,u=e.defaultRefPhotoId,d=Object(o.useState)(50),h=Object(n.a)(d,2),b=h[0],f=h[1],w=u?a.find(function(e){return e.id===u}):a&&a.length>0?a[0]:null,k=Object(o.useState)(w),j=Object(n.a)(k,2),C=j[0],N=j[1],A=Object(o.useState)(!1),_=Object(n.a)(A,2),z=_[0],L=_[1],R=function(e){var t=Object(o.useState)(!1),a=Object(n.a)(t,2),i=a[0],r=a[1],l=Object(o.useState)(!1),s=Object(n.a)(l,2),c=s[0],u=s[1],p=Object(o.useRef)(),d=function(){p.current||(p.current=new T(document.getElementById("webcam"),document.createElement("canvas")),p.current.setup(window.innerWidth,window.innerHeight).then(function(e){u(!0)}).catch(function(e){console.error(e),r(!0)}))},m=function(){var t=Object(P.a)(I.a.mark(function t(){var a;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:p.current&&c&&(a=p.current.takeBase64Photo({type:"jpeg",quality:1}),e(a));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),h=function(){window.setTimeout(d,1e3)};return Object(o.useEffect)(function(){return window.addEventListener("orientationchange",h),p.current||i||d(),function(){window.removeEventListener("orientationchange",h),p.current&&(p.current.destroy(),r(!1),u(!1)),p.current=null}},[]),{cameraError:i,captureImage:m,cameraOnline:c}}(function(e){return s(e,C?C.id:null)}),D=R.cameraError,M=R.captureImage,F=R.cameraOnline;return i.a.createElement("div",{className:t.root},i.a.createElement(m.a,null),!D&&Boolean(C)&&i.a.createElement(E.a,{defaultValue:b,onChange:f}),D&&i.a.createElement("div",{className:t.cameraErrorText},i.a.createElement(g.a,{variant:"subtitle1",color:"inherit"},"No Camera Access"),i.a.createElement(g.a,{variant:"body2",color:"inherit"},"Please enabled access in your settings.")),i.a.createElement("div",{className:t.captured},Boolean(C)&&i.a.createElement("div",{className:t.reference},i.a.createElement(S.a,{className:t.referenceContainer,opacity:(100-b)/100,photo:C})),!D&&i.a.createElement("video",{autoPlay:!0,playsInline:!0,muted:!0,id:"webcam",width:window.innerWidth,height:window.innerHeight,className:t.video})),i.a.createElement(c.a,{color:"primary","aria-label":"Take Photo",classes:{disabled:t.disabledFab},disabled:D||!F,className:l()(t.cameraFab,t.buttonFab),onClick:M},i.a.createElement(y.a,{className:t.cameraIcon})),i.a.createElement(c.a,{color:"secondary","aria-label":"cancel",onClick:r,classes:{disabled:t.disabledFab},className:l()(t.cancelFab,t.buttonFab)},i.a.createElement(v.a,{className:t.cancelIcon})),i.a.createElement(c.a,{"aria-label":"cancel",className:l()(t.libraryFab,t.buttonFab),classes:{disabled:t.disabledFab},disabled:!a||0===a.length,onClick:function(){return L(!0)}},i.a.createElement(x.a,{className:t.libraryIcon})),i.a.createElement(p.a,{anchor:"left",open:z,classes:{paperAnchorLeft:t.swipeDrawer},onClose:function(){return L(!1)},onOpen:function(){return L(!0)}},i.a.createElement("div",{tabIndex:0,className:t.swipeDrawerContainer,role:"button",onClick:function(){return L(!1)},onKeyDown:function(){return L(!1)}},i.a.createElement(O.a,{multiSelect:!1,columns:1,photos:a,onTileClick:function(e){N(a.find(function(t){return t.id===e})),L(!1)}}))))})},459:function(e,t,a){"use strict";var n=a(6),o=a(0),i=a.n(o),r=a(39),l=a.n(r),s=a(146),c=a.n(s),u=a(15),p=a.n(u),d=a(5),m=a(87),h=a(243),g=a(43);t.a=Object(d.withStyles)(function(e){return{root:{background:"rgb(150,150, 150)",height:"100%",width:"100%"},capturedContainer:{position:"absolute",zIndex:1,height:"100%",width:"100%"},referenceContainer:{position:"absolute",zIndex:0,height:"100%",width:"100%"},captured:{},reference:{},referenceTextContainer:{width:"100%",display:"flex",color:"white",background:"rgba(0,0,0,0.5)",padding:3*e.spacing.unit,position:"absolute",zIndex:4,top:0},newText:{flexGrow:1,color:"white",textShadow:"1 1 1 black",textAlign:"right"},refText:{flexGrow:1,color:"white",textShadow:"1 1 1 black"}}})(function(e){var t=e.classes,a=e.captured,r=e.defaultRefPhotoId,s=e.onConfirm,u=e.onCancel,d=e.onRetry,b=Object(o.useContext)(g.a).series,y=b&&b.photos?b.photos:null,f=r?y.find(function(e){return e.id===r}):y&&y.length>0?y[0]:null,v=Object(o.useState)(f),w=Object(n.a)(v,2),x=w[0],E=(w[1],Object(o.useState)(100)),O=Object(n.a)(E,2),S=O[0],k=O[1];return a?i.a.createElement("div",{className:t.root},i.a.createElement(l.a,null),Boolean(x)&&i.a.createElement(h.a,{defaultValue:100,onChange:k}),i.a.createElement("div",{className:t.captured},i.a.createElement(m.a,{opacity:S/100,className:t.capturedContainer,photo:a})),Boolean(x)&&i.a.createElement("div",{className:t.reference},i.a.createElement(m.a,{className:t.referenceContainer,photo:x})),i.a.createElement(c.a,{open:!0,autoHideDuration:null,ContentProps:{"aria-describedby":"snackbar-fab-message-id",className:t.snackbarContent},message:i.a.createElement("span",{id:"snackbar-fab-message-id"},"Keep this photo?"),action:i.a.createElement("div",null,i.a.createElement(p.a,{color:"inherit",size:"small",onClick:u},"Cancel"),Boolean(d)&&i.a.createElement(p.a,{color:"inherit",size:"small",onClick:d},"Retry"),i.a.createElement(p.a,{color:"inherit",size:"small",onClick:s},"Keep")),className:t.snackbar})):"Loading..."})},460:function(e,t,a){"use strict";var n=a(7),o=a(6),i=a(0),r=a.n(i),l=a(39),s=a.n(l),c=a(41),u=a.n(c),p=a(42),d=a.n(p),m=a(12),h=a.n(m),g=a(49),b=a.n(g),y=a(53),f=a.n(y),v=a(15),w=a.n(v),x=a(247),E=a(43),O=a(5),S=a(245);t.a=Object(O.withStyles)(function(e){return{root:{},formLabel:{color:e.palette.text.secondary},mapFormLabel:{marginTop:2*e.spacing.unit,marginBottom:e.spacing.unit,color:e.palette.text.secondary},map:{marginBottom:2*e.spacing.unit},mapWrapper:{marginBottom:2*e.spacing.unit},field:{marginBottom:2*e.spacing.unit}}})(function(e){var t=e.classes,a=e.photo,l=e.newSeries,c=e.onCancel,p=e.onSave,m=(Object(i.useContext)(E.a).series,Object(i.useState)(l||{})),g=Object(o.a)(m,2),y=g[0],v=g[1],O=Object(i.useState)(a),k=Object(o.a)(O,2),j=k[0],C=k[1];return r.a.createElement("div",{className:t.root},r.a.createElement(s.a,null)," ",r.a.createElement(u.a,{fullScreen:!0,fullWidth:!0,scroll:"paper",disableBackdropClick:!0,disableEscapeKeyDown:!0,onClose:c,"aria-labelledby":"customized-dialog-title",open:!0},r.a.createElement(d.a,{disableTypography:!0,className:t.dlgTitleContainer},r.a.createElement(h.a,{variant:"h5",className:t.dlgTitle},"New Photo Properties")),r.a.createElement(b.a,null,!!l&&r.a.createElement(x.a,{series:l,delta:y,onChange:v}),r.a.createElement(S.a,{photo:a,canEdit:!0,delta:j,onChange:function(e){return C(Object(n.a)({},j,e))}})),r.a.createElement(f.a,null,r.a.createElement(w.a,{onClick:c,color:"primary"},"Cancel"),r.a.createElement(w.a,{onClick:function(){return p({series:y,photo:j})},color:"primary"},"Next"))))})},54:function(e,t,a){"use strict";a.d(t,"c",function(){return i}),a.d(t,"b",function(){return r}),a.d(t,"d",function(){return l}),a.d(t,"a",function(){return s});var n=a(156),o=a.n(n),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LLLL";return o()(e,"x").format(t)},r=function(e){return o.a.utc(e).format("x")};function l(e){return o()(e,"x").format("YYYY-MM-DDTkk:mm")}function s(e){return o()(new Date(e),"YYYY-MM-DDTkk:mm").format("x")}},5689:function(e,t,a){e.exports=a(6148)},5965:function(e,t){},5971:function(e,t){},6141:function(e,t,a){},6148:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(37),r=a.n(i),l=a(39),s=a.n(l),c=a(215),u=a.n(c),p=a(150),d=a.n(p),m=a(5),h=a(6),g=a(48),b=a.n(g),y=a(123),f=a.n(y),v=a(138),w=a.n(v),x=a(209),E=a.n(x),O=a(81),S=a.n(O),k=a(30),j=a.n(k),C=a(62),N=a.n(C),I=a(58),P=a.n(I),T=a(170),A=a.n(T),_=a(63),z=a.n(_),L=a(211),R=a.n(L),D=a(210),M=a.n(D),F=a(34),B=a.n(F)()(o.a.createElement(o.a.Fragment,null,o.a.createElement("path",{d:"M 5.4 0 L 18.6 0 C 21.58 0 24 2.42 24 5.4 L 24 18.6 C 24 21.58 21.58 24 18.6 24 L 5.4 24 C 2.42 24 0 21.58 0 18.6 L 0 5.4 C 0 2.42 2.42 0 5.4 0 Z",style:{fill:"none",stroke:"#000000",strokeWidth:2,strokeLinecap:"square",strokeDasharray:"0.1,3",strokeMiterlimit:5}}),o.a.createElement("path",{d:" M 12 1.333 L 15.135 7.685 L 22.145 8.704 L 17.072 13.648 L 18.27 20.63 L 12 17.333 L 5.73 20.63 L 6.928 13.648 L 1.855 8.704 L 8.865 7.685 L 12 1.333 Z ",fill:"rgb(235,235,235)",vectorEffect:"non-scaling-stroke",strokeWidth:"1",stroke:"rgb(0,0,0)",strokeLinejoin:"miter",strokeLinecap:"square",strokeMiterlimit:"3"})),"AppLogo"),U=a(212),$=a.n(U),W=a(214),G=a.n(W),Y=a(213),q=a.n(Y),H=Object(m.withStyles)(function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%"},searchIcon:{opacity:.3,marginRight:e.spacing.unit},input:{background:"#FFFFFF",border:"1px solid #AAAAAA",borderRadius:2*e.spacing.unit,paddingLeft:e.spacing.unit,marginLeft:0,flex:1},iconButton:{padding:10},divider:{width:1,height:28,margin:4}}})(function(e){var t=e.classes,a=e.signOut,i=Object(n.useState)(!1),r=Object(h.a)(i,2),l=r[0],s=r[1];return o.a.createElement(b.a,{className:t.root,disableGutters:!0},o.a.createElement(j.a,{className:t.iconButton},o.a.createElement(B,null)),o.a.createElement(f.a,{className:t.input,placeholder:"Search...",endAdornment:o.a.createElement(E.a,{position:"end"},o.a.createElement(M.a,{className:t.searchIcon}))}),o.a.createElement(S.a,{className:t.divider}),o.a.createElement(j.a,{className:t.iconButton,"aria-label":"Menu",onClick:function(){return s(!l)}},o.a.createElement(R.a,null)),o.a.createElement(w.a,{anchor:"top",open:l,onClose:function(){return s(!1)}},o.a.createElement("div",{tabIndex:0,role:"button",onClick:function(){return s(!1)},onKeyDown:function(){return s(!1)}},o.a.createElement("div",{className:t.fullList},o.a.createElement(N.a,null,["Menu Item","Menu Item","Menu Item","Menu Item"].map(function(e,t){return o.a.createElement(P.a,{button:!0,key:"index-".concat(t)},o.a.createElement(A.a,null,t%2===0?o.a.createElement($.a,null):o.a.createElement(q.a,null)),o.a.createElement(z.a,{primary:e}))})),o.a.createElement(N.a,null,o.a.createElement(P.a,{button:!0,onClick:a},o.a.createElement(A.a,null,o.a.createElement(G.a,null)),o.a.createElement(z.a,{primary:"Sign Out"})))))))}),X=o.a.createContext({}),V=a(14),Q=a(216),J=a.n(Q),Z=a(217),K=a.n(Z),ee=a(218),te=a.n(ee),ae=Object(m.withStyles)(function(e){return{root:{height:"100%",display:"flex",flexDirection:"column"},mapContainer:{position:"relative",flexGrow:1,width:"100%"},topBar:{zIndex:1e3,width:"100%",position:"fixed",top:0}}})(function(e){var t=e.classes,a=e.currentState,i=e.setHomeState,r=e.children,l=Object(n.useContext)(X).signOut;return o.a.createElement("div",{className:t.root},o.a.createElement(s.a,null)," ",o.a.createElement("div",{className:t.topBar},o.a.createElement(H,{signOut:l})),o.a.createElement("div",{className:t.mapContainer},r),o.a.createElement(u.a,{value:a,onChange:function(e,t){return i(t)},showLabels:!0,className:t.bottomNav},o.a.createElement(d.a,{value:V.e.AppStateTypes.MAP,label:"Map",icon:o.a.createElement(J.a,null)}),o.a.createElement(d.a,{value:V.e.AppStateTypes.LIST,label:"List",icon:o.a.createElement(K.a,null)}),o.a.createElement(d.a,{value:V.e.AppStateTypes.USER,label:"Profile",icon:o.a.createElement(te.a,null)})))}),ne=a(94),oe="HOME_CHANGE_STATE",ie="HOME_CHANGE_ACTIVE_SERIES",re="HOME_STATE_BACK",le="MAP_HISTORY_POP",se="MAP_HISTORY_PUSH",ce="MAP_HISTORY_CLEAR",ue="UPLOADER_START",pe="UPLOADER_COMPLETE",de="UPLOADER_UPDATE_PROGRESS",me=function(e){return{type:oe,data:e}},he=function(){return{type:re}},ge=function(e){return{type:ie,data:e}},be=function(){return{type:le}},ye=function(e){return{type:se,data:e}},fe=function(){return{type:ce}},ve=function(e){return{type:ue,data:e}},we=function(){return{type:pe}},xe=function(e){return{type:de,data:e}},Ee=a(67),Oe=a.n(Ee),Se=a(166),ke=a.n(Se),je=a(12),Ce=a.n(je),Ne=Object(m.withStyles)(function(e){return{root:{background:"black",color:e.palette.primary.contrastText,padding:2*e.spacing.unit},message:{},msgText:{display:"flex"},spacer:{flexGrow:1},messageInner:{}}})(function(e){var t=e.classes,a=e.text,n=e.progress;if(!a)return null;var i="Uploading: ".concat(a);return o.a.createElement("div",{className:t.root},o.a.createElement("div",{className:t.messageInner},o.a.createElement("div",{className:t.msgText},o.a.createElement(Ce.a,{color:"inherit"},i),o.a.createElement("div",{className:t.spacer}),o.a.createElement(Ce.a,{color:"inherit"},n,"%")),o.a.createElement(ke.a,{color:"secondary",variant:"determinate",value:n})))}),Ie=Ne,Pe=function(e){var t=e.classes,a=e.text,n=e.progress;return o.a.createElement("div",{className:t.root},o.a.createElement(s.a,null)," ",o.a.createElement(Oe.a,{className:t.paper},o.a.createElement(Ce.a,{variant:"h5"},"This is a sheet of paper.")),o.a.createElement(Ne,{text:a,progress:n}))};Pe.displayName=Ne.displayName;Object(m.withStyles)(function(e){return{root:{height:"100%",display:"flex",flexDirection:"column"},paper:{flexGrow:1}}})(Pe);var Te=a(33),Ae=a.n(Te),_e=a(46),ze=a(175),Le=a.n(ze),Re=a(440),De=a.n(Re);function Me(){return(Me=Object(_e.a)(Ae.a.mark(function e(t,a,n){var o,i,r;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("UploadConntect: upload start",t),o=new De.a,Object.keys(t.preAuth.fields).forEach(function(e){console.log("APPEND",e,t.preAuth.fields[e]),o.append(e,t.preAuth.fields[e])}),i=Fe(t.base64,"a.png"),o.append("file",i),r={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){var t=e.loaded,n=e.total;console.log("PROGRESSEVENT",t,n,Math.floor(100*t/n)),a({progress:Math.floor(100*t/n)})}},console.log("FORMDATA",o),e.next=9,Le.a.post(t.preAuth.url,o,r).catch(function(e){console.error(e),console.log(e.stack)});case 9:console.log("UploadConntect: upload done"),n();case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Fe(e,t){for(var a=e.split(","),n=a[0].match(/:(.*?);/)[1],o=atob(a[1]),i=o.length,r=new Uint8Array(i);i--;)r[i]=o.charCodeAt(i);return new File([r],t,{type:n})}Le.a.interceptors.request.use(function(e){return console.log("AXIOS:::: Starting Request",e),e},function(e){return console.log("AXIOS:::: Starting Request ERROR",e),Promise.reject(e)}),Le.a.interceptors.response.use(function(e){return console.log("AXIOS:::: Response",e),e},function(e){return console.log("AXIOS:::: Starting Response ERROR",e),Promise.reject(e)});var Be=Object(ne.b)(function(e,t){return{activeUpload:e.uploader.activeUpload}},function(e){return{completeActiveUpload:function(){e(we())},updateUploadProgress:function(t){e(xe(t))}}})(function(e){var t=e.activeUpload,a=e.completeActiveUpload,i=e.updateUploadProgress,r=Object(n.useRef)();return Object(n.useEffect)(function(){r.current=r.current&&!!t,t&&!r.current&&function(e,t,a){Me.apply(this,arguments)}(t,i,a)},[Boolean(t)]),t?o.a.createElement(Ie,{text:"Uploading thing",progress:t.progress||0}):null}),Ue=a(82),$e=a(31),We=a(7),Ge=a(38),Ye={admin:{series:{"create:own":["*"],"read:any":["*"],"update:any":["*"],"delete:any":["*"]},photo:{"create:any":["*"],"read:any":["*"],"update:any":["*"],"delete:any":["*"]}},nonuser:{photo:{"read:any":["*"],"update:any":["*"],"delete:any":["*"]},series_public:{"read:any":["*"]},series_open:{"read:any":["*"]}},user:{series:{"create:own":["*"],"read:own":["*"],"update:own":["*"],"delete:own":["*"]},series_public:{"read:any":["*"]},series_open:{"read:any":["*"],"update:any":["photos"]},photo:{"read:any":["*"],"create:own":["*"],"update:own":["*"],"delete:own":["*"]}}},qe=a(71),He=a(65),Xe=a(66),Ve=a.n(Xe);function Qe(){var e=Object(He.a)(["\n  query getWholeSeries($id: ID!) {\n    series(id: $id) {\n      id\n      name\n      note\n      meta\n      access\n      createdUser {\n        id\n        gravatar\n        gravatarProfile\n        username\n      }\n      # createdOn\n      # updatedOn\n      latitude\n      longitude\n      direction\n      photoCount\n      featured {\n        id\n        takenOn\n        paths {\n          thumb\n        }\n      }\n      # latest {\n      #   id\n      #   paths {\n      #     thumb\n      #   }\n      #   createdBy\n      #   createdOn\n      #   takenOn\n      #   updatedOn\n      # }\n      photos {\n        id\n        meta\n        createdUser {\n          id\n          gravatar\n          gravatarProfile\n          username\n        }\n        # createdOn\n        takenOn\n        # updatedOn\n        tags {\n          label\n          typeId\n          coords {\n            x\n            y\n          }\n        }\n        paths {\n          large\n          orig\n          thumb\n          medium\n        }\n      }\n    }\n  }\n"]);return Qe=function(){return e},e}function Je(){var e=Object(He.a)(["\n  query tagSearch($returnNum: Int, $tag: String) {\n    tags(returnNum: $returnNum, tag: $tag ){\n      name\n      count\n    }\n  }\n"]);return Je=function(){return e},e}function Ze(){var e=Object(He.a)(["\n  query seriesWithTag($tag: String!, $limit: Int) {\n    tagSeries(tag: $tag, limit: $limit) {\n      arraySeries {\n        id\n        name\n        access\n        createdUser {\n          id\n          gravatar\n          gravatarProfile\n          username\n        }        \n        photoCount\n        latitude\n        longitude\n        direction\n      }\n      nextToken\n    }\n  }\n"]);return Ze=function(){return e},e}function Ke(){var e=Object(He.a)(["\n  query seriesFromList($seriesList: [ID]) {\n    arraySeries(seriesIds: $seriesList) {\n      id\n      name\n      access\n      createdUser {\n        id\n        gravatar\n        gravatarProfile\n        username\n      }\n      photoCount\n      latitude\n      longitude\n      direction\n    }\n  }\n"]);return Ke=function(){return e},e}function et(){var e=Object(He.a)(["\n  query userSeries($createdBy: String!, $limit: Int, $nextToken: String) {\n    userSeries(createdBy: $createdBy, limit: $limit, nextToken: $nextToken) {\n      id\n      name\n      access\n      createdUser {\n        id\n        gravatar\n        gravatarProfile\n        username\n      }\n      photoCount\n      latitude\n      longitude\n      direction\n    }\n  }\n"]);return et=function(){return e},e}function tt(){var e=Object(He.a)(["\n  query pollQuery($lastCheck: String!, $limit: Int, $nextToken: String) {\n    changedSeries(lastCheck: $lastCheck, limit: $limit, nextToken: $nextToken){\n      seriesSummaries {\n        id\n        name\n        access\n        createdUser {\n          id\n          gravatar\n          gravatarProfile\n          username\n        }        \n        photoCount\n        latitude\n        longitude\n        direction\n        seriesStatus\n        featured {\n          paths {\n            thumb\n          }\n        }\n      }\n    }\n  }\n"]);return tt=function(){return e},e}function at(){var e=Object(He.a)(["\n  query allSeries($limit: Int, $nextToken: String) {\n    allSeries(limit: $limit, nextToken: $nextToken) {\n      seriesSummaries {\n        id\n        name\n        access\n        createdUser {\n          id\n          gravatar\n          gravatarProfile\n          username\n        }\n        photoCount\n        latitude\n        longitude\n        direction\n        featured {\n          paths {\n            thumb\n          }\n        }\n      }\n      nextToken\n    }\n  }\n"]);return at=function(){return e},e}var nt=Ve()(at()),ot=Ve()(tt()),it=(Ve()(et()),Ve()(Ke()),Ve()(Ze()),Ve()(Je()),Ve()(Qe()));function rt(){var e=Object(He.a)(["\n  mutation createSeries($series: NewSeriesInput!) {\n    createSeries(series: $series) {\n      id\n      name\n      note\n      meta\n      # createdOn\n      # updatedOn\n      latitude\n      longitude\n      direction\n      photoCount\n      featured {\n        id\n        takenOn\n        paths {\n          thumb\n        }\n      }\n      # latest {\n      #   id\n      #   paths {\n      #     thumb\n      #   }\n      #   createdBy\n      #   createdOn\n      #   takenOn\n      #   updatedOn\n      # }\n      photos {\n        id\n        meta\n        createdUser {\n          id\n          gravatar\n          gravatarProfile\n          username\n        }   \n        # createdOn\n        takenOn\n        # updatedOn\n        tags {\n          label\n          typeId\n          coords {\n            x\n            y\n          }\n        }\n        paths {\n          large\n          orig\n          thumb\n          medium\n        }\n      }\n    }\n  }\n"]);return rt=function(){return e},e}function lt(){var e=Object(He.a)(["\n  mutation createPhoto($photo: NewPhotoInput!, $ext: String!) {\n    createPhoto(photo: $photo, ext: $ext) {\n      photo {\n        id\n        meta\n        createdUser {\n          id\n          gravatar\n          gravatarProfile\n          username\n        }\n        seriesId\n        # createdOn\n        takenOn\n        # updatedOn\n        tags {\n          label\n          typeId\n          coords {\n            x\n            y\n          }\n        }\n        paths {\n          large\n          orig\n          thumb\n          medium\n        }\n      }\n      preAuth\n    }\n  }\n"]);return lt=function(){return e},e}function st(){var e=Object(He.a)(["\n  mutation updatePhoto($photo: UpdatePhotoInput!) {\n    updatePhoto(photo: $photo){\n      id\n    }\n  }\n"]);return st=function(){return e},e}function ct(){var e=Object(He.a)(["\n  mutation updateSeries($series: UpdateSeriesInput!) {\n    updateSeries(series: $series){\n      id\n      name\n      note\n      meta\n      latitude\n      longitude\n      direction\n      photoCount\n      featured {\n        id\n        takenOn\n        paths {\n          thumb\n        }\n      }     \n    }\n  }\n"]);return ct=function(){return e},e}function ut(){var e=Object(He.a)(["\n  mutation deleteSeries($id: ID!) {\n    deleteSeries(id: $id)\n  }\n"]);return ut=function(){return e},e}function pt(){var e=Object(He.a)(["\n  mutation deletePhoto($seriesId: ID!, $photoId: ID!) {\n    deletePhoto(seriesId: $seriesId, photoId: $photoId)\n  }\n"]);return pt=function(){return e},e}var dt=Ve()(pt()),mt=Ve()(ut()),ht=Ve()(ct()),gt=Ve()(st()),bt=Ve()(lt()),yt=Ve()(rt()),ft=a(147),vt=a.n(ft),wt=a(224),xt=a.n(wt),Et=a(153),Ot=a.n(Et),St=a(112),kt=a.n(St),jt=a(140),Ct=a.n(jt),Nt=a(223),It=a.n(Nt),Pt=a(154),Tt=a(8),At=a.n(Tt),_t=a(234),zt=a.n(_t),Lt=a(177),Rt=a.n(Lt),Dt=a(141),Mt=a.n(Dt),Ft=Object(m.withStyles)(function(e){return{root:{}}},{withTheme:!0})(function(e){var t=e.classes,a=e.className,i=e.theme,r=e.children,l=e.onCameraClick,s=e.onLibraryClick,c=Object(n.useState)(!1),u=Object(h.a)(c,2),p=u[0],d=u[1],m=Object(n.useState)(!1),g=Object(h.a)(m,2),b=g[0],y=g[1],f=Object(n.useRef)(b);f.current=b;var v=function(e){e.currentTarget,y(!0),p||setTimeout(function(){f.current&&d(!0)},300)},w=function(e){e&&e.stopPropagation&&(e.stopPropagation(),e.preventDefault())};return o.a.createElement(zt.a,{ariaLabel:"SpeedDial photo adder",className:t.root,style:{zIndex:1e3,position:"absolute",bottom:2*i.spacing.unit,right:2*i.spacing.unit},onBlur:function(e){setTimeout(function(){return d(!1)},250)},classes:{fab:At()(t.speedDialFab,a)},icon:r,onClick:function(e){w(e),y(!1),p||(console.log("cameraclick MAIN"),l())},onMouseDown:v,onTouchStart:v,open:p,direction:"up"},o.a.createElement(Rt.a,{icon:o.a.createElement(Ct.a,{className:t.speedDialIcon}),tooltipPlacement:"right",tooltipTitle:"From Camera",tooltipOpen:!0,onClick:function(e){console.log("cameraclick"),d(!1),y(!1),l(),w(e)}}),o.a.createElement(Rt.a,{icon:o.a.createElement(Mt.a,{className:t.speedDialIcon}),tooltipPlacement:"right",tooltipTitle:"From Photo Library",tooltipOpen:!0,onClick:function(e){console.log("libraryClick"),d(!1),y(!1),s(),w(e)}}))}),Bt=a(89),Ut=function(e){var t=e.anchorEl,a=e.onClose,n=e.menuItems;return o.a.createElement(Bt.b,{anchorEl:t,open:!!t,onClose:a},n.map(function(e,t){return o.a.createElement(Bt.c,{key:"contextMenu-".concat(t),disabled:e.disabled,onClick:function(){a(),e.action()}},e.text)}))},$t=a(68),Wt=a.n($t),Gt=a(124),Yt=a(151),qt=a(235),Ht=a(54),Xt=a(115),Vt="NOTEVIEW",Qt=Object(m.withStyles)(function(e){return{root:{margin:e.spacing.unit,backgroundColor:e.palette.background.paper,marginBottom:60},field:{marginBottom:e.spacing.unit},list:{padding:e.spacing.unit},heading:{marginTop:e.spacing.unit},tagListItem:{marginTop:e.spacing.unit,marginBottom:2*e.spacing.unit},chip:{margin:e.spacing.unit/2}}})(function(e){var t=e.classes,a=e.seriesConfig,i=e.series,r=new Xt.a(a),l=Object(n.useState)(null),s=Object(h.a)(l,2),c=s[0],u=s[1],p=i.photos.reduce(function(e,t){return t.tags.forEach(function(t){if(e[t.typeId])if(e[t.typeId][t.label]){var a=e[t.typeId][t.label];e[t.typeId][t.label]=Object(We.a)({},a,{count:a.count+1})}else e[t.typeId][t.label]=Object(We.a)({},t,{count:1});else e[t.typeId]=Object(Ue.a)({},t.label,Object(We.a)({},t,{count:1}))}),e},{}),d=[];try{d=i.meta?Object.keys(JSON.parse(i.meta)):[]}catch(m){console.error(m)}return o.a.createElement("div",{className:t.root},o.a.createElement("div",{className:t.field},o.a.createElement(Wt.a,{className:t.formLabel},"Series Name"),o.a.createElement(Ce.a,{variant:"body1",color:"inherit"},i.name)),i.note&&o.a.createElement(Yt.a,{label:"Series Note",text:i.note,onClick:function(){return u(Vt)}}),o.a.createElement(Ce.a,{className:t.heading,variant:"subtitle1"},"Series Summary"),o.a.createElement(S.a,null),o.a.createElement(N.a,{className:t.list},o.a.createElement(P.a,{disableGutters:!0},o.a.createElement(z.a,{primary:"Photos: ".concat(i.photos.length),secondary:i.photos.length>0&&o.a.createElement("span",null,"First: ",Object(Ht.c)(i.photos[i.photos.length-1].takenOn,"lll"),o.a.createElement("br",null),"Latest: ",Object(Ht.c)(i.photos[0].takenOn,"lll"))})),o.a.createElement(P.a,{disableGutters:!0},o.a.createElement(z.a,null,o.a.createElement(Wt.a,{className:t.formLabel},"Tags in use (across all photos)"),o.a.createElement(S.a,null),0===Object.keys(p).length&&o.a.createElement(Ce.a,{variant:"caption"},"No photos in this series have tags"),Object.keys(p).map(function(e,a){return o.a.createElement("div",{key:"tagchipkey".concat(a),className:t.tagListItem},o.a.createElement(Ce.a,{className:t.subheading,variant:"overline"},r.getTagType(e).label),o.a.createElement(S.a,null),Object.values(p[e]).length>0?Object.values(p[e]).map(function(t,n){return o.a.createElement(Gt.a,{key:"tagchip-".concat(a,"-").concat(n),tag:t,color:r.getTagType(e).color})}):o.a.createElement(Ce.a,{variant:"caption"},"No photos in this series have tags"))})))),d.length>0&&Object.keys(a.meta).length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Wt.a,{className:t.formLabel},"Metadata"),o.a.createElement(S.a,null),o.a.createElement(N.a,{className:t.list},d.map(function(e,t){return a.meta[e]?o.a.createElement(P.a,{key:"metadata".concat(t)},o.a.createElement(z.a,{primary:a.meta[e].label,secondary:a.meta[e].render(i.meta[e])})):null}))),c===Vt&&o.a.createElement(qt.a,{open:!0,multiline:!0,onClose:function(){return u(null)},title:"Series Note",body:i.note}))}),Jt=a(143),Zt=a.n(Jt),Kt=a(110),ea=a.n(Kt),ta=a(93),aa=a.n(ta),na=a(111),oa=a.n(na),ia=a(220),ra=a.n(ia),la=a(96),sa=a.n(la),ca=a(95),ua=a.n(ca),pa=a(219),da=a.n(pa),ma=a(442),ha=a.n(ma),ga=a(87),ba=function(e){var t=e.classes,a=e.theme,i=e.photos,r=e.onImageSelect,l=e.onSlideshowStart,s=Object(n.useState)(0),c=Object(h.a)(s,2),u=c[0],p=c[1],d=Object(n.useState)(!1),m=Object(h.a)(d,2),g=m[0],b=m[1],y=i.length<2,f=Object($e.a)(i);f.sort(function(e,t){return parseInt(t.takenOn,10)-parseInt(e.takenOn,10)});return o.a.createElement("div",{className:t.root},o.a.createElement("div",{className:t.inner},o.a.createElement(ha.a,{axis:"rtl"===a.direction?"x-reverse":"x",index:u,onChangeIndex:function(e){return p(e)},enableMouseEvents:!0},f.map(function(e,a){return o.a.createElement("div",{className:t.photoWrapper,key:"swipeshowpic-".concat(a)},o.a.createElement(ga.a,{photo:e,className:t.photo,showTags:g}))})),o.a.createElement(j.a,{size:"small",className:t.manualBack,onClick:function(){return p(u<=0?f.length-1:u-1)},color:"inherit",disabled:0===u},"rtl"===a.direction?o.a.createElement(ua.a,null):o.a.createElement(sa.a,null)),o.a.createElement(j.a,{size:"small",className:t.manualForward,onClick:function(){return p(u>=f.length?0:u+1)},color:"inherit",disabled:u===i.length-1},"rtl"===a.direction?o.a.createElement(sa.a,null):o.a.createElement(ua.a,null)),o.a.createElement(ea.a,{title:y?"Photo":"Photo (".concat(u+1,"/").concat(f.length,")"),subtitle:f.length>0&&o.a.createElement("span",null,Object(Ht.c)(f[u].takenOn)),actionIcon:o.a.createElement(o.a.Fragment,null,o.a.createElement(j.a,{className:t.slideshowButton,disabled:!i||0===i.length,onClick:l},o.a.createElement(da.a,null)),o.a.createElement(j.a,{className:t.tagButton,onClick:function(){return b(!g)}},o.a.createElement(aa.a,{color:g?"primary":"secondary",badgeContent:f[u].tags?f[u].tags.filter(function(e){return e.coords}).length:null},o.a.createElement(oa.a,null))),o.a.createElement(j.a,{className:t.tagButton,onClick:function(){return r(f[u].id)}},o.a.createElement(ra.a,null)))})),!y&&o.a.createElement(Zt.a,{steps:f.length,position:"static",activeStep:u,classes:{root:t.mobileStepper,dots:t.dots}}))};ba.defaultProps={transition:5e3,isFullScreen:!1,slides:[]};var ya=Object(m.withStyles)(function(e){return{root:{position:"relative"},inner:{position:"relative"},photoWrapper:{minHeight:250,height:250},dateCaption:{padding:e.spacing.unit,background:"black",color:"white",textAlign:"center"},mobileStepper:{},manualBack:{color:"white",zIndex:10,position:"absolute",transform:"translateY(-50%)",left:0,top:"50%"},manualForward:{color:"white",zIndex:10,position:"absolute",transform:"translateY(-50%)",right:0,top:"50%"},tagButton:{color:"rgba(255, 255, 255, 0.54)"},slideshowButton:{color:"rgba(255, 255, 255, 0.54)"},dots:{margin:"0 auto"}}},{withTheme:!0})(ba),fa=a(248),va=a(239),wa=a(43),xa=Object(m.withStyles)(function(e){return{root:{display:"flex",height:"100%",flexDirection:"column",overflow:"hidden"},appBar:{flexGrow:0},inner:{position:"relative",flexGrow:1,overflowY:"scroll","-webkit-overflow-scrolling":"touch"},tabMenu:{marginTop:7*e.spacing.unit},mapWrap:{position:"absolute",height:"100%",width:"100%",top:0,left:0},AddFab:{background:e.palette.secondary.main,color:e.palette.secondary.contrastText},grow:{flexGrow:1},gridList:{flexWrap:"nowrap",transform:"translateZ(0)"},titleBar:{display:"flex",padding:e.spacing.unit},titleText:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}}})(function(e){var t=e.classes,a=e.onSlideshowStart,i=e.onChange,r=e.onEditSeries,l=e.onDeletePhotos,c=e.onCameraAdd,u=e.onDeleteSeries,p=e.onLibraryAdd,d=e.onTileClick,m=e.onMenuBack,g=Object(n.useState)(),y=Object(h.a)(g,2),f=y[0],v=y[1],w=Object(n.useState)(!1),x=Object(h.a)(w,2),E=x[0],O=x[1],S=Object(n.useContext)(wa.a),k=S.series,C=S.seriesConfig,N=S.ac,I={zoom:16};k.longitude&&k.latitude&&(I.longitude=k.longitude,I.latitude=k.latitude);var P={update:N.canUser("update",k,"series"),delete:N.canUser("delete",k,"series"),contribute:N.canUser("update",k,"series",["photos"])};console.log("FINAL DEBUG",P);var T=Object(n.useState)(0),A=Object(h.a)(T,2),_=A[0],z=A[1];return o.a.createElement("div",{className:t.root},o.a.createElement(s.a,null),o.a.createElement(vt.a,{position:"static",className:t.appBar},o.a.createElement(b.a,null,o.a.createElement(j.a,{className:t.menuButton,color:"inherit",onClick:m,"aria-label":"Menu"},o.a.createElement(kt.a,null)),o.a.createElement(Ce.a,{variant:"subtitle1",color:"inherit",className:t.grow},"Series"),(P.update||P.delete)&&o.a.createElement(j.a,{"aria-haspopup":"true",color:"inherit",onClick:function(e){return v(e.currentTarget)}},o.a.createElement(It.a,null)),o.a.createElement(Ut,{anchorEl:f,onClose:function(){return v(null)},menuItems:[{text:"Edit Series",action:r,disabled:!P.update},{text:"Delete Series",action:function(){return O(!0)},disabled:!P.delete}]})),o.a.createElement(xt.a,{variant:"fullWidth",value:_,onChange:function(e,t){return z(t)}},o.a.createElement(Ot.a,{label:"Info"}),o.a.createElement(Ot.a,{label:"Map"}),o.a.createElement(Ot.a,{label:"Photos"}))),o.a.createElement("div",{className:t.inner},0===_&&o.a.createElement(o.a.Fragment,null,k.photos&&k.photos.length>0&&o.a.createElement(ya,{photos:k.photos,onSlideshowStart:a,onImageSelect:d}),o.a.createElement(Qt,{series:k,seriesConfig:C,onChange:i})),k.photos&&2===_&&o.a.createElement(fa.a,{photos:k.photos,onTileClick:d,onDelete:l})),1===_&&o.a.createElement(Pt.a,{longitude:k.longitude,latitude:k.latitude,viewport:I,direction:k.direction}),0===_&&P.contribute&&o.a.createElement(Ft,{className:t.AddFab,onCameraClick:c,onLibraryClick:p},o.a.createElement(Ct.a,null)),o.a.createElement(va.a,{open:E,onConfirm:function(e){O(!1),!0===e&&u(k.id)},title:"Delete Series",message:"Are you sure you want to delete this series? The record and all images associated with it will be gone forever."}))}),Ea=a(49),Oa=a.n(Ea),Sa=a(41),ka=a.n(Sa),ja=a(42),Ca=a.n(ja),Na=a(53),Ia=a.n(Na),Pa=a(15),Ta=a.n(Pa),Aa=a(247),_a=Object(m.withStyles)(function(e){return{root:{},inner:{display:"flex",flexDirection:"column"},dlgTitle:{background:e.palette.primary.main,color:e.palette.primary.contrastText},grow:{flexGrow:1},field:{flexGrow:0,marginBottom:2*e.spacing.unit},slider:{paddingLeft:e.spacing.unit,paddingRight:e.spacing.unit},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"100%"},formLabel:{display:"block",marginTop:e.spacing.unit,marginBottom:e.spacing.unit},mapFormLabel:{display:"block",marginTop:e.spacing.unit,marginBottom:e.spacing.unit},mapInnerWrap:{flexGrow:1},mapWrapper:{flexGrow:1,display:"flex",flexDirection:"column",paddingBottom:2*e.spacing.unit},formControl:{margin:e.spacing.unit,minWidth:120},chips:{display:"flex",flexWrap:"wrap"}}})(function(e){var t=e.classes,a=e.onOk,i=e.onCancel,r=Object(n.useContext)(wa.a).series,l=Object(n.useState)({}),c=Object(h.a)(l,2),u=c[0],p=c[1];return o.a.createElement(ka.a,{scroll:"paper",className:t.root,fullScreen:!0,open:!0,fullWidth:!0,onClose:i},o.a.createElement(s.a,null),o.a.createElement(Ca.a,{disableTypography:!0,className:t.dlgTitle},o.a.createElement(Ce.a,{variant:"subtitle1",color:"inherit",className:t.grow},"Edit Series Details")),o.a.createElement(Oa.a,{className:t.inner},o.a.createElement(Aa.a,{series:r,delta:u,onChange:p})),o.a.createElement(Ia.a,null,o.a.createElement(Ta.a,{className:t.menuButton,color:"inherit",onClick:function(){return p({})},"aria-label":"Menu"},"Reset"),o.a.createElement(Ta.a,{className:t.menuButton,color:"inherit",onClick:i,"aria-label":"Menu"},"Cancel"),o.a.createElement(Ta.a,{className:t.menuButton,color:"inherit",onClick:function(){return a(Object(We.a)({id:r.id},u))},"aria-label":"Menu"},"Ok")))}),za=a(144),La=a.n(za),Ra=a(226),Da=a.n(Ra),Ma=a(225),Fa=a.n(Ma),Ba=a(114),Ua=function(e){var t=e.classes,a=e.theme,i=e.onCancel,r=e.photos,l=e.transition,c=Wa(r.length,l),u=c.activeStep,p=c.lastStep,d=c.handleForward,m=c.handleBack,g=c.paused,b=c.pause,y=c.play,f=Object(n.useState)(!1),v=Object(h.a)(f,2),w=v[0],x=v[1],E=Object(n.useRef)(null),O=Object(Ba.a)(E).size,S=O.height,k=O.width;return o.a.createElement("div",{className:t.root},o.a.createElement(s.a,null),o.a.createElement("div",{ref:E,className:t.slideContainer},r.map(function(e,n){return o.a.createElement(La.a,{key:"slide-".concat(n),className:At()(t.slide,u===n&&t.active,p===n&&t.last),onClick:function(){return x(!w)},style:{height:S,width:k,transition:a.transitions.create(["opacity"],{duration:.25*l})}},o.a.createElement(ga.a,{photo:e,className:t.photo,showTags:w}),o.a.createElement(Ce.a,{className:t.labelBadge},"Tags: ",w?"On ":"Off ",o.a.createElement(aa.a,{color:"secondary",badgeContent:r[u].tags.filter(function(e){return e.coords}).length},o.a.createElement(oa.a,{color:"inherit"}))),o.a.createElement(ea.a,{titlePosition:"top",title:o.a.createElement(Ce.a,{color:"inherit",variant:"caption"},o.a.createElement(j.a,{className:t.iconButton,onClick:function(e){return i()}},o.a.createElement(kt.a,null)),Object(Ht.c)(e.takenOn)),subtitle:o.a.createElement("em",null,g?"Paused":"    "),actionIcon:g?o.a.createElement(j.a,{className:t.iconButton,onClick:function(e){e.preventDefault(),e.stopPropagation(),y()}},o.a.createElement(Fa.a,null)):o.a.createElement(j.a,{className:t.iconButton,onClick:function(e){e.preventDefault(),e.stopPropagation(),b()}},o.a.createElement(Da.a,null))}))}),o.a.createElement(j.a,{size:"small",className:t.manualBack,onClick:m,color:"inherit"},"rtl"===a.direction?o.a.createElement(ua.a,null):o.a.createElement(sa.a,null)),o.a.createElement(j.a,{size:"small",className:t.manualForward,onClick:d,color:"inherit"},"rtl"===a.direction?o.a.createElement(sa.a,null):o.a.createElement(ua.a,null))),o.a.createElement(Zt.a,{steps:r.length,position:"static",activeStep:u,classes:{root:t.mobileStepper,dotActive:t.dotActive},nextButton:o.a.createElement(Ta.a,{color:"inherit",size:"small",onClick:d,disabled:u===r.length-1},"Next","rtl"===a.direction?o.a.createElement(sa.a,null):o.a.createElement(ua.a,null)),backButton:o.a.createElement(Ta.a,{color:"inherit",size:"small",onClick:m,disabled:0===u},"rtl"===a.direction?o.a.createElement(ua.a,null):o.a.createElement(sa.a,null),"Back")}))};Ua.defaultProps={transition:5e3,isFullScreen:!1,slides:[]};var $a=Object(m.withStyles)(function(e){return{root:{height:"100%",display:"flex",flexDirection:"column"},swipeAble:{height:"100%"},slideContainer:{flexGrow:1},mobileStepper:{flexGrow:0,background:e.palette.grey[800],color:e.palette.getContrastText(e.palette.grey[800])},slide:{top:0,zIndex:0,opacity:0,position:"absolute",display:"block",overflow:"hidden",width:"100%",height:"100%",minHeight:300},dotActive:{background:"white"},iconButton:{color:"white"},active:{zIndex:5,opacity:1},last:{opacity:1,zIndex:4},tagContainer:{},labelBadge:{color:"white",zIndex:10,position:"absolute",right:2*e.spacing.unit,bottom:e.spacing.unit,opacity:.8},tagChip:{marginRight:e.spacing.unit,fontSize:10,height:2*e.spacing.unit,padding:e.spacing.unit/2},xyTagChip:{position:"absolute",fontSize:e.spacing.unit,height:2*e.spacing.unit},manualBack:{color:"white",zIndex:10,position:"absolute",transform:"translateY(-50%)",left:0,top:"50%"},manualForward:{color:"white",zIndex:10,position:"absolute",transform:"translateY(-50%)",right:0,top:"50%"}}},{withTheme:!0})(Ua),Wa=function(e,t){var a=Object(n.useState)(0),o=Object(h.a)(a,2),i=o[0],r=o[1],l=Object(n.useState)(!1),s=Object(h.a)(l,2),c=s[0],u=s[1],p=Object(n.useState)(0),d=Object(h.a)(p,2),m=d[0],g=d[1],b=Object(n.useRef)(),y=function(){b.current=window.setInterval(function(){return r(function(t){return g(t),t+1>=e?0:t+1})},t)},f=function(){b.current&&window.clearInterval(b.current)};return Object(n.useEffect)(function(){return y(),function(){f()}},[]),{activeStep:i,lastStep:m,handleForward:function(){g(i),r(i+1>=e?0:i+1),c||(f(),y())},handleBack:function(){g(i),r(i-1<0?e-1:i-1),c||(f(),y())},setActiveStep:r,paused:c,pause:function(){f(),u(!0)},play:function(){u(!1),f(),y()}}},Ga=a(108),Ya=a.n(Ga),qa=a(227),Ha=a.n(qa),Xa=a(92),Va=a.n(Xa),Qa=Object(m.withStyles)(function(e){return{}})(function(e){var t=e.classes,a=e.title,n=e.message,i=e.onConfirm,r=e.open;return o.a.createElement(ka.a,{className:t.root,disableBackdropClick:!0,fullWidth:!0,open:r,disableEscapeKeyDown:!0,maxWidth:"xl","aria-labelledby":"confirmation-dialog-title"},o.a.createElement(Ca.a,{id:"confirmation-dialog-title"},a),o.a.createElement(Oa.a,null,o.a.createElement(Ce.a,null,n)),o.a.createElement(Ia.a,null,o.a.createElement(Ta.a,{onClick:function(){return i(!1)},color:"primary"},"No"),o.a.createElement(Ta.a,{onClick:function(){return i(!0)},color:"secondary"},"Yes")))}),Ja=a(245),Za="cancel",Ka=Object(m.withStyles)(function(e){return{root:{height:"90%",width:"85%"},dlgTitleContainer:{display:"flex",padding:0},dlgTitle:{flexGrow:1,paddingTop:2*e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:3*e.spacing.unit},field:{marginBottom:2*e.spacing.unit}}})(function(e){var t=e.classes,a=e.canEdit,i=e.photo,r=e.onCancel,l=e.onOk,s=e.open,c=Object(n.useState)(null),u=Object(h.a)(c,2),p=u[0],d=u[1],m=Object(n.useState)({}),g=Object(h.a)(m,2),b=g[0],y=g[1],f=b&&Object.keys(b).length>0;return o.a.createElement(ka.a,{fullScreen:!0,fullWidth:!0,onClose:function(){f?d(Za):r()},"aria-labelledby":"customized-dialog-title",open:s},o.a.createElement(Ca.a,{disableTypography:!0,className:t.dlgTitleContainer},o.a.createElement(Ce.a,{variant:"h5",className:t.dlgTitle},"Photo Properties"),o.a.createElement(j.a,{onClick:r},o.a.createElement(Va.a,null))),o.a.createElement(Oa.a,null,o.a.createElement(Ja.a,{photo:i,delta:b,onChange:function(e){return y(Object(We.a)({},b,e))},canEdit:a})),o.a.createElement(Ia.a,null,!a&&o.a.createElement(Ta.a,{onClick:r,color:"primary"},"Ok"),a&&!f&&o.a.createElement(Ta.a,{onClick:r,color:"primary"},"Back"),a&&f&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Ta.a,{onClick:function(){return d(Za)},color:"primary"},"Cancel"),o.a.createElement(Ta.a,{onClick:function(){return y({})},color:"primary"},"Reset"),o.a.createElement(Ta.a,{onClick:function(){return l(b)},color:"primary"},"Ok"))),p&&p===Za&&o.a.createElement(Qa,{open:!0,title:"Lose unsaved changes?",message:"You will lose any changes you made to this form",onConfirm:function(e){d(null),e&&r()}}))}),en=a(152),tn=0,an=1,nn=2,on=3,rn=4,ln=Object(m.withStyles)(function(e){return{root:{display:"flex",height:"100%",flexDirection:"column",overflow:"hidden"},appBar:{flexGrow:0},grow:{flexGrow:1},inner:{flex:"1 1",position:"relative"},tabMenu:{marginTop:7*e.spacing.unit},tipChip:{position:"absolute",zIndex:11,bottom:20,left:"50%",opacity:.6,transform:"translateX(-50%)"},activeButton:{color:e.palette.secondary.main,opacity:1}}})(function(e){var t=e.classes,a=e.photo,i=e.onMenuBack,r=e.onUpdatePhoto,l=e.newPhoto,c=Object(n.useContext)(wa.a),u=c.series,p=c.seriesConfig,d=c.ac,m=Object(n.useState)(l?a:{}),g=Object(h.a)(m,2),y=g[0],f=g[1],v=Object(n.useState)({current:l?rn:tn,last:null}),w=Object(h.a)(v,2),x=w[0],E=w[1],O=new en.a(p,y.tags||a.tags),S=function(e){E({current:e,last:x.current})},k=function(){S(nn),r(a,Object(We.a)({id:a.id},y))},C={update:d.canUser("update",u,"series")||d.canUser("update",a,"photo")};return o.a.createElement("div",{className:t.root},o.a.createElement(s.a,null)," ",o.a.createElement(vt.a,{position:"static",className:t.appBar},o.a.createElement(b.a,null,x.current!==rn&&o.a.createElement(j.a,{className:t.menuButton,color:"inherit","aria-label":"Menu",onClick:function(){return i()}},o.a.createElement(kt.a,null)),o.a.createElement("div",{className:t.grow},o.a.createElement(Ce.a,{variant:"subtitle2",color:"inherit"},l?"Add Tags":"Photo View"),o.a.createElement(Ce.a,{variant:"subtitle2",color:"inherit"},Object(Ht.c)(a.takenOn,"lll"))),x.current===on&&o.a.createElement(Ta.a,{color:"inherit",onClick:function(){S(nn),f(a)}},"Cancel"),x.current===on&&o.a.createElement(Ta.a,{color:"inherit",onClick:k},"Save"),x.current===rn&&o.a.createElement(Ta.a,{color:"inherit",onClick:function(){r(a,Object(We.a)({id:a.id},y)),i()}},"Next"),C.update&&x.current===nn&&o.a.createElement(Ta.a,{color:"inherit",onClick:function(){return S(on)}},"Edit"),x.current!==on&&x.current!==rn&&o.a.createElement(j.a,{color:"inherit",className:At()(t.tagButton,x.current===nn&&t.activeButton),onClick:function(){return S(x.current===nn?tn:nn)}},o.a.createElement(aa.a,{className:t.margin,badgeContent:O.getXYTags().length,color:"secondary"},o.a.createElement(oa.a,null))),x.current!==on&&x.current!==rn&&o.a.createElement(j.a,{color:"inherit",className:At()(t.infoButton,x.current===an&&t.activeButton),onClick:function(){return S(x.current===an?tn:an)}},o.a.createElement(Ha.a,null)))),o.a.createElement("div",{className:t.inner,onClick:function(e){x.current===tn&&(e.preventDefault(),e.stopPropagation(),S(an))}},o.a.createElement(ga.a,{showTags:x.current===nn,photo:Object(We.a)({},a,y),edit:C.update&&(x.current===on||x.current===rn),onChange:f,onCommitTags:k}),x.current===an&&o.a.createElement("div",{className:t.infoWindow},"Esse nisi adipisicing nulla deserunt ut adipisicing officia fugiat culpa excepteur amet et mollit magna. Voluptate cupidatat deserunt est ea esse duis. Aute cillum pariatur pariatur magna consectetur excepteur. Sit pariatur nostrud labore ex mollit mollit nisi reprehenderit. Id in sint commodo commodo ipsum fugiat aliqua culpa velit ad sint ut. Magna ut nostrud non do minim. Consequat ex duis elit eu cillum pariatur in nostrud est reprehenderit.")),o.a.createElement(Ka,{open:x.current===an,photo:a,canEdit:C.update,onOk:function(e){r(a,Object(We.a)({id:a.id},e)),S(x.last)},onCancel:function(){return S(x.last)}}),(x.current===on||x.current===rn)&&o.a.createElement(Ya.a,{label:"Tap to tag features...",onClick:function(){},className:t.tipChip}))}),sn=a(304),cn=a(50),un=a(84),pn=a(447),dn=a.n(pn),mn=function(){function e(t,a,n){var o=this;Object(cn.a)(this,e),this.ownOrAny=function(e){if(!e||!e.createdUser||!e.createdUser.id)throw new Error("No Created user found");try{return e.createdUser.id===o.userSub?"Own":"Any"}catch(t){return"Any"}},this.isOwner=function(e){if(!e||!e.createdUser||!e.createdUser.id)throw new Error("No Created user found");try{return e.createdUser.id===o.userSub}catch(t){return!1}},this.canUser=function(e,t,a,n){if(["series","photo"].indexOf(a)<0)throw new Error("canUser: type not supported ".concat(a));try{var i=o.ownOrAny(t),r=o.ac.can(o.role)["".concat(e).concat(i)](a),l=null;return"series"===a&&("PUBLIC"===t.access?l=o.ac.can(o.role)["".concat(e).concat(i)]("series_public"):"OPEN"===t.access&&(l=o.ac.can(o.role)["".concat(e).concat(i)]("series_open"))),n?l?!!r.attributes.find(function(e){return"*"===e||n.indexOf(e)>-1})||!!l.attributes.find(function(e){return"*"===e||n.indexOf(e)>-1}):!!r.attributes.find(function(e){return"*"===e||n.indexOf(e)>-1}):l?r.granted||l.granted:r.granted}catch(s){return console.error(s),!1}},this.userSub=t,this.role=a,this.permissionObj=n,this.ac=new dn.a(n)}return Object(un.a)(e,[{key:"toString",value:function(){console.log("AccessHelper:",{sub:this.userSub,role:this.role})}}]),e}(),hn="series",gn="editseries",bn="newphoto",yn="newseries",fn="photoviewer",vn="newphotoviewer",wn="slideshow",xn=[hn,fn,wn],En=function(e){var t=e.modeName,a=e.series,i=e.seriesConfig,r=e.inputMethod,l=e.currentUserId,s=e.currentUserRole,c=e.accessControl,u=e.onChange,p=e.onClose,d=e.onDelete,m=e.onNewSeries,g=e.onChangePhoto,b=e.onNewPhoto,y=e.onDeletePhoto,f=Object(n.useState)({series:a,seriesConfig:i,ac:c?new mn(l,s,c):null}),v=Object(h.a)(f,2),w=v[0],x=v[1],E=Object(n.useState)({current:{name:t||hn,pid:null,inputMethod:r},history:[]}),O=Object(h.a)(E,2),S=O[0],k=O[1];console.log("RepeatablePhotos",w),Object(n.useEffect)(function(){return x(Object(We.a)({},w,{series:a}))},[a]);var j=function(e,t){var a=Object(We.a)({},w.series);a.photos=a.photos.map(function(e){return e.id===t.id?Object(We.a)({},e,t):e}),g(e,Object(We.a)({},t,{seriesId:a.id}))},C=function(){var e=Object(_e.a)(Ae.a.mark(function e(t){var n,o;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.photo,t.series,o=Object(We.a)({},a,{photos:[].concat(Object($e.a)(a.photos),[n])}),e.next=4,b(n);case 4:x(Object(We.a)({},w,{series:o})),I(vn,n.id);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(_e.a)(Ae.a.mark(function e(t){var a,n,o;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.photo,n=t.series,console.log("RepeatablePhotos: waiting for series ID",{seriesDelta:n,photoDelta:a}),e.next=4,m(n,a);case 4:o=e.sent,console.log("RepeatablePhotos: waiting for series ID DONE",o);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),I=function(e,t,n){var o=w.ac.canUser("update",a,"series");null===w&&p(),!o&&xn.indexOf(e)<0?console.error("ILLEGAL MODE CHANGE!!!!!",{from:S.current,to:e,canUpdate:o}):k({current:{name:e,pid:t,inputMethod:n},history:[].concat(Object($e.a)(S.history),[S.current])})},P=function(){if(S.history.length>0){var e=Object($e.a)(S.history),t=e.pop();k({current:t,history:e})}else p()},T=null;switch(S.current.name){case hn:T=o.a.createElement(xa,{onSlideshowStart:function(){return I(wn)},onChange:function(){console.log("onChange NOT IMPLEMENTED")},onDeletePhotos:function(e){a.photos.filter(function(t){return e.indexOf(t.id)>-1}).forEach(function(e){return y(e)})},onDeleteSeries:d,onCameraAdd:function(){return I(bn,null,"camera")},onEditSeries:function(){return I(gn)},onLibraryAdd:function(){return I(bn,null,"library")},onTileClick:function(e){I(fn,e)},onMenuBack:p});break;case gn:T=o.a.createElement(_a,{onCancel:function(){return I(hn)},onOk:function(e){u(a,Object(We.a)({},e,{id:a.id})),I(hn)}});break;case fn:T=o.a.createElement(ln,{photo:w.series.photos.find(function(e){return e.id===S.current.pid}),onMenuBack:P,onUpdatePhoto:j});break;case vn:T=o.a.createElement(ln,{photo:w.series.photos.find(function(e){return e.id===S.current.pid}),newPhoto:!0,onMenuBack:function(){return I(hn)},onUpdatePhoto:j});break;case wn:T=o.a.createElement($a,{photos:w.series.photos,onCancel:P});break;case bn:T=o.a.createElement(sn.a,{inputMethod:S.current.inputMethod,photos:a?a.photos:null,onCreate:C,onCancel:P});break;case yn:T=o.a.createElement(sn.a,{inputMethod:S.current.inputMethod,isNewSeries:!0,onCreate:N,onCancel:P});break;default:console.log("REPEATABLEPHOTO: default state. you should NEVER see this",w),T=null}return o.a.createElement(wa.a.Provider,{value:w},T)};En.defaultProps={mode:hn,canEdit:!1};var On=En,Sn=a(448),kn=a(69),jn=a.n(kn),Cn=(Object(Sn.openDb)("serieslistDB",1,function(e){console.log("UPGRADE NEEDED",e);var t=e.createObjectStore(V.f.imgStore);console.log("UPGRADE NEEDED STORE",t)}).catch(function(e){console.error("ERROR",e)}),function(e){return"__LOCAL_".concat(e,"::").concat(jn()())});var Nn=Object(qe.c)(it,{props:function(e){var t=e.data;t.error&&console.error(t.error);var a=null;try{t.loading||t.error||(a=t.series)}catch(n){console.error(t),console.error(n)}return{data:t,loading:t.loading,series:a}},skip:function(e){var t=e.activeSeries,a=e.isNewSeries;return!t||a},options:function(e){return{variables:{id:e.activeSeries}}}}),In=Object(qe.c)(ht,{props:function(e){var t=e.mutate,a=e.ownProps;return{updateSeriesMutation:function(e,n){return t({variables:{series:Dn(n,["id","name","access","note","latitude","longitude","direction"])},optimisticResponse:{updateSeries:Object(We.a)({},e,n,{__typename:"Series"})},update:function(e,t){t.data;var o=e.readQuery({query:it,variables:{id:a.activeSeries}});o.series=Object(We.a)({},o.series,n),e.writeQuery({query:it,data:o});try{var i=e.readQuery({query:nt,variables:{limit:100}}),r=Dn(n,["id","name","access","latitude","longitude","direction"]);i.allSeries.seriesSummaries=i.allSeries.seriesSummaries.map(function(e){return e.id!==r.id?e:Object(We.a)({},e,r)}),e.writeQuery({query:nt,data:i})}catch(l){}}})}}}}),Pn=Object(qe.c)(gt,{props:function(e){var t=e.mutate,a=e.ownProps;return{updatePhotoMutation:function(e,n){var o=Dn(n,["id","seriesId","takenOn","tags","note"]);return o.tags&&o.tags.length>0&&(o.tags=o.tags.map(function(e){var t=Dn(e,["label","typeId","coords"]);return t.coords&&(t.coords=Dn(t.coords,["x","y"])),t})),t({variables:{photo:o},optimisticResponse:{updatePhoto:Object(We.a)({},e,o,{__typename:"Photo"})},update:function(e,t){t.data;var i=e.readQuery({query:it,variables:{id:a.activeSeries}}),r=Object(We.a)({},o,{tags:o.tags?o.tags.map(function(e){var t=Object(We.a)({},e,{__typename:"Tag"});return t.coords=t.coords?Object(We.a)({},t.coords,{__typename:"ImageCoords"}):null,t}):[]});i.series.photos=i.series.photos.map(function(e){return e.id!==n.id?e:Object(We.a)({},e,r)}),e.writeQuery({query:it,data:i})}})}}}}),Tn=Object(qe.c)(mt,{props:function(e){var t=e.mutate,a=e.ownProps;return{deleteSeriesMutation:function(){return t({variables:{id:a.activeSeries},optimisticResponse:{deleteSeries:a.activeSeries},update:function(e,t){var a=t.data;try{var n=e.readQuery({query:nt,variables:{limit:100}});n.allSeries.seriesSummaries=n.allSeries.seriesSummaries.filter(function(e){return e.id!==a.deleteSeries}),e.writeQuery({query:nt,data:n})}catch(o){}}})}}}}),An=Object(qe.c)(dt,{props:function(e){var t=e.mutate,a=e.ownProps;return{deletePhotoMutation:function(e){return t({variables:{seriesId:a.series.id,photoId:e},optimisticResponse:{deletePhoto:e},update:function(e,t){var n=t.data;console.log("deletePhotoMutation start Manip:",JSON.stringify(n,null,2));var o,i=e.readQuery({query:it,variables:{id:a.activeSeries}});i.series.photos=i.series.photos.filter(function(e){return e.id!==n.deletePhoto}),o=i.series.photos.length,i.series.photoCount=o,e.writeQuery({query:it,data:i}),console.log("deletePhotoMutation start Manip WRITE:",i);try{var r=e.readQuery({query:nt,variables:{limit:100}});console.log("deletePhotoMutation qdataAll:",r),r.allSeries.seriesSummaries=r.allSeries.seriesSummaries.map(function(e){return e.id!==n.deletePhoto?e:Object(We.a)({},e,{photoCount:null!==o?o:e.photoCount})}),e.writeQuery({query:nt,data:r}),console.log("deletePhotoMutation qdataAll WRITE:",r)}catch(l){}console.log("Done Manip:",i.series.photos)}})}}}}),_n=Object(qe.c)(yt,{props:function(e){var t=e.mutate;e.ownProps;return{createSeriesMutation:function(e){return t({variables:{series:Dn(e,["name","note","latitude","longitude","direction","meta"])},optimisticResponse:{createSeries:{id:Cn("SERIES"),name:e.name||null,note:e.note||null,meta:e.meta||{},featured:e.featured||null,latitude:e.latitude||null,longitude:e.longitude||null,direction:e.direction||null,photoCount:0,photos:[],__typename:"Series"}},update:function(e,t){var a=t.data;console.log("STARTING TO CREATE THE SERIES",a,e);try{e.writeQuery({query:it,data:{series:a.createSeries}}),console.log("Series write getWholeSeries",{series:a.createSeries})}catch(i){console.error(i)}try{var n=e.readQuery({query:nt,variables:{limit:100}}),o=Dn(a.createSeries,["id","name","updatedOn","featured","longitude","latitude","photoCount","seriesStatus","direction"]);n.allSeries.seriesSummaries.push(o),e.writeQuery({query:nt,data:n})}catch(i){console.error("createSeriesMutation allSeries error"),console.error(i)}}})}}}}),zn=Object(qe.c)(bt,{props:function(e){var t=e.mutate,a=e.ownProps;return{createPhotoMutation:function(e,n){e.base64;var o=Object(Ge.a)(e,["base64"]);return!o.seriesId&&a.activeSeries&&(o.seriesId=a.activeSeries),t({variables:{photo:Dn(o,["seriesId","takenOn","meta","tags","note"]),ext:n},optimisticResponse:{createPhoto:{photo:{id:Cn("PHOTO"),meta:o.meta,seriesId:o.seriesId,createdOn:Date.now().toString(),createdUser:{id:a.authData.attributes.sub,username:a.authData.Username},updatedBy:a.authData.attributes.sub,updatedOn:Date.now().toString(),takenOn:o.takenOn,tags:o.tags||[],paths:{large:null,orig:null,thumb:null,medium:null,__typename:"Paths"},__typename:"Photo"},preAuth:null,__typename:"NewPhotoOutput"}},update:function(e,t){var n=t.data;console.log("createPhotoMutation store.readQuery:",{data:n,store:e,ownProps:a});try{var o=e.readQuery({query:it,variables:{id:n.createPhoto.seriesId}});o.series.photos=o.series.photos=[].concat(Object($e.a)(o.series.photos),[n.createPhoto]),e.writeQuery({query:it,data:o})}catch(r){}var i=null;try{i=e.readQuery({query:nt,variables:{limit:100}}),console.log("createPhotoMutation qdataAll:",i),i.allSeries.seriesSummaries=i.allSeries.seriesSummaries.map(function(e){return e.id!==n.createPhoto.photo.seriesId?e:Object(We.a)({},e,{photoCount:e.photoCount+1})}),e.writeQuery({query:nt,data:i}),console.log("createPhotoMutation qdataAll: WRITE",i)}catch(r){console.error("createPhotoMutation allSeries ERROR"),console.error(r)}}})}}}}),Ln=Object(qe.b)(Nn,_n,zn,In,Pn,Tn,An)(function(e){var t=e.series,a=e.loading,i=e.currentState,r=(e.activeSeries,e.onAfterSeriesDelete),l=e.onBack,s=e.queueUpload,c=e.doneCreatingSeries,u=e.createSeriesMutation,p=e.createPhotoMutation,d=e.updateSeriesMutation,m=e.updatePhotoMutation,h=e.deleteSeriesMutation,g=e.deletePhotoMutation,b=Object(n.useContext)(X),y=b.role,f=b.currentUser,v="camera";if(i===V.e.AppStateTypes.SERIES){if(!t&&!a)return"No series...";if(a)return"Loading..."}else i===V.e.AppStateTypes.NEW_SERIES_CAMERA?v="camera":i===V.e.AppStateTypes.NEW_SERIES_LIBRARY&&(v="library");return o.a.createElement(On,{modeName:i!==V.e.AppStateTypes.SERIES?"newseries":"series",inputMethod:v,currentUserId:f.attributes.sub,currentUserRole:y,accessControl:Ye,series:t,seriesConfig:{meta:{},tags:[{id:"freeBothType",label:null,color:V.c.tagColors[0],allowXY:!0,allowNonXY:!0,allowAdditions:!0,getValues:function(){return Promise.resolve(["a","b","c"])},values:[]}],getPhotoUrl:function(e,t){return Promise.resolve("".concat(V.d.cdn,"/").concat(e.paths[t]))}},onNewPhoto:function(e){var t=e.base64,a=Object(Ge.a)(e,["base64"]);console.log("onNewPhoto",Object(We.a)({base64:t},a));var n=t.split(";")[0].split("/")[1];return p(a,n).then(function(e){var n=e.data;if(n.createPhoto.preAuth){var o=JSON.parse(n.createPhoto.preAuth);console.log("PREAUTH",n.createPhoto.preAuth),s({id:a.id,seriesId:n.createPhoto.seriesId,base64:t,preAuth:o})}return n}).catch(function(e){console.log("onNewPhoto Graphql Error",e.stack),console.error(e)})},onChangePhoto:function(e,t){return m(e,t).catch(function(e){console.log("onChangePhoto Graphql Error",e.stack),console.error(e)})},onDeletePhoto:function(e){return g(e.id).then(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];console.log("photo deleted",t)}).catch(function(e){console.log("onDeletePhoto Graphql Error",e.stack),console.error(e)})},onChange:function(e,t){return d(e,t).catch(function(e){console.log("onChange Graphql Error",e.stack),console.error(e)})},onNewSeries:function(e,t){return console.log("Series.connect: onNewSeries starting",e),u(e).then(function(){var e=Object(_e.a)(Ae.a.mark(function e(a){var n,o,i,r,l,u,d;return Ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.data,o=t.base64,i=Object(Ge.a)(t,["base64"]),r=o.split(";")[0].split("/")[1],console.log("Series.connect: done createSeriesMutation",n),e.next=6,p(Object(We.a)({},t,{seriesId:n.createSeries.id}),r);case 6:return l=e.sent,u=l.data,d=JSON.parse(u.createPhoto.preAuth),console.log("PREAUTH",u.createPhoto.preAuth),s({id:i.id,seriesId:u.createPhoto.seriesId,base64:o,preAuth:d}),c(n.createSeries.id),e.abrupt("return",n);case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){console.log("onNewSeries Graphql Error",e.stack),console.error(e)})},onDelete:function(){return h().then(r).catch(function(e){console.log("onDelete Graphql Error",e.stack),console.error(e)})},onClose:l})}),Rn=Object(ne.b)(function(e,t){var a=e.home;return{activeSeries:a.activeSeries,currentState:a.currentState}},function(e){return{onBack:function(){e(he())},onAfterSeriesDelete:function(t,a){e(ge(null)),e(he())},queueUpload:function(t){e(ve(t))},doneCreatingSeries:function(t){e(ge(t)),e(me(V.e.AppStateTypes.SERIES))}}})(Ln);function Dn(e,t){var a=[].concat(Object($e.a)(t),["__typename"]),n=Object.keys(e).filter(function(e){return a.indexOf(e)>-1});return console.log("sanitizeUpdateParams",{orig:Object.keys(e),remainder:n}),n.reduce(function(t,a){return Object(We.a)({},t,Object(Ue.a)({},a,e[a]))},{})}var Mn=a(70),Fn=a(178),Bn=a(174),Un=a(246),$n=a(6149),Wn=a(451),Gn=a.n(Wn),Yn=a(116),qn=function(e,t,a,o,i,r){var l=Object(n.useState)([]),s=Object(h.a)(l,2),c=s[0],u=s[1],p=Object(n.useState)(0),d=Object(h.a)(p,2),m=d[0],g=d[1];return Object(n.useEffect)(function(){u(Hn(e,i,o)),g(m+1)},[e.length,r]),{filteredClusteredData:Object(n.useMemo)(function(){return function(e,t,a){return e.filter(function(e){return!!e[a]}).reduce(function(e,n){var o=n[a],i=o.geometry.coordinates,r=o.properties.count;return(!t||t.length<4||t[0]<i[0]&&t[1]<i[1]&&t[2]>i[0]&&t[3]>i[1])&&(r>1?e.cluster.push(o):e.single.push(o)),e},{single:[],cluster:[]})}(c,t,a)},[c.length,a,t,m])}},Hn=function(e,t,a){if(!e)return[];var n=Gn()(9,[".x",".y",".x",".y"]),o=new $n.a(Object(We.a)({},a,{zoom:0})),i=e.map(function(e){var t=[0,0];try{t=o.project([e.longitude,e.latitude])}catch(n){console.error(n)}e.longitude,e.latitude;var a=Object(Ge.a)(e,["longitude","latitude"]);return{x:t[0],y:t[1],photoCount:a.photoCount,zoomLevels:[],geoJSON:Object(Yn.point)([e.longitude,e.latitude],Object(We.a)({},a))}});n.clear(),n.load(i);for(var r=function(e){var a=t/Math.sqrt(2)/Math.pow(2,e);i.forEach(function(t){if(void 0===t.zoomLevels[e]){var o=t.x,i=t.y,r=n.search({minX:o-a,minY:i-a,maxX:o+a,maxY:i+a}).filter(function(t){return void 0===t.zoomLevels[e]});r.forEach(function(a){if(a===t){var n=1===r.length?t.geoJSON:Object(Yn.centroid)(Object(Yn.featureCollection)(r.map(function(e){return e.geoJSON})));n.properties=Object(We.a)({},n.properties,{id:n.properties.id||jn()(),count:r.length,reducedPhotoCount:r.reduce(function(e,t){var a=t.photoCount;return a?e+a:e},0),points:r.map(function(e){return e.geoJSON})}),t.zoomLevels[e]=n}else a.zoomLevels[e]=null})}})},l=0;l<=20;l++)r(l);return i.map(function(e){return e.zoomLevels})};var Xn=a(145),Vn=a.n(Xn),Qn=a(80),Jn=a.n(Qn),Zn=a(148),Kn=a.n(Zn),eo=Object(m.withStyles)(function(e){return{root:{},img:{maxWidth:"100%"},imgContainer:{width:100}}})(function(e){var t=e.classes,a=e.series,n=e.loading,i=e.onClose,r=e.onClick;e.onZoomTo;if(n||!a)return"LOADING...";var l=null,s=V.a.PRIVATE.label;try{l="".concat(V.d.cdn,"/").concat(a.featured.paths.thumb),s=a.access?V.a[a.access].label:V.a.PRIVATE.label}catch(c){}return o.a.createElement(N.a,{disablePadding:!0,dense:!0},o.a.createElement(P.a,{className:t.root,button:!0},o.a.createElement("div",{className:t.imgContainer,onClick:r},o.a.createElement("img",{alt:"thumbnail",src:l,className:t.img})),o.a.createElement(z.a,{disableTypography:!0,onClick:r},o.a.createElement(Ce.a,{variant:"body2"},a.name||n),o.a.createElement(Ce.a,{variant:"caption"},s," Series ",o.a.createElement("strong",null,"by:")," ",a.createdUser.username),o.a.createElement(Ce.a,{variant:"caption"},"".concat(a.photoCount||0," Photos"))),o.a.createElement(Kn.a,null,o.a.createElement(j.a,{"aria-label":"Close",onClick:i},o.a.createElement(Jn.a,null)))))}),to=a(230),ao=a.n(to),no=Object(m.withStyles)(function(e){return{root:{}}})(function(e){var t=e.classes,a=e.seriesCount,n=e.reducedPhotoCount,i=e.onZoomTo,r=e.onClose;return console.log("cluster selected",{seriesCount:a,reducedPhotoCount:n}),o.a.createElement(N.a,null,o.a.createElement(P.a,{className:t.root},o.a.createElement(Bt.a,{onClick:i},o.a.createElement(ao.a,null)),o.a.createElement(z.a,{onClick:i,primary:"".concat(a," Photo series"),secondary:"containing ".concat(n," individual photo").concat(1===n?"":"s")}),o.a.createElement(Kn.a,null,o.a.createElement(j.a,{"aria-label":"Close",onClick:r},o.a.createElement(Jn.a,null)))))}),oo=a(109),io=a.n(oo),ro=a(231),lo=a.n(ro),so=Object(m.withStyles)(function(e){return{root:{color:e.palette.primary.main,width:150,position:"absolute",top:"50%",left:"50%",textAlign:"center",transformOrigin:"50% 50%",transform:"translateY(-50%) translateX(-50%)"},rootActive:{zIndex:1e3},icon:{},avatar:{position:"relative",margin:"0 auto",background:"green",color:"white",border:"2px solid white",height:40,width:40,zIndex:120,"&.PUBLIC":{background:V.a.PUBLIC.color},"&.PRIVATE":{background:V.a.PRIVATE.color},"&.OPEN":{background:V.a.OPEN.color}},avatarActive:{background:"#FFFF00",color:"black",border:"2px solid black","&.PUBLIC":{background:"#FFFF00"},"&.PRIVATE":{background:"#FFFF00"},"&.OPEN":{background:"#FFFF00"}},badge:{zIndex:124,color:e.palette.secondary.contrastText,background:e.palette.secondary.main,transform:"scale(1) translate(30%, -30%)"},badgeActive:{color:e.palette.primary.contrastText,background:e.palette.primary.main},directionIndicator:{position:"absolute",top:20,left:"50%",zIndex:100},name:{color:"white",fontWeight:"bold",textShadow:"\n        0px 0px 4px #000000, \n        0px 0px 4px #000000 \n    ",zIndex:122,position:"relative"},nameActive:{color:"black",textShadow:"\n    0px 0px 2px #FFFFFF, \n    0px 0px 2px #FFFFFF,\n    0px 0px 4px #FFFFFF \n"}}})(function(e){var t=e.classes,a=e.name,n=e.access,i=e.onClick,r=e.active,l=e.photoCount,s=e.direction;return o.a.createElement("div",{className:At()(t.root,r?t.rootActive:null,n)},o.a.createElement(aa.a,{classes:{badge:At()(t.badge,r?t.badgeActive:null,n)},badgeContent:l},o.a.createElement(io.a,{className:At()(t.avatar,r?t.avatarActive:null,n),onClick:i},o.a.createElement(lo.a,{className:t.icon,color:"inherit"}))),s&&s>=0?o.a.createElement("div",{className:t.directionIndicator},o.a.createElement("svg",{className:t.svgArc,version:"1.1",width:"100",height:"100",viewBox:"0, 0, 100, 100",style:{transform:"translateY(-50%) translateX(-50%) rotateZ(".concat(s,"deg)")}},o.a.createElement("path",{d:"M50,0 C60.946,0.151 72.136,3.514 80.675,10.56 L50,50 L19.325,10.56 C27.938,3.461 39,0.278 50,0 z",fill:"#009DC1",fillOpacity:"0.444",strokeWidth:"0.5",strokeOpacity:"0.6",stroke:"#FFFFFF"}))):null,o.a.createElement(Ce.a,{variant:"body1",className:At()(t.name,r?t.nameActive:null)},a))}),co=a(242),uo=a.n(co),po=Object(m.withStyles)(function(e){return{avatar:{background:e.palette.primary.dark,border:"2px solid ".concat(e.palette.primary.contrastText),color:e.palette.primary.contrastText},avatarActive:{background:"#FFFF00",border:"2px solid black",color:"black",zIndex:1e3}}})(function(e){var t=e.classes,a=e.seriesCount,n=e.active,i=e.onClick;return o.a.createElement(io.a,{onClick:i,className:At()(t.avatar,n?t.avatarActive:null)},uo()(a).format("0,0"))}),mo={zoom:12,latitude:44.629701,longitude:-120.333379},ho=Object(m.withStyles)(function(e){return{root:{height:"100%","& .myPosMarker":{zIndex:1},"& .singleMarker":{zIndex:3},"& .clusterMarker":{zIndex:2}},fab:{background:e.palette.secondary.main,color:e.palette.secondary.contrastText},zoomOutFab:{margin:e.spacing.unit/2,padding:e.spacing.unit/2,border:"2px solid",borderRadius:e.spacing.unit,background:e.palette.common.white,fontSize:20,position:"absolute",zIndex:100,bottom:2*e.spacing.unit,right:10*e.spacing.unit},svgDot:{zIndex:3}}})(function(e){var t=e.classes,a=e.seriesList,i=e.viewportSave,r=e.loading,l=e.activeSeries,s=e.queryVersion,c=e.onCameraClick,u=e.onLibraryClick,p=e.setActiveSeries,d=e.onSeriesClick,m=(e.popMapHistory,e.pushMapHistory),g=(e.clearMapHistory,Object(n.useState)({viewport:Object(We.a)({},mo,i.viewport),filterBounds:null})),b=Object(h.a)(g,2),y=b[0],f=b[1],v=Object(n.useState)(!1),x=Object(h.a)(v,2),E=(x[0],x[1]),O=Object(n.useRef)(),S=Object(n.useRef)(),k=Object(n.useState)(0),j=Object(h.a)(k,2),C=j[0],N=j[1],I=Object(n.useState)(null),P=Object(h.a)(I,2),T=P[0],A=P[1],_=qn(a||[],y.filterBounds,C,y.viewport,80,s).filteredClusteredData,z=Object(n.useState)(),L=Object(h.a)(z,2),R=L[0],D=L[1];Object(n.useEffect)(function(){if(l&&!R)try{var e=_.single.find(function(e){return e.properties.id===l});S.current&&D(e)}catch(t){console.error(t)}},[l,_.single]);var M=function(e){D(e),e&&e.properties&&1===e.properties.count&&p(e.properties.id),setTimeout(function(){return m(Object(We.a)({},i,{viewport:O.current?O.current:y.viewport}))},2e3)},F=function(e){try{var t=Object(Yn.featureCollection)(e.properties.points),a=Object(Yn.buffer)(t,10,{units:"meters"}),n=Object(Yn.bbox)(a),o=.2*(n[2]-n[0]),i=.2*(n[3]-n[1]),r=[n[0]-o,n[1]-i,n[2]+o,n[3]+i];A({transitionDuration:2e3,transitionInterpolator:new Mn.a,transitionEasing:Fn.a}),f(Object(We.a)({},y,{bounds:r})),e.properties.count>1&&setTimeout(function(){return M(null)},2e3)}catch(l){console.error(l)}},B=function(e){R&&R.properties.id===e.properties.id?F(R):(A({transitionDuration:500,transitionInterpolator:new Mn.b,transitionEasing:Fn.a}),f({viewport:{longitude:e.geometry.coordinates[0],latitude:e.geometry.coordinates[1]}})),M(e)},U=Object(n.useMemo)(function(){return[].concat(Object($e.a)(_.single.map(function(e){return o.a.createElement(Mn.c,{className:"singleMarker",key:"single-".concat(e.properties.id),latitude:e.geometry.coordinates[1],longitude:e.geometry.coordinates[0],offsetLeft:0,offsetTop:-20},o.a.createElement(so,{name:e.properties.name,access:e.properties.access,photoCount:e.properties.photoCount,onClick:function(){return B(e)},direction:C>10&&e.properties.direction?e.properties.direction:null,active:R&&R.properties.id===e.properties.id}))})),Object($e.a)(_.cluster.map(function(e){return o.a.createElement(Mn.c,{className:"clusterMarker",key:"cluster-".concat(e.properties.id),latitude:e.geometry.coordinates[1],longitude:e.geometry.coordinates[0],offsetLeft:-20,offsetTop:-20},o.a.createElement(po,{seriesCount:e.properties.count,photoCount:e.properties.reducedPhotoCount,onClick:function(){return B(e)},active:R&&R.properties.id===e.properties.id&&R.properties.count===e.properties.count}))})))},[_,R]);return o.a.createElement("div",{className:t.root,ref:S},o.a.createElement(Un.a,Object.assign({showMe:!0,viewport:y.viewport,transitions:T,mapStyles:Bn.a,controlPadding:{top:56},initStyle:Bn.a.length>1?1:0},{},{onTransitionStart:function(){E(!0)},onTransitionEnd:function(){E(!1),A(null),console.log("handletransitionEnd")},bounds:y.bounds,maxZoom:20,minZoom:1,onViewportChange:function(e){var t=e.viewport,a=e.map;O.current=t;var n=Math.floor(t.zoom);if(a&&a.getBounds){var o=a.getBounds(),i=o._sw,r=i.lng,l=i.lat,s=o._ne,c=s.lng,u=s.lat,p=y.filterBounds||[r,l,c,u],d=Object(h.a)(p,4),m=d[0],g=d[1],b=d[2],v=d[3];if(n!==C||m>=r||g>=l||b<=c||v<=u){var w=[r-(c-r)/2,l-(u-l)/2,c+(c-r)/2,u+(u-l)/2];f(Object(We.a)({},y,{filterBounds:w}))}}n!==C&&N(n)},onNativeClick:function(){R&&M(null)}}),U),!R&&o.a.createElement(Ft,{className:t.fab,onCameraClick:c,onLibraryClick:u},o.a.createElement(Vn.a,null)),o.a.createElement(w.a,{anchor:"bottom",variant:"permanent",open:!!R,onClose:function(){console.log("onClose",R)}},!!R&&o.a.createElement("div",{tabIndex:0,role:"button"},1===R.properties.count?o.a.createElement(eo,{loading:r.selectedSeries,series:R.properties,onClose:function(){return M(null)},onZoomTo:function(){return F(R)},onClick:function(){return d(R.properties.id)}}):o.a.createElement(no,{seriesCount:R.properties.count,reducedPhotoCount:R.properties.reducedPhotoCount,onClose:function(){return M(null)},onZoomTo:function(){return F(R)}}))))}),go=5,bo=Object(qe.c)(nt,{props:function(e){var t=e.data,a=e.ownProps;return!t.loading&&!t.error&&t.allSeries&&t.allSeries.seriesSummaries.length>0&&t.allSeries.nextToken?t.fetchMore({variables:Object(We.a)({},t.variables,{nextToken:t.allSeries.nextToken}),updateQuery:function(e,t){var a=t.fetchMoreResult;return{allSeries:Object(We.a)({},a.allSeries,{seriesSummaries:[].concat(Object($e.a)(e.allSeries.seriesSummaries),Object($e.a)(a.allSeries.seriesSummaries))})}}}):t.loading||t.error?a.setSeriesProps(t):a.setSeriesProps(Object(We.a)({},t,{readyForPolling:!0})),null},options:{variables:{limit:100}}}),yo=Object(qe.c)(ot,{skip:function(e){return!e.lastCheck},props:function(e){var t=e.data,a=e.ownProps,n=a.seriesProps,o=a.updateIncrement;if(t.error&&(console.log("POLL FAIL",t.error,t),console.error(t.error)),!t.loading&&t.changedSeries&&t.changedSeries.seriesSummaries){var i=t.changedSeries.seriesSummaries,r=n.allSeries.seriesSummaries;if(t.changedSeries){var l=n.allSeries.seriesSummaries;i.forEach(function(e){var t=e.seriesStatus,a=Object(Ge.a)(e,["seriesStatus"]);if("deleted"===t)console.log("Polling found a series to delete: ",a.id),l=r.filter(function(e){return e.id!==a.id});else{var i=r.findIndex(function(e){return e.id===a.id});i>=0?(console.log("Polling found a series to Update: ",a.id),l=r.map(function(e,t){return t===i?a:e})):(console.log("Polling found a series to add: ",a.id),l=[].concat(Object($e.a)(r),[a]))}n.updateQuery(function(e,t){try{return Object(We.a)({},e).allSeries.seriesSummaries=l,o(),e}catch(a){return console.error(a),e}})})}}return null},options:function(e){return{variables:{limit:100,lastCheck:e.lastCheck}}}}),fo=bo(function(){return null}),vo=yo(function(){return null}),wo=Object(ne.b)(function(e,t){return{activeSeries:e.home.activeSeries,viewportSave:e.map.slice(-1).pop()}},function(e){return{mapFuncs:{setActiveSeries:function(t){e(ge(t))},onSeriesClick:function(){e(me(V.e.AppStateTypes.SERIES))},onCameraClick:function(){e(me(V.e.AppStateTypes.NEW_SERIES_CAMERA)),e(ge(null))},onLibraryClick:function(){e(me(V.e.AppStateTypes.NEW_SERIES_LIBRARY)),e(ge(null))},popMapHistory:function(){e(be())},pushMapHistory:function(t){e(ye(t))},clearMapHistory:function(){e(fe())}}}})(function(e){var t=e.viewportSave,a=e.activeSeries,i=e.mapFuncs,r=Object(n.useState)(),l=Object(h.a)(r,2),s=l[0],c=l[1],u=Object(n.useState)(0),p=Object(h.a)(u,2),d=p[0],m=p[1],g=function(){return m(d+1)},b=Object(n.useRef)(),y=Object(n.useState)(null),f=Object(h.a)(y,2),v=f[0],w=f[1];b.current=v;var x=Object(n.useMemo)(function(){return o.a.createElement(fo,{setSeriesProps:c})},[]),E=Object(n.useMemo)(function(){return o.a.createElement(vo,{lastCheck:v,seriesProps:s,updateIncrement:g})},[v]);return Object(n.useEffect)(function(){if(s)return!b.current&&s.readyForPolling&&(b.current=setInterval(function(){b.current&&w(String(Date.now()-1e3*go))},1e3*go)),function(){b.current&&(console.log("clear poll timer"),clearInterval(b.current),b.current=null)}},[s]),o.a.createElement(o.a.Fragment,null,x,E,o.a.createElement(ho,Object.assign({queryVersion:d,seriesList:s&&s.allSeries?s.allSeries.seriesSummaries:[],activeSeries:a,viewportSave:t,loading:{}},i)))}),xo=a(458),Eo=a(452),Oo=a(52),So=a(6152),ko=a(6150),jo="apollo-token";var Co=a(310),No=a(455),Io=a.n(No);Object(Co.b)(Io.a);o.a.createContext({});var Po=function(e){var t=e.children;return o.a.createElement(Co.a,{locale:"en"},t)},To=a(119),Ao=a(118),_o=a(120),zo=a(311),Lo=a.n(zo),Ro=a(13),Do=a(303),Mo=a.n(Do),Fo=a(90),Bo=a(36),Uo=a.n(Bo),$o=a(113),Wo=a.n($o),Go=function(e){return{root:{},spacer:{flexGrow:1},forgotPassword:{width:"100%",textAlign:"right"},switch:{},switchButton:{flexGrow:1,"&:last-child":{borderRadius:0},"&:first-child":{borderRadius:0}},phoneNumInner:{marginTop:e.spacing.unit,display:"flex"},phoneNumDropdown:{margin:e.spacing.unit,minWidth:120}}},Yo=function(){var e=Object(n.useRef)(),t=function(t){if("Enter"===t.key&&e.current)try{var a=e.current.getElementsByClassName("enterAction");a&&a[0]&&a[0].click()}catch(n){console.error("useAuthCommon::handleKeyPress",n)}};return Object(n.useEffect)(function(){if(e.current){try{document.addEventListener("keypress",t,!1)}catch(a){console.error("useAuthCommon::useEffect",a)}return function(){return document.removeEventListener("keypress",t,!1)}}},[]),e},qo=Object(m.withStyles)(function(e){return{root:{height:"100%"},bgSwoosh:{width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:0},inner:{width:"100%",minWidth:200,maxWidth:300,position:"absolute",zIndex:2,textAlign:"center",top:"50%",left:"50%",transformOrigin:"50% 50%",transform:"translateY(-50%) translateX(-50%)"},bgSwooshFill:{fill:e.palette.primary.light}}})(function(e){var t=e.classes,a=e.children,n=Yo();return o.a.createElement("div",{ref:n,className:t.root},o.a.createElement(s.a,null),o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 500 500",preserveAspectRatio:"none",className:t.bgSwoosh},o.a.createElement("path",{className:t.bgSwooshFill,d:" M 0 0 L 500 0 C 500 209.782 489.956 180 250 180 C 10.044 180 0 219.954 0 370 L 0 0 Z "})),o.a.createElement("div",{className:t.inner},o.a.createElement("img",{alt:"logo",src:"".concat("/photomon_v0","/icons/Logo.svg")}),o.a.createElement(Ce.a,{variant:"h5"},"App Name Here"),a))}),Ho=Object(m.withStyles)(Go)(function(e){var t=e.classes,a=e.loading,n=(e.signIn,e.handleSignup),i=(e.federated,e.handleForgotPassword),r=e.handleInputChange,l=e.handleSignIn;Object(Ge.a)(e,["classes","loading","signIn","handleSignup","federated","handleForgotPassword","handleInputChange","handleSignIn"]);return o.a.createElement(qo,null,o.a.createElement(Uo.a,{id:"username",fullWidth:!0,key:"username",name:"username",label:"Username",autoFocus:!0,className:t.textField,margin:"normal",onChange:r}),o.a.createElement(Uo.a,{fullWidth:!0,id:"password",label:"Password",key:"password",name:"password",type:"password",className:t.textField,autoComplete:"current-password",margin:"normal",onChange:r}),o.a.createElement(Wo.a,{component:"button",variant:"body2",className:t.forgotPassword,disabled:a,onClick:i},"Forgot Password"),o.a.createElement(b.a,{disableGutters:!0},o.a.createElement(Ta.a,{component:"button",color:"secondary",variant:"contained",disabled:a,onClick:n},"New Account"),o.a.createElement("div",{className:t.spacer}),o.a.createElement(Ta.a,{className:"enterAction",component:"button",color:"primary",variant:"contained",disabled:a,onClick:l},"Sign In")))}),Xo=Object(m.withStyles)(Go)(function(e){var t=e.classes,a=e.handleInputChange,n=e.handleBack,i=e.handleConfirm;return o.a.createElement(qo,null,o.a.createElement(Uo.a,{id:"mfaCode",fullWidth:!0,autoFocus:!0,label:"MFA Code",name:"code",className:t.textField,margin:"normal",onChange:a}),o.a.createElement(b.a,{disableGutters:!0},o.a.createElement(Ta.a,{color:"secondary",variant:"contained",onClick:n},"Back"),o.a.createElement("div",{className:t.spacer}),o.a.createElement(Ta.a,{className:"enterAction",color:"primary",variant:"contained",onClick:i},"Confirm")))}),Vo=Object(m.withStyles)(Go)(function(e){var t=e.classes,a=e.change,n=e.requiredAttributes,i=e.placeholders,r=e.handleInputChange;return o.a.createElement(qo,null,o.a.createElement(Ce.a,null,"A new password is required"),o.a.createElement(Uo.a,{id:"newassword",fullWidth:!0,autoFocus:!0,label:"New Password",className:t.textField,type:"password",autoComplete:"new-password",margin:"normal",onChange:r}),n.map(function(e,a){return o.a.createElement(Uo.a,{fullWidth:!0,key:e,name:e,className:t.textField,placeholder:i[a],type:"text",margin:"normal",onChange:r})}),o.a.createElement(b.a,{disableGutters:!0},o.a.createElement(Ta.a,{color:"secondary",variant:"contained"},"Back"),o.a.createElement("div",{className:t.spacer}),o.a.createElement(Ta.a,{color:"primary",variant:"contained",onClick:a,className:"enterAction"},"Change")))}),Qo=a(168),Jo=a.n(Qo),Zo=a(167),Ko=a.n(Zo),ei=a(169),ti=a.n(ei),ai=Object(m.withStyles)(Go)(function(e){var t=e.classes,a=e.handleInputChange,i=e.signUpFields,r=e.signUpFieldLabels,l=e.signUpFieldPlaceholders,s=e.handleSignup,c=e.handleBack,u=e.countryDialCodes,p=e.defaultDialCode;console.log("SIGNUPPROPS",{defaultDialCode:p,countryDialCodes:u,signUpFields:i,signUpFieldLabels:r,signUpFieldPlaceholders:l});var d=Object(n.useState)(p),m=Object(h.a)(d,2),g=m[0],y=m[1],f=function(e){a(e),y(e.target.value)};return o.a.createElement(qo,null,i.map(function(e,n){return"phone_number"!==e.key?o.a.createElement(Uo.a,{fullWidth:!0,autoFocus:0===i.findIndex(function(t){return t.key===e.key}),type:e.type,name:e.key,key:e.key,placeholder:l[n],label:r[n],className:t.textField,margin:"normal",onChange:a}):o.a.createElement(Jo.a,{className:t.phoneNumDropdown,fullWidth:!0,key:"phonenum"},o.a.createElement(Ko.a,{htmlFor:"dial_code",shrink:!0},r[n],e.required?"*":""),o.a.createElement("div",{className:t.phoneNumInner},o.a.createElement(ti.a,{value:g,onChange:f,inputProps:{name:"dial_code",id:"dial_code"}},u.map(function(e){return o.a.createElement("option",{key:e,value:e},e)})),o.a.createElement(Uo.a,{placeholder:l[n],type:"tel",fullWidth:!0,id:"phone_line_number",key:"phone_line_number",name:"phone_line_number",onChange:a})))}),o.a.createElement(b.a,{disableGutters:!0},o.a.createElement(Ta.a,{color:"secondary",variant:"outlined",onClick:c},"Back"),o.a.createElement("div",{className:t.spacer}),o.a.createElement(Ta.a,{className:"enterAction",component:"button",color:"primary",variant:"contained",onClick:s},"Create Account")))}),ni=Object(m.withStyles)(Go)(function(e){e.classes;return o.a.createElement(qo,null,o.a.createElement(Bt.e,{variant:"h3"},"Loading..."))}),oi=Object(m.withStyles)(Go)(function(e){var t=e.classes,a=e.handleInputChange,n=e.handleBack,i=e.handleResend,r=e.handleConfirm;return o.a.createElement(qo,null,o.a.createElement(Uo.a,{id:"username",fullWidth:!0,autoFocus:!0,name:"username",label:"Username",className:t.textField,margin:"normal",onChange:a}),o.a.createElement(Uo.a,{id:"confirmationCode",fullWidth:!0,name:"code",label:"Confirmation Code",className:t.textField,margin:"normal",onChange:a}),o.a.createElement(Wo.a,{component:"button",variant:"body2",className:t.resendCode,onClick:i},"Resend Code"),o.a.createElement(b.a,{disableGutters:!0},o.a.createElement(Ta.a,{color:"secondary",variant:"outlined",onClick:n},"Back"),o.a.createElement("div",{className:t.spacer}),o.a.createElement(Ta.a,{color:"primary",variant:"contained",className:"enterAction",onClick:r},"Sign In")))}),ii=Object(m.withStyles)(Go)(function(e){var t=e.classes,a=e.handleSubmit,i=e.handleInputChange,r=e.handleSendCode,l=e.handleBack,s=Object(n.useState)(!1),c=Object(h.a)(s,2),u=c[0],p=c[1];return o.a.createElement(qo,null,o.a.createElement(Ce.a,null,"Forgot Password"),!u&&o.a.createElement(Uo.a,{id:"username",autoFocus:!0,fullWidth:!0,label:"Username",name:"username",className:t.textField,margin:"normal",onChange:i}),u&&o.a.createElement(Uo.a,{id:"changecode",fullWidth:!0,autoFocus:!0,label:"Code",name:"code",className:t.textField,margin:"normal",onChange:i}),u&&o.a.createElement(Uo.a,{id:"newpassword",fullWidth:!0,label:"New Password",className:t.textField,type:"password",name:"password",autoComplete:"current-password",margin:"normal",onChange:i}),u&&o.a.createElement(Wo.a,{component:"button",variant:"body2",className:t.resendCode,onClick:r},"Resend Code"),o.a.createElement(b.a,{disableGutters:!0},o.a.createElement(Ta.a,{color:"secondary",variant:"outlined",onClick:function(){u?p(!1):l()}},"Back"),o.a.createElement("div",{className:t.spacer}),!u&&o.a.createElement(Ta.a,{color:"primary",variant:"contained",className:"enterAction",onClick:function(){p(!0),r()}},"Send Code"),u&&o.a.createElement(Ta.a,{className:"enterAction",color:"primary",variant:"contained",onClick:a},"Submit")))});Lo.a.configure(V.b);var ri=function(){var e=Object(n.useState)({authState:"init",authData:{}}),t=Object(h.a)(e,2),a=t[0],i=a.authState,r=a.authData,l=t[1],s="signedIn"===i,c=s?null:o.a.createElement(Fo.Authenticator,{onStateChange:function(e,t){l({authState:e,authData:t})},hideDefault:!0},o.a.createElement(li,null),o.a.createElement(di,null),o.a.createElement(pi,null),o.a.createElement(ci,null),o.a.createElement(ui,null),o.a.createElement(Fo.VerifyContact,null),o.a.createElement(mi,null),o.a.createElement(si,null)),u=null;try{s&&(u=r.signInUserSession.accessToken.jwtToken)}catch(d){console.error(d)}var p=!1;try{p=r.signInUserSession.idToken.payload["cognito:groups"].indexOf("GodUsers")>-1}catch(d){}return{authState:i,authData:r,isGod:p,signOut:function(){return zo.Auth.signOut().then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})},signedIn:s,accessToken:u,authScreen:c}},li=function(e){function t(){return Object(cn.a)(this,t),Object(To.a)(this,Object(Ao.a)(t).apply(this,arguments))}return Object(_o.a)(t,e),Object(un.a)(t,[{key:"showComponent",value:function(){var e=this,t=this.state.loading,a=Object(We.a)({},this.props,{loading:t,handleForgotPassword:function(){return e.changeState("forgotPassword")},handleSignup:function(){return e.changeState("signUp")},handleInputChange:this.handleInputChange,handleSignIn:this.signIn});return o.a.createElement(Ho,a)}}]),t}(Fo.SignIn),si=function(e){function t(){return Object(cn.a)(this,t),Object(To.a)(this,Object(Ao.a)(t).apply(this,arguments))}return Object(_o.a)(t,e),Object(un.a)(t,[{key:"showComponent",value:function(){var e=this,a=this.props.hide;if(a&&a.includes(t))return null;this.checkCustomSignUpFields()&&(this.signUpFields=this.props.signUpConfig.signUpFields),this.sortFields();var n=Object(We.a)({},this.props,{countryDialCodes:Mo.a,defaultDialCode:this.getDefaultDialCode(),handleInputChange:this.handleInputChange,signUpFields:this.signUpFields,signUpFieldLabels:this.signUpFields.map(function(e){return Ro.I18n.get(e.label)}),signUpFieldPlaceholders:this.signUpFields.map(function(e){return Ro.I18n.get(e.placeholder)}),handleSignup:this.signUp,handleBack:function(){return e.changeState("signIn")}});return o.a.createElement(ai,n)}}]),t}(Fo.SignUp),ci=function(e){function t(){return Object(cn.a)(this,t),Object(To.a)(this,Object(Ao.a)(t).apply(this,arguments))}return Object(_o.a)(t,e),Object(un.a)(t,[{key:"showComponent",value:function(){var e=this,t=Object(We.a)({},this.props,{handleBack:function(){return e.changeState("signIn")},handleInputChange:this.handleInputChange,handleConfirm:this.confirm});return o.a.createElement(Xo,t)}}]),t}(Fo.ConfirmSignIn),ui=function(e){function t(){return Object(cn.a)(this,t),Object(To.a)(this,Object(Ao.a)(t).apply(this,arguments))}return Object(_o.a)(t,e),Object(un.a)(t,[{key:"showComponent",value:function(){var e=this,t=Object(We.a)({},this.props,{handleBack:function(){return e.changeState("signIn")},handleInputChange:this.handleInputChange,handleConfirm:this.confirm,handleResend:this.resend});return o.a.createElement(oi,t)}}]),t}(Fo.ConfirmSignUp),pi=function(e){function t(){return Object(cn.a)(this,t),Object(To.a)(this,Object(Ao.a)(t).apply(this,arguments))}return Object(_o.a)(t,e),Object(un.a)(t,[{key:"showComponent",value:function(){var e=this.props.authData.challengeParam.requiredAttributes,t=Array.isArray(e)?e.map(function(e){return Ro.I18n.get(e.split("_").map(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}).join(" "))}):[],a=Object(We.a)({},this.props,{handleInputChange:this.handleInputChange,requiredAttributes:e,placeholders:t,change:this.change});return o.a.createElement(Vo,a)}}]),t}(Fo.RequireNewPassword),di=function(e){function t(){return Object(cn.a)(this,t),Object(To.a)(this,Object(Ao.a)(t).apply(this,arguments))}return Object(_o.a)(t,e),Object(un.a)(t,[{key:"showComponent",value:function(){return o.a.createElement(ni,this.props)}}]),t}(Fo.Loading),mi=function(e){function t(){return Object(cn.a)(this,t),Object(To.a)(this,Object(Ao.a)(t).apply(this,arguments))}return Object(_o.a)(t,e),Object(un.a)(t,[{key:"showComponent",value:function(){var e=this,t=Object(We.a)({},this.props,{handleBack:function(){return e.changeState("signIn")},handleInputChange:this.handleInputChange,handleConfirm:this.confirm,handleResend:this.send,handleSubmit:this.submit,handleSendCode:this.send});return o.a.createElement(ii,t)}}]),t}(Fo.ForgotPassword);new Ro.ConsoleLogger("VerifyContact");a(6141);var hi=Object(ne.b)(function(e,t){return{currentState:e.home.currentState}},function(e){return{setHomeState:function(t){e(me(t))}}})(function(e){var t=e.currentState,a=e.setHomeState,i=ri(),r=i.signedIn,l=i.isGod,c=i.authData,u=i.signOut,p=i.authScreen,d=i.accessToken,m=Object(n.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new So.a,a=Object(Eo.a)(function(t,a){var n=a.headers;return{headers:Object(We.a)({},n,{authorization:e?"Bearer ".concat(e):""})}}),n=Object(xo.a)({uri:V.d.graphql});return console.log("Creating Apollo Client Client",V.d.graphql,e?"TOKEN PROVIDED":"NO TOKEN"),new ko.a({link:Oo.a.from([a,n]),tokenName:jo,cache:t,connectToDevTools:!0})}(d)},[d]);if(!r)return p;var h={signOut:u,signedIn:r,role:l?"admin":"user",currentUser:c};return o.a.createElement(qe.a,{client:m},o.a.createElement(Po,null,o.a.createElement(X.Provider,{value:h},o.a.createElement(s.a,null)," ",o.a.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},o.a.createElement("div",{style:{flexGrow:1,overflow:"hidden"}},[V.e.AppStateTypes.MAP,V.e.AppStateTypes.LIST,V.e.AppStateTypes.USER].indexOf(t)>-1&&o.a.createElement(ae,{currentState:t,setHomeState:a},t===V.e.AppStateTypes.MAP&&o.a.createElement(wo,null),t===V.e.AppStateTypes.LIST&&o.a.createElement("div",null,"LIST"),t===V.e.AppStateTypes.USER&&o.a.createElement("div",null,"USER")),[V.e.AppStateTypes.SERIES,V.e.AppStateTypes.NEW_SERIES_CAMERA,V.e.AppStateTypes.NEW_SERIES_LIBRARY].indexOf(t)>-1&&o.a.createElement(Rn,{authData:c})),o.a.createElement("div",{style:{zIndex:2e3,flexGrow:0}},o.a.createElement(Be,null))))))}),gi=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function bi(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var yi,fi=a(88),vi=a(312),wi=[{mode:V.e.MapModeTypes.FREE,viewport:{latitude:36.80191008366581,longitude:-111.63999999999784,zoom:11}}],xi={stateHistory:[],currentState:V.e.AppStateTypes.MAP},Ei={store:[],activeUpload:null},Oi=Object(fi.combineReducers)({map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wi,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.data;switch(a){case ce:return e.length>0?[[e.length-1]]:[];case le:return e.slice(0,-1);case se:return[].concat(Object($e.a)(e),[n]);default:return e}},home:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xi,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.data,o=e.stateHistory,i=e.currentState;switch(a){case re:var r=Object($e.a)(o),l=r>0?r.pop():V.e.AppStateTypes.MAP;return Object(We.a)({},e,{stateHistory:r,currentState:l});case oe:var s=[].concat(Object($e.a)(o),[i]);return Object(We.a)({},e,{history:s,currentState:n});case ie:return Object(We.a)({},e,{activeSeries:n});default:return e}},uploader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ei,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.data,o=e.store,i=e.activeUpload;switch(a){case ue:return i?Object(We.a)({},e,{store:[].concat(Object($e.a)(o),[n])}):Object(We.a)({},e,{activeUpload:n});case pe:if(0===o.length)return Object(We.a)({},e,{activeUpload:null});var r=Object($e.a)(o),l=r.pop();return Object(We.a)({},e,{store:r,activeUpload:l});case de:return Object(We.a)({},e,{activeUpload:Object(We.a)({},i,n)});default:return e}}}),Si=function(e){return Object(fi.createStore)(Oi,e,Object(fi.applyMiddleware)(vi.a))};function ki(){document.querySelector(".ad2hs-prompt").style.display="none",yi.prompt(),yi.userChoice.then(function(e){"accepted"===e.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),yi=null})}a(6145),r.a.render(o.a.createElement(ne.a,{store:Si()},o.a.createElement(hi,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/photomon_v0",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/photomon_v0","/service-worker.js");gi?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):bi(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):bi(t,e)})}}(),window.addEventListener("beforeinstallprompt",function(e){e.preventDefault(),yi=e,function(){var e=document.querySelector(".ad2hs-prompt");e.style.display="block",e.addEventListener("click",ki)}()});!function(){var e=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(e)}()||"standalone"in window.navigator&&window.navigator.standalone||console.log("I AM on IOS and I am NOT in standalone mode.")},87:function(e,t,a){"use strict";var n=a(33),o=a.n(n),i=a(46),r=a(6),l=a(0),s=a.n(l),c=a(8),u=a.n(c),p=a(5),d=a(114),m=a(43),h=a(38),g=a(443),b=a.n(g),y=a(108),f=a.n(y),v=a(109),w=a.n(v),x=a(80),E=a.n(x),O=a(139),S=a.n(O),k=20,j=Object(p.withStyles)(function(e){return{xyTagChip:{cursor:"pointer",color:"white",fontSize:"0.6em",background:"#444444",height:k,position:"absolute",left:-k/2,top:-k/2},editing:{},reversedChip:{flexDirection:"row-reverse",left:"unset",right:-k/2},deleteIcon:{width:k-1,height:k-1},chipAvatarIcon:{color:"white",width:k-4,height:k-4},chipAvatar:{background:"inherit",width:k,height:k},reversedDelete:{margin:"0 -".concat(k/8,"px 0 ").concat(k/8,"px")},chipBucket:{width:1,height:1,display:"flex",flexDirection:"row",position:"absolute"},reversedChipBucket:{flexDirection:"row-reverse"}}},{withTheme:!0})(function(e){var t=e.classes,a=e.theme,n=e.color,o=e.edit,i=e.tag,r=e.newSize,l=e.onTagDragOver,c=e.onTagDragStop,p=(e.onNewTag,e.onTagDelete),d=Object(h.a)(e,["classes","theme","color","edit","tag","newSize","onTagDragOver","onTagDragStop","onNewTag","onTagDelete"]),m=i.relCoords.x>r.newWidth/2,g=function(e){e.preventDefault(),e.stopPropagation()};return s.a.createElement(b.a,{disabled:!o,bounds:{left:10,top:10,right:r.newWidth-10,bottom:r.newHeight-10},position:{x:i.relCoords.x,y:i.relCoords.y},onDrag:function(e,t){g(e),l(t,i)},onStop:function(e,t){g(e),c(t,i)},onClick:g},s.a.createElement("div",{className:u()(t.chipBucket,m&&t.reversedChipBucket)},s.a.createElement(f.a,Object.assign({style:{background:n?"".concat(n,"!important"):null,color:n?"".concat(a.palette.getContrastText(n),"!important"):null},color:o?"secondary":"default",label:i.label,data:i.id,onClick:g,onDelete:o?p(i):null,deleteIcon:o?s.a.createElement(E.a,{className:u()(t.deleteIcon,m&&t.reversedDelete)}):s.a.createElement("div",null),className:u()(t.xyTagChip,m&&t.reversedChip,o&&t.editing)},d,{avatar:s.a.createElement(w.a,{className:u()(t.chipAvatar,o&&t.editing)},s.a.createElement(S.a,{className:u()(t.chipAvatarIcon,o&&t.editing)}))}))))}),C=a(31),N=a(7),I=a(41),P=a.n(I),T=a(42),A=a.n(T),_=a(12),z=a.n(_),L=a(30),R=a.n(L),D=a(92),M=a.n(D),F=a(67),B=a.n(F),U=a(36),$=a.n(U),W=a(142),G=a.n(W),Y=a(236),q=a(238),H=a.n(q),X=Object(p.withStyles)(function(e){return{root:{width:"100%"},noOptionsMessage:{padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,fontSize:16},input:{display:"flex",padding:0},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},paper:{position:"absolute",zIndex:100,marginTop:e.spacing.unit,left:0,right:0}}})(function(e){var t=e.classes,a=e.tagConfig,n=e.onChange,o=a.values.map(function(e){return{label:e.label,value:e.id}});return console.log("XYTagSelect",a),s.a.createElement("div",{className:t.root},!a.allowAdditions&&s.a.createElement(Y.a,{options:o,classes:t,components:{Control:V,Menu:J,NoOptionsMessage:Q,Option:ee,Placeholder:K,ValueContainer:te},value:null,blurInputOnSelect:!0,isClearable:!1,onChange:n,placeholder:a.label,isSearchable:!0}),a.allowAdditions&&s.a.createElement(H.a,{options:o,classes:t,components:{Control:V,Menu:J,NoOptionsMessage:Q,Option:ee,Placeholder:K,ValueContainer:te},value:null,isClearable:!1,blurInputOnSelect:!0,onChange:n,placeholder:a.label,isSearchable:!0}))});function V(e){return s.a.createElement($.a,Object.assign({fullWidth:!0,InputProps:{inputComponent:Z,inputProps:Object(N.a)({className:e.selectProps.classes.input,inputRef:e.innerRef,children:e.children},e.innerProps)}},e.selectProps.textFieldProps))}var Q=function(e){var t=e.innerProps,a=e.selectProps,n=e.children;return s.a.createElement(z.a,Object.assign({color:"textSecondary",className:a.classes.noOptionsMessage},t),n)},J=function(e){var t=e.selectProps,a=e.innerProps,n=e.children;return s.a.createElement(B.a,Object.assign({square:!0,className:t.classes.paper},a),n)},Z=function(e){var t=e.inputRef,a=Object(h.a)(e,["inputRef"]);return s.a.createElement("div",Object.assign({ref:t},a))},K=function(e){return s.a.createElement(z.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},ee=function(e){var t=e.innerRef,a=e.isFocused,n=e.isSelected,o=e.innerProps,i=e.children;return s.a.createElement(G.a,Object.assign({buttonRef:t,selected:a,component:"div",style:{fontWeight:n?500:400}},o),i)},te=function(e){var t=e.selectProps,a=e.children;return s.a.createElement("div",{className:t.classes.valueContainer},a)},ae=Object(p.withStyles)(function(e){return{root:{overflow:"visible"},header:{padding:2*e.spacing.unit},listItem:{flexDirection:"column"},dlgBody:{paddingLeft:2*e.spacing.unit,paddingRight:2*e.spacing.unit,paddingBottom:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.classes,a=e.coords,n=e.open,o=e.seriesConfig,i=e.onNewTag,r=e.onClose,l=o.tags.filter(function(e){return e.allowXY});return a?s.a.createElement(P.a,{open:n,scroll:"paper",fullScreen:!0,classes:{paperScrollPaper:t.root},onClose:function(){return r()},"aria-labelledby":"simple-dialog-title"},s.a.createElement(A.a,{id:"simple-dialog-title",className:t.header},"New Tag:",s.a.createElement(R.a,{className:t.closeButton,onClick:r},s.a.createElement(M.a,null))),s.a.createElement("div",{className:t.dlgBody},l.length>1&&s.a.createElement(z.a,{variant:"caption"},"What kind of tag would you like to create?"),l.map(function(e,n){return s.a.createElement("div",{className:t.listItem,key:"tagSelect".concat(n)},s.a.createElement(X,{tagConfig:e,onChange:i(a,e)}))}))):null}),ne=a(152),oe=function(e,t,a,n){var o=Object(l.useContext)(m.a).seriesConfig,i=Object(l.useState)(!1),c=Object(r.a)(i,2),u=c[0],p=c[1],d=Object(l.useState)(null),h=Object(r.a)(d,2),g=h[0],b=h[1],y=new ne.a(o,e.tags),f=function(t,n){return function(o){var i=o.value,r=o.__isNew__?y.createNewXYTagObj(i,n.id,t):y.createExistingXYTagObj(i,n.id,t);b(null),a(Object(N.a)({},e,{tags:[].concat(Object(C.a)(e.tags),[r])}))}},v=function(a,n){var o=a.x,i=a.y;return e.tags.map(function(e){if(e.id!==n.id)return e;var a=parseInt(o/t.multiplier,10),r=parseInt(i/t.multiplier,10);return Object(N.a)({},e,{coords:{x:a,y:r}})})};return{onNewTag:f,onTagDelete:function(t){return function(){var n=e.tags.filter(function(e){return e.id!==t.id});a(Object(N.a)({},e,{tags:n}))}},onAddTagTrigger:function(e){g||(n(!1),b({x:parseInt(e.pageX-(window.innerWidth-t.newWidth)/2*t.multiplier,10),y:parseInt(e.pageY-(window.innerHeight-t.newHeight)/2*t.multiplier,10)}))},onTagDragOver:function(e,t){v(e,t),p(!0)},onTagDragStop:function(t,n){var o=v(t,n);p(!1),a(Object(N.a)({},e,{tags:o}))},TagChooser:function(){return s.a.createElement(ae,{open:!u&&Boolean(g),coords:g,seriesConfig:o,onNewTag:f,onClose:function(){b(null),n(!0)}})},getRelXYTags:y.getRelXYTags}};t.a=Object(p.withStyles)(function(e){return{root:{display:"block",position:"relative",width:"100%",height:"100%",background:"black",overflow:"hidden"},inner:{position:"absolute",top:"50%",left:"50%",transform:"translateY(-50%) translateX(-50%)",overflow:"hidden"},xyTags:{position:"absolute",top:0,left:0,height:"100%",width:"100%"},img:{display:"block"},formControl:{width:"100%"}}})(function(e){var t=e.classes,a=e.photo,n=e.opacity,c=e.edit,p=e.showTags,h=(e.transition,e.onChange),g=e.className,b=Object(l.useRef)(null),y=Object(l.useState)({multiplier:1}),f=Object(r.a)(y,2),v=f[0],w=f[1],x=Object(l.useState)(null),E=Object(r.a)(x,2),O=E[0],S=E[1],k=Object(l.useState)(0),C=Object(r.a)(k,2),N=C[0],I=C[1],P=Object(l.useContext)(m.a).seriesConfig;Object(l.useEffect)(function(){function e(){return(e=Object(i.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.base64){e.next=7;break}return e.next=3,P.getPhotoUrl(a,"large");case 3:t=e.sent,b.current&&S(t),e.next=8;break;case 7:b.current&&S(a.base64);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[a]);var T=Object(d.a)(b),A=T.size,_=A.height,z=A.width,L=T.setResizeActive,R=N>0?"".concat(O,"?retry=").concat(N):O,D=oe(a,{height:_,width:z},h,L),M=D.onAddTagTrigger,F=D.TagChooser,B=D.getRelXYTags,U=D.onTagDragOver,$=D.onTagDragStop,W=D.onTagDelete;return s.a.createElement("div",{className:u()(t.root,g),style:{opacity:null!==n?n:1},ref:b},s.a.createElement("div",{className:t.inner,style:{height:v?v.newHeight:1,width:v?v.newWidth:1},onClick:M},p||c?s.a.createElement("div",{className:g},B(v.multiplier).map(function(e,t){return s.a.createElement(j,Object.assign({key:"xytag-".concat(t),color:e.color},{edit:c,newSize:v,tag:e,onTagDragOver:U,onTagDragStop:$,onTagDelete:W}))})):null,s.a.createElement("img",{className:t.img,alt:R,onError:function(e){N<10&&(console.log("Image Retry",N),console.error(e),setTimeout(function(){b.current&&I(N+1)},4e3))},src:R,onLoad:function(e){if(b.current){var t=e.target,a=t.naturalHeight,n=t.naturalWidth,o=Math.min(_/a,z/n);w({newWidth:o*n,newHeight:o*a,naturalWidth:n,naturalHeight:a,multiplier:o})}},style:{height:v.newHeight,width:v.newWidth}})),c&&s.a.createElement(F,null))})}},[[5689,2,1]]]);
//# sourceMappingURL=main.d8f2a51d.chunk.js.map