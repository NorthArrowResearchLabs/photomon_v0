(this["webpackJsonp@morphoto/react-app"]=this["webpackJsonp@morphoto/react-app"]||[]).push([[0],{108:function(e,t,a){"use strict";var r=a(0),n=a.n(r),o=a(29),i=a.n(o),l=(i()(n.a.createElement(n.a.Fragment,null,n.a.createElement("path",{d:" M 16 8 L 16 8.938 L 14 8.938 L 14 10.938 L 16 10.938 L 16 12 L 16 14 L 16 14 L 16 15 L 14 15 L 14 17 L 16 17 L 16 17 L 16 18 L 12.969 18 L 12.969 14 L 15 14 L 15 12 L 12.969 12 L 12.969 7.969 L 12.969 7.969 L 12.969 7.969 C 12.969 7.417 12.521 6.969 11.969 6.969 C 11.417 6.969 10.969 7.417 10.969 7.969 L 10.969 12 L 9 12 L 9 14 L 10.969 14 L 10.969 18 L 8 18 L 8 17 L 10 17 L 10 15 L 8 15 L 8 15 L 8 14 L 8 14 L 8 12 L 8 10.938 L 8 10.938 L 10 10.938 L 10 8.938 L 8 8.938 L 8 8 C 8 7.448 7.552 7 7 7 C 6.448 7 6 7.448 6 8 L 6 8 L 6 8.938 L 5 8.938 L 5 10.938 L 6 10.938 L 6 12 L 4 12 L 4 8 C 4 7.448 3.552 7 3 7 C 2.448 7 2 7.448 2 8 L 2 10.4 L 2 12 L 2 14 L 2 16 L 2 17.6 C 2 18.925 3.075 20 4.4 20 L 19.6 20 C 20.925 20 22 18.925 22 17.6 L 22 16 L 22 14 L 22 12 L 22 10.4 L 22 10.4 L 22 8 C 22 7.448 21.552 7 21 7 C 20.448 7 20 7.448 20 8 L 20 12 L 18 12 L 18 10.938 L 18 10.938 L 19 10.938 L 19 8.938 L 18 8.938 L 18 8 C 18 7.448 17.552 7 17 7 C 16.448 7 16 7.448 16 8 Z  M 6 15 L 6 14 L 6 14 L 6 14 L 6 14 L 4 14 L 4 15.69 C 4 16.86 4.871 17.828 6 17.979 L 6 17 L 5 17 L 5 15 L 6 15 L 6 15 L 6 15 L 6 15 L 6 15 Z  M 18 15 L 18 14 L 18 14 L 18 14 L 20 14 L 20 15.69 C 20 16.86 19.129 17.828 18 17.979 L 18 17 L 19 17 L 19 15 L 18 15 L 18 15 L 18 15 L 18 15 L 18 15 L 18 15 L 18 15 Z ",fillRule:"evenodd"})),"BDA"),a(251)),c=i()(n.a.createElement(n.a.Fragment,null,n.a.createElement("path",{d:"M16.432,6.104c-2.671,-1.06 -6.842,4.123 -6.572,5.826c-3.78,-7.611 2.788,-8.409 3.682,-10.699c0.64,1.255 5.18,2.608 2.89,4.873Z"}),n.a.createElement("path",{d:"M9.159,5.228c-2.254,1.782 0.149,7.986 1.76,8.604c-8.482,-0.532 -5.889,-6.619 -7.425,-8.538c1.407,0.073 4.848,-3.183 5.665,-0.066Z"}),n.a.createElement("path",{d:"M4.727,11.059c0.417,2.844 6.991,3.864 8.331,2.779c-4.701,7.079 -8.676,1.79 -11.106,2.161c0.766,-1.183 -0.332,-5.791 2.775,-4.94Z"}),n.a.createElement("path",{d:"M7.561,17.813c2.671,1.061 6.842,-4.122 6.572,-5.826c3.781,7.611 -2.788,8.409 -3.681,10.699c-0.641,-1.255 -5.181,-2.607 -2.891,-4.873Z"}),n.a.createElement("path",{d:"M14.828,18.736c2.254,-1.783 -0.149,-7.987 -1.76,-8.605c8.482,0.532 5.889,6.619 7.425,8.538c-1.407,-0.072 -4.849,3.183 -5.665,0.067Z"}),n.a.createElement("path",{d:"M19.26,12.904c-0.417,-2.843 -6.991,-3.864 -8.331,-2.778c4.701,-7.08 8.676,-1.791 11.106,-2.162c-0.767,1.183 0.332,5.791 -2.775,4.94Z"})),"AppLogoSimple"),s=i()(n.a.createElement(n.a.Fragment,null,n.a.createElement("path",{d:"M22,2l0,20l-20,0l0,-20l20,0Zm-2,2l-16,0l0,16l16,0l0,-16Z"}),n.a.createElement("rect",{x:"5",y:"5",width:"4",height:"4"}),n.a.createElement("rect",{x:"15",y:"5",width:"4",height:"4"}),n.a.createElement("rect",{x:"5",y:"15",width:"4",height:"4"}),n.a.createElement("rect",{x:"10",y:"10",width:"1",height:"5"}),n.a.createElement("rect",{x:"11",y:"10",width:"6",height:"2"}),n.a.createElement("rect",{x:"11",y:"12",width:"2",height:"2"}),n.a.createElement("rect",{x:"13",y:"7",width:"1",height:"2"}),n.a.createElement("rect",{x:"14",y:"9",width:"1",height:"1"}),n.a.createElement("rect",{x:"8",y:"10",width:"1",height:"4"}),n.a.createElement("rect",{x:"7",y:"11",width:"1",height:"3"}),n.a.createElement("rect",{x:"9",y:"11",width:"1",height:"1"}),n.a.createElement("rect",{x:"10",y:"6",width:"2",height:"3"}),n.a.createElement("rect",{x:"12",y:"7",width:"1",height:"1"}),n.a.createElement("rect",{x:"15",y:"14",width:"2",height:"4"}),n.a.createElement("rect",{x:"14",y:"14",width:"1",height:"1"}),n.a.createElement("rect",{x:"17",y:"15",width:"2",height:"2"}),n.a.createElement("rect",{x:"11",y:"16",width:"1",height:"3"}),n.a.createElement("rect",{x:"12",y:"15",width:"2",height:"2"}),n.a.createElement("rect",{x:"10",y:"18",width:"1",height:"1"})),"QRCode"),u=i()(n.a.createElement(n.a.Fragment,null,n.a.createElement("path",{d:"M21.229,18.388c-0.346,0.799 -0.756,1.535 -1.23,2.211c-0.647,0.922 -1.176,1.56 -1.584,1.914c-0.632,0.582 -1.31,0.88 -2.036,0.897c-0.521,0 -1.149,-0.148 -1.88,-0.449c-0.734,-0.299 -1.408,-0.448 -2.025,-0.448c-0.646,0 -1.34,0.149 -2.081,0.448c-0.743,0.301 -1.342,0.457 -1.799,0.473c-0.696,0.03 -1.39,-0.277 -2.082,-0.921c-0.442,-0.385 -0.995,-1.046 -1.657,-1.982c-0.71,-0.999 -1.294,-2.158 -1.752,-3.48c-0.49,-1.427 -0.735,-2.809 -0.735,-4.147c0,-1.533 0.331,-2.855 0.994,-3.963c0.521,-0.89 1.215,-1.591 2.083,-2.107c0.868,-0.515 1.806,-0.778 2.816,-0.794c0.553,0 1.278,0.17 2.179,0.506c0.898,0.338 1.474,0.509 1.727,0.509c0.189,0 0.83,-0.2 1.916,-0.599c1.027,-0.369 1.894,-0.522 2.604,-0.462c1.924,0.155 3.37,0.914 4.331,2.28c-1.721,1.043 -2.572,2.503 -2.555,4.377c0.016,1.459 0.545,2.674 1.585,3.638c0.472,0.447 0.999,0.793 1.584,1.039c-0.127,0.368 -0.261,0.721 -0.403,1.06Zm-4.413,-17.366c0,1.144 -0.418,2.212 -1.251,3.2c-1.005,1.176 -2.221,1.855 -3.54,1.748c-0.017,-0.138 -0.026,-0.282 -0.026,-0.434c0,-1.098 0.478,-2.273 1.327,-3.234c0.423,-0.486 0.962,-0.891 1.616,-1.214c0.652,-0.318 1.269,-0.493 1.85,-0.523c0.016,0.152 0.024,0.305 0.024,0.457l0,0Z"})),"Apple");a.d(t,"a",(function(){return l.b})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return u}))},11:function(e,t,a){"use strict";var r={};a.r(r),a.d(r,"mapConfig",(function(){return m})),a.d(r,"endpoints",(function(){return g})),a.d(r,"maxTagLength",(function(){return f})),a.d(r,"tagColors",(function(){return h})),a.d(r,"version",(function(){return b})),a.d(r,"contact",(function(){return y})),a.d(r,"appName",(function(){return w})),a.d(r,"versionText",(function(){return v})),a.d(r,"ACCESS",(function(){return O})),a.d(r,"home",(function(){return x})),a.d(r,"federated",(function(){return E})),a.d(r,"analytics",(function(){return S})),a.d(r,"aws",(function(){return k}));var n=a(16),o=a(0),i=a.n(o),l=a(276),c=a(277),s=a(278),u=a(4),p=a.n(u);Object({NODE_ENV:"production",PUBLIC_URL:"/photomon_v0",REACT_APP_GRAPHQL:"https://lf01db03a1.execute-api.us-west-2.amazonaws.com/prod",REACT_APP_DOMAIN:"northarrowresearchlabs.github.io",REACT_APP_BASENAME:"photomon_v0",REACT_APP_VERSION:"0.1.42",REACT_APP_CONTACT_EMAIL:"info@northarrowresearch.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",REACT_APP_AWS_REGION:"us-west-2",REACT_APP_COGNITO_IDPOOLID:"us-west-2:ab544d6d-6ea9-430d-8c8f-d895ce172d0f",REACT_APP_COGNITO_USER_POOL_ID:"us-west-2_ninoe7B9g",REACT_APP_COGNITO_CLIENT_ID:"ndtqsua64n6qqp9hef5fh4560",REACT_APP_TILEURL_SAT:"https://api.mapbox.com/v4/mapbox.mapbox-terrain-v2,mapbox.mapbox-streets-v7/{z}/{x}/{y}.vector.pbf",REACT_APP_TILEURL_TOPO:"https://api.mapbox.com/v4/mapbox.satellite/{z}/{x}/{y}@2x.webp",REACT_APP_GA_TOKEN:"UA-60121403-10",REACT_APP_AWS_PINPOINT:"e0bee7b100014c18812a8e49ad2ff9a8"}).REACT_APP_BASEURL;var d={REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",REACT_APP_VERSION:"0.1.42",REACT_APP_CONTACT_EMAIL:"info@northarrowresearch.com",REACT_APP_GRAPHQL:"https://lf01db03a1.execute-api.us-west-2.amazonaws.com/prod",REACT_APP_AWS_REGION:"us-west-2",REACT_APP_COGNITO_USER_POOL_ID:"us-west-2_ninoe7B9g",REACT_APP_COGNITO_CLIENT_ID:"ndtqsua64n6qqp9hef5fh4560"};Object.keys(d).forEach((function(e){d[e]||p.a.error("You must set environment variable: ".concat(e))}));var m={mapBoxToken:"pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw"},g={graphql:"".concat("https://lf01db03a1.execute-api.us-west-2.amazonaws.com/prod","/api"),share:"".concat("https://lf01db03a1.execute-api.us-west-2.amazonaws.com/prod","/share")},f=100,h=["#418CF0","#FCB441","#E0400A","#056492","#BFBFBF","#1A3B69","#FFE382","#129CDD","#CA6B4B","#005CDB","#F3D288","#506381","#F1B9A8","#E0830A","#7893BE"],b="0.1.42",y="info@northarrowresearch.com",w="MorPhoto",v=i.a.createElement("span",null,"Version:  ",b," ",i.a.createElement("em",null,"BETA")),O={OPEN:{label:"Open",description:"Anyone can see and contribute photos to this series.",theme:{primary:l.a[900],secondary:l.a[700]}},PRIVATE:{label:"Private",description:"Can only be seen by you.",theme:{primary:c.a[700],secondary:c.a[500]}},PUBLIC:{label:"Public",description:"Anyone can see this series. Only the owner can add photos.",theme:{primary:s.a[700],secondary:s.a[500]}}},x={Offline:{seriesImgsToCache:["thumb","large"],highestOfflineTileZoom:12,maxMapTileArea:25e3},AppStateTypes:{FEED:"feed",MAP:"map",SEARCH:"search",PROFILE:"profile",SERIES:"series",SETTINGS:"settings",QRCAPTURE:"QRCapture",NEW_SERIES_CAMERA:"new_series_camera",NEW_SERIES_LIBRARY:"new_series_library",OFFLINE_DOWNLOAD:"offline_download"},SEARCH_TABS:{KEYWORD:"keyword",TAG:"tag",LOCATION:"location",USER:"user",PROJECT:"project"},MapModeTypes:{FREE:"free",USER:"user",TAG:"tag"}},E={},S={token:"UA-60121403-10"},k={Auth:{region:"us-west-2",userPoolId:"us-west-2_ninoe7B9g",userPoolWebClientId:"ndtqsua64n6qqp9hef5fh4560",mandatorySignIn:!0,cookieStorage:{domain:"".concat("northarrowresearchlabs.github.io"),expires:120,secure:!1}}},j=a(7),C=a(18),P=a.n(C),T=a(12);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var A={1:{rot:0,p:!1},2:{rot:0,p:!1},3:{rot:180,p:!1},4:{rot:180,p:!1},5:{rot:90,p:!0},6:{rot:90,p:!0},7:{rot:270,p:!0},8:{rot:270,p:!0}};function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R=function(e,t,a){return new Promise((function(r){var n=new Image,o=(window.URL||window.webkitURL).createObjectURL(e);n.onload=function(){var o,i=n.naturalHeight,l=n.naturalWidth;if(a){var c=document.createElement("canvas"),s=c.getContext("2d");try{var u=function(e,t,a){var r=A[1];try{e.exif.tags.Orientation&&(r=A[e.exif.tags.Orientation])}catch(l){}var n=[0,0],o=[t,a];switch(r.rot){case 90:n=[o[1],0],o=o.reverse();break;case 180:n=[o[0],o[1]];break;case 270:n=[0,o[0]],o=o.reverse()}var i=e&&e.exif?N({},e,{exif:{tags:N({},e.exif.tags,{orientation:1,ExifImageWidth:o[0],ExifImageHeight:o[1]}),imageSize:{height:o[1],width:o[0]}}}):null;return{translate:n,rotate:r.rot*Math.PI/180,width:o[0],height:o[1],exifObj:i}}(t,l,i),d=u.translate,m=u.rotate,g=u.width,f=u.height,h=u.exifObj,b=function(e,t,a){var r=e,n=t;return a&&(e*a>t?r=Math.round(t/a):n=Math.round(e*a)),{width:r,height:n}}(g,f,a);c.width=b.width,c.height=b.height,s.transform(1,0,0,1,d[0],d[1]),s.rotate(m),s.drawImage(n,0,0),h.exif.tags.ExifImageWidth=b.width,h.exif.tags.ExifImageHeight=b.height,h.exif.imageSize=b,o=h,p.a.info("done drawing",180*m/Math.PI,d)}catch(y){p.a.error(y)}return c.toBlob((function(t){r(t?{file:t,imageHeight:c.height,imageWidth:c.width,type:e.type,exifObj:o}:{file:e,imageHeight:i,imageWidth:l,type:e.type})}),e.type,100)}return r({file:e,imageHeight:n.naturalHeight,imageWidth:n.naturalWidth,type:e.type})},n.src=o}))},D=function(e,t){var a,r,n,o,i,l;return P.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a=e.type,r=e.name,n=e.size,c.next=3,P.a.awrap(Object(T.getExifPromise)(e));case 3:return o=c.sent,c.next=6,P.a.awrap(R(e,o,t));case 6:return i=c.sent,l=L(e),p.a.info("done imageParser",_({type:a,ext:l,name:r||"capture.".concat(l),size:n,exifObj:o},i)),c.abrupt("return",_({type:a,ext:l,name:r||"capture.".concat(l),size:n,exifObj:o},i));case 10:case"end":return c.stop()}}))},L=function(e){switch(e.type){case"image/jpeg":case"image/jpg":return"jpeg";case"image/png":return"png";default:return"jpg"}},M=a(117),F=a(118),U=function(){function e(t,a){Object(M.a)(this,e),this.webcamElement=t,this.canvasElement=a,"https:"!==window.location.protocol&&"localhost"!==window.location.hostname&&p.a.warn("getUserMedia() must be run from a secure origin: https or localhost.\nChanging protocol to https."),navigator.mediaDevices||navigator.getUserMedia||p.a.warn("Your browser doesn't support navigator.mediaDevices.getUserMedia and navigator.getUserMedia.")}return Object(F.a)(e,[{key:"destroy",value:function(){return P.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.webcamElement.srcObject&&this.webcamElement.srcObject.getVideoTracks&&(this.webcamElement.srcObject.getVideoTracks()[0].stop(),p.a.info("Releasing Camera")),this.webcamElement=null,this.canvasElement=null}catch(t){p.a.error(t)}case 1:case"end":return e.stop()}}),null,this)}},{key:"setup",value:function(e){var t,a=this;return P.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e||[window.innerWidth,window.innerHeight],!(this.webcamElement&&this.webcamElement.srcObject&&this.previewSize&&this.previewSize[0]===t[0]&&this.previewSize[1]===t[1])){r.next=3;break}return r.abrupt("return");case 3:return this.capabilities={redEyeReduction:"never",imageWidth:{max:t[0],min:480,step:0},imageHeight:{max:t[1],min:480,step:0},fillLightMode:[]},this.previewRatio=t[1]/t[0],this.previewSize=t,r.abrupt("return",new Promise((function(e,t){void 0!==navigator.mediaDevices.getUserMedia?(a.webcamElement.srcObject&&(a.webcamElement.srcObject.getVideoTracks()[0].stop(),a.webcamElement.srcObject=null),navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment",width:{ideal:Math.max(a.previewSize[1],a.previewSize[0])},height:{ideal:Math.min(a.previewSize[1],a.previewSize[0])}}}).then((function(t){a.webcamElement&&"srcObject"in a.webcamElement?a.webcamElement.srcObject=t:a.webcamElement.src=window.URL.createObjectURL(t),a.webcamElement.onloadedmetadata=function(e){a.webcamElement&&a.webcamElement.play()},a.webcamElement.onplaying=function(t){try{var r=a.webcamElement.srcObject.getVideoTracks()[0];new ImageCapture(r).getPhotoCapabilities().then((function(t){a.capabilities=t,e()}))}catch(n){p.a.error("COULD NOT GET CAPABILITIES"),e()}}})).catch((function(e){return t(e)}))):t(new Error("Error accessing camera"))})));case 7:case"end":return r.stop()}}),null,this)}},{key:"_drawImage",value:function(){var e=this.webcamElement.videoWidth,t=this.webcamElement.videoHeight,a=this.canvasElement.getContext("2d");return this.canvasElement.width=e,this.canvasElement.height=t,a.drawImage(this.webcamElement,0,0,e,t),{imageHeight:t,imageWidth:e}}},{key:"takeImageData",value:function(){var e=this._drawImage(),t=e.imageHeight,a=e.imageWidth,r={data:null,imageHeight:t,imageWidth:a};try{r.data=this.canvasElement.getContext("2d").getImageData(0,0,a,t).data}catch(n){}return r}},{key:"imageCapture",value:function(e){var t=this.webcamElement.srcObject.getVideoTracks()[0],a=new ImageCapture(t),r=this.capabilities.imageWidth.max,n=this.capabilities.imageHeight.max;return p.a.info("Taking picture",r,n),a.takePhoto({imageWidth:r,imageHeight:n}).catch((function(e){return p.a.error("takePhoto() error:",e)}))}},{key:"dumpCanvasToBlob",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"image/jpeg",quality:1},a=t.type,r=t.quality;return new Promise((function(t){e.canvasElement.toBlob(t,a,r)}))}}]),e}(),B=function(e,t){var a=Object(o.useState)(!1),r=Object(j.a)(a,2),n=r[0],i=r[1],l=Object(o.useState)(t),c=Object(j.a)(l,2),s=c[0],u=c[1],d=Object(o.useState)(!1),m=Object(j.a)(d,2),g=m[0],f=m[1],h=Object(o.useRef)();Object(o.useEffect)((function(){h.current||(h.current=new U(document.getElementById("webcam"),document.createElement("canvas"))),h.current.setup(t).then((function(e){var t=[h.current.capabilities.imageWidth.max,h.current.capabilities.imageHeight.max];s&&s[0]===t[0]&&s[1]===t[1]||u([h.current.capabilities.imageWidth.max,h.current.capabilities.imageHeight.max]),g||f(!0)})).catch((function(e){g&&f(!1),i(!0)}))}),[t]),Object(o.useEffect)((function(){return function(){h.current&&(h.current.destroy(),h.current=null)}}),[]);return{cameraError:n,captureImage:function(t){if(h.current&&g)try{h.current.imageCapture(t).then((function(e){return D(e,t)})).then(e).catch(p.a.error)}catch(a){p.a.error(a),p.a.info("Your hardware is lame and doesn't support ImageCapture"),h.current.dumpCanvasToBlob({type:"image/jpeg",quality:1}).then((function(e){return D(e,t)})).then(e).catch(p.a.error)}},cameraOnline:g,captureRawData:function(){if(h.current&&g){var t=h.current.takeImageData();e(t)}},sensorSize:s}},q=function(e,t,a){return e?t?{width:Math.max(t.width,e.offsetWidth),height:Math.max(t.height,e.offsetHeight),naturalWidth:e.naturalWidth,naturalHeight:e.naturalHeight}:{width:e.offsetWidth,height:e.offsetHeight,naturalWidth:e.naturalWidth,naturalHeight:e.naturalHeight}:a||t||{width:0,height:0,naturalWidth:0,naturalHeight:0}},W=function(e,t,a){var r=Object(o.useRef)(),n=Object(o.useState)(!0),i=Object(j.a)(n,2),l=i[0],c=i[1];r.current=l;var s=Object(o.useState)(q(e?e.current:null,t,a)),u=Object(j.a)(s,2),p=u[0],d=u[1],m=function(n){if(r.current&&e.current){var o=q(e.current,t,a);o.height===p.height&&o.width===p.width||d(o)}},g=Object(o.useCallback)(T.util.debounce(m,500),[]);return Object(o.useLayoutEffect)((function(){if(e&&e.current){if(m(),"function"===typeof ResizeObserver){var t=new ResizeObserver(g);return t.observe(e.current),function(){t.disconnect(e.current),t=null}}return window.addEventListener("resize",g),function(){window.removeEventListener("resize",g)}}}),[e]),{size:p,setResizeActive:c}},G=a(25),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1?arguments[1]:void 0,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=Object(o.useRef)(),l=Object(o.useRef)(),c=i.a.createElement("input",{style:{display:"none"},ref:n,type:"file",accept:r?null:"image/*",capture:t}),s=function(){n.current&&n.current.click()};return Object(o.useEffect)((function(){var t=function(t){if(t.target.files){var a=Object(G.a)(t.target.files)[0];a&&D(a).then(e),n.current.value=null}};return n.current&&(n.current.addEventListener("change",t),l.current||(a&&n.current.click(),l.current=!0)),function(){n.current&&n.current.removeEventListener("change",t)}}),[n.current]),{fileClickEl:c,forceClick:s,inputRef:n}},V=function(){var e=Object(o.useState)(null),t=Object(j.a)(e,2),a=t[0],r=t[1],n=function(e){if(window.navigator.onLine)p.a.info("ONLINE"),null!==a&&r(null);else{p.a.info("OFFLINE");var t=Date.now();a!==t&&r(t)}};return Object(o.useEffect)((function(){return n(),window.addEventListener("online",n),window.addEventListener("offline",n),function(){window.removeEventListener("online",n),window.removeEventListener("offline",n)}}),[]),Object(o.useMemo)((function(){return{isOnline:null===a,offlineSince:a}}),[a])},Y=a(135),Q=a(133),$=a(136),X=a(1),Z=a.n(X),K=function(e){function t(e){var a;return Object(M.a)(this,t),p.a.info("ErrorBoundary constructor"),(a=Object(Y.a)(this,Object(Q.a)(t).call(this,e))).state={hasError:!1},a}return Object($.a)(t,e),Object(F.a)(t,[{key:"componentDidCatch",value:function(e,t){p.a.error("ErrorBoundary componentDidCatch",e)}},{key:"render",value:function(){var e=this.state,t=e.hasError,a=e.error,r=this.props.fallback;return t?(p.a.error("ErrorBoundary hasError"),i.a.createElement(r,{error:a})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),t}(i.a.Component);K.propTypes={children:Z.a.any,fallback:Z.a.any};var J=K;var ee=function(){return Boolean(/iphone|ipad|ipod/i.test(window.navigator.userAgent||navigator.vendor||window.opera||""))},te={ios:Boolean(ee()),phone:Boolean(function(){var e=window.navigator.userAgent||navigator.vendor||window.opera||"";return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4))}()),cameraAccess:!!navigator.mediaDevices&&Boolean(navigator.mediaDevices.getUserMedia)};function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ne=i.a.createContext({}),oe=function(e){var t=e.children,a=e.value,r=re({online:V()},a,{device:re({},te,{},a.device)});return i.a.createElement(ne.Provider,{value:r},t)};oe.propTypes={children:Z.a.any,value:Z.a.shape({user:Z.a.object,signedIn:Z.a.bool.isRequired,getPhotoUrls:Z.a.func.isRequired,device:Z.a.object,metaConfig:Z.a.object,tagConfigArr:Z.a.array.isRequired,onAvatarClick:Z.a.func,globalActions:Z.a.object.isrequired})};var ie=function(){var e=Object(o.useState)({accuracy:null,altitude:null,altitudeAccuracy:null,heading:null,latitude:null,longitude:null,speed:null,timestamp:Date.now()}),t=Object(j.a)(e,2),a=t[0],r=t[1],n=Object(o.useRef)(),i=Object(o.useRef)();n.current=!0;var l=function(e){n.current&&r({accuracy:e.coords.accuracy,altitude:e.coords.altitude,altitudeAccuracy:e.coords.altitudeAccuracy,heading:e.coords.heading,latitude:e.coords.latitude,longitude:e.coords.longitude,speed:e.coords.speed,timestamp:e.timestamp})};return Object(o.useEffect)((function(){return navigator.geolocation.getCurrentPosition(l),i.current=navigator.geolocation.watchPosition(l),function(){n.current=!1,navigator.geolocation.clearWatch(i.current)}}),[navigator.geolocation]),a};function le(){var e=Object(o.useState)({absolute:!1,alpha:null,beta:null,gamma:null}),t=Object(j.a)(e,2),a=t[0],r=t[1],n=Object(o.useRef)(!1);function i(e){n.current&&r({absolute:e.absolute,alpha:e.alpha,beta:e.beta,gamma:e.gamma})}return Object(o.useEffect)((function(){return n.current=!0,window.addEventListener("deviceorientation",i),function(){n.current=!1,window.removeEventListener("deviceorientation",i)}}),[]),a}var ce=function(){p.a.setLevel("warn"),window.logger=p.a};function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}a.d(t,"d",(function(){return ue})),a.d(t,"h",(function(){return B})),a.d(t,"i",(function(){return W})),a.d(t,"k",(function(){return H})),a.d(t,"c",(function(){return J})),a.d(t,"a",(function(){return ne})),a.d(t,"b",(function(){return oe})),a.d(t,"l",(function(){return ie})),a.d(t,"j",(function(){return le})),a.d(t,"f",(function(){return te})),a.d(t,"g",(function(){return ee})),a.d(t,"e",(function(){return ce}));var ue=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},r)},12:function(e,t,a){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Tags",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"getSeriesTags",{enumerable:!0,get:function(){return c.getSeriesTags}}),Object.defineProperty(t,"getExifPromise",{enumerable:!0,get:function(){return s.getExifPromise}}),Object.defineProperty(t,"Series",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Photo",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"createShareUrl",{enumerable:!0,get:function(){return d.createShareUrl}}),Object.defineProperty(t,"decodeShareUrl",{enumerable:!0,get:function(){return d.decodeShareUrl}}),Object.defineProperty(t,"AccessHelper",{enumerable:!0,get:function(){return m.default}}),t.permissions=t.util=t.dates=t.accessControl=t.graphqlAPI=void 0;var n=h(a(366)),o=h(a(367)),i=f(a(368)),l=f(a(370)),c=f(a(607)),s=a(608),u=h(a(617)),p=h(a(618)),d=a(619),m=h(a(620));function g(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=g();if(t&&t.has(e))return t.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=e[o]}return a.default=e,t&&t.set(e,a),a}function h(e){return e&&e.__esModule?e:{default:e}}var b={queries:a(621),mutations:a(622),fragments:a(240),optimistic:a(623),schema:a(624).default};t.graphqlAPI=b;var y=new n.default(o.default);t.accessControl=y;var w=i;t.dates=w;var v=l;t.util=v;var O=o.default;t.permissions=O},122:function(e,t,a){"use strict";var r=a(0),n=a.n(r),o=a(20),i=a.n(o),l=a(1),c=a.n(l),s=a(2070),u=a(2069),p=a(2055),d=a(108),m=a(11),g=a(176),f=Object(g.a)((function(e){return{appBar:{background:"transparent"},toolbar:{display:"flex",alignItems:"center",width:"100%",padding:e.spacing(0,1),backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,borderBottom:"2px solid ".concat(e.palette.primary.main),background:"linear-gradient(90deg, ".concat(e.palette.primary.main," 0%, ").concat(e.palette.secondary.main," 100%)")},searchIcon:{opacity:.3,marginRight:e.spacing(1)},transparent:{backgroundColor:"transparent",background:"none",color:e.palette.text.primary,borderBottom:"2px solid transparent"},noCamIcon:{color:"rgba(0, 0, 0, 0.26)"},logo:{padding:e.spacing(0,0),height:40,width:40},transparentLogo:{background:"linear-gradient(90deg, ".concat(e.palette.primary.main," 0%, ").concat(e.palette.secondary.main," 100%)"),padding:e.spacing(.5,.5)},transparentLogoIcon:{color:"white",height:35,width:35},children:{flexGrow:1,padding:e.spacing(0,1)},qrButton:{padding:e.spacing(0,0)},qrButtonTransparent:{background:"white",padding:e.spacing(.5,.5)}}})),h=function(e){var t=e.className,a=e.children,o=e.isTransparent,l=e.hideLogo,c=e.actions,g=f(),h=Object(r.useContext)(m.a).device;return n.a.createElement(u.a,{elevation:0,position:o?"absolute":"static",className:g.appBar},n.a.createElement(s.a,{className:i()(g.toolbar,t,o?g.transparent:null),disableGutters:!0},!l&&n.a.createElement(p.a,{className:o?g.transparentLogo:g.logo,color:"inherit",onClick:function(){return c.setDrawerOpen(!0)}},n.a.createElement(d.b,{className:o?g.transparentLogoIcon:g.logo})),n.a.createElement("div",{className:g.children},a),n.a.createElement(p.a,{color:"inherit",className:i()(h.cameraAccess?null:g.noCamIcon,o?g.qrButtonTransparent:g.qrButton),"aria-label":"Menu",onClick:c.onQRClickWrapped},n.a.createElement(d.d,{color:"inherit"}))))};h.propTypes={className:c.a.string,children:c.a.any,isTransparent:c.a.bool,hideLogo:c.a.bool,actions:c.a.shape({onQRClickWrapped:c.a.func,setDrawerOpen:c.a.func.isRequred})};var b=h,y=a(7),w=a(42),v=a(78),O=a(45),x=a(2095),E=a(2026),S=a(2068),k=a(2073),j=a(2019),C=a(2071),P=a(2072),T=a(514),I=a.n(T),N=a(267),A=a.n(N),z=a(513),_=a.n(z),R=a(515),D=a.n(R),L=a(516),M=a.n(L),F=a(351),U=a.n(F),B=Object(g.a)((function(e){return{drawerInner:{width:250,display:"flex",flexDirection:"column",height:"100%"},disableListItem:{color:"rgba(0, 0, 0, 0.26)"},avatar:{height:e.spacing(7),width:e.spacing(7),border:"3px solid ".concat(e.palette.primary.main),margin:e.spacing(0,1)},gravatarImg:{width:"100%"},spacer:{flexGrow:1},fullList:{width:"auto"}}})),q=function(e){var t=e.open,a=e.onClose,o=e.onOpen,i=e.actions,l=B(),c=Object(r.useContext)(m.a),s=c.device,u=c.currentUser,p=c.signedIn,g=c.globalActions;return n.a.createElement(x.a,{open:t,onClose:a,onOpen:o},n.a.createElement("div",{className:l.drawerInner,role:"presentation",onClick:a,onKeyDown:a},u&&u.username&&n.a.createElement(S.a,null,n.a.createElement(j.a,{className:l.root,onClick:function(){},disableGutters:!0},n.a.createElement(E.a,{className:l.avatar},p&&u?n.a.createElement("img",{alt:"profile",className:l.gravatarImg,src:u.gravatar}):n.a.createElement(U.a,{color:"inherit",className:l.loginButton}))),n.a.createElement(j.a,{className:l.root,onClick:function(){}},n.a.createElement(P.a,{primary:u.username}))),n.a.createElement(k.a,null),n.a.createElement(S.a,null,n.a.createElement(j.a,{className:s.cameraAccess?l.disableListItem:null,button:!0,onClick:s.cameraAccess?g.onQRButtonClick:s.ios?i.onDisabledClick:function(){}},n.a.createElement(C.a,null,n.a.createElement(d.d,null)),n.a.createElement(P.a,{primary:"Scan QR Code"})),g.addToHomeScreen&&n.a.createElement(j.a,{button:!0,onClick:g.addToHomeScreen},n.a.createElement(C.a,null,n.a.createElement(_.a,null)),n.a.createElement(P.a,{primary:"Install this app",secondary:"It works better!"})),n.a.createElement(j.a,{button:!0,onClick:g.onOfflineMenuClick},n.a.createElement(C.a,null,n.a.createElement(I.a,null)),n.a.createElement(P.a,{primary:"Offline Download"}))),n.a.createElement("div",{className:l.spacer}),n.a.createElement(k.a,null),n.a.createElement(S.a,null,n.a.createElement(j.a,{button:!0,onClick:g.onSettingsClick},n.a.createElement(C.a,null,n.a.createElement(D.a,null)),n.a.createElement(P.a,{primary:"App Settings"})),n.a.createElement(j.a,{button:!0,onClick:i.onAboutClick},n.a.createElement(C.a,null,n.a.createElement(A.a,null)),n.a.createElement(P.a,{primary:"About"})),p?n.a.createElement(j.a,{button:!0,onClick:g.signOut},n.a.createElement(C.a,null,n.a.createElement(M.a,null)),n.a.createElement(P.a,{primary:"Sign Out"})):n.a.createElement(j.a,{button:!0,onClick:g.forceSignIn},n.a.createElement(C.a,null,n.a.createElement(U.a,null)),n.a.createElement(P.a,{primary:"Sign In"})))))};q.propTypes={open:c.a.bool,onOpen:c.a.func,onClose:c.a.func,actions:c.a.shape({onDisabledClick:c.a.func,onAboutClick:c.a.func})};var W=q,G=a(111);function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var V="APPLE_WARNING",Y="ABOUTAPP",Q=function(e){e.className;var t=e.children,a=Object(w.a)(e,["className","children"]),o=Object(r.useContext)(m.a),i=o.device,l=o.globalActions,c=Object(r.useState)(!1),s=Object(y.a)(c,2),u=s[0],p=s[1],d=Object(r.useState)(!1),g=Object(y.a)(d,2),f=g[0],h=g[1],x=i.ios?function(){return p(V)}:l.onQRButtonClick;return n.a.createElement(n.a.Fragment,null,n.a.createElement(b,H({},a,{children:t,actions:{onQRClickWrapped:x,setDrawerOpen:h}})),n.a.createElement(W,{open:f,onClose:function(){return h(!1)},onOpen:function(){return h(!0)},actions:{onDisabledClick:function(){return p(V)},onAboutClick:function(){return p(Y)}}}),i.ios&&n.a.createElement(v.e,{open:u===V,title:"iOS Feature Disabled",message:n.a.createElement(G.a,{variant:"body2",component:"div"},n.a.createElement("p",null,"This feature cannot function due to a bug in iOS 12 that prevents ",n.a.createElement("strong",null,"direct camera access from progressive web apps"),"."),n.a.createElement("p",null,"There is good evidence iOS 13 has things sorted. ETA from Apple is mid-September 2019.")),onClose:function(){return p(!1)}}),n.a.createElement(O.a,{open:u===Y,onClose:function(){return p(!1)},version:m.d.version}))};Q.propTypes={className:c.a.string,children:c.a.any};var $=Q,X=(a(2018),a(2016)),Z=(a(227),a(2060)),K=a(517),J=a.n(K),ee=a(518),te=a.n(ee),ae=a(519),re=a.n(ae),ne=a(193),oe=a.n(ne),ie=a(520),le=a.n(ie),ce=a(12),se=Object(g.a)((function(e){return{root:{background:"black",color:"white",textAlign:"center"}}})),ue=function(){var e=se(),t=Object(r.useState)(),a=Object(y.a)(t,2),o=a[0],i=a[1],l=Object(r.useContext)(m.a),c=l.online,s=l.signedIn,u=Object(r.useRef)(),p=function(){var e=ce.dates.formatDateAgo(c.offlineSince);i(e)},d=function(){u.current&&(clearInterval(u.current),u.current=null)};Object(r.useEffect)((function(){return c.offlineSince&&!u.current?(p(),u.current=setInterval(p,5e3)):c.offlineSince||d(),function(){d()}}),[c.offlineSince]);var g=s?"":"You are not signed in.",f=c.isOnline?"":"Offline (".concat(o,")");return c.isOnline&&s?null:n.a.createElement(G.a,{className:e.root,variant:"caption",component:"div"},g," ",f)};var pe=m.d.home.AppStateTypes,de=Object(g.a)((function(e){return{root:{borderTop:"2px solid ".concat(e.palette.secondary.main)},container:{padding:0,display:"flex"},toolbar:{color:e.palette.jet.main,backgroundColor:e.palette.papayawhip.main},text:{padding:e.spacing(2,2,0)},paper:{paddingBottom:50},list:{marginBottom:e.spacing(2)},subheader:{backgroundColor:e.palette.background.paper},grow:{flexGrow:1},addFab:{position:"absolute",bottom:0,left:"50%",transformOrigin:"0% 100%",transform:"translateY(-25%) translateX(-50%) translateZ(0)",zIndex:200},spacer:{width:40,flexGrow:1}}})),me=function(e){var t=e.className,a=e.domain,o=de(),l=Object(r.useContext)(m.a),c=l.globalActions,p=l.signedIn;return n.a.createElement(u.a,{position:"static",className:i()(o.root,t)},n.a.createElement(s.a,{className:o.toolbar},n.a.createElement(X.a,{maxWidth:"sm",className:o.container},p&&n.a.createElement(Z.a,{edge:"start",className:o.grow,color:a===pe.FEED?"secondary":"inherit",onClick:a!==pe.FEED?function(){return c.setHomeState(pe.FEED)}:function(){}},n.a.createElement(J.a,null)),n.a.createElement(Z.a,{edge:"start",className:o.grow,color:a===pe.MAP?"secondary":"inherit",onClick:a!==pe.MAP?function(){return c.setHomeState(pe.MAP)}:function(){}},n.a.createElement(te.a,null)),p&&n.a.createElement(O.b,{className:o.addFab,onCameraClick:c.onCameraClick,onLibraryClick:c.onLibraryClick},n.a.createElement(oe.a,null)),n.a.createElement("div",{className:o.spacer}),n.a.createElement(Z.a,{color:a===pe.SEARCH?"secondary":"inherit",className:o.grow,onClick:a!==pe.SEARCH?function(){return c.setHomeState(pe.SEARCH)}:function(){}},n.a.createElement(re.a,null)),p&&n.a.createElement(Z.a,{edge:"end",color:a===pe.PROFILE?"secondary":"inherit",className:o.grow,onClick:a!==pe.PROFILE?function(){return c.setHomeState(pe.PROFILE)}:function(){}},n.a.createElement(le.a,null)))))};me.propTypes={className:c.a.string,domain:c.a.string,signedIn:c.a.bool};var ge=me;Object(g.a)((function(e){return{root:{height:"100%",display:"flex",flexDirection:"column"},paper:{flexGrow:1}}}));a.d(t,"c",(function(){return $})),a.d(t,"a",(function(){return ge})),a.d(t,"b",(function(){return ue}))},124:function(e,t,a){"use strict";var r=a(42),n=a(16),o=a(0),i=a.n(o),l=a(1),c=a.n(l),s=a(20),u=a.n(s),p=a(2103),d=a(160),m=a.n(d),g=a(176),f=a(62),h=a(4),b=a.n(h);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var O=Object(g.a)((function(e){return{root:w({},e.typography.caption,{height:22,marginRight:e.spacing(1)/2,marginTop:e.spacing(1)/2}),label:w({},e.typography.caption),deleteIcon:{margin:0}}})),x=function(e){var t=e.className,a=e.edit,n=e.tag,l=e.color,c=e.onDelete,s=Object(r.a)(e,["className","edit","tag","color","onDelete"]),d=O(),g=Object(f.a)(),h=Object(o.useRef)(!1),b=function(e){e.stopPropagation()},y=function(e){a&&!h.current&&c(n),h.current=!0};return i.a.createElement(p.a,v({style:{background:l||null,color:l?"".concat(g.palette.getContrastText(l)):null},classes:{root:u()(d.root,t),label:d.label},onTouchStart:b,onMouseDown:b,label:n.label,onDelete:a&&c?function(){}:null,deleteIcon:i.a.createElement(m.a,{className:d.deleteIcon,onClickCapture:y,onMouseDown:y,onTouchStart:y,style:{opacity:.5,color:l?"".concat(g.palette.getContrastText(l)):null}})},s))};x.propTypes={className:c.a.string,color:c.a.string,edit:c.a.bool,tag:c.a.object.isRequired,onDelete:c.a.func};var E=x,S=a(25),k=a(105),j=a.n(k),C=a(111),P=a(275),T=a(263),I=a.n(T),N=Object(g.a)((function(e){return{suggestedContainer:{margin:e.spacing(1)},suggestedLink:{color:e.palette.text.secondary},loadPulse:{animation:"$loadPulse linear infinite 3s"},"@keyframes loadPulse":{"0%":{color:"white"},"50%":{color:"black"},"100%":{color:"white"}}}})),A=function(e){var t=e.suggestedObj,a=e.onSelectChange,r=e.loading,n=N();return i.a.createElement("div",{className:n.suggestedContainer},t.none&&i.a.createElement(z,{title:"Quick Suggestions:",tagLabels:t.none.slice(0,5),onSelectChange:a}),Object.keys(t).filter((function(e){return"none"!==e})).map((function(e,r){return i.a.createElement(z,{key:"suggestedGroup-".concat(r),title:e,tagLabels:t[e].slice(0,5),onSelectChange:a})})),r&&i.a.createElement(C.a,{className:n.loadPulse,variant:"caption",color:"inherit"},"Loading..."))};A.propTypes={suggestedObj:c.a.object.isRequired,onSelectChange:c.a.func.isRequired,loading:c.a.bool};var z=function(e){var t=e.title,a=e.tagLabels,r=e.onSelectChange,n=N();return i.a.createElement("div",{className:n.suggestedGroup},i.a.createElement(C.a,{variant:"caption",color:"inherit",component:"div"},t),a.map((function(e,t){return i.a.createElement(E,{key:"suggestedGroup-".concat(t),onClick:function(){return r({label:e,__isNew__:!0,value:{}},{action:"create-option"})},className:n.suggestedChip,tag:{label:e}})})))};z.propTypes={title:c.a.string,onSelectChange:c.a.func.isRequired,tagLabels:c.a.array};var _=a(7);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var D=function(e){var t=Object(o.useState)([]),a=Object(_.a)(t,2),r=a[0],i=a[1],l=Object(o.useState)(e.map((function(){return!1}))),c=Object(_.a)(l,2),s=c[0],u=c[1];return Object(o.useEffect)((function(){if(e.length>0){u(e.map((function(){return!0})));var t=e.map((function(){return!0}));e.forEach((function(e,a){e().then((function(e){t[a]=!1,u(t.map((function(e,t){return t!==a&&e}))),i([].concat(Object(S.a)(r),Object(S.a)(e)))})).catch((function(e){b.a.error(e),t[a]=!1,u(t.map((function(e,t){return t!==a&&e})))}))}))}}),[e]),function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(o.useMemo)((function(){var e=r.reduce((function(e,t){var a=t.label,r=t.group,n=r;return r||(n="none"),e[n]||(e[n]={}),e[n][a]?e[n][a].count++:e[n][a]={count:1},e}),{});Object.keys(e).forEach((function(t){var a=Object.keys(e[t]);a.sort((function(a,r){return e[t][a].count!==e[t][r].count?e[t][a].count-e[t][r].count:a.toLowerCase()<r.toLowerCase()?-1:a.toLowerCase()>r.toLowerCase()?1:0})),a.forEach((function(a,r){e[t][a].weight=r}))}));var t=r.map((function(e){return e.label}));return t.sort((function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0})),{allAlph:Object(S.a)(new Set(t)),tagReduce:e}}),[r]),{rawTagValues:r,loading:s.some((function(e){return e}))})},L=Object(g.a)((function(e){return{root:{width:"100%"},tagContainer:{},formControl:{},singleValue:{fontSize:16},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},paper:{}}})),M=function(e){var t=e.tags,a=e.onChange,r=e.hint,n=e.tagType,l=e.className,s=e.isClearable,p=L(),d=Object(o.useRef)(),m=D(n.getValuePromiseArr),g=m.tagReduce,f=m.allAlph,h=m.loading;b.a.info("MARZIPAN",{tags:t,tagReduce:g,allAlph:f,loading:h});var y=Object(o.useMemo)((function(){var e=t.filter((function(e){return e.typeId===n.id&&!e.coords})).map((function(e,t){return{label:e.label,value:e,key:"tagOpt-".concat(j()(),"-").concat(n.id)}})),a=f.map((function(e,t){return{label:e,value:{label:e,typeId:n.id},key:"tagOpt-".concat(j()(),"-").concat(n.id)}})),r=a.filter((function(t){return!e.find((function(e){return e.label===t.label}))})),o={};return Object.keys(g).forEach((function(t){var a=Object.keys(g[t]).filter((function(t){return!e.find((function(e){return e.label===t}))}));a.sort((function(e,a){return g[t][e].weight-g[t][a].weight})),a.length>0&&(o[t]=a)})),{selected:e,options:a,remaining:r,suggested:o}}),[t,f]);d.current=y;var w=function(e,r){switch(b.a.debug("onSelectChange",{tags:t,tagArr:e,actionEvent:r,curr:d.current}),r.action){case"select-option":return a([].concat(Object(S.a)(t),[r.option.value]));case"remove-value":return a(t.filter((function(e){return e.label!==r.removedValue.label})));case"pop-value":return a(t.filter((function(e){return e.label!==r.removedValue.label})));case"clear":return a(t.filter((function(e){return e.typeId!==n.id})));case"create-option":var o=Array.isArray(e)?e:[e];return a([].concat(Object(S.a)(t),Object(S.a)(o.filter((function(e){return e.__isNew__})).map((function(e){return{label:e.label,typeId:n.id}})))))}},v=function(e){var t=e.removeProps,a=(e.innerProps,e.data);return i.a.createElement(E,{edit:!0,key:a.key,tag:a.value,onDelete:function(e){t.onClick()},color:n.color})};return v.propTypes={removeProps:c.a.any,innerProps:c.a.any,data:c.a.any},i.a.createElement("div",{className:u()(p.root,l)},i.a.createElement(C.a,{variant:"overline",className:p.fieldTitle},n.label),!n.allowAdditions&&i.a.createElement(P.a,{id:"tagsSelect-".concat(n.id),options:y.remaining,classes:p,getOptionValue:function(e){return e.key},getLabelValue:function(e){return e.label},isFocused:!0,components:{MultiValue:v},deleteRemoves:!0,value:y.selected,isClearable:!1,onChange:w,placeholder:"Select Tags",isMulti:!0,isSearchable:!0}),n.allowAdditions&&i.a.createElement(I.a,{id:"tagsSelect-".concat(n.id),classes:p,isFocused:!0,deleteRemoves:!0,components:{MultiValue:v},options:y.remaining,value:y.selected,getOptionValue:function(e){return e.key},getLabelValue:function(e){return e.label},isClearable:s,onChange:w,placeholder:"Select Tags",isMulti:!0,isSearchable:!0}),r&&i.a.createElement(C.a,{variant:"caption",className:p.hint},r),i.a.createElement(A,{suggestedObj:y.suggested,onSelectChange:w,loading:h}))};M.propTypes={className:c.a.string,hint:c.a.string,tags:c.a.array,isClearable:c.a.bool,onChange:c.a.func.isRequired,tagType:c.a.object};var F=M,U=a(2059),B=a(2057),q=a(2061),W=a(2060),G=a(2062),H=a(2055),V=a(129),Y=a.n(V),Q=Object(g.a)((function(e){return{root:{},dlgContent:{},title:{border:"1px solid ".concat(e.palette.grey[200]),background:e.palette.grey[100],width:"100%",margin:0,display:"flex",padding:e.spacing(2)},dlgTitle:{flexGrow:1},closeButton:{padding:0,alignSelf:"flex-start"}}})),$=function(e){var t=e.open,a=e.title,r=e.onOk,n=e.onCancel,l=e.tags,c=e.tagType,s=Q(),u=Object(o.useState)(l),p=Object(_.a)(u,2),d=p[0],m=p[1];return i.a.createElement(B.a,{className:s.root,scroll:"paper",fullScreen:!0,open:t,onClose:function(){return r(d)}},i.a.createElement(G.a,{className:s.title,disableTypography:!0},i.a.createElement(C.a,{className:s.dlgTitle},a),i.a.createElement(H.a,{className:s.closeButton,onClick:n},i.a.createElement(Y.a,null))),i.a.createElement(U.a,{className:s.dlgContent},i.a.createElement(F,{className:s.field,tags:d,hint:"Choose a tag or type to create a new one.",isClearable:!0,tagType:c,onChange:m})),i.a.createElement(q.a,null,i.a.createElement(W.a,{onClick:n},"Cancel"),i.a.createElement("div",{style:{flexGrow:1}}),i.a.createElement(W.a,{onClick:function(){return m(l)}},"Reset"),i.a.createElement(W.a,{onClick:function(){return r(d)}},"Ok")))};$.propTypes={open:c.a.bool,title:c.a.string,onOk:c.a.func,onCancel:c.a.func,tags:c.a.array.isRequired,tagType:c.a.object.isRequired};var X=$,Z=Object(g.a)((function(e){return{root:{width:"100%"},clickHelper:{}}})),K=function(e){var t=e.tags,a=(e.label,e.tagType),r=e.className,n=e.canEdit,o=e.onClick,l=Z(),c=t?t.filter((function(e){return e.typeId===a.id&&!e.coords})):[];return n||0!==c.length?i.a.createElement("div",{className:u()(l.root,r)},i.a.createElement(C.a,{variant:"overline",className:l.fieldTitle},a.label),i.a.createElement("div",{className:l.tagContainer},c.map((function(e,t){return i.a.createElement(E,{tag:e,key:"tagchip".concat(t),color:a.color})})),n&&o&&i.a.createElement(W.a,{fullWidth:!0,variant:"outlined",size:"small",onClick:o,className:l.clickHelper},(!c||0===c.length)&&"Add Tag(s)",c&&1===c.length&&"Edit Tag",c&&c.length>1&&"Edit Tags"))):null};K.propTypes={className:c.a.string,label:c.a.string,tags:c.a.array,tagType:c.a.object,canEdit:c.a.bool,onClick:c.a.func};var J=K,ee=a(502),te=a.n(ee);function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ne=22,oe=11,ie=6.5,le=-15,ce=function(e,t,a){return function(r){return{chipBucket:{width:1,height:1,position:"absolute","&:before":{content:'" "',position:"absolute",width:oe,height:oe,background:e,transform:"rotate(45deg)",transformOrigin:"left top",top:a?le:0},"&,&::after, &::before":{userSelect:"none",cursor:"default"}},innerContainDrag:{"&:before":{background:r.palette.warning.main}},dragging:{background:r.palette.warning.main,"&:focus, &:hover":{color:r.palette.getContrastText(e),background:e}},innercontainer:{left:t,top:a?-ie-ne:ie,position:"absolute"},xyTagChip:re({},r.typography.caption,{background:e,color:r.palette.getContrastText(e),height:22,margin:0,"&:focus, &:hover":{color:r.palette.getContrastText(e),background:e}}),label:re({},r.typography.caption),deleteIcon:{margin:0}}}};function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var ue=function(e){var t=e.color,a=e.edit,n=e.tag,l=e.newSize,c=e.onTagDragOver,s=e.onTagDragStop,d=e.onTagDelete,f=Object(r.a)(e,["color","edit","tag","newSize","onTagDragOver","onTagDragStop","onTagDelete"]),h=n.relCoords.x>l.newWidth/2,b=Object(o.useState)(!1),y=Object(_.a)(b,2),w=y[0],v=y[1],O=Object(o.useState)([-14,!1]),x=Object(_.a)(O,2),E=Object(_.a)(x[0],2),S=E[0],k=E[1],j=x[1],C=function(){return Object(g.a)(ce.apply(void 0,arguments))}(t,S,k)(),P=Object(o.useRef)(),T=Object(o.useRef)(!1);Object(o.useLayoutEffect)((function(){if(P.current){var e=P.current.getBoundingClientRect().width,t=-e/2,a=!1;n.relCoords.x+t+e>l.newWidth-14?(t=l.newWidth-e-n.relCoords.x)<14-e&&(t=14-e):n.relCoords.x+t<=14&&(t=14-n.relCoords.x)>-14&&(t=-14),n.relCoords.y+ne+ie+14>=l.newHeight&&(a=!0),j([t,a])}}),[P,n.relCoords,l]);var I=function(e){return e.stopPropagation(),!1};return i.a.createElement(te.a,{disabled:!a,bounds:{left:10,top:10,right:l.newWidth-10,bottom:l.newHeight-10},position:{x:n.relCoords.x,y:n.relCoords.y},onDrag:function(e,t){I(e),v(!0),c&&c(t,n)},onStop:function(e,t){I(e),v(!1),s&&s(t,n)},onClick:I},i.a.createElement("div",{className:u()(C.chipBucket)},i.a.createElement("div",{ref:P,className:u()(C.innercontainer,w?C.innerContainDrag:null)},i.a.createElement(p.a,se({classes:{root:u()(C.xyTagChip,w&&C.dragging,a&&C.editing),label:C.label},clickable:!1,color:a?"secondary":"default",label:n.label,onDelete:a&&d?function(){}:null,deleteIcon:a?i.a.createElement(m.a,{className:u()(C.deleteIcon,h&&C.reversedDelete),onClickCapture:function(e){a&&!T.current&&d(n),T.current=!0}}):i.a.createElement("div",null)},f)))))};ue.propTypes={color:c.a.string,edit:c.a.bool,tag:c.a.object.isRequired,newSize:c.a.object,onTagDragOver:c.a.func,onTagDragStop:c.a.func,onTagDelete:c.a.func};var pe=ue,de=Object(g.a)((function(e){return{}})),me=function(e){var t=e.tagType,a=e.onChange,r=de(),n=D(t.getValuePromiseArr),l=n.tagReduce,c=n.allAlph,s=n.loading,u=Object(o.useMemo)((function(){var e=c.map((function(e,a){return{label:e,value:{label:e,typeId:t.id},key:"tagOpt-".concat(j()(),"-").concat(t.id)}})),a={};return Object.keys(l).forEach((function(e){var t=Object.keys(l[e]);t.sort((function(t,a){return l[e][t].weight-l[e][a].weight})),t.length>0&&(a[e]=t)})),{options:e,suggested:a}}),[c]),p=function(e,r){switch(b.a.debug("onSelectChange",{tagVal:e,actionEvent:r}),r.action){case"select-option":return a(e.value);case"create-option":return a({label:e.label,typeId:t.id})}};return i.a.createElement("div",{className:r.root},!t.allowAdditions&&i.a.createElement(P.a,{getOptionValue:function(e){return e.key},getLabelValue:function(e){return e.label},options:u.options,classes:r,components:{},value:null,blurInputOnSelect:!0,isClearable:!1,onChange:p,placeholder:t.label,isSearchable:!0}),t.allowAdditions&&i.a.createElement(I.a,{getOptionValue:function(e){return e.key},getLabelValue:function(e){return e.label},options:u.options,classes:r,components:{},value:null,isClearable:!1,blurInputOnSelect:!0,onChange:p,placeholder:t.label,isSearchable:!0}),i.a.createElement(A,{suggestedObj:u.suggested,onSelectChange:p,loading:s}))};me.propTypes={tagType:c.a.object.isRequired,onChange:c.a.func.isRequired};var ge=me,fe=Object(g.a)((function(e){return{root:{overflow:"visible"},header:{padding:2*e.spacing(1)},listItem:{flexDirection:"column",marginBottom:e.spacing(1)},dlgBody:{paddingLeft:2*e.spacing(1),paddingRight:2*e.spacing(1),paddingBottom:2*e.spacing(1)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})),he=function(e){var t=e.relCoords,a=e.open,r=e.onNewTag,n=e.onClose,o=e.title,l=e.promptText,c=e.tagConfigArr,s=fe(),u=c.filter((function(e){return e.allowXY}));return t?i.a.createElement(B.a,{open:a,scroll:"paper",fullWidth:!0,classes:{paperScrollPaper:s.root},onClose:n,"aria-labelledby":"simple-dialog-title"},i.a.createElement(G.a,{id:"simple-dialog-title",className:s.header},o,i.a.createElement(H.a,{className:s.closeButton,onClick:n},i.a.createElement(Y.a,null))),i.a.createElement("div",{className:s.dlgBody},l&&i.a.createElement(C.a,{variant:"caption"},l),u.map((function(e,a){return i.a.createElement("div",{className:s.listItem,key:"tagSelect".concat(a)},i.a.createElement(ge,{tagType:e,onChange:function(a){return r(a,t,e)}}))})))):null};he.propTypes={open:c.a.bool.isRequired,relCoords:c.a.object,tagConfigArr:c.a.array.isRequired,title:c.a.string,promptText:c.a.string,onClose:c.a.func.isRequired,onNewTag:c.a.func.isRequired};var be=he,ye=a(11),we=a(12);function ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ve(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var Ee=function(e,t,a,r,n){var l=Object(o.useState)(!1),c=Object(_.a)(l,2),s=c[0],u=c[1],p=Object(o.useState)(null),d=Object(_.a)(p,2),m=d[0],g=d[1],f=Object(o.useContext)(ye.a).tagConfigArr,h=Object(o.useMemo)((function(){var t=new we.Tags(f,e.tags),r=t.getRelXYTags(a?a.multiplier:null);return{tagClass:t,relXYTags:r}}),[e.tags,a]),y=function(n,o,i){if(b.a.info("onNewTag",{data:n,relCoords:o,tagType:i}),a&&t){var l=h.tagClass.createNewXYTagObj(n.label,i.id,o,a.multiplier);g(null),r&&r([].concat(Object(S.a)(e.tags),[l]))}},w=function(t,r){var n=t.x,o=t.y;return e.tags.map((function(e){return e.label!==r.label?e:a?Oe({},e,{coords:{x:parseInt(n/a.multiplier,10),y:parseInt(o/a.multiplier,10)}}):e}))};return{onNewTag:y,onTagDelete:function(a){if(b.a.debug("onTagDelete",{tag:a,editing:t}),t){var n=e.tags.filter((function(e){return e.label!==a.label}));r&&r(n)}},onAddTagTrigger:function(e){if(t&&!m&&a){var r=e.target.getBoundingClientRect();b.a.debug(Oe({},e)),b.a.info("onAddTagTrigger",{e:e,rect:r,type:e.type,target:e.target,clientEvent:[e.clientX,e.clientY],window:[window.innerWidth,window.innerHeight],newSize:a}),n(!1),g({x:parseInt(e.clientX-r.left,10),y:parseInt(e.clientY-r.top,10)})}},onTagDragOver:function(e,t){w(e,t),u(!0)},onTagDragStop:function(e,t){var a=w(e,t);u(!1),r&&r(a)},XYTagChooserWrapper:function(e){return i.a.createElement(be,xe({open:!s&&Boolean(m),relCoords:m,onNewTag:y,onClose:function(){g(null),n(!0)},tagConfigArr:f},e))},relXYTags:h.relXYTags}};a.d(t,"a",(function(){return E})),a.d(t,"b",(function(){return X})),a.d(t,"c",(function(){return J})),a.d(t,"d",(function(){return pe})),a.d(t,"e",(function(){return Ee}))},1777:function(e,t,a){"use strict";a.r(t);var r=a(16),n=a(7),o=a(42),i=a(0),l=a.n(i),c=a(1),s=a.n(c),u=a(146),p=a.n(u),d=a(4),m=a.n(d);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h=function(e){var t=e.children,a=e.delay,c=Object(o.a)(e,["children","delay"]),s=Object(i.useState)({}),u=Object(n.a)(s,2),d=u[0],g=u[1],h=Object(i.useRef)(),b=Object(i.useRef)();h.current=d,Object(i.useEffect)((function(){b.current=!0;var e="/photomon_v0".split("/").filter((function(e){return e.length>0})),t=0===e.length?"data":"".concat(e[0],"/data"),n=window.location.protocol+"//"+window.location.host+"/"+t;return m.a.debug("PATH",{finalPath:n,dirName:e,protocol:window.location.protocol,host:window.location.host}),Object.keys(c).forEach((function(e){h.current&&!h.current[e]&&p()("".concat(n,"/").concat(c[e])).then((function(t){if(a)m.a.debug("LoadFakeData::Start loading..."),setTimeout((function(){b.current&&(m.a.debug("LoadFakeData::Loading done..."),g(f({},h.current,Object(r.a)({},e,t.data))))}),a);else{if(!b.current)return;g(f({},h.current,Object(r.a)({},e,t.data)))}})).catch((function(e){m.a.error("LoadFakeData::I AM AN ERROR",e)}))})),function(){b.current=!1}}),[]);var y=Object.keys(d).length,w=Object.keys(c).length,v=(d.context,Object(o.a)(d,["context"])),O=y!==w?{}:v,x=Object(i.useMemo)((function(){return l.a.cloneElement(t,f({},t.props,{},O))}),[d]);return m.a.debug("LoadFakeData::finalData",O),x};h.propTypes={children:s.a.node.isRequired,delay:s.a.number},t.default=h},1778:function(e,t,a){"use strict";a.r(t);a(42),a(0);var r=a(1),n=a.n(r);t.default=function(e){n.a.any.isRequired}},1944:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(1),i=a.n(o),l=a(111),c=a(2016),s=a(536),u=a(194),p=a.n(u),d=a(176),m=a(2023),g=a(11),f=a(122),h=a(195),b=a(254),y=Object(d.a)((function(e){return{root:{display:"flex",flexDirection:"column",height:"100%"},container:{padding:0,display:"flex",flexDirection:"column",flexGrow:1},listContainer:{flexGrow:1,overflow:"hidden"},vList:{height:"100%",width:"100%"},feedContainer:{flexGrow:1,transform:"translateZ(0)"},grow:{flexGrow:1}}})),w=function(e){var t=e.events,a=e.loading,o=e.actions,u=e.window,d=y(),w=Object(r.useRef)(),v=Object(g.i)(w).size,O=Object(r.useContext)(g.a).online,x=function(e){var r,i=e.index,l=(e.isScrolling,e.isVisible,e.key),c=e.parent,s=e.style,g=t[i];if(i<t.length&&g)r=n.a.createElement(b.a,{event:t[i],key:"feedItem-".concat(t[i]._id),actions:o});else if(i===t.length){var f=u&&0===u[0];r=n.a.createElement(h.a,{icon:n.a.createElement(m.a,{size:30,thickness:2,color:"inherit"}),text:"Loading..."});var y=1200+c.state.scrollTop>s.top;O.isOnline?f?r=n.a.createElement(h.a,{text:"End of feed"}):!a&&y&&o.fetchMore():r=n.a.createElement(h.a,{icon:n.a.createElement(p.a,null),text:"Cannot Refresh Offline"})}return n.a.createElement("div",{className:d.row,key:l,style:s},r)};return x.propTypes={index:i.a.any,key:i.a.any,style:i.a.any,isScrolling:i.a.any,isVisible:i.a.any,parent:i.a.any},n.a.createElement("div",{className:d.root},n.a.createElement(f.c,null,n.a.createElement(l.a,{className:d.grow},"Home Feed")),n.a.createElement(c.a,{className:d.container,maxWidth:"sm"},n.a.createElement("div",{className:d.listContainer,ref:w},n.a.createElement(s.a,{height:v.height,width:v.width,className:d.vList,rowCount:t.length+1,rowHeight:300,rowRenderer:x}))))};w.propTypes={events:i.a.array.isRequired,loading:i.a.bool,window:i.a.arrayOf(i.a.number),actions:i.a.shape({onImageClick:i.a.func.isRequired,onProfileClick:i.a.func.isRequired,onMapClick:i.a.func.isRequired,fetchNewest:i.a.func.isRequired,fetchMore:i.a.func.isRequired})},t.default=w},195:function(e,t,a){"use strict";var r=a(0),n=a.n(r),o=a(1),i=a.n(o),l=a(111),c=a(176),s=Object(c.a)((function(e){return{root:{display:"flex",alignItems:"center"},grow:{flexGrow:1},text:{textAlign:"center",fontStyle:"italic",padding:e.spacing(2,1)}}})),u=function(e){var t=e.style,a=e.icon,r=e.text,o=s();return n.a.createElement("div",{className:o.root},n.a.createElement("div",{className:o.grow}),a,n.a.createElement(l.a,{className:o.text,variant:"subtitle1",color:"textSecondary",component:"div",style:t},r),n.a.createElement("div",{className:o.grow}))};u.propTypes={style:i.a.object,icon:i.a.any,text:i.a.string},t.a=u},196:function(e,t,a){"use strict";var r=a(7),n=a(0),o=a.n(n),i=a(1),l=a.n(i),c=a(20),s=a.n(c),u=a(2098),p=a(2076),d=a(2020),m=a(2095),g=a(2018),f=a(111),h=a(268),b=a.n(h),y=a(506),w=a.n(y),v=a(160),O=a.n(v),x=a(121),E=a.n(x),S=a(176),k=a(67),j=a(11),C=[{name:"MATCH",label:"Match Reference Aspect"},{name:"FULL",label:"Full Camera Resolution"}],P=a(276),T=Object(S.a)((function(e){return{root:{background:"black",height:"100%",width:"100%"},cameraErrorText:{color:"white",position:"absolute",top:"50%",left:"50%",width:"90%",transform:"translateY(-50%) translateX(-50%)",textAlign:"center"},disabledFab:{color:"#AAAAA!important",background:"#DDDDDD!important",opacity:.2},cameraFab:{position:"absolute",color:P.a[500],background:"white",zIndex:10,"@media (orientation: landscape)":{right:"20px",top:"50%",transform:"translateY(-50%)",height:"25vh",width:"25vh",maxHeight:"100px",maxWidth:"100px"},"@media (orientation: portrait)":{bottom:"20px",left:"50%",transform:"translateX(-50%)",height:"25vw",width:"25vw",maxHeight:"100px",maxWidth:"100px"}},slider:{position:"absolute","@media (orientation: landscape)":{height:"80%",bottom:"0%"},"@media (orientation: portrait)":{left:"0",transform:"translateY(-50%)",height:"75%",top:"50%"}},cameraIcon:{height:"100%",width:"100%"},cancelFab:{position:"absolute",zIndex:10,"@media (orientation: landscape)":{right:"15px",top:"15px"},"@media (orientation: portrait)":{right:"15px",bottom:"15px"}},cancelIcon:{height:"100%",width:"100%"},swipeDrawer:{width:"50%"},libraryFab:{position:"absolute",zIndex:10,"@media (orientation: landscape)":{left:"15px",top:"15px"},"@media (orientation: portrait)":{left:"15px",top:"15px"}},cropFab:{position:"absolute",zIndex:10,"@media (orientation: landscape)":{right:"15px",bottom:"15px"},"@media (orientation: portrait)":{left:"15px",bottom:"15px"}},myLocationFab:{position:"absolute",zIndex:10,"@media (orientation: landscape)":{right:"15px",bottom:"15px"},"@media (orientation: portrait)":{left:"15px",bottom:"15px"}},myLocationIcon:{height:"80%",width:"80%"},captured:{},reference:{position:"absolute",zIndex:2,top:0,left:0,height:"100%",width:"100%"},cropSnack:{top:"50%",left:"50%",transform:"translateY(-50%) translateX(-50%)"},cropSnackPaper:{border:"2px solid red"},cropSnackContent:{background:"black",border:"2px solid white",textAlign:"center",color:"white","&>*":{width:"100%"}},video:{position:"absolute",zIndex:1,top:0,left:0,height:"100%",width:"100%"},portraitRef:{"@media (orientation: landscape)":{height:"100vw",width:"100vh",transform:"rotate(90deg)",transformOrigin:"0 0",position:"absolute",left:"100%"}},landscapeRef:{"@media (orientation: portrait)":{height:"100vw",width:"100vh",transform:"rotate(90deg)",transformOrigin:"0 0",position:"absolute",left:"100%"}}}})),I=function(e){var t=e.onCancel,a=e.onShutter,i=e.defaultRefPhotoId,l=e.photos,c=T(),h=Object(n.useState)(50),y=Object(r.a)(h,2),v=y[0],x=y[1],S=Object(n.useState)(i?0:1),P=Object(r.a)(S,2),I=P[0],N=P[1],A=Object(n.useState)(),z=Object(r.a)(A,2),_=z[0],R=z[1],D=Object(n.useState)(),L=Object(r.a)(D,2),M=L[0],F=L[1],U=Object(n.useState)(!1),B=Object(r.a)(U,2),q=B[0],W=B[1],G=Object(n.useRef)(),H=Object(n.useRef)(),V=_&&_>1?c.portraitRef:c.landscapeRef,Y=Object(n.useState)(i),Q=Object(r.a)(Y,2),$=Q[0],X=Q[1],Z=Object(n.useState)(!1),K=Object(r.a)(Z,2),J=K[0],ee=K[1],te=Object(n.useCallback)((function(){var e=(I+1)%C.length;N(e)}),[I]),ae=Object(j.h)((function(e){return a(e,$||null)}),M),re=ae.cameraError,ne=ae.captureImage,oe=ae.cameraOnline,ie=ae.sensorSize;Object(n.useEffect)((function(){oe&&(G.current&&clearTimeout(G.current),W(!0),G.current=setTimeout((function(){return W(!1)}),1e3),ce())}),[I,oe]),Object(n.useEffect)((function(){ie&&!M&&ce()}),[ie]);var le=Object(n.useMemo)((function(){return l.find((function(e){return e.id===$}))}),[$]),ce=function(){if(ie){var e=H.current?I:C.findIndex((function(e){return"FULL"===e.name})),t=function(e,t,a,r,n){var o=a||t[1]/t[0],i=e,l=1;switch(C[r].name){case"MATCH":var c=n.naturalWidth,s=n.naturalHeight,u=n.height;s>0&&c>0&&(l=u/s,o=s/c),i=[Math.round(Math.min(s*l/o,t[0])),Math.round(Math.min(c*l*o,t[1]))];break;case"FULL":l=Math.min(window.innerHeight,window.innerWidth)/Math.min(t[0],t[1]),i=[Math.round(t[0]*l),Math.round(t[1]*l)]}return{newRefImgRatio:o,newPreviewSize:i}}(M,ie,_,e,H.current);t.newRefImgRatio!==_&&R(t.newRefImgRatio),t.newPreviewSize!==M&&F(t.newPreviewSize)}};Object(n.useEffect)((function(){N(i?0:1),X(i)}),[i]);return Object(n.useLayoutEffect)((function(){return window.addEventListener("resize",ce),window.addEventListener("orientationchange",ce),function(){window.removeEventListener("resize",ce),window.removeEventListener("orientationchange",ce)}}),[]),o.a.createElement("div",{className:c.root},o.a.createElement(g.a,null),!re&&Boolean($)&&o.a.createElement(k.c,{className:c.slider,defaultValue:v,onChange:x}),re&&o.a.createElement("div",{className:c.cameraErrorText},o.a.createElement(f.a,{variant:"subtitle1",color:"inherit"},"No Camera Access"),o.a.createElement(f.a,{variant:"body2",color:"inherit"},"Please enabled access in your settings.")),Boolean($)&&o.a.createElement("div",{className:s()(c.reference,V)},o.a.createElement(k.g,{imgRef:H,onLoad:ce,sizePriority:["large","medium","thumb"],style:{opacity:1-v/100},photo:le})),!re&&o.a.createElement("video",{autoPlay:!0,playsInline:!0,muted:!0,id:"webcam",width:window.innerWidth,height:window.innerHeight,className:c.video}),o.a.createElement(d.a,{color:"primary","aria-label":"Take Photo",classes:{disabled:c.disabledFab},disabled:re||!oe,className:s()(c.cameraFab,c.buttonFab),onClick:function(){return ne(_)}},o.a.createElement(b.a,{className:c.cameraIcon})),o.a.createElement(d.a,{"aria-label":"Crop Toggle",classes:{disabled:c.disabledFab},disabled:re||!oe||!$,className:s()(c.cropFab,c.buttonFab),onClick:te},o.a.createElement(w.a,{className:c.cropIcon})),o.a.createElement(d.a,{color:"secondary","aria-label":"cancel",className:s()(c.cancelFab,c.buttonFab),onClick:t,classes:{disabled:c.disabledFab}},o.a.createElement(O.a,{className:c.cancelIcon})),l&&o.a.createElement(d.a,{"aria-label":"library",className:s()(c.libraryFab,c.buttonFab),classes:{disabled:c.disabledFab},disabled:!l||0===l.length,onClick:function(){return ee(!0)}},o.a.createElement(E.a,{className:c.libraryIcon})),l&&o.a.createElement(m.a,{anchor:"left",open:J,classes:{paperAnchorLeft:c.swipeDrawer},onClose:function(){return ee(!1)},onOpen:function(){return ee(!0)}},o.a.createElement("div",{tabIndex:0,className:c.swipeDrawerContainer,role:"button",onClick:function(){return ee(!1)},onKeyDown:function(){return ee(!1)}},o.a.createElement(k.d,{multiSelect:!1,columns:1,photos:l,onTileClick:function(e){X(l.find(function(t){return t.id===e}||{}).id),ee(!1),N(0)}}))),o.a.createElement(u.a,{open:q,className:c.cropSnack,disableWindowBlurListener:!0},o.a.createElement(p.a,{classes:{root:c.cropSnackContent},message:C[I].label})))};I.propTypes={defaultRefPhotoId:l.a.string,onCancel:l.a.func.isRequired,onShutter:l.a.func.isRequired,photos:l.a.array};var N=I,A=a(18),z=a.n(A),_=a(2069),R=a(2070),D=a(2055),L=a(277),M=a(95),F=a.n(M),U=a(227),B=a(108),q=a(507),W=a.n(q),G=function(e){var t=e.data,a=e.imageHeight,r=e.imageWidth;return new Promise((function(e,n){try{e(W()(t,r,a))}catch(o){n(o)}}))},H=a(4),V=a.n(H),Y=Object(S.a)((function(e){return{root:{display:"flex",height:"100%",flexDirection:"column"},qrIcon:{border:"5px solid red",padding:e.spacing(2),position:"absolute",color:"white",opacity:.4,zIndex:2,width:"70%",height:"70%",top:"50%",left:"50%",transformOrigin:"50% 50%",transform:"translateY(-50%) translateX(-50%)"},backupText:{position:"absolute",color:"white",textAlign:"center",zIndex:2,width:"70%",height:"70%",top:"50%",left:"50%",transformOrigin:"50% 50%",transform:"translateY(-50%) translateX(-50%)"},manualImg:{position:"absolute",zIndex:1},appBar:{},inner:{padding:e.spacing(2),height:"100%",flexGrow:1,overflow:"hidden"},tipPaper:{padding:e.spacing(2),margin:e.spacing(2)},docContainer:{flexGrow:1,padding:e.spacing(2)},cameraContainer:{width:"80%",margin:"0 auto",position:"relative","&::before":{content:'" "',display:"block",paddingTop:"100%"}},cameraContainerError:{background:"black"},snackErr:{background:L.a[500],color:"white"},snackSuccess:{background:P.a[500],color:"white"},snackMsg:{},video:{height:"100%",width:"100%",verticalAlign:"top",position:"absolute",top:0,left:0,zIndex:1}}})),Q=function(e){var t=e.onMenuBack,a=e.onCapture,i=e.isIos,l=Y(),c=Object(n.useRef)(),d=Object(n.useState)(null),m=Object(r.a)(d,2),h=m[0],b=m[1],y=Object(n.useState)(null),w=Object(r.a)(y,2),v=w[0],O=w[1],x=Object(n.useCallback)((function(e){var t,a,r,n;return z.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=null,o.prev=1,o.next=4,z.a.awrap(G(e));case 4:t=o.sent,o.next=10;break;case 7:o.prev=7,o.t0=o.catch(1),V.a.error(o.t0);case 10:if(o.prev=10,!S||t){o.next=13;break}throw new Error("Captured Image does not have a QR code");case 13:if(!t){o.next=24;break}if("?fromqr=",a=t.data.indexOf("?fromqr=")+"?fromqr=".length,r=t.data.slice(a),(n=JSON.parse(decodeURI(r))).type&&n.s){o.next=20;break}throw new Error("Type or SeriesID missing from QR Code");case 20:O(n),c.current&&clearInterval(c.current),h&&b(null),V.a.info("QRCODE",t,n);case 24:o.next=30;break;case 26:o.prev=26,o.t1=o.catch(10),h||b("Not a valid QR Code"),V.a.error(o.t1);case 30:case"end":return o.stop()}}),null,null,[[1,7],[10,26]])})),E=Object(j.h)(x,[400,400]),S=E.cameraError,k=E.captureRawData,C=E.cameraOnline;return Object(n.useEffect)((function(){return C&&k&&!S&&(c.current=setInterval(k,100)),function(){c.current&&clearInterval(c.current)}}),[C,S]),o.a.createElement("div",{className:l.root},o.a.createElement(g.a,null)," ",o.a.createElement(_.a,{position:"static",className:l.appBar},o.a.createElement(R.a,{disableGutters:!0},o.a.createElement(D.a,{className:l.menuButton,color:"inherit",onClick:t,"aria-label":"Menu"},o.a.createElement(F.a,null)),o.a.createElement(f.a,{variant:"subtitle1",color:"inherit",className:l.toolbarTitle},"Capture QR Code"))),o.a.createElement("div",{className:l.inner},o.a.createElement(U.a,{className:s()(l.cameraContainer,S?l.cameraContainerError:null)},o.a.createElement(B.d,{className:l.qrIcon}),o.a.createElement("video",{autoPlay:!0,playsInline:!0,muted:!0,id:"webcam",className:l.video})),o.a.createElement(U.a,{className:l.tipPaper},o.a.createElement(f.a,null,"TIP: You can find the QR code for a series in the SHARE tab of that series"))),o.a.createElement(u.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:!!h,autoHideDuration:2e3,onClose:function(){b(null)}},o.a.createElement(p.a,{className:l.snackErr,message:o.a.createElement("span",{className:l.snackMsg},h)})),!i&&o.a.createElement(u.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:S},o.a.createElement(p.a,{className:l.snackErr,message:o.a.createElement("span",{className:l.snackMsg},"Camera Error. Check your device's permissions")})),o.a.createElement(u.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:!!v,autoHideDuration:500,onClose:function(){return a(v.type,v.s,v.p)}},o.a.createElement(p.a,{className:l.snackSuccess,message:o.a.createElement("span",{className:l.snackMsg},"Valid QR Code found!")})))};Q.propTypes={onMenuBack:l.a.func.isRequired,isIos:l.a.bool.isRequired,onCapture:l.a.func.isRequired};var $=Q,X=a(2057),Z=a(2062),K=a(2083),J=a(508),ee=a.n(J),te=a(12),ae=Object(S.a)((function(e){return{root:{},title:{background:e.palette.primary.main,color:e.palette.primary.contrastText},qrPaper:{textAlign:"center",padding:e.spacing(0,2)},qrCode:{width:"100%",minHeight:300,maxHeight:400}}})),re=function(e){var t=e.onClose,a=e.open,i=e.series,l=e.photoId,c=ae(),s=Object(n.useState)(null),u=Object(r.a)(s,2),p=u[0],d=u[1],m=Object(te.createShareUrl)(j.d.endpoints.share,i,l),g=m.url,h=m.ogShare,b=["OPEN","PUBLIC"].indexOf(i.access)>-1;return Object(n.useLayoutEffect)((function(){ee.a.toString(g,(function(e,t){e?V.a.error(e):d(t)}))}),[i]),Object(n.useLayoutEffect)((function(){if(navigator.share&&a&&b){var e="MorPhoto Series";i.note&&(e=i.note.length>100?i.note.slice(100)+"...":i.note),navigator.share({title:i.name,text:e,url:h}).then((function(){return V.a.info("Successful share")})).catch((function(e){return V.a.info("Error sharing",e)}))}}),[a]),o.a.createElement(X.a,{open:a,fullWidth:!0,onClose:t,className:c.root},o.a.createElement(Z.a,{className:c.title},i.name),o.a.createElement(U.a,{className:c.qrPaper},b?o.a.createElement("svg",{className:c.qrCode,dangerouslySetInnerHTML:{__html:p}}):o.a.createElement(f.a,{variant:"overline",color:"error"},"You cannot share a private series."),b&&o.a.createElement(K.a,{href:g},"Share Link"),i.coords&&o.a.createElement(f.a,{component:"div",className:c.coords,variant:"overline"},"coords: [ ",i.coords[0],", ",i.coords[1]," ]")))};re.propTypes={onClose:l.a.func.isRequired,open:l.a.bool,series:l.a.object.isRequired,photoId:l.a.string};var ne=re;a.d(t,"a",(function(){return N})),a.d(t,"c",(function(){return $})),a.d(t,"b",(function(){return ne}))},2003:function(e,t,a){},2006:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(39),i=a.n(o),l=a(131),c=a(42),s=a(74),u=a(30),p=a(80),d=a(85),m=a(47),g=a(541),f={s3Upload:a(336).default,getPhotoUrls:a(644).default,graphql:{APOLLOSTATES:a(393).APOLLOSTATES,useGraphQL:a(393).default,queries:a(2009).default,mutations:{createPhoto:a(339).default,createSeries:a(337).default,deletePhoto:a(341).default,deleteSeries:a(342).default,unwatch:a(344).default,updatePhoto:a(340).default,updateSeries:a(338).default,watch:a(343).default,updateQueries:a(56)}},offline:a(49),redux:{withReduxProvider:a(2008).default,actions:a(57).default}},h=a(1),b=a.n(h),y=a(45),w=a(4),v=a.n(w),O=function(){var e=Object(r.useRef)(),t=function(t){if("Enter"===t.key&&e.current)try{var a=e.current.getElementsByClassName("enterAction");a&&a[0]&&a[0].click()}catch(r){v.a.error("useAuthCommon::handleKeyPress",r)}};return Object(r.useEffect)((function(){if(e.current){try{document.addEventListener("keypress",t,!1)}catch(a){v.a.error("useAuthCommon::useEffect",a)}return function(){return document.removeEventListener("keypress",t,!1)}}}),[]),e},x=function(e){var t=e.children,a=e.loading,r=O();return n.a.createElement("div",{ref:r,style:{height:"100%"}},n.a.createElement(y.k,{spin:a},t))};x.propTypes={children:b.a.any,loading:b.a.bool};var E=x,S=a(2099),k=a(2060),j=a(2070),C=a(176),P=function(e){return{root:{},spacer:{flexGrow:1},forgotPassword:{width:"100%",textAlign:"right"},switch:{},switchButton:{flexGrow:1,"&:last-child":{borderRadius:0},"&:first-child":{borderRadius:0}},phoneNumInner:{marginTop:e.spacing(1),display:"flex"},phoneNumDropdown:{margin:e.spacing(1),minWidth:120},warnText:{marginTop:e.spacing(2),fontStyle:"italic"},noSignin:{margin:e.spacing(2,0),padding:e.spacing(1),textAlign:"left",border:"1px solid #00000022",background:"#0000000F"}}},T=a(111),I=Object(C.a)(P),N=function(e){var t=e.loading,a=e.handleSignup,r=(e.federated,e.handleForgotPassword),o=e.handleInputChange,i=e.handleBeAnonymous,l=e.handleSignIn,s=(Object(c.a)(e,["loading","handleSignup","federated","handleForgotPassword","handleInputChange","handleBeAnonymous","handleSignIn"]),I());return n.a.createElement(n.a.Fragment,null,n.a.createElement(S.a,{id:"username",fullWidth:!0,key:"username",name:"username",label:"Username",autoFocus:!0,className:s.textField,margin:"normal",onChange:o}),n.a.createElement(S.a,{fullWidth:!0,id:"password",label:"Password",key:"password",name:"password",type:"password",className:s.textField,autoComplete:"current-password",margin:"normal",onChange:o}),n.a.createElement(j.a,{disableGutters:!0},n.a.createElement(k.a,{component:"button",color:"secondary",variant:"contained",disabled:t,onClick:a},"New Account"),n.a.createElement("div",{className:s.spacer}),n.a.createElement(k.a,{className:"enterAction",component:"button",color:"primary",variant:"contained",disabled:t,onClick:l},"Sign In")),n.a.createElement(k.a,{color:"primary",onClick:r,size:"small"},"Forgot Password"),n.a.createElement("div",{className:s.noSignin},n.a.createElement(k.a,{fullWidth:!0,size:"small",variant:"outlined",onClick:i,color:"inherit"},"Continue without logging in"),n.a.createElement(T.a,{variant:"caption",className:s.warnText,color:"textSecondary",component:"div"},"You will not be able to add content and many features will be unavailable.")))};N.propTypes={loading:b.a.bool,federated:b.a.object,handleSignup:b.a.func.isRequired,handleForgotPassword:b.a.func.isRequired,handleInputChange:b.a.func.isRequired,handleBeAnonymous:b.a.func.isRequired,handleSignIn:b.a.func.isRequired};var A=N,z=a(7),_=a(2065),R=a(2066),D=a(2094),L=a(2103),M=a(20),F=a.n(M),U=a(276);function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var q=Object(C.a)((function(e){return{root:{display:"flex"},chipContainer:{flex:"1 1"},chip:{height:e.spacing(2.5)},label:{padding:e.spacing(0,1,0,1)},ok:{color:"white",background:U.a[500],border:"1px solid ".concat(U.a[500])},bad:{color:e.palette.error.main,background:"transparent",border:"1px solid ".concat(e.palette.error.main)}}})),W=function(e){var t=e.pword,a=q(),r=!!t&&!!t.match(/[A-Z]/),o=!!t&&!!t.match(/[a-z]/),i=!!t&&!!t.match(/[0-9]/),l=!!t&&!!t.match(/[!@#$%^&*(),.?'":;{}\[\]\-_=+|/\\`~<>]/),c=!!t&&t.length>=8;return n.a.createElement("div",{className:a.root},n.a.createElement(H,{ok:c,label:"8+"}),n.a.createElement(H,{ok:r,label:"A-Z"}),n.a.createElement(H,{ok:o,label:"a-z"}),n.a.createElement(H,{ok:i,label:"0-9"}),n.a.createElement(H,{ok:l,label:"!@#$%^&*,.?"}))};W.propTypes={pword:b.a.string};var G=W,H=function(e){var t=e.ok,a=Object(c.a)(e,["ok"]),r=q();return n.a.createElement("div",{className:r.chipContainer},n.a.createElement(L.a,B({classes:{root:F()(r.chip,t?r.ok:r.bad),label:r.label}},a)))};H.propTypes={ok:b.a.bool};var V=Object(C.a)(P),Y=function(e){var t=e.handleInputChange,a=e.signUpFields,o=e.signUpFieldLabels,i=e.signUpFieldPlaceholders,l=e.handleSignup,s=e.handleBack,u=e.countryDialCodes,p=e.defaultDialCode,d=(Object(c.a)(e,["handleInputChange","signUpFields","signUpFieldLabels","signUpFieldPlaceholders","handleSignup","handleBack","countryDialCodes","defaultDialCode"]),Object(r.useState)(p)),m=Object(z.a)(d,2),g=m[0],f=m[1],h=Object(r.useState)(),b=Object(z.a)(h,2),y=b[0],w=b[1],v=function(e){w(e.target.value),t(e)},O=V(),x=function(e){t(e),f(e.target.value)};return n.a.createElement(n.a.Fragment,null,a.map((function(e,r){return"phone_number"!==e.key?n.a.createElement(n.a.Fragment,{key:e.key},n.a.createElement(S.a,{fullWidth:!0,autoFocus:0===a.findIndex((function(t){return t.key===e.key})),type:e.type,name:e.key,placeholder:i[r],label:o[r],className:O.textField,margin:"normal",onChange:"password"===e.key?v:t}),"password"===e.key&&n.a.createElement(G,{pword:y})):n.a.createElement(_.a,{className:O.phoneNumDropdown,fullWidth:!0,key:"phonenum"},n.a.createElement(R.a,{htmlFor:"dial_code",shrink:!0},o[r],e.required?"*":""),n.a.createElement("div",{className:O.phoneNumInner},n.a.createElement(D.a,{value:g,onChange:x,inputProps:{name:"dial_code",id:"dial_code"}},u.map((function(e){return n.a.createElement("option",{key:e,value:e},e)}))),n.a.createElement(S.a,{placeholder:i[r],type:"tel",fullWidth:!0,id:"phone_line_number",key:"phone_line_number",name:"phone_line_number",onChange:t})))})),n.a.createElement(j.a,{disableGutters:!0},n.a.createElement(k.a,{color:"secondary",variant:"outlined",onClick:s},"Back"),n.a.createElement("div",{className:O.spacer}),n.a.createElement(k.a,{className:"enterAction",component:"button",color:"primary",variant:"contained",onClick:l},"Create Account")))};Y.propTypes={handleInputChange:b.a.func.isRequired,signUpFields:b.a.array.isRequired,signUpFieldLabels:b.a.array.isRequired,signUpFieldPlaceholders:b.a.array.isRequired,countryDialCodes:b.a.array.isRequired,defaultDialCode:b.a.string.isRequired,handleSignup:b.a.func.isRequired,handleBack:b.a.func.isRequired};var Q=Y,$=Object(C.a)(P),X=function(e){var t=e.handleInputChange,a=e.handleBack,r=e.handleConfirm,o=$();return n.a.createElement(n.a.Fragment,null,n.a.createElement(S.a,{id:"mfaCode",fullWidth:!0,autoFocus:!0,label:"MFA Code",name:"code",className:o.textField,margin:"normal",onChange:t}),n.a.createElement(j.a,{disableGutters:!0},n.a.createElement(k.a,{color:"secondary",variant:"contained",onClick:a},"Back"),n.a.createElement("div",{className:o.spacer}),n.a.createElement(k.a,{className:"enterAction",color:"primary",variant:"contained",onClick:r},"Confirm")))};X.propTypes={handleInputChange:b.a.func.isRequired,handleBack:b.a.func.isRequired,handleConfirm:b.a.func.isRequired};var Z=X,K=a(2098),J=a(2076),ee=a(192),te=a.n(ee),ae=Object(C.a)((function(e){return{root:{color:e.palette.primary.contrastText,background:e.palette.primary.main},checkEmailMsgIco:{marginRight:e.spacing(1)},checkEmailMsgTxt:{textAlign:"left",flexGrow:1},checkEmailMsg:{display:"flex"}}})),re=function(e){var t=e.onResend,a=e.open,r=ae();return n.a.createElement(K.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a},n.a.createElement(J.a,{className:r.root,message:n.a.createElement("div",{className:r.checkEmailMsg},n.a.createElement(te.a,{className:r.checkEmailMsgIco,color:"inherit"}),n.a.createElement(T.a,{className:r.checkEmailMsgTxt,color:"inherit"},"Code Sent Check your email")),action:t&&[n.a.createElement(k.a,{key:"undo",color:"secondary",size:"small",variant:"contained",onClick:t},"Resend")]}))};re.propTypes={onResend:b.a.func,open:b.a.bool};var ne=re,oe=Object(C.a)(P),ie=function(e){var t=e.handleInputChange,a=e.handleBack,r=e.handleResend,o=e.handleConfirm,i=oe();return n.a.createElement(n.a.Fragment,null,n.a.createElement(S.a,{id:"username",fullWidth:!0,autoFocus:!0,name:"username",label:"Username",className:i.textField,margin:"normal",onChange:t}),n.a.createElement(S.a,{id:"confirmationCode",fullWidth:!0,name:"code",label:"Confirmation Code",className:i.textField,margin:"normal",onChange:t}),n.a.createElement(T.a,{variant:"caption",style:{textAlign:"left"}},"If you can't find it in your inbox be sure to check your spam folder."),n.a.createElement(j.a,{disableGutters:!0},n.a.createElement(k.a,{color:"secondary",variant:"outlined",onClick:a},"Back"),n.a.createElement("div",{className:i.spacer}),n.a.createElement(k.a,{color:"primary",variant:"contained",className:"enterAction",onClick:o},"Confirm")),n.a.createElement(ne,{open:!0,onResend:r}))};ie.propTypes={handleInputChange:b.a.func.isRequired,handleBack:b.a.func.isRequired,handleResend:b.a.func.isRequired,handleConfirm:b.a.func.isRequired};var le=ie,ce=Object(C.a)(P),se=function(e){var t=e.handleSubmit,a=e.handleInputChange,o=e.handleSendCode,i=e.handleBack,l=Object(r.useState)(!1),c=Object(z.a)(l,2),s=c[0],u=c[1],p=ce();return n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,null,"Forgot Password"),!s&&n.a.createElement(S.a,{id:"username",autoFocus:!0,fullWidth:!0,label:"Username",name:"username",className:p.textField,margin:"normal",onChange:a}),s&&n.a.createElement(S.a,{id:"changecode",fullWidth:!0,autoFocus:!0,label:"Code",name:"code",className:p.textField,margin:"normal",onChange:a}),s&&n.a.createElement(T.a,{variant:"caption",style:{textAlign:"left"}},"If you can't find it in your inbox be sure to check your spam folder."),s&&n.a.createElement(S.a,{id:"newpassword",fullWidth:!0,label:"New Password",className:p.textField,type:"password",name:"password",autoComplete:"current-password",margin:"normal",onChange:a}),!s&&n.a.createElement(T.a,{variant:"caption",style:{textAlign:"left"}},"Enter your username and you will be sent an email with a code to reset your password."),n.a.createElement(j.a,{disableGutters:!0},n.a.createElement(k.a,{color:"secondary",variant:"outlined",onClick:function(){s?u(!1):i()}},"Back"),n.a.createElement("div",{className:p.spacer}),!s&&n.a.createElement(k.a,{color:"primary",variant:"contained",className:"enterAction",onClick:function(){u(!0),o()}},"Send Code"),s&&n.a.createElement(k.a,{className:"enterAction",color:"primary",variant:"contained",onClick:t},"Submit")),n.a.createElement(ne,{open:s,onResend:o}))};se.propTypes={handleSubmit:b.a.func.isRequired,handleInputChange:b.a.func.isRequired,handleSendCode:b.a.func.isRequired,handleBack:b.a.func.isRequired};var ue=se,pe=function(e){var t=e.message;return n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,{variant:"h3"},"Loading..."),t&&n.a.createElement(T.a,{variant:"overline"},t))};pe.propTypes={message:b.a.string};var de=pe,me=Object(C.a)(P),ge=function(e){var t=e.change,a=e.requiredAttributes,o=e.placeholders,i=e.handleInputChange,l=me(),c=Object(r.useState)(),s=Object(z.a)(c,2),u=s[0],p=s[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,null,"A new password is required"),n.a.createElement(S.a,{id:"newassword",fullWidth:!0,autoFocus:!0,label:"New Password",className:l.textField,type:"password",autoComplete:"new-password",margin:"normal",onChange:function(e){p(e.target.value),i(e)}}),n.a.createElement(G,{pword:u}),a.map((function(e,t){return n.a.createElement(S.a,{fullWidth:!0,key:e,name:e,className:l.textField,placeholder:o[t],type:"text",margin:"normal",onChange:i})})),n.a.createElement(j.a,{disableGutters:!0},n.a.createElement(k.a,{color:"secondary",variant:"contained"},"Back"),n.a.createElement("div",{className:l.spacer}),n.a.createElement(k.a,{color:"primary",variant:"contained",onClick:t,className:"enterAction"},"Change")))};ge.propTypes={change:b.a.func.isRequired,handleInputChange:b.a.func.isRequired,requiredAttributes:b.a.array,placeholders:b.a.array};var fe=ge,he=a(2093),be=a(2077),ye=a(489),we=a.n(ye),ve=Object(C.a)(P),Oe=0,xe=1,Ee=function(e){var t=e.onBack,a=(e.hasEmail,e.hasPhone,e.handleSkip,e.handleVerify,e.handleSubmit,e.handleInputChange),o=Object(r.useState)(!1),i=Object(z.a)(o,2),l=i[0],c=i[1],s=Object(r.useState)(Oe),u=Object(z.a)(s,2),p=u[0],d=u[1],m=ve();return n.a.createElement(n.a.Fragment,null,!l&&n.a.createElement(n.a.Fragment,null,n.a.createElement(T.a,null,"Verify your Contact"),n.a.createElement(T.a,null,"Account recovery requires verified contact information"),n.a.createElement(he.a,{className:m.switch,indicatorColor:"primary",value:p,onChange:function(e,t){return d(t)},textColor:"primary",centered:!0},n.a.createElement(be.a,{icon:n.a.createElement(te.a,null),label:"Email"}),n.a.createElement(be.a,{icon:n.a.createElement(we.a,null),label:"Phone"})),p===Oe&&n.a.createElement(S.a,{id:"email",fullWidth:!0,autoFocus:!0,label:"Email Address",className:m.textField,onChange:a,margin:"normal"}),p===xe&&n.a.createElement(S.a,{id:"phonenum",fullWidth:!0,autoFocus:!0,label:"Phone Number",className:m.textField,onChange:a,margin:"normal"})),l&&n.a.createElement(S.a,{fullWidth:!0,label:"Code",className:m.textField,placeholder:"Code",key:"code",name:"code",autoComplete:"off",onChange:a,margin:"normal"}),l&&n.a.createElement(S.a,{id:"newpassword",fullWidth:!0,label:"New Password",className:m.textField,type:"password",autoComplete:"current-password",margin:"normal"}),n.a.createElement(j.a,{disableGutters:!0},n.a.createElement(k.a,{color:"secondary",variant:"outlined",onClick:function(){l?c(!1):t()}},"Back"),n.a.createElement("div",{className:m.spacer}),n.a.createElement(k.a,{className:"enterAction",color:"primary",variant:"contained",onClick:function(){return c(!0)}},"Send Code")),n.a.createElement(ne,{open:l,onResend:function(){return c(!0)}}))};Ee.defaultProps={hasEmail:!0},Ee.propTypes={onBack:b.a.func,hasEmail:b.a.bool,hasPhone:b.a.bool,handleInputChange:b.a.func.isRequired,handleSkip:b.a.func.isRequired,handleVerify:b.a.func.isRequired,handleSubmit:b.a.func.isRequired};var Se=Ee,ke=(a(345),a(711).default,a(712).default),je=(a(1777).default,a(1778).default,function(e,t){return function(){return n.a.createElement(ke,{theme:m.a.login},n.a.createElement(E,null,e&&n.a.createElement(e,t)))}}),Ce=(je(),je(A,{authState:"signIn",loading:!1,federated:{google_client_id:"garbage"},handleBeAnonymous:function(){return alert("handleBeAnonymous")},handleForgotPassword:function(){return alert("Forgot Password")},handleSignup:function(){return alert("Goto Signup")},handleInputChange:function(){return v.a.info("inputchange")},handleSignIn:function(){return alert("Sign In")}}),je(Q,{handleInputChange:function(){return v.a.info("inputchange")},signUpFields:[{key:"keyA",type:"text",required:!0},{key:"keyB",type:"number"},{key:"phone_number"}],signUpFieldLabels:["Label for Text Field A","Label for Number Field B","Label for Phonenum Field C"],signUpFieldPlaceholders:["Placeholder for Field A","Placeholder for Field B","Placeholder for Field C"],handleSignup:function(){return alert("Sign Up")},handleBack:function(){return alert("Back")},countryDialCodes:["+1","+999"],defaultDialCode:"+1"}),je(Z,{handleInputChange:function(e){return v.a.info("handleInputChange",e)},handleBack:function(e){return v.a.info("handleBack",e)},handleConfirm:function(e){return v.a.info("handleConfirm",e)}}),je(le,{handleInputChange:function(e){return v.a.info("handleInputChange",e)},handleBack:function(e){return v.a.info("handleBack",e)},handleResend:function(e){return v.a.info("handleResend",e)},handleConfirm:function(e){return v.a.info("handleConfirm",e)}}),je(ue,{handleSubmit:function(e){return v.a.info("handleSubmit",e)},handleInputChange:function(e){return v.a.info("handleInputChange",e)},handleSendCode:function(e){return v.a.info("handleSendCode",e)},handleBack:function(e){return v.a.info("handleBack",e)}}),je(fe,{change:function(){return alert("change")},handleInputChange:function(){return v.a.info("handleInputChange")},requiredAttributes:["attribA"],placeholders:["placeholder for attribA"]}),n.a.createElement(ke,{theme:m.a.login},n.a.createElement(E,{loading:!0},n.a.createElement(de,{message:"Something..."}))),je(Se,{hasEmail:!0,hasPhone:!0}),a(16)),Pe=a(117),Te=a(118),Ie=a(135),Ne=a(133),Ae=a(136),ze=a(18),_e=a.n(ze),Re=a(14),De=a(3),Le=a(492),Me=a.n(Le),Fe=a(137),Ue=a(11);function Be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function qe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(a),!0).forEach((function(t){Object(Ce.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Be(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}Re.a.configure(Ue.d.aws);var We={authState:"init",authData:{},signedIn:null},Ge={header:"My Customized Sign Up",hiddenDefaults:["username","email","phone_number","password"],defaultCountryCode:"1",signUpFields:[{label:"My user name",key:"username",required:!0,displayOrder:1,type:"string"},{label:"Password",key:"password",required:!0,displayOrder:3,type:"password"},{label:"Email",key:"email",required:!0,displayOrder:2,type:"string"}]},He=function(){var e=Object(r.useState)(We),t=Object(z.a)(e,2),a=t[0],o=a.authState,i=a.authData,l=a.signedIn,c=t[1],s=Object(r.useCallback)((function(e,t){c({authState:e,authData:t,signedIn:e&&0!==e.length?"signedIn"===e||l:null})}),[l]),u=l?null:n.a.createElement(E,null,n.a.createElement(Fe.a,{onStateChange:s,hideDefault:!0,signUpConfig:Ge},n.a.createElement(Ve,{handleBeAnonymous:function(){c({authState:o,authData:i,signedIn:!1})}}),n.a.createElement(Ze,{message:"Logging in"}),n.a.createElement(Xe,null),n.a.createElement(Qe,null),n.a.createElement($e,null),n.a.createElement(Fe.i,null),n.a.createElement(Ke,null),n.a.createElement(Ye,{signUpConfig:Ge}))),p=!1;try{p=i.signInUserSession.idToken.payload["cognito:groups"].indexOf("GodUsers")>-1}catch(d){}return{authState:o,authData:i,isGod:p,signOut:function(){return Re.a.signOut().then((function(e){return v.a.info(e)})).catch((function(e){return v.a.info(e)}))},getCurrentToken:function(){var e;return _e.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_e.a.awrap(Re.a.currentSession());case 2:return e=t.sent,v.a.info("here",e.accessToken),t.abrupt("return",e&&e.accessToken?e.accessToken:null);case 5:case"end":return t.stop()}}))},forceSignIn:function(){return c(We)},signedIn:l,authScreen:u}},Ve=function(e){function t(){return Object(Pe.a)(this,t),Object(Ie.a)(this,Object(Ne.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(Te.a)(t,[{key:"showComponent",value:function(){var e=this,t=this.state.loading,a=qe({},this.props,{loading:t,handleForgotPassword:function(){return e.changeState("forgotPassword")},handleSignup:function(){return e.changeState("signUp")},handleInputChange:this.handleInputChange,handleSignIn:this.signIn});return n.a.createElement(A,a)}}]),t}(Fe.g),Ye=function(e){function t(){return Object(Pe.a)(this,t),Object(Ie.a)(this,Object(Ne.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(Te.a)(t,[{key:"showComponent",value:function(){var e=this,a=this.props.hide;if(a&&a.includes(t))return null;this.checkCustomSignUpFields()&&(this.signUpFields=this.props.signUpConfig.signUpFields),this.sortFields();var r=qe({},this.props,{countryDialCodes:Me.a,defaultDialCode:this.getDefaultDialCode(),handleInputChange:this.handleInputChange,signUpFields:this.signUpFields,signUpFieldLabels:this.signUpFields.map((function(e){return De.g.get(e.label)})),signUpFieldPlaceholders:this.signUpFields.map((function(e){return De.g.get(e.placeholder)})),handleSignup:this.signUp,handleBack:function(){return e.changeState("signIn")}});return n.a.createElement(Q,r)}}]),t}(Fe.h),Qe=function(e){function t(){return Object(Pe.a)(this,t),Object(Ie.a)(this,Object(Ne.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(Te.a)(t,[{key:"showComponent",value:function(){var e=this,t=qe({},this.props,{handleBack:function(){return e.changeState("signIn")},handleInputChange:this.handleInputChange,handleConfirm:this.confirm});return n.a.createElement(Z,t)}}]),t}(Fe.b),$e=function(e){function t(){return Object(Pe.a)(this,t),Object(Ie.a)(this,Object(Ne.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(Te.a)(t,[{key:"showComponent",value:function(){var e=this,t=qe({},this.props,{handleBack:function(){return e.changeState("signIn")},handleInputChange:this.handleInputChange,handleConfirm:this.confirm,handleResend:this.resend});return n.a.createElement(le,t)}}]),t}(Fe.c),Xe=function(e){function t(){return Object(Pe.a)(this,t),Object(Ie.a)(this,Object(Ne.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(Te.a)(t,[{key:"showComponent",value:function(){var e=this.props.authData.challengeParam.requiredAttributes,t=Array.isArray(e)?e.map((function(e){return De.g.get(e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})).join(" "))})):[],a=qe({},this.props,{handleInputChange:this.handleInputChange,requiredAttributes:e,placeholders:t,change:this.change});return n.a.createElement(fe,a)}}]),t}(Fe.f),Ze=function(e){function t(){return Object(Pe.a)(this,t),Object(Ie.a)(this,Object(Ne.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(Te.a)(t,[{key:"showComponent",value:function(){return n.a.createElement(de,this.props)}}]),t}(Fe.e),Ke=function(e){function t(){return Object(Pe.a)(this,t),Object(Ie.a)(this,Object(Ne.a)(t).apply(this,arguments))}return Object(Ae.a)(t,e),Object(Te.a)(t,[{key:"showComponent",value:function(){var e=this,t=qe({},this.props,{handleBack:function(){return e.changeState("signIn")},handleInputChange:this.handleInputChange,handleConfirm:this.confirm,handleResend:this.send,handleSubmit:this.submit,handleSendCode:this.send});return n.a.createElement(ue,t)}}]),t}(Fe.d);new De.c("VerifyContact");var Je=a(227),et=a(108),tt=Object(C.a)((function(e){return{root:{},content:{},messageWrapper:{display:"flex"},logo:{height:50,width:50},paper:{background:e.palette.text.primary,color:e.palette.primary.contrastText,border:"2px solid ".concat(e.palette.primary.contrastText),boxShadow:"0 0 0 0 ".concat(e.palette.primary.main),animation:"$installPulse 2s infinite",padding:e.spacing(2,3),width:"100%"},"@keyframes installPulse":{"0%":{boxShadow:"0 0 0 0px ".concat(e.palette.primary.main)},"50%":{boxShadow:"0 0 0 0px ".concat(e.palette.primary.main)},"100%":{boxShadow:"0 0 0 20px transparent"}},textWrapper:{flexGrow:1,paddingLeft:e.spacing(1)},buttons:{display:"flex"},spacer:{flexGrow:1}}})),at=function(e){var t=e.open,a=e.onClose,r=e.onInstall,o=tt();return n.a.createElement(K.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:t,onClose:a},n.a.createElement(Je.a,{className:o.paper,elevation:24},n.a.createElement("div",{id:"client-snackbar",className:o.messageWrapper},n.a.createElement(et.a,{className:o.logo}),n.a.createElement("div",{className:o.textWrapper},n.a.createElement(T.a,{variant:"body1",color:"inherit"},"Install MorPhoto"),n.a.createElement(T.a,{variant:"body2",color:"inherit",paragraph:!0},"This app can be installed and used on your device natively and offline if you would like."),n.a.createElement("div",{className:o.buttons},n.a.createElement(k.a,{color:"secondary",variant:"contained",onClick:a},"No thanks"),n.a.createElement("div",{className:o.spacer}),n.a.createElement(k.a,{color:"primary",variant:"contained",onClick:r},"Install"))))))};at.propTypes={open:b.a.bool,actions:b.a.shape({onClose:b.a.func.isRequired,onInstall:b.a.func.isRequired})};var rt=at,nt=function(e,t){var a=Ue.f.ios,o=Object(r.useState)(null),i=Object(z.a)(o,2),l=i[0],c=i[1],s=function(e){e.preventDefault(),c(e)},u=Object(r.useMemo)((function(){return e&&l?n.a.createElement(rt,{open:!0,onClose:t,onInstall:p}):null}),[e,l]);function p(){l.prompt(),l.userChoice.then((function(e){"accepted"===e.outcome?(v.a.info("User accepted the A2HS prompt"),t()):(v.a.info("User dismissed the A2HS prompt"),t()),c(null)}))}return Object(r.useEffect)((function(){return!a||"standalone"in window.navigator&&window.navigator.standalone||v.a.info("I AM on IOS and I am NOT in standalone mode."),window.addEventListener("beforeinstallprompt",s),function(){window.removeEventListener("beforeinstallprompt",s)}}),[]),{installPrompt:u,addToHomeScreen:u?p:null}},ot=a(12),it=Object(u.c)(Object(p.b)((function(e,t){var a=e.uploader;return{activeUpload:a.activeUpload,uploading:a.uploading,uploadOnline:a.online}}),(function(e){return{updateUploadProgress:function(t){e(f.redux.actions.updateUploadProgress(t))},setUploaderOnline:function(t){e(f.redux.actions.setUploaderOnline(t))}}})),(function(e){return function(t){var a=t.activeUpload,o=t.uploading,i=t.uploadOnline,l=t.updateUploadProgress,c=t.setUploaderOnline,s=Object(r.useContext)(Ue.a).online.isOnline;Object(r.useEffect)((function(){v.a.info("withUploadConnect:::",{uploadOnline:i,isOnline:s}),i!==s&&c(s)}),[s,c,i]);var u=Object(r.useMemo)((function(){return n.a.createElement(lt,{onDone:l,activeUpload:a,online:i})}),[l,a,i]);return a&&o?n.a.createElement(n.a.Fragment,null,u,n.a.createElement(e,{text:"Uploading image",progress:a.progress||0})):u}})),lt=f.graphql.queries.withGetNewS3Credentials((function(){return null})),ct=a(25),st=a(83),ut=Ue.d.home.AppStateTypes,pt=Object(u.c)(Object(p.b)((function(e,t){var a=e.home.current,r=a.activeSeries,n=a.initialPhoto,o=a.domain;return Object(l.a)({activeSeries:r,initialPhoto:n,domain:o},t)}),(function(e){return{onAfterSeriesDelete:function(){v.a.info("onAfterSeriesDelete"),e(f.redux.actions.setHomeState(ut.FEED,{activeSeries:null}))},queueUpload:function(t){e(f.redux.actions.queueUpload(t))},doneCreatingSeries:function(t){v.a.info("doneCreatingSeries",t),e(f.redux.actions.setHomeState(ut.SERIES,{activeSeries:t}))},doneCreatingPhoto:function(t){v.a.info("doneCreatingPhoto",t),e(f.redux.actions.setHomeState(ut.SERIES,{initialPhoto:t}))},onFindOnMap:function(){e(f.redux.actions.setHomeState(ut.MAP))}}})),f.graphql.queries.withGetSelectedQuery,f.graphql.mutations.createSeries.withMutation,f.graphql.mutations.createPhoto.withMutation,f.graphql.mutations.updateSeries.withMutation,f.graphql.mutations.updatePhoto.withMutation,f.graphql.mutations.deleteSeries.withMutation,f.graphql.mutations.deletePhoto.withMutation,f.graphql.mutations.watch.withMutation,f.graphql.mutations.unwatch.withMutation,(function(e){return function(t){var a=t.series,o=t.loading,i=t.domain,c=t.activeSeries,s=t.initialPhoto,u=t.onAfterSeriesDelete,p=t.queueUpload,m=t.updateSeriesMutation,g=t.updatePhotoMutation,h=t.deleteSeriesMutation,b=t.deletePhotoMutation,y=t.createSeriesMutation,w=t.createPhotoMutation,O=t.watchSeriesMutation,x=t.unWatchSeriesMutation,E=t.onFindOnMap,S=Object(r.useContext)(Ue.a),k=S.role,j=S.currentUser,C=S.signedIn,P=S.globalActions,T=i===ut.NEW_SERIES_CAMERA?st.a.CAMERA:st.a.FILEPICKER,I=st.c.SERIES_VIEW;i!==ut.SERIES&&(I=st.c.NEWSERIES),Object(r.useMemo)((function(){a&&a.photos&&a.photos.sort((function(e,t){return parseInt(e.takenOn,10)-parseInt(t.takenOn,10)}))}),[a]),Object(r.useEffect)((function(){a&&a.id&&d.a.event({category:"Series",action:"View",label:a.id})}),[a]);var N=Object(r.useMemo)((function(){var e=[];return a&&a.photos&&(e=a.photos.reduce((function(e,t){var a=t.tags.map((function(e){return Object(l.a)({},e,{group:"Tags in this series"})}));return[].concat(Object(ct.a)(e),Object(ct.a)(a))}),[])),e}),[a]),A=!1;try{A=j.id===a.createdUser.id}catch(_){}var z=C&&j&&j.watching&&j.watching.indexOf(c)>-1;return n.a.createElement(e,{modeName:I,inputMethod:T,owned:A,watching:z,currentUserId:C?j.id:null,currentUserRole:k,loading:o,series:a,initialPhoto:s,getValuePromiseArr:[function(){return Promise.resolve(N)}],actions:{onNewPhoto:function(e,t){return _e.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return v.a.info("onNewPhoto::",{series:a,newPhoto:e,newPhotoData:t}),v.a.info("SET ITEM",t),r.next=4,_e.a.awrap(f.offline.imgStore.setItem(e.uploadToken,t.file));case 4:return r.abrupt("return",w(a,e,t.ext).then((function(e){var a=e.data,r=a.createPhoto.photo;if(a.createPhoto.preAuth){var n=JSON.parse(a.createPhoto.preAuth);p({id:r.id,uploadToken:r.uploadToken,seriesId:r.seriesId,expires:Date.now()+33e5,preAuth:n,ext:t.ext,retry:0})}})).catch((function(e){v.a.error("onNewPhoto:: Graphql Error",e)})));case 5:case"end":return r.stop()}}))},onChangePhoto:function(e,t){return g(a,e,t).catch((function(e){v.a.error("onChangePhoto:: Graphql Error",e)}))},onDeletePhoto:function(e){return b(e.id).then((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];v.a.info("onDeletePhoto:: photo deleted",t)})).catch((function(e){v.a.error("onDeletePhoto:: Graphql Error",e)}))},onChange:function(e,t){return m(e,t).catch((function(e){v.a.error("onChange:: Graphql Error",e)}))},onNewSeries:function(e,t,a){return _e.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return v.a.info("Series.connect:: onNewSeries starting",{newSeries:e,newPhoto:t,newPhotoData:a}),v.a.info("SET ITEM",a),r.next=4,_e.a.awrap(f.offline.imgStore.setItem(t.uploadToken,a.file));case 4:return r.abrupt("return",y(e,t,a.ext).then((function(e){var t,r,n;return _e.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:t=e.data,v.a.info("Series.connect::",t),t.createSeries.preAuth&&(r=t.createSeries.series.photos[0],n=JSON.parse(t.createSeries.preAuth),p({id:r.id,uploadToken:r.uploadToken,seriesId:r.seriesId,expires:Date.now()+33e5,preAuth:n,ext:a.ext,retry:0}));case 3:case"end":return o.stop()}}))})).catch((function(e){v.a.error("onNewSeries:: Graphql Error",e)})));case 5:case"end":return r.stop()}}))},onDelete:function(){return u(),h().catch((function(e){v.a.error("onDelete:: Graphql Error",e)}))},onClose:P.onMenuBack,onFindOnMap:E,onWatch:C?function(){return O(j)}:null,onUnWatch:C?function(){return x(j)}:null}})}})),dt=f.graphql.queries.withAllSeries((function(){return null})),mt=f.graphql.queries.withPollQuery((function(){return null})),gt=Ue.d.home.AppStateTypes,ft={onSeriesNavigate:function(e){return f.redux.actions.setHomeState(gt.SERIES,{activeSeries:e})},onSeriesMapSelect:f.redux.actions.setActiveSeries,onSearchClick:function(){return f.redux.actions.setHomeState(gt.SEARCH,{search:{tab:Ue.d.home.SEARCH_TABS.LOCATION,text:""}})},popMapHistory:f.redux.actions.popMapHistory,pushMapHistory:f.redux.actions.pushMapHistory,clearMapHistory:f.redux.actions.clearMapHistory},ht=Object(u.c)(Object(p.b)((function(e,t){var a=e.home.current.activeSeries,r=e.map.slice(-1).pop();return Object(l.a)({initialActiveSeries:a,initViewport:r},t)}),ft),(function(e){return function(t){var a=t.onSeriesNavigate,o=t.onSeriesMapSelect,i=t.onSearchClick,l=t.popMapHistory,c=t.pushMapHistory,s=t.clearMapHistory,u=t.initialActiveSeries,p=t.initViewport,d=Object(r.useState)(),m=Object(z.a)(d,2),g=m[0],f=m[1],h=Object(r.useState)(0),b=Object(z.a)(h,2),y=b[0],w=b[1],O=Object(r.useRef)(),x=Object(r.useRef)(),E=Object(r.useState)(0),S=Object(z.a)(E,2),k=S[0],j=S[1];x.current=y;var C=Object(r.useMemo)((function(){return n.a.createElement(dt,{setSeriesProps:f})}),[]),P=Object(r.useMemo)((function(){return n.a.createElement(mt,{lastCheck:k,seriesProps:g,updateIncrement:function(){return w(x.current+1)}})}),[k,g]);return Object(r.useEffect)((function(){if(g)return!O.current&&g.readyForPolling&&(O.current=setInterval((function(){O.current&&j(String(Date.now()-2e4))}),2e4)),function(){O.current&&(v.a.info("clear poll timer"),clearInterval(O.current),O.current=null)}}),[g]),n.a.createElement(n.a.Fragment,null,C,P,n.a.createElement(e,{initialActiveSeries:u,initViewport:p,actions:{onSeriesNavigate:a,onSeriesMapSelect:o,onSearchClick:i,popMapHistory:l,pushMapHistory:c,clearMapHistory:s},queryVersion:y,seriesList:g&&g.allSeries?g.allSeries.seriesSummaries:[],loading:!g||g.loading}))}})),bt=Ue.d.home.SEARCH_TABS,yt=Object(u.c)(Object(p.b)((function(e,t){var a=e.home.current,r=a.search,n=a.activeSeries;return{defaultTab:r?r.tab:null,defaultText:r?r.text:null,activeSeries:n}})),(function(e){return function(t){var a=t.defaultTab,o=t.defaultText,i=t.fetchMore,l=Object(r.useState)(a||bt.TAG),c=Object(z.a)(l,2),s=c[0],p=c[1],m=Object(r.useContext)(Ue.a).globalActions,g=Object(r.useState)(o||""),h=Object(z.a)(g,2),b=h[0],y=h[1],w=Object(r.useState)(null),v=Object(z.a)(w,2),O=v[0],x=v[1];Object(r.useEffect)((function(){d.a.pageview("search")}),[]),Object(r.useEffect)((function(){(O||b.length>3)&&d.a.event({category:"Search:".concat(s),action:O?"Search Context Select":"Search Text Change",label:O?O.name:b})}),[b,s,O]);var E=null,S=null;switch(s){case bt.KEYWORD:E=function(e){return e},S=f.graphql.queries.withKeywordSearch;break;case bt.TAG:E=f.graphql.queries.withTagSearch,S=f.graphql.queries.withTagSeries;break;case bt.LOCATION:E=f.graphql.queries.withGeoCode;break;case bt.USER:E=f.graphql.queries.withUserSearch,S=f.graphql.queries.withUserSeries}var k=Object(r.useMemo)((function(){return S?Object(u.c)(E,S)(e):E(e)}),[E,S]);return n.a.createElement(k,Object.assign({currentTab:s,searchText:b,contextChoice:O},{actions:{onMapClick:m.jumpToMap,onResultClick:m.jumpToSeriesView,setContextChoice:function(e){x(e)},fetchMore:i,setCurrentTab:function(e){x(null),p(e)},setSearchText:function(e){y(e),x(null)}}}))}})),wt=Object(u.c)(f.graphql.queries.withuserSeriesQuery,f.graphql.queries.withMyWatchedSeriesQuery,(function(e){return function(t){var a=t.data,o=a.seriesQ,i=a.watchedSeriesQ,l=Object(r.useContext)(Ue.a),c=l.currentUser,s=l.globalActions,u=o&&o.userSeries&&o.userSeries.seriesSummaries&&o.userSeries.seriesSummaries.filter((function(e){return"deleted"!==e.seriesStatus}))||[],p=i&&i.arraySeries?i.arraySeries:[],m=Boolean(o&&o.loading||i&&i.loading);return Object(r.useEffect)((function(){d.a.pageview("profile")}),[]),n.a.createElement(e,Object.assign({user:c},{loading:m,mySeries:u,watchingSeries:p,actions:{jumpToSeries:s.jumpToSeriesView,jumpToMap:s.jumpToSeriesMap}}))}})),vt=Object(u.c)(f.graphql.queries.withFeedQueryThunk(5),(function(e){return function(t){var a=t.data,o=t.loading,i=(t.loadingNewest,t.loadingMore,t.gqlActions),l=Object(r.useRef)(),c=Object(r.useRef)(),s=Object(r.useState)(null),u=Object(z.a)(s,2),p=u[0],m=u[1],g=Object(r.useContext)(Ue.a),f=g.online,h=g.globalActions;c.current=p,Object(r.useEffect)((function(){return l.current||(l.current=setInterval((function(){l.current&&(f.isOnline&&i.fetchNewest(),m(String(Date.now()-2e4)))}),2e4)),function(){l.current&&(clearInterval(l.current),l.current=null)}}),[i,f.isOnline]),Object(r.useEffect)((function(){d.a.pageview("feed")}),[]);var b=a.myFeed&&a.myFeed.feed.filter((function(e){return"deleted"!==e.seriesStatus}))||[],y=a.myFeed&&a.myFeed.window.map((function(e){return parseInt(e,10)}))||[null,null];return n.a.createElement(e,Object.assign({events:b,loading:o,window:y},{actions:{onImageClick:h.jumpToSeriesView,onProfileClick:h.jumpToUser,onMapClick:h.jumpToSeriesMap,fetchMore:i.fetchMore,fetchNewest:i.fetchNewest}}))}})),Ot=a(352),xt=a.n(Ot),Et=a(225),St=a(89),kt=f.graphql.queries.withGetSeriesForOffline((function(){return null})),jt=f.graphql.queries.withGeoSearch((function(){return null})),Ct=Object(u.c)(Object(p.b)((function(e,t){var a=e.map.slice(-1).pop(),r=e.offline;return{lastMapViewport:a,completedDownload:r.completedDownload,viewport:r.viewport}}),(function(e){return{setOfflineCompleted:function(t){e(f.redux.actions.setOfflineCompleted(t))},setOfflineViewport:function(t){e(f.redux.actions.setOfflineViewport(t))}}})),(function(e){return function(t){var a=t.lastMapViewport,o=t.completedDownload,i=t.viewport,l=t.setOfflineCompleted,c=t.setOfflineViewport,s=Object(r.useState)(i&&o?St.d.LOCKED:St.d.NAVIGATING),u=Object(z.a)(s,2),p=u[0],d=u[1],m=Object(r.useRef)(),g=Object(r.useContext)(Ue.a),f=g.online,h=g.globalActions,b=Object(r.useState)(null),y=Object(z.a)(b,2),w=y[0],v=y[1],O=Object(r.useState)(null),x=Object(z.a)(O,2),E=x[0],S=x[1],k=Object(r.useState)(null),j=Object(z.a)(k,2),C=j[0],P=j[1],T=Object(r.useState)([]),I=Object(z.a)(T,2),N=I[0],A=I[1],_=Object(r.useState)([0,0]),R=Object(z.a)(_,2),D=R[0],L=R[1],M=Object(r.useState)([0,0]),F=Object(z.a)(M,2),U=F[0],B=F[1],q=Object(r.useState)([0,0]),W=Object(z.a)(q,2),G=W[0],H=W[1],V=Object(r.useRef)();V.current={tileTick:D,seriesTick:U,seriesPhotoTick:G,seriesIds:E,seriesPhotos:N};var Y=function(){return L([V.current.tileTick[0]+1,V.current.tileTick[1]])},Q=function(){m.current&&H([V.current.seriesPhotoTick[0]+1,V.current.seriesPhotoTick[1]])},$=Object(r.useCallback)((function(e){var t,a=V.current.seriesTick,r=V.current.seriesIds.ids,n=V.current.seriesPhotos;if(e){var o=0;e.forEach((function(e){-1===n.indexOf(e)&&(o++,A([].concat(Object(ct.a)(n),[e])),m.current.schedule((function(){return Pt("GET",e)})).then(Q).catch(Q))})),t=o,H([V.current.seriesPhotoTick[0],V.current.seriesPhotoTick[1]+t])}a&&r[a[0]]&&(P(r[a[0]+1]),B([a[0]+1,a[1]]))}),[]),X=Object(r.useMemo)((function(){return f.isOnline?p:St.d.OFFLINE}),[f.isOnline,p]),Z=Object(r.useMemo)((function(){return n.a.createElement(jt,{bounds:w,setSeriesIds:S})}),[w]),K=Object(r.useMemo)((function(){return n.a.createElement(kt,{id:C,onDone:$})}),[C,$]),J=Object(r.useCallback)((function(){d(St.d.LOCKED),l(!0)}),[l]),ee=function(){d(St.d.CANCELED),v(null),S(null),L([0,0]),B([0,0]),H([0,0]),A([]),m.current&&(m.current.stop({dropWaitingJobs:!0}),m.current=null,m.current=new xt.a({maxConcurrent:5}))};return Object(r.useEffect)((function(){return m.current=new xt.a({maxConcurrent:5}),function(){m.current=null}}),[]),Object(r.useEffect)((function(){if(w){var e=function(e,t){for(var a=[],r=t[0];r<=t[1];r++)for(var n=Object(Et.long2tile)(e[0],r),o=Object(Et.long2tile)(e[2],r),i=Object(Et.lat2tile)(e[1],r),l=Object(Et.lat2tile)(e[3],r),c=n;c<=o;c++)for(var s=i;s<=l;s++)a.push(Tt("https://api.mapbox.com/v4/mapbox.mapbox-terrain-v2,mapbox.mapbox-streets-v7/{z}/{x}/{y}.vector.pbf",r,c,s)),a.push(Tt("https://api.mapbox.com/v4/mapbox.satellite/{z}/{x}/{y}@2x.webp",r,c,s));return a}(w,[0,Ue.d.home.Offline.highestOfflineTileZoom]),t=e.length;if(0===t)return;a=t,L([V.current.tileTick[0],V.current.tileTick[1]+a]),e.forEach((function(e){m.current&&m.current.schedule((function(){return Pt("GET",e)})).then(Y).catch(Y)}))}var a}),[w]),Object(r.useEffect)((function(){E&&E.ids&&(E.ids.length>0&&P(E.ids[0]),B([0,E.ids.length]),H([0,0]))}),[E]),Object(r.useEffect)((function(){var e=[D[0]+U[0]+G[0],D[1]+U[1]+G[1]];e[1]>0&&e[0]===e[1]&&J()}),[D,U,G,J]),n.a.createElement(n.a.Fragment,null,K,Z,n.a.createElement(e,{initViewport:i||a,progress:{tileTick:D,seriesTick:U,seriesPhotoTick:G},toolState:X,actions:{onMenuBack:function(){ee(),h.onMenuBack()},onStartDownload:function(e,t){d(St.d.DOWNLOADING),v(e),c(t)},onCancel:ee,onCancelComplete:function(){d(St.d.NAVIGATING)},onUnlock:function(){d(St.d.NAVIGATING),l(!1)}}}))}}));function Pt(e,t){return new Promise((function(a,r){var n=new XMLHttpRequest;n.open(e,t),n.onload=function(){n.status>=200&&n.status<300?a(n.response):r(new Error(n.statusText))},n.onerror=function(){r(new Error(n.statusText))},n.send()}))}var Tt=function(e,t,a,r){return(e+"?access_token=".concat("pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw")).replace("{z}/{x}/{y}","".concat(t,"/").concat(a,"/").concat(r))};a(254),a(195);var It=a(1944).default,Nt=a(270),At=a(2013).default,zt=Object(p.b)((function(e,t){var a=e.map,r=e.home,n=(e.uploader,Object(c.a)(e,["map","home","uploader"])),o=a.slice(-5);return{reduxState:Object(l.a)({},n,{map:o,home:r})}}))((function(e){var t=Object(r.useState)(y.g.UNSENT),a=Object(z.a)(t,2),o=a[0],i=a[1],l=f.graphql.queries.withReportBugMutation(y.h);return n.a.createElement(l,Object.assign({},e,{setState:i,sendState:o}))})),_t=a(2018),Rt=a(122),Dt=a(196),Lt=Ue.d.home.AppStateTypes,Mt=Object(C.a)((function(e){return{outerRoot:{height:"100%",overflow:"hidden"},root:{height:"100%",overflow:"hidden",display:"flex",flexDirection:"column"},offlineBar:{flex:"0 0"},activeWrapper:{overflow:"hidden",flexGrow:1,flexShrink:1,height:"100%"},uploaderContainer:{zIndex:100,flex:"0 0"}}})),Ft=function(e){var t=e.components,a=e.domain,o=Mt(),i=Object(r.useContext)(Ue.a),l=i.signedIn,c=i.globalActions,s=i.device,u=i.currentUser,p=t.upload;Object(r.useEffect)((function(){!l&&[Lt.MAP,Lt.SEARCH,Lt.SERIES,Lt.QRCAPTURE,Lt.SETTINGS,Lt.OFFLINE_DOWNLOAD].indexOf(a)<0&&c.setHomeState(Lt.MAP)}),[a,c.setHomeState,l]);var d=!0,f={};Object(r.useLayoutEffect)((function(){if(s.ios){v.a.info("Disabling Pinch on ios");var e=function(e){Math.abs(e.scale-1)>.02&&(e.preventDefault(),document.body.style.zoom=.99)};return document.addEventListener("touchmove",e,!1),function(){document.removeEventListener("touchmove",e,!1)}}}),[s.ios]);var h=t.feed,b=m.a.home;switch(a){case Lt.FEED:h=t.feed;break;case Lt.MAP:h=t.map;break;case Lt.PROFILE:f={currentUser:u},h=t.profile;break;case Lt.SEARCH:h=t.search;break;case Lt.SERIES:case Lt.NEW_SERIES_CAMERA:b=m.a.series,h=t.series,f={currentUser:u},d=!1;break;case Lt.OFFLINE_DOWNLOAD:h=t.offline,d=!1;break;case Lt.NEW_SERIES_LIBRARY:b=m.a.series,h=t.series,f={currentUser:u},d=!1;break;case Lt.QRCAPTURE:h=Dt.c,d=!1,f={onCapture:c.onQRCapture,onMenuBack:c.onMenuBack,isIos:s.ios};break;case Lt.SETTINGS:h=y.c,d=!1,f={onMenuBack:c.onMenuBack}}return n.a.createElement(g.a,{theme:m.a.home},n.a.createElement("div",{className:o.outerRoot},n.a.createElement("div",{className:o.root},n.a.createElement(_t.a,null)," ",n.a.createElement(Rt.b,{className:o.offlineBar}),n.a.createElement("div",{className:o.activeWrapper},n.a.createElement(g.a,{theme:b},n.a.createElement(h,f))),d&&n.a.createElement(Rt.a,{domain:a}),n.a.createElement(p,{className:o.uploaderContainer}),t.installPrompt)))};Ft.propTypes={domain:b.a.oneOf(Object.values(Lt)),components:b.a.shape({upload:b.a.any.isRequired,series:b.a.any.isRequired,map:b.a.any.isRequired,search:b.a.any.isRequired,profile:b.a.any.isRequired,feed:b.a.any.isRequired,offline:b.a.any.isRequired,installPrompt:b.a.any})};var Ut=Ft,Bt=Ue.d.home,qt=Ue.d.tagColors;d.a.initialize(Ue.d.analytics.token,{});var Wt={upload:it(y.n),series:pt(st.f),map:ht(St.a),search:yt(Nt.b),profile:wt(At),feed:vt(It),offline:Ct(St.e)},Gt=Object(u.c)(f.redux.withReduxProvider,Object(p.b)((function(e,t){return{reduxProps:{domain:e.home.current.domain,flags:e.flags}}}),(function(e){return{setHomeState:function(t,a){e(f.redux.actions.setHomeState(t,a))},onCameraClick:function(){e(f.redux.actions.setHomeState(Bt.AppStateTypes.NEW_SERIES_CAMERA,{activeSeries:null}))},onLibraryClick:function(){e(f.redux.actions.setHomeState(Bt.AppStateTypes.NEW_SERIES_LIBRARY,{activeSeries:null}))},onOfflineMenuClick:function(){e(f.redux.actions.setHomeState(Bt.AppStateTypes.OFFLINE_DOWNLOAD))},onSettingsClick:function(){e(f.redux.actions.setHomeState(Bt.AppStateTypes.SETTINGS))},jumpToSeriesView:function(t,a){e(f.redux.actions.setHomeState(Bt.AppStateTypes.SERIES,{activeSeries:t,initialPhoto:a}))},jumpToUser:function(t){e(f.redux.actions.setHomeState(Bt.AppStateTypes.SEARCH,{search:{tab:Ue.d.home.SEARCH_TABS.USER,text:t}}))},jumpToMap:function(t){var a=t.bbox,r=t.center,n=a;if(!n&&r){var o=Object(s.buffer)(Object(s.point)(r),500,{units:"meters"});n=Object(s.bbox)(o)}n&&(e(f.redux.actions.pushMapHistory({mode:Ue.d.home.MapModeTypes.FREE,bounds:n})),e(f.redux.actions.setHomeState(Bt.AppStateTypes.MAP,{activeSeries:null,initialPhoto:null})))},jumpToSeriesMap:function(t,a){e(f.redux.actions.pushMapHistory({mode:Ue.d.home.MapModeTypes.FREE})),e(f.redux.actions.setHomeState(Bt.AppStateTypes.MAP,{activeSeries:t,initialPhoto:a}))},resetAllState:function(){e(f.redux.actions.resetAllState())},dismissInstall:function(){e(f.redux.actions.setFlag("install",!1))},setUseOffline:function(t){e(f.redux.actions.setFlag("useLoggedOut",t))},onQRButtonClick:function(){e(f.redux.actions.setHomeState(Bt.AppStateTypes.QRCAPTURE))},onMenuBack:function(){e(f.redux.actions.homeStateBack())},onAvatarClick:function(t){e(f.redux.actions.setHomeState(Bt.AppStateTypes.SEARCH,{search:{tab:Bt.SEARCH_TABS.USER,text:t}}))},onQRCapture:function(t,a,r){switch(t){case"series":e(f.redux.actions.setHomeState(Bt.AppStateTypes.SERIES,{activeSeries:a,initialPhoto:r}))}}}})),(function(e){return function(t){var a=t.reduxProps,o=Object(c.a)(t,["reduxProps"]),i=a.flags,s=He(i.useLoggedOut,o.setUseOffline),p=s.isGod,h=s.signedIn,b=s.authData,w=s.signOut,O=s.authScreen,x=s.forceSignIn,E=f.graphql.useGraphQL(),S=E.client,k=E.done,j=E.currState,C=nt(i.install,o.dismissInstall),P=C.installPrompt,T=C.addToHomeScreen;Object(r.useEffect)((function(){d.a.pageview("initial render")}),[]),Object(r.useEffect)((function(){!0===h&&i.useLoggedOut?o.setUseOffline(!1):!1!==h||i.useLoggedOut||o.setUseOffline(!0)}),[i.useLoggedOut,o,h]);var I=Object(r.useRef)();Object(r.useEffect)((function(){function e(){window.history.pushState({},""),o.onMenuBack()}return window.addEventListener("popstate",e),function(){return window.removeEventListener("popstate",e)}}),[o]),Object(r.useEffect)((function(){try{var e=Object(ot.decodeShareUrl)(window.location.search);if(e&&e.type&&e.s){var t=e.type,a=e.s,r=e.p;switch(v.a.info("REDIRECTING",{type:t,s:a,p:r}),d.a.event({category:"user",action:"share",label:window.location.search}),t){case"series":var n={activeSeries:a,initialPhoto:r};h||o.setUseOffline(!0),o.setHomeState(Bt.AppStateTypes.SERIES,n)}}}catch(i){v.a.error(i)}I.current&&(clearTimeout(I.current),I.current=null)}),[o,h]);var N=Object(r.useCallback)((function(){d.a.event({category:"User",action:"FORCE_SIGNIN"}),o.setUseOffline(!1),x()}),[o,x]),A=Object(r.useCallback)((function(){v.a.warn("APP RESET STARTING"),d.a.event({category:"User",action:"RESET_APP"}),f.offline.imgStore.clear(),S.resetStore(),f.offline.stateStore.clear(),o.resetAllState(),w(),v.a.info("APP RESET FINISHED")}),[S,w,o]),z=Object(r.useMemo)((function(){return{metaConfig:{},tagConfigArr:[{id:"freeBothType",label:"",color:qt[0],allowXY:!0,allowNonXY:!0,allowAdditions:!0,getValuePromiseArr:[]}]}}),[]),_=Object(l.a)({getPhotoUrls:f.getPhotoUrls,signedIn:Boolean(h),role:h?p?"admin":"user":"nonuser",cognitoUser:b,globalActions:Object(l.a)({},o,{addToHomeScreen:T,signOut:w,forceSignIn:N,resetApp:A})},z);return k?null!==h||i.useLoggedOut?n.a.createElement(u.a,{client:S},n.a.createElement(u.b,{query:ot.graphqlAPI.queries.getUser,skip:!h},(function(t){var r=t.loading,i=t.error,l=t.data,c=t.refetch;return r?n.a.createElement(y.l,{spin:!0,message:"Loading: UserData"}):(i&&v.a.error(i),!h||l&&l.user?(h&&b.attributes.sub!==l.user.id?(v.a.info("USER CHANGE"),f.offline.imgStore.clear(),S.resetStore(),f.offline.stateStore.clear(),o.resetAllState()):h&&(_.currentUser=l.user),Wt.installPrompt=P,n.a.createElement(Ue.b,{value:_},n.a.createElement(e,{domain:a.domain,components:Wt}))):(v.a.info("NO USER DATA YET",{loading:r,error:i,data:l}),I.current||(I.current=setTimeout((function(){v.a.info("Retrying user query"),c()}),5e3)),n.a.createElement(y.l,{spin:!0,message:"Loading: UserData"})))}))):(d.a.event({category:"User",action:"LOGIN_PROMPT"}),n.a.createElement(g.a,{theme:m.a.login},O)):n.a.createElement(y.l,{spin:!0,message:f.graphql.APOLLOSTATES[j]})}}),(function(e){return function(t){return v.a.info("ErrorConnect withErrorBoundary",t),n.a.createElement(Ue.c,{fallback:zt},n.a.createElement(e,t))}}))(Ut),Ht=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Vt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(2003),a(2004);a(2005),Object(Ue.e)(),i.a.render(n.a.createElement(Gt,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/photomon_v0",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/photomon_v0","/service-worker.js");Ht?(!function(e,t){fetch(e).then((function(a){var r=a.headers.get("content-type");404===a.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Vt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):Vt(t,e)}))}}(),window.addEventListener("load",(function(){window.history.pushState({},"")})),navigator.serviceWorker&&navigator.serviceWorker.register("imgCacheWorker.js")},2008:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(488),i=a(80),l=a(82),c=a(348),s=a(25),u=a(57),p=a(11),d=[{mode:p.d.home.MapModeTypes.FREE,viewport:{latitude:36.80191008366581,longitude:-111.63999999999784,zoom:11}}],m=a(16);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={history:[],current:{domain:p.d.home.AppStateTypes.FEED}};function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w={store:[],online:!1,uploading:!1,activeUpload:null},v=a(4),O=a.n(v);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S={iOSWarning:Object(p.g)(),install:!0,useLoggedOut:!1};function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C={completedDownload:!1,viewport:null},P=Object(l.combineReducers)({map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.data;switch(a){case u.Actions.MAP_HISTORY_CLEAR:var n=e.length>0?[[e.length-1]]:[];return n;case u.Actions.MAP_HISTORY_POP:return e.slice(0,-1);case u.Actions.MAP_HISTORY_PUSH:return[].concat(Object(s.a)(e),[r]).slice(-10);default:return e}},home:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.data,n=e.history,o=e.current;switch(a){case u.Actions.HOME_STATE_BACK:var i=Object(s.a)(n),l=i.length>0?i.pop():h.current;return f({},e,{current:l,history:i});case u.Actions.HOME_CHANGE_ACTIVE_SERIES:var c=r.activeSeries,d=r.initialPhoto;return f({},e,{history:n,current:f({},o,{activeSeries:c||null,initialPhoto:c&&d?d:null})});case u.Actions.HOME_CHANGE_STATE:var m=r.newDomain,g=r.params,b=g||{},y=[p.d.home.AppStateTypes.QRCAPTURE,p.d.home.AppStateTypes.SETTINGS,p.d.home.AppStateTypes.OFFLINE_DOWNLOAD,p.d.home.AppStateTypes.NEW_SERIES_CAMERA,p.d.home.AppStateTypes.NEW_SERIES_LIBRARY].indexOf(o.domain)>-1,w=o.domain===m,v=y||w?n:[].concat(Object(s.a)(n),[o]).slice(-10);return f({},e,{history:v,current:f({},o,{domain:m},b)});default:return e}},uploader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.data,n=e.store,o=e.activeUpload,i=e.uploading;switch(a){case u.Actions.UPLOADER_QUEUE:return y({},e,o?{store:[].concat(Object(s.a)(n),[r])}:{activeUpload:r});case u.Actions.UPLOADER_SET_ONLINE:return y({},e,{online:Boolean(r),uploading:!1,activeUpload:r?e.activeUpload:null});case u.Actions.UPLOADER_SET_UPLOADING:return i!==r?y({},e,{uploading:r}):e;case u.Actions.UPLOADER_COMPLETE:if(0===n.length)return y({},e,{activeUpload:null,uploading:!1});var l=Object(s.a)(n),c=l.pop();return y({},e,{store:l,activeUpload:c,uploading:!0});case u.Actions.UPLOADER_UPDATE_PROGRESS:return o&&o.id?y({},e,{online:!0,uploading:!0,activeUpload:y({},o,{},r)}):e;default:return e}},flags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;if(!t)return e;var a=t.type,r=t.data;switch(a){case u.Actions.SETFLAG:var n=r.flagName,o=r.flagVal;return Boolean(o)!==o?(O.a.warn("flag: '".concat(n,"' must be a boolean")),e):E({},e,Object(m.a)({},n,o));default:return e}},offline:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;if(!t)return e;var a=t.type,r=t.data;switch(a){case u.Actions.OFFLINE_VIEWPORT_SAVE:return j({},e,{viewport:r});case u.Actions.OFFLINE_SET_STATUS:return j({},e,{completedDownload:r});default:return e}}}),T=function(e,t){return"RESET_ALL_STATE"===t.type&&(O.a.warn("RESETTING LOCAL REDUX STATE"),e=void 0),P(e,t)},I=a(353),N=a(49),A=a(336);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var _=function(e){var t=e.getState,a=e.dispatch;return function(e){return function(r){var n=R(t),o=n.online,i=n.uploading,l=n.activeUpload;if(O.a.info("queueMiddleware: INIT",{online:o,action:r,uploading:i,activeUpload:l,state:t()}),0===r.type.indexOf("persist/REHYDRATE"))try{var c=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},r);return r.payload.uploader.uploading=!1,r.payload.uploader.online=!1,O.a.info("queueMiddleware: REHYDRATE",{action:r,newAction:c}),e(c)}catch(p){return e(r)}function s(e){O.a.info("queueMiddleware: kickoff",{uploadObj:e});var r=function(e){O.a.info("queueMiddleware: updateUploadProgress",{online:o,uploading:i,activeUpload:l,newProgress:e}),a({type:u.Actions.UPLOADER_UPDATE_PROGRESS,data:e})};a({type:u.Actions.UPLOADER_SET_UPLOADING,data:!0}),Object(A.default)(e,r,(function(){O.a.info("queueMiddleware completeActiveUpload",{online:o,uploading:i,activeUpload:l}),a({type:u.Actions.UPLOADER_COMPLETE})}),(function(){O.a.info("queueMiddleware: failRetry",{online:o,uploading:i,activeUpload:l});var e=R(t);e.activeUpload&&(O.a.info("queueMiddleware: failRetry DISPATCHING",{online:o,uploading:i,activeUpload:l}),a({type:u.Actions.UPLOADER_COMPLETE}),r({progress:0,retry:e.activeUpload.retry>-1?e.activeUpload.retry+1:1}))}))}return i||r.type!==u.Actions.UPLOADER_QUEUE||l&&l.id?i||r.type!==u.Actions.UPLOADER_SET_ONLINE||!0!==r.data||(O.a.info("queueMiddleware: UPLOADER_SET_ONLINE",{uploading:i,activeUpload:l}),!i&&l&&l.id&&l.expires&&Date.now()<l.expires?s(l):!l||l.id&&l.expires||(O.a.info("queueMiddleware: UPLOADER_COMPLETE",{uploading:i,activeUpload:l}),a({type:u.Actions.UPLOADER_COMPLETE}))):(O.a.info("queueMiddleware: KICKOFF NEW",{uploading:i,activeUpload:l}),s(r.data)),e(r)}}};function R(e){try{return e().uploader||w}catch(t){return w}}var D={key:"root",storage:N.stateStore},L=Object(I.a)(D,T),M=function(){var e,t=Object(l.createStore)(L,e,Object(l.compose)(Object(l.applyMiddleware)(c.a,_)));return{store:t,persistor:Object(I.b)(t)}},F=a(45);t.default=function(e){return function(t){var a=M(),r=a.store,l=a.persistor;return n.a.createElement(i.a,{store:r},n.a.createElement(o.a,{loading:n.a.createElement(F.l,{spin:!0,message:"Loading State..."}),persistor:l},n.a.createElement(e,t)))}}},2009:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"withFeedQueryThunk",(function(){return y}));var n={};a.r(n),a.d(n,"withGetSeriesForOffline",(function(){return v}));var o={};a.r(o),a.d(o,"withGetNewS3Credentials",(function(){return S}));var i={};a.r(i),a.d(i,"withTagSearch",(function(){return C})),a.d(i,"withUserSearch",(function(){return P})),a.d(i,"withGeoCode",(function(){return T})),a.d(i,"withTagSeries",(function(){return I})),a.d(i,"withUserSeries",(function(){return N})),a.d(i,"withKeywordSearch",(function(){return A})),a.d(i,"withGeoSearch",(function(){return z}));var l={};a.r(l),a.d(l,"withGetSelectedQuery",(function(){return D})),a.d(l,"withAllSeries",(function(){return L})),a.d(l,"withPollQuery",(function(){return M}));var c={};a.r(c),a.d(c,"withuserSeriesQuery",(function(){return B})),a.d(c,"withMyWatchedSeriesQuery",(function(){return q}));var s=a(16),u=a(30),p=a(12),d=a(4),m=a.n(d),g=a(45),f=a(25);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y=function(e){return Object(u.d)(p.graphqlAPI.queries.getMyFeed,{props:function(e){var t=e.data;t.error&&m.a.error(t.error);var a=!1,r=!1;m.a.info("withFeedQuery",t);return{data:t,loading:t.loading,loadingMore:r,loadingNewest:a,gqlActions:{fetchNewest:function(){a=!0,t.myFeed&&!t.loading&&t.fetchMore({variables:b({},t.variables,{start:t.myFeed.window[1]}),updateQuery:function(e,t){var r=t.fetchMoreResult;return a=!1,{myFeed:b({},r.myFeed,{feed:[].concat(Object(f.a)(r.myFeed.feed),Object(f.a)(e.myFeed.feed)),window:[e.myFeed.window[0],r.myFeed.window[1]]})}}})},fetchMore:function(){r=!0,t.myFeed&&t.fetchMore({variables:b({},t.variables,{end:t.myFeed.window[0]}),updateQuery:function(e,t){var a=t.fetchMoreResult;return r=!1,{myFeed:b({},a.myFeed,{feed:[].concat(Object(f.a)(e.myFeed.feed),Object(f.a)(a.myFeed.feed)),window:[a.myFeed.window[0],e.myFeed.window[1]]})}}})}}}},options:function(t){t.activeSeries;return{variables:{limit:e}}}})},w=a(11),v=Object(u.d)(p.graphqlAPI.queries.getWholeSeries,{skip:function(e){return!e.id},props:function(e){var t=e.data,a=e.ownProps;t.error&&m.a.error(t.error);var r=null;try{if(!t.loading&&!t.error){r=t.series;var n=[];n.push(r.createdUser.gravatar),n.push(r.updatedUser.gravatar),r.photos.forEach((function(e){n.push(e.createdUser.gravatar),n.push(e.updatedUser.gravatar),w.d.home.Offline.seriesImgsToCache.map((function(t){return n.push("".concat(e.paths.base).concat(e.paths[t]))}))})),a.onDone(Object(f.a)(new Set(n)))}}catch(o){m.a.info("OfflineMap::withGetSelectedQuery:: error",{data:t,e:o}),m.a.error(o)}return{data:t,loading:t.loading,series:r}},options:function(e){return{variables:{id:e.id}}}}),O=a(42);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S=Object(u.d)(p.graphqlAPI.queries.getNewS3Credentials,{skip:function(e){var t=e.online,a=e.activeUpload,r=Object(O.a)(e,["online","activeUpload"]);return m.a.info("withGetNewS3Credentials:: skipcheck",E({online:t,activeUpload:a},r)),!t||!a||a.expires>Date.now()},props:function(e){var t=e.data,a=e.ownProps;return t.error&&m.a.error(t.error),m.a.info("withGetNewS3Credentials:: props",{data:t,ownProps:a}),t.loading||a.onDone(E({},a.activeUpload,{retry:a.activeUpload.retry+1,expires:Date.now()+33e5,preAuth:JSON.parse(t.s3Credentials)})),{data:t}},options:function(e){var t=e.activeUpload;return{variables:{seriesId:t.seriesId,photoId:t.id,ext:t.ext}}}});function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C=Object(u.d)(p.graphqlAPI.queries.tagSearch,{props:function(e){var t=e.data;t.error&&m.a.error(t.error);var a=null;try{t.loading||t.error||(a=t.series)}catch(r){m.a.error(t),m.a.error(r)}return{contextResults:t.tags?t.tags.map((function(e){var t=e.name,a=e.count;return{name:t,description:"~ ".concat(a<10?a:10*Math.ceil(a/10)," Photo series tagged")}})):[],loading:t.loading,series:a}},options:function(e){var t=e.searchText;return{variables:{tag:!t||t.length<3?"":t,limit:10}}}}),P=Object(u.d)(p.graphqlAPI.queries.userSearch,{props:function(e){var t=e.data;t.error&&m.a.error(t.error);var a=null;try{t.loading||t.error||(a=t.series)}catch(r){m.a.error(t),m.a.error(r)}return{contextResults:t.userSearch?t.userSearch.map((function(e){var t=e.username,a=e.gravatar,r=e.createdOn;return{name:t,id:e.id,description:"Joined ".concat(p.dates.formatDateAgo(r)),gravatar:a}})):[],loading:t.loading,series:a}},skip:function(e){var t=e.searchText;return!t||t.length<3},options:function(e){return{variables:{searchStr:e.searchText,limit:10}}}}),T=Object(u.d)(p.graphqlAPI.queries.geocode,{props:function(e){var t=e.data;t.error&&m.a.error(t.error);var a=null;try{t.loading||t.error||(a=t.series)}catch(r){m.a.error(t),m.a.error(r)}return{contextResults:t.geocoder?t.geocoder.map((function(e){var t=e.relevance;return{name:e.text,description:e.placeName,bbox:e.bbox,center:e.center,relevance:t}})):[],loading:t.loading,series:a}},skip:function(e){var t=e.searchText;return!t||t.length<3},options:function(e){return{variables:{search:e.searchText}}}}),I=Object(u.d)(p.graphqlAPI.queries.seriesWithTag,{props:function(e){var t=e.data;t.error&&m.a.error(t.error);var a=null;try{t.loading||t.error||(a=t.series)}catch(n){m.a.error(t),m.a.error(n)}var r=!t.loading&&t.tagSeries&&t.tagSeries.nextToken?function(){m.a.info("fetchMore",t),t.fetchMore({variables:j({},t.variables,{nextToken:t.tagSeries.nextToken}),updateQuery:function(e,t){var a=t.fetchMoreResult;return{tagSeries:j({},a.tagSeries,{seriesSummaries:[].concat(Object(f.a)(e.tagSeries.seriesSummaries),Object(f.a)(a.tagSeries.seriesSummaries)).filter((function(e){return"deleted"!==e.seriesStatus}))})}}})}:null;return{searchResults:t.tagSeries&&t.tagSeries.seriesSummaries?t.tagSeries.seriesSummaries:[],fetchMore:r,loading:t.loading,series:a}},skip:function(e){return!e.contextChoice},options:function(e){return{variables:{tag:e.contextChoice.name,limit:10}}}}),N=Object(u.d)(p.graphqlAPI.queries.userSeries,{props:function(e){var t=e.data;t.error&&m.a.error(t.error);var a=null;try{t.loading||t.error||(a=t.series)}catch(n){m.a.error(t),m.a.error(n)}var r=!t.loading&&t.userSeries&&t.userSeries.nextToken?function(){m.a.info("fetchMore",t),t.fetchMore({variables:j({},t.variables,{nextToken:t.userSeries.nextToken}),updateQuery:function(e,t){var a=t.fetchMoreResult;return{userSeries:j({},a.userSeries,{seriesSummaries:[].concat(Object(f.a)(e.userSeries.seriesSummaries),Object(f.a)(a.userSeries.seriesSummaries)).filter((function(e){return"deleted"!==e.seriesStatus}))})}}})}:null;return{searchResults:t.userSeries&&t.userSeries.seriesSummaries?t.userSeries.seriesSummaries:[],fetchMore:r,loading:t.loading,series:a}},skip:function(e){return!e.contextChoice},options:function(e){return{variables:{createdBy:e.contextChoice.id,limit:10}}}}),A=Object(u.d)(p.graphqlAPI.queries.keywordSearch,{props:function(e){var t=e.data;t.error&&m.a.error(t.error);var a=null;try{t.loading||t.error||(a=t.series)}catch(n){m.a.error(t),m.a.error(n)}var r=!t.loading&&t.keywordSearch&&t.keywordSearch.nextToken?function(){m.a.info("fetchMore",t),t.fetchMore({variables:j({},t.variables,{nextToken:t.keywordSearch.nextToken}),updateQuery:function(e,t){var a=t.fetchMoreResult;return{keywordSearch:j({},a.keywordSearch,{seriesSummaries:[].concat(Object(f.a)(e.keywordSearch.seriesSummaries),Object(f.a)(a.keywordSearch.seriesSummaries)).filter((function(e){return"deleted"!==e.seriesStatus}))})}}})}:null;return{searchResults:t.keywordSearch&&t.keywordSearch.seriesSummaries?t.keywordSearch.seriesSummaries:[],fetchMore:r,loading:t.loading,series:a}},skip:function(e){var t=e.searchText;return!t||t.length<3},options:function(e){return{variables:{searchStr:e.searchText,limit:10}}}}),z=Object(u.d)(p.graphqlAPI.queries.geoSeriesIdOnly,{props:function(e){var t=e.data,a=e.ownProps;t.error&&m.a.error(t.error),m.a.info("OfflineMap::withGeoSearch:: ",{data:t,ownProps:a});try{!t.loading&&!t.error&&t.seriesInGeoBounds&&t.seriesInGeoBounds.seriesSummaries.length>0&&t.seriesInGeoBounds.nextToken?(a.setSeriesIds({ids:[],loading:!0}),t.fetchMore({variables:j({},t.variables,{nextToken:t.seriesInGeoBounds.nextToken}),updateQuery:function(e,t){var a=t.fetchMoreResult;return{seriesInGeoBounds:j({},a.seriesInGeoBounds,{seriesSummaries:[].concat(Object(f.a)(e.seriesInGeoBounds.seriesSummaries),Object(f.a)(a.seriesInGeoBounds.seriesSummaries))})}}})):t.loading||t.error?a.setSeriesIds({ids:[],loading:!0}):(m.a.info("OfflineMap::withGeoSearch::DONE"),t&&t.seriesInGeoBounds&&a.setSeriesIds({ids:t.seriesInGeoBounds.seriesSummaries.map((function(e){return e.id})),loading:!1}))}catch(r){m.a.error(t),m.a.error(r)}return{data:t,loading:t.loading}},skip:function(e){return!e.bounds},options:function(e){return{variables:{bounds:e.bounds,limit:100}}}});function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D=Object(u.d)(p.graphqlAPI.queries.getWholeSeries,{props:function(e){var t=e.data;Object(O.a)(e,["data"]);t.error&&m.a.error(t.error);var a=null;try{t.loading||t.error||(a=t.series)}catch(r){m.a.error("getWholeSeries:: error",{data:t,e:r})}return{data:t,loading:t.loading,series:a}},skip:function(e){var t=e.activeSeries,a=e.isNewSeries;return!t||a},options:function(e){return{variables:{id:e.activeSeries}}}}),L=Object(u.d)(p.graphqlAPI.queries.allSeries,{props:function(e){var t=e.data,a=e.ownProps;return!t.loading&&!t.error&&t.allSeries&&t.allSeries.seriesSummaries.length>0&&t.allSeries.nextToken?t.fetchMore({variables:R({},t.variables,{nextToken:t.allSeries.nextToken}),updateQuery:function(e,t){var a=t.fetchMoreResult;return{allSeries:R({},a.allSeries,{seriesSummaries:[].concat(Object(f.a)(e.allSeries.seriesSummaries),Object(f.a)(a.allSeries.seriesSummaries))})}}}):t.loading||t.error?a.setSeriesProps(t):a.setSeriesProps(R({},t,{readyForPolling:!0})),null},options:{variables:{limit:100}}}),M=Object(u.d)(p.graphqlAPI.queries.pollQuery,{skip:function(e){var t=e.lastCheck,a=e.online;return!t||!a},props:function(e){var t=e.data,a=e.ownProps,r=a.seriesProps,n=a.updateIncrement;if(t.error&&(m.a.info("POLL FAIL",t.error,t),m.a.error(t.error)),!t.loading&&t.changedSeries&&t.changedSeries.seriesSummaries){var o=t.changedSeries.seriesSummaries,i=r.allSeries.seriesSummaries;if(t.changedSeries){var l=r.allSeries.seriesSummaries;o.forEach((function(e){var t=e.seriesStatus,a=Object(O.a)(e,["seriesStatus"]);if("deleted"===t)m.a.info("Polling found a series to delete: ",a.id),l=i.filter((function(e){return e.id!==a.id}));else{var o=i.findIndex((function(e){return e.id===a.id}));o>=0?(m.a.info("Polling found a series to Update: ",a.id),l=i.map((function(e,t){return t===o?a:e}))):(m.a.info("Polling found a series to add: ",a.id),l=[].concat(Object(f.a)(i),[a]))}r.updateQuery((function(e,t){try{return R({},e).allSeries.seriesSummaries=l,n(),e}catch(a){return m.a.error(a),e}}))}))}}return null},options:function(e){return{variables:{limit:100,lastCheck:e.lastCheck}}}});function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var B=Object(u.d)(p.graphqlAPI.queries.userSeries,{props:function(e){var t=e.data;return{data:U({},e.ownProps.data,{seriesQ:t})}}}),q=Object(u.d)(p.graphqlAPI.queries.seriesFromList,{props:function(e){var t=e.data,a=e.ownProps;return m.a.info("ProfileConnect withMyWatchedSeriesQuery",p.graphqlAPI.queries.seriesFromList,{data:t,ownProps:a}),{data:U({},a.data,{watchedSeriesQ:t})}},skip:function(e){e.data;var t=e.currentUser;try{return t.watching.length<1}catch(a){return!0}},options:function(e){e.data;return{variables:{seriesList:e.currentUser.watching}}}});function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var H=Object(u.d)(p.graphqlAPI.mutations.reportBug,{props:function(e){var t=e.mutate,a=e.ownProps,r=a.reduxState,n=a.error,o=a.setState;return m.a.info("withReportBugMutation props",{mutate:t,reduxState:r,error:n}),t.error&&o(g.g.ERROR),{reportError:function(e){o(g.g.SENDING);var a="",i={};try{var l=window.navigator;i={userAgent:l.userAgent,appVersion:l.appVersion,languages:l.languages,language:l.language,platform:l.platform,onLine:l.onLine,window:{innerHeight:window.innerHeight,innerWidth:window.innerWidth}}}catch(u){m.a.error(u)}var c={};try{c={message:n.message,stack:n.stack}}catch(u){m.a.error(u)}var s=G({note:e,reduxState:r,error:c,env:Object({NODE_ENV:"production",PUBLIC_URL:"/photomon_v0",REACT_APP_GRAPHQL:"https://lf01db03a1.execute-api.us-west-2.amazonaws.com/prod",REACT_APP_DOMAIN:"northarrowresearchlabs.github.io",REACT_APP_BASENAME:"photomon_v0",REACT_APP_VERSION:"0.1.42",REACT_APP_CONTACT_EMAIL:"info@northarrowresearch.com",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",REACT_APP_AWS_REGION:"us-west-2",REACT_APP_COGNITO_IDPOOLID:"us-west-2:ab544d6d-6ea9-430d-8c8f-d895ce172d0f",REACT_APP_COGNITO_USER_POOL_ID:"us-west-2_ninoe7B9g",REACT_APP_COGNITO_CLIENT_ID:"ndtqsua64n6qqp9hef5fh4560",REACT_APP_TILEURL_SAT:"https://api.mapbox.com/v4/mapbox.mapbox-terrain-v2,mapbox.mapbox-streets-v7/{z}/{x}/{y}.vector.pbf",REACT_APP_TILEURL_TOPO:"https://api.mapbox.com/v4/mapbox.satellite/{z}/{x}/{y}@2x.webp",REACT_APP_GA_TOKEN:"UA-60121403-10",REACT_APP_AWS_PINPOINT:"e0bee7b100014c18812a8e49ad2ff9a8"})},i);m.a.info("withReportBugMutation StartingError",s);try{a=JSON.stringify(s)}catch(u){a=n.toString()}return m.a.info("withReportBugMutation got through it",a),t({variables:{reportJSON:a},update:function(e,t){var a=t.data;m.a.info("withReportBugMutation update",a),o(g.g.SENT)}})}}}});t.default=G({},l,{},r,{},n,{},o,{},i,{},c,{withReportBugMutation:H})},2010:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(1),i=a.n(o),l=a(111),c=a(2093),s=a(2077),u=a(2016),p=a(521),d=a.n(p),m=a(130),g=a.n(m),f=a(272),h=a.n(f),b=a(144),y=a.n(b),w=a(271),v=a.n(w),O=a(176),x=a(2068),E=a(20),S=a.n(E),k=a(2019),j=a(2084),C=a(2072),P=a(2071),T=a(2055),I=a(2026),N=a(160),A=a.n(N),z=Object(O.a)((function(e){return{root:{minHeight:60},chosenItem:{color:e.palette.primary.contrastText,background:e.palette.primary.dark},avatar:{background:e.palette.primary.main},closeIcon:{color:e.palette.primary.contrastText,paddingRight:0},avatarImg:{height:"100%",width:"100%",objectFit:"cover"}}})),_=function(e){var t,a=e.className,r=e.variant,o=e.name,i=e.description,c=e.gravatar,s=e.onClick,u=e.onCancel,p=z(),d=y.a;switch(r){case"tag":d=g.a;break;case"location":d=y.a;break;case"user":d=c?(t=c,function(){return n.a.createElement(I.a,{className:p.avatar},n.a.createElement("img",{className:p.avatarImg,alt:"profile",src:t}))}):v.a}return n.a.createElement(k.a,{className:S()(a,p.root,u?p.chosenItem:null),button:!!s,onClick:s},n.a.createElement(j.a,null,n.a.createElement(I.a,{className:p.avatar},n.a.createElement(d,{color:"inherit"}))),n.a.createElement(C.a,{disableTypography:!0},n.a.createElement(l.a,{variant:"body1",color:"inherit"},o),n.a.createElement(l.a,{variant:"body2",color:"inherit"},i)),u&&n.a.createElement(P.a,null,n.a.createElement(T.a,{onClick:u,className:p.closeIcon},n.a.createElement(A.a,{color:"inherit"}))))};_.propTypes={variant:i.a.oneOf(["tag","location","user"]),onClick:i.a.func,gravatar:i.a.string,className:i.a.string,name:i.a.string.isRequired,description:i.a.string,onCancel:i.a.func};var R=_;function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var L=Object(O.a)((function(e){return{root:{height:"100%",backgroundColor:e.palette.background.paper,position:"relative",overflowX:"hidden",overflowY:"scroll",flexGrow:1},listSection:{backgroundColor:"inherit"},placeholderText:{textAlign:"center",padding:e.spacing(3,1),color:e.palette.grey[400]},ul:{backgroundColor:"inherit",padding:0}}})),M=function(e){var t=e.variant,a=e.loading,r=e.contextResults,o=e.setContextChoice,i=L();return a?n.a.createElement(l.a,{className:i.placeholderText,variant:"h3"},"Searching..."):r&&0!==r.length?n.a.createElement(x.a,{className:i.root},r.map((function(e,a){return n.a.createElement(R,D({key:"scr-".concat(a),variant:t,onClick:function(){return o(e)}},e))}))):n.a.createElement(l.a,{className:i.placeholderText,variant:"h4"},"No ",t," results")};M.propTypes={variant:i.a.oneOf(["keyword","tag","location","user"]),loading:i.a.bool,contextResults:i.a.array.isRequired,setContextChoice:i.a.func.isRequired};var F=M,U=Object(O.a)((function(e){return{root:{textAlign:"center",fontStyle:"italic",padding:e.spacing(2,1)}}})),B=function(e){var t=e.style,a=e.icon,r=e.text,o=U();return n.a.createElement(l.a,{className:o.root,variant:"subtitle1",color:"textSecondary",component:"div",style:t},a,r)};B.propTypes={style:i.a.object,icon:i.a.any,text:i.a.string};var q=B,W=a(83),G=a(12),H=a(4),V=a.n(H);function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var Q=Object(O.a)((function(e){return{root:{height:"100%",flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"},ctxItem:{flexGrow:0},list:{flexGrow:1,backgroundColor:e.palette.background.paper,position:"relative",overflowX:"hidden",overflowY:"scroll"},placeholderText:{textAlign:"center",padding:e.spacing(3,1),color:e.palette.grey[400]},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0}}})),$=function(e){var t=e.variant,a=e.loading,o=e.seriesList,i=e.contextChoice,c=e.onCancel,s=e.onResultClick,u=e.fetchMore,p=Q(),d=Object(r.useRef)(),m=Object(r.useRef)(),g=G.util.debounce((function(){if(!a&&u&&m.current&&d.current){var e=m.current.offsetTop,t=d.current,r=t.scrollTop,n=t.offsetHeight;e<2*(n+r)&&(V.a.info("SCROLL",{offsetHeight:n,scrollTop:r,offsetTop:e}),u())}}),500);Object(r.useEffect)(g,[o]);var f=null;return a?f=n.a.createElement(l.a,{className:p.placeholderText,variant:"h3"},"Searching..."):o&&o.length>0?(f=o.map((function(e,t){return n.a.createElement(W.d,{key:"series-".concat(t),series:e,onClick:function(){return s(e.id)},showCreatedOn:!0,showLastPhoto:!0})}))).push(n.a.createElement("div",{key:"ender",ref:m},n.a.createElement(q,{text:u?"Loading...":"No More Results"}))):f=n.a.createElement(l.a,{className:p.placeholderText,variant:"h4"},"No series found"),n.a.createElement("div",{className:p.root},i&&n.a.createElement(R,Y({className:p.ctxItem},i,{variant:t,onCancel:c})),n.a.createElement(x.a,{className:p.list,subheader:n.a.createElement("li",null),onScroll:g,innerRef:d},f))};$.propTypes={variant:i.a.oneOf(["keyword","tag","location","user"]),seriesList:i.a.array.isRequired,loading:i.a.bool,contextChoice:i.a.object,onResultClick:i.a.func.isRequired,onCancel:i.a.func.isRequired,fetchMore:i.a.func};var X=$,Z=Object(O.a)((function(e){return{root:{flexGrow:1,padding:"10%",display:"flex",flexDirection:"column",opacity:.3,textAlign:"center"},icon:{width:"100%",flex:"1 1 40%",color:e.palette.primary.light,opacity:.5},primary:{flex:"1 1 30%",width:"100%"},secondary:{flex:"1 1 30%",width:"100%"}}})),K=function(e){var t=e.icon,a=e.primary,r=e.secondary,o=Z(),i=t;return n.a.createElement("div",{className:o.root},n.a.createElement(i,{className:o.icon}),a&&n.a.createElement(l.a,{className:o.primary,variant:"h3"},a),r&&n.a.createElement(l.a,{className:o.secondary,variant:"h4"},r))};K.propTypes={icon:i.a.object,primary:i.a.string,secondary:i.a.string};var J=K,ee=a(253),te=a(122),ae=a(11),re=ae.d.home.SEARCH_TABS,ne=Object(O.a)((function(e){return{root:{height:"100%",display:"flex",overflow:"hidden",flexDirection:"column"},container:{display:"flex",overflow:"hidden",flexDirection:"column",padding:0,flexGrow:1},tabs:{},ListWrapper:{flexGrow:1,overflow:"hidden",display:"flex",flexDirection:"column"},tab:{flexGrow:1},grow:{flexGrow:1}}})),oe=function(e){var t=e.currentTab,a=e.defaultText,o=e.searchText,i=e.contextResults,p=e.searchResults,m=e.contextChoice,f=e.loading,b=e.actions,w=ne(),O=Object(r.useContext)(ae.a).online;Object(r.useEffect)((function(){i&&!p&&1===i.length&&b.setContextChoice(i[0])}),[i]);var x={};switch(t){case re.KEYWORD:x={primary:"Keyword search",secondary:"example: 'beaver...'",icon:h.a};break;case re.TAG:x={primary:"Tag search",secondary:"example: 'beaver...'",icon:g.a};break;case re.USER:x={primary:"User search",secondary:"example: 'SuperGreg123...'",icon:v.a};break;case re.LOCATION:x={primary:"Location Search",secondary:"example: 'Vancouver...'",icon:y.a}}var E=null;return E=O.isOnline?(m||t===re.KEYWORD)&&p?n.a.createElement(X,{variant:t,loading:f,onResultClick:b.onResultClick,fetchMore:b.fetchMore,seriesList:p,contextChoice:m,onCancel:function(){return b.setContextChoice(null)}}):i?n.a.createElement(F,{loading:f,variant:t,contextResults:i,setContextChoice:t===re.LOCATION?b.onMapClick:b.setContextChoice}):a.length>0?n.a.createElement(l.a,null,"Searching for ","'".concat(o,"'")||!1):n.a.createElement(J,x):n.a.createElement(J,{primary:"Search Disabled",secondary:"(Offline)",icon:d.a}),n.a.createElement("div",{className:w.root},n.a.createElement(te.c,null,n.a.createElement(ee.a,{disabled:!O.isOnline,onChange:b.setSearchText,defaultValue:o})),n.a.createElement(u.a,{className:w.container,maxWidth:"sm"},O.isOnline&&n.a.createElement(c.a,{value:t,disabled:!O.isOnline,onChange:function(e,t){return b.setCurrentTab(t)},indicatorColor:"primary",classes:{flexContainer:w.tabs},centered:!0},n.a.createElement(s.a,{className:w.tab,value:re.TAG,label:"Tags"}),n.a.createElement(s.a,{className:w.tab,value:re.KEYWORD,label:"Keywords"}),n.a.createElement(s.a,{className:w.tab,value:re.LOCATION,label:"Places"}),n.a.createElement(s.a,{className:w.tab,value:re.USER,label:"Users"})),n.a.createElement("div",{className:w.ListWrapper},E)))};oe.propTypes={loading:i.a.bool,currentTab:i.a.string.isRequired,contextChoice:i.a.object,defaultText:i.a.string.isRequired,searchText:i.a.string.isRequired,contextResults:i.a.array,searchResults:i.a.array,actions:i.a.shape({setCurrentTab:i.a.func.isRequired,setSearchText:i.a.func.isRequired,setContextChoice:i.a.func.isRequired,fetchMore:i.a.func,onMapClick:i.a.func.isRequired,onResultClick:i.a.func.isRequired})},oe.defaultProps={currentTab:re.TAGS,defaultText:""};t.default=oe},2011:function(e,t,a){"use strict";a.r(t);var r=a(7),n=a(0),o=a.n(n),i=a(1),l=a.n(i),c=a(20),s=a.n(c),u=a(2081),p=a(111),d=a(2055),m=a(2018),g=a(2079),f=a(2080),h=a(2082),b=a(2060),y=a(95),w=a.n(y),v=a(130),O=a.n(v),x=a(505),E=a.n(x),S=a(504),k=a.n(S),j=a(163),C=a.n(j),P=a(162),T=a.n(P),I=a(176),N=a(62),A=a(67),z=a(12),_=a(11),R=Object(I.a)((function(e){return{root:{height:"100%",display:"flex",flexDirection:"column"},swipeAble:{height:"100%"},slideContainer:{flexGrow:1},titleBar:{padding:e.spacing(0,1),height:"35px!important"},mobileStepper:{flexGrow:0,background:e.palette.grey[800],color:e.palette.getContrastText(e.palette.grey[800])},slide:{top:0,zIndex:0,opacity:0,position:"absolute",display:"block",overflow:"hidden",width:"100%",height:"100%",minHeight:300},dotActive:{background:"white"},iconButton:{color:"white"},active:{zIndex:5,opacity:1},last:{opacity:1,zIndex:4},tagContainer:{},labelBadge:{color:"white",zIndex:10,position:"absolute",right:e.spacing(2),bottom:e.spacing(1),opacity:.8},tagChip:{marginRight:e.spacing(1),fontSize:10,height:e.spacing(2),padding:e.spacing(.5)},xyTagChip:{position:"absolute",fontSize:e.spacing(1),height:e.spacing(2)},manualBack:{color:"white",zIndex:10,position:"absolute",transform:"translateY(-50%)",left:0,top:"50%"},manualForward:{color:"white",zIndex:10,position:"absolute",transform:"translateY(-50%)",right:0,top:"50%"}}})),D=function(e){var t=e.onCancel,a=e.photos,i=e.transition,l=R(),c=Object(N.a)(),y=L(a.length,i),v=y.activeStep,x=y.lastStep,S=y.handleForward,j=y.handleBack,P=y.paused,I=y.pause,D=y.play,M=Object(n.useState)(!1),F=Object(r.a)(M,2),U=F[0],B=F[1],q=Object(n.useRef)(null),W=Object(_.i)(q).size,G=W.height,H=W.width;return o.a.createElement("div",{className:l.root},o.a.createElement(m.a,null),o.a.createElement("div",{ref:q,className:l.slideContainer},a.map((function(e,r){return o.a.createElement(g.a,{key:"slide-".concat(r),className:s()(l.slide,v===r&&l.active,x===r&&l.last),onClick:function(){return B(!U)},style:{height:G,width:H,transition:c.transitions.create(["opacity"],{duration:.25*i})}},o.a.createElement(A.b,{photo:e,className:l.photo,showTags:U}),o.a.createElement(p.a,{className:l.labelBadge},"Tags: ",U?"On ":"Off ",o.a.createElement(u.a,{color:"secondary",badgeContent:a[v].tags.filter((function(e){return e.coords})).length},o.a.createElement(O.a,{color:"inherit"}))),o.a.createElement(f.a,{className:l.titleBar,titlePosition:"top",title:o.a.createElement(p.a,{color:"inherit",variant:"caption"},o.a.createElement(d.a,{className:l.iconButton,onClick:function(e){return t()}},o.a.createElement(w.a,null)),z.dates.formatDate(e.takenOn)),subtitle:o.a.createElement("em",null,P?"Paused":"    "),actionIcon:P?o.a.createElement(d.a,{className:l.iconButton,onClick:function(e){e.preventDefault(),e.stopPropagation(),D()}},o.a.createElement(k.a,null)):o.a.createElement(d.a,{className:l.iconButton,onClick:function(e){e.preventDefault(),e.stopPropagation(),I()}},o.a.createElement(E.a,null))}))})),o.a.createElement(d.a,{size:"small",className:l.manualBack,onClick:j,color:"inherit"},"rtl"===c.direction?o.a.createElement(T.a,null):o.a.createElement(C.a,null)),o.a.createElement(d.a,{size:"small",className:l.manualForward,onClick:S,color:"inherit"},"rtl"===c.direction?o.a.createElement(C.a,null):o.a.createElement(T.a,null))),o.a.createElement(h.a,{steps:a.length,position:"static",activeStep:v,classes:{root:l.mobileStepper,dotActive:l.dotActive},nextButton:o.a.createElement(b.a,{color:"inherit",size:"small",onClick:S,disabled:v===a.length-1},"Next","rtl"===c.direction?o.a.createElement(C.a,null):o.a.createElement(T.a,null)),backButton:o.a.createElement(b.a,{color:"inherit",size:"small",onClick:j,disabled:0===v},"rtl"===c.direction?o.a.createElement(T.a,null):o.a.createElement(C.a,null),"Back")}))};D.propTypes={isFullScreen:l.a.bool,photos:l.a.array.isRequired,transition:l.a.number,onCancel:l.a.func.isRequired},D.defaultProps={transition:5e3,isFullScreen:!1,slides:[]};t.default=D;var L=function(e,t){var a=Object(n.useState)(0),o=Object(r.a)(a,2),i=o[0],l=o[1],c=Object(n.useState)(!1),s=Object(r.a)(c,2),u=s[0],p=s[1],d=Object(n.useState)(0),m=Object(r.a)(d,2),g=m[0],f=m[1],h=Object(n.useRef)(),b=function(){h.current=window.setInterval((function(){return l((function(t){return f(t),t+1>=e?0:t+1}))}),t)},y=function(){h.current&&window.clearInterval(h.current)};return Object(n.useEffect)((function(){return b(),function(){y()}}),[]),{activeStep:i,lastStep:g,handleForward:function(){f(i),l(i+1>=e?0:i+1),u||(y(),b())},handleBack:function(){f(i),l(i-1<0?e-1:i-1),u||(y(),b())},setActiveStep:l,paused:u,pause:function(){y(),p(!0)},play:function(){p(!1),y(),b()}}}},2012:function(e,t,a){"use strict";a.r(t);var r=a(7),n=a(0),o=a.n(n),i=a(1),l=a.n(i),c=a(264),s=a.n(c),u=a(2082),p=a(2055),d=a(2080),m=a(2081),g=a(130),f=a.n(g),h=a(163),b=a.n(h),y=a(162),w=a.n(y),v=a(67),O=a(12),x=a(176),E=a(62),S=Object(x.a)((function(e){return{root:{position:"relative"},inner:{position:"relative"},photoWrapper:{minHeight:250,height:250},dateCaption:{padding:e.spacing(1),background:e.palette.primary.dark,color:e.palette.primary.contrastText,textAlign:"center"},mobileStepper:{},manualBack:{color:"white",zIndex:10,position:"absolute",transform:"translateY(-50%)",left:0,top:"50%"},manualForward:{color:"white",zIndex:10,position:"absolute",transform:"translateY(-50%)",right:0,top:"50%"},tagButton:{color:"rgba(255, 255, 255, 0.54)"},slideshowButton:{color:"rgba(255, 255, 255, 0.54)"},dots:{margin:"0 auto"}}})),k=function(e){var t=e.photos,a=e.onImageSelect,i=e.activePhotoId,l=e.setActivePhotoId,c=S(),g=Object(E.a)(),h=Object(n.useState)(!1),y=Object(r.a)(h,2),x=y[0],k=y[1],j=t.length<2,C=t.findIndex((function(e){return e.id===i}));C>0||(C=0);var P=C>-1?t[C]:null;return o.a.createElement("div",{className:c.root},o.a.createElement("div",{className:c.inner},o.a.createElement(s.a,{axis:"rtl"===g.direction?"x-reverse":"x",index:C,onChangeIndex:function(e){return l(t[e]?t[e].id:t[0].id)},enableMouseEvents:!0},t.map((function(e,t){return o.a.createElement("div",{className:c.photoWrapper,key:"swipeshowpic-".concat(t),onClick:function(){P&&P.id&&a&&a(P.id)}},o.a.createElement(v.b,{photo:e,className:c.photo,showTags:x}))}))),o.a.createElement(p.a,{size:"small",className:c.manualBack,onClick:function(){return l(C<=0?t[t.length-1].id:t[C-1].id)},color:"inherit",disabled:0===C},"rtl"===g.direction?o.a.createElement(w.a,null):o.a.createElement(b.a,null)),o.a.createElement(p.a,{size:"small",className:c.manualForward,onClick:function(){return l(C>=t.length-1?t[0].id:t[C+1].id)},color:"inherit",disabled:C===t.length-1},"rtl"===g.direction?o.a.createElement(b.a,null):o.a.createElement(w.a,null)),o.a.createElement(d.a,{title:j?"Photo":"Photo (".concat(C+1,"/").concat(t.length,")"),subtitle:P.takenOn&&o.a.createElement("span",null,O.dates.formatDate(P.takenOn)),actionIcon:o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{className:c.tagButton,onClick:function(){return k(!x)}},o.a.createElement(m.a,{color:x?"primary":"secondary",badgeContent:P.tags?P.tags.filter((function(e){return e.coords})).length:null},o.a.createElement(f.a,null))))})),!j&&o.a.createElement(u.a,{steps:t.length,position:"static",activeStep:C,classes:{root:c.mobileStepper,dots:c.dots}}))};k.propTypes={photos:l.a.array,transition:l.a.number,activePhotoId:l.a.string,setActivePhotoId:l.a.func.isRequired,onImageSelect:l.a.func.isRequired},k.defaultProps={activePhoto:0,transition:5e3,isFullScreen:!1,slides:[]};t.default=k},2013:function(e,t,a){"use strict";a.r(t);var r=a(7),n=a(0),o=a.n(n),i=a(1),l=a.n(i),c=a(111),s=a(2016),u=a(2073),p=a(2093),d=a(2077),m=a(176),g=a(2060),f=a(83),h=a(122),b=a(4),y=a.n(b),w=a(2019),v=a(2072),O=a(2071),x=a(12),E=Object(m.a)((function(e){return{root:{padding:0},imgContainer:{flex:"0 0 100px",margin:e.spacing(0,1,0,0)},gravatarImg:{verticalAlign:"top"}}})),S=function(e){var t=e.user,a=e.loading,r=e.onAvatarClick,n=E();return a||!t?"LOADING...":o.a.createElement(w.a,{className:n.root,onClick:r,disableGutters:!0},o.a.createElement(O.a,{className:n.imgContainer},o.a.createElement("img",{alt:"profile",className:n.gravatarImg,src:t.gravatar})),o.a.createElement(v.a,{primary:t.username,secondary:"Member since: ".concat(x.dates.formatDate(t.createdOn,"LL"))}))};S.propTypes={user:l.a.object,loading:l.a.bool,onAvatarClick:l.a.func};var k=S,j=Object(m.a)((function(e){return{root:{background:e.palette.background.paper,height:"100%",display:"flex",overflow:"hidden",flexDirection:"column"},filterContainer:{color:e.palette.primary.secondary,background:e.palette.background.default,textAlign:"center",padding:e.spacing(1,1)},container:{display:"flex",overflow:"hidden",flexDirection:"column",flexGrow:1,padding:0},filterChip:{},seriesListItemWrap:{margin:e.spacing(1,.5)},seriesList:{overflowX:"hidden",overflowY:"scroll"},tabs:{},tab:{padding:e.spacing(0,1)},noneFound:{color:e.palette.text.secondary,textAlign:"center",padding:e.spacing(2)}}})),C="Last Photo",P="Created",T="Name",I=function(e){var t=e.mySeries,a=e.user,i=e.watchingSeries,l=e.loading,m=e.actions,g=j(),b=Object(n.useState)(0),w=Object(r.a)(b,2),v=w[0],O=w[1],x=Object(n.useState)(C),E=Object(r.a)(x,2),S=E[0],I=E[1],N=Object(n.useState)(!1),z=Object(r.a)(N,2),_=z[0],R=z[1],D=function(e){e===S?R(!_):I(e)},L=0===v?t:i;switch(L||(L=[]),y.a.info("PROFILE CHECK",S,_,L.map((function(e){return e.latest}))),S){case C:L.sort((function(e,t){var a=e.latest&&e.latest.takenOn?e.latest.takenOn:0,r=t.latest&&t.latest.takenOn?t.latest.takenOn:0;return _?a-r:r-a}));break;case P:_?L.sort((function(e,t){return e.createdOn-t.createdOn})):L.sort((function(e,t){return t.createdOn-e.createdOn}));break;case T:_?L.sort((function(e,t){return e.name<t.name?-1:e.name>t.firstname?1:0})):L.sort((function(e,t){return t.name<e.name?-1:t.name>e.name?1:0}))}return o.a.createElement("div",{className:g.root},o.a.createElement(h.c,null,o.a.createElement(c.a,null,"My Profile")),o.a.createElement(s.a,{className:g.container,maxWidth:"sm"},o.a.createElement(k,{user:a}),o.a.createElement(p.a,{value:v,onChange:function(e,t){return O(t)},indicatorColor:"primary",centered:!0,classes:{flexContainer:g.tabs}},o.a.createElement(d.a,{className:g.tab,value:0,label:"My Series"}),o.a.createElement(d.a,{className:g.tab,value:1,label:"Watching"})),o.a.createElement(u.a,null),o.a.createElement("div",{className:g.filterContainer},o.a.createElement(A,{asc:_,active:S===T,onClick:function(){return D(T)},label:T}),"|",o.a.createElement(A,{asc:_,active:S===C,onClick:function(){return D(C)},label:C}),"|",o.a.createElement(A,{asc:_,active:S===P,onClick:function(){return D(P)},label:P})),o.a.createElement(u.a,null),o.a.createElement("div",{className:g.seriesList},!l&&(!L||0===L.length)&&o.a.createElement(c.a,{className:g.noneFound,component:"div"},"No Series Found"),l&&o.a.createElement(c.a,{className:g.noneFound,component:"div"},"Loading..."),L.map((function(e,t){return o.a.createElement(f.d,{key:"seriesListItem".concat(e.id),series:e,showCreatedOn:!0,showLastPhoto:!0,onClick:function(){return m.jumpToSeries(e.id)}})})))))};I.propTypes={loading:l.a.bool,user:l.a.object.isRequired,mySeries:l.a.array.isRequired,watchingSeries:l.a.array.isRequired,actions:l.a.shape({jumpToSeries:l.a.func.isRequired,jumpToMap:l.a.func.isRequired})};t.default=I;var N=Object(m.a)((function(e){return{root:{margin:e.spacing(0,.75,0,.75)}}})),A=function(e){var t=e.active,a=e.asc,r=e.onClick,n=e.label,i=N(),l=!0===a?"\u25b2":"\u25bc";return o.a.createElement(g.a,{size:"small",className:i.root,onClick:r,color:t?"secondary":"inherit"},n,o.a.createElement("span",{style:{opacity:t?1:0}},l))};A.propTypes={active:l.a.bool,asc:l.a.bool,onClick:l.a.func.isRequired,label:l.a.string.isRequired}},240:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userKeys=t.userFragment=t.photoKeys=t.photoFragment=t.seriesKeys=t.seriesFragment=t.feedSeriesSummaryKeys=t.feedSeriesSummaryFragment=t.seriesSummaryKeys=t.seriesSummaryFragment=t.userSummaryKeys=t.userSummaryFragment=t.photoSummaryKeys=t.photoSummaryFragment=void 0;var r,n=(r=a(171))&&r.__esModule?r:{default:r};function o(){var e=d(["\nfragment userFragment on User {\n  id\n  username\n  gravatar\n  watching\n  gravatarProfile\n  meta\n  createdOn\n  updatedOn\n  __typename\n}\n"]);return o=function(){return e},e}function i(){var e=d(["\nfragment photoFragment on Photo {\n  id\n  meta\n  createdOn\n  takenOn\n  updatedOn\n  coords\n  note\n  seriesId\n  seriesCreatedBy\n  createdBy\n  updatedBy\n  uploadToken\n  createdUser {\n    ...userSummaryFragment\n  }\n  updatedUser {\n    ...userSummaryFragment\n  }\n  tags {\n    label\n    typeId\n    coords {\n      x\n      y\n      __typename\n    }\n    __typename\n  }\n  paths {\n    base\n    large\n    thumb\n    medium\n    __typename\n  }\n  __typename\n}\n","\n"]);return i=function(){return e},e}function l(){var e=d(["\nfragment seriesFragment on Series {\n  id\n  name\n  access\n  note\n  meta\n  watchers\n  seriesStatus\n  createdOn\n  updatedOn\n  createdUser {\n    ...userSummaryFragment\n  }\n  updatedUser {\n    ...userSummaryFragment\n  }\n  coords\n  direction\n  photoCount\n  featured {\n    ...photoSummaryFragment\n  }\n  latest {\n    ...photoSummaryFragment\n  }\n  __typename\n}\n","\n","\n"]);return l=function(){return e},e}function c(){var e=d(["\nfragment feedSeriesSummaryFragment on FeedSeriesSummary {\n  id\n  name\n  access\n  createdUser {\n    ...userSummaryFragment\n  }\n  seriesStatus\n  updatedOn\n  createdOn\n  photoCount\n  coords\n  direction\n  watchers\n  __typename\n}\n","\n"]);return c=function(){return e},e}function s(){var e=d(["\nfragment seriesSummaryFragment on SeriesSummary {\n  id\n  name\n  access\n  createdUser {\n    ...userSummaryFragment\n  }\n  seriesStatus\n  updatedOn\n  createdOn\n  photoCount\n  coords\n  direction\n  watchers\n  featured {\n    ...photoSummaryFragment\n  }\n  latest {\n    ...photoSummaryFragment\n  }\n  __typename\n}\n","\n","\n"]);return s=function(){return e},e}function u(){var e=d(["\nfragment userSummaryFragment on UserSummary {\n  id\n  gravatar\n  gravatarProfile\n  username\n  __typename\n}\n"]);return u=function(){return e},e}function p(){var e=d(["\nfragment photoSummaryFragment on PhotoSummary {\n  id\n  takenOn\n  seriesCreatedBy\n  updatedOn\n  createdOn\n  seriesId\n  createdUser {\n    ...userSummaryFragment\n  }\n  paths {\n    base\n    thumb\n    medium\n    large\n    __typename\n  }\n  __typename\n}\n"]);return p=function(){return e},e}function d(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var m=(0,n.default)(p());t.photoSummaryFragment=m;t.photoSummaryKeys=["id","takenOn","seriesCreatedBy","updatedOn","createdOn","seriesId","createdUser","paths"];var g=(0,n.default)(u());t.userSummaryFragment=g;t.userSummaryKeys=["id","gravatar","gravatarProfile","username"];var f=(0,n.default)(s(),m,g);t.seriesSummaryFragment=f;t.seriesSummaryKeys=["id","name","access","createdUser","seriesStatus","updatedOn","createdOn","photoCount","coords","direction","watchers","featured","latest"];var h=(0,n.default)(c(),g);t.feedSeriesSummaryFragment=h;t.feedSeriesSummaryKeys=["id","name","access","createdUser","seriesStatus","updatedOn","createdOn","photoCount","coords","direction","watchers"];var b=(0,n.default)(l(),m,g);t.seriesFragment=b;t.seriesKeys=["id","name","access","note","meta","watchers","seriesStatus","createdOn","updatedOn","createdUser","updatedUser","coords","direction","photoCount","featured","latest"];var y=(0,n.default)(i(),g);t.photoFragment=y;t.photoKeys=["id","meta","createdOn","takenOn","updatedOn","note","coords","seriesId","seriesCreatedBy","createdBy","updatedBy","uploadToken","createdUser","updatedUser","tags","paths"];var w=(0,n.default)(o());t.userFragment=w;t.userKeys=["id","username","gravatar","watching","gravatarProfile","meta","createdOn","updatedOn"]},251:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a(0),n=a.n(r),o=a(29),i=a.n(o),l=n.a.createElement(n.a.Fragment,null,n.a.createElement("path",{d:"M13.685,2.797c-0.44,1.273 0.852,3.525 -1.082,4.966c-1.247,0.93 -2.133,2.247 -2.743,4.167c-3.78,-7.611 2.788,-8.409 3.682,-10.699c0.64,1.255 5.18,2.608 2.89,4.873c1.28,-2.034 -2.359,-1.862 -2.747,-3.307Z"}),n.a.createElement("path",{d:"M4.921,5.953c0.883,1.017 3.479,1.024 3.76,3.42c0.181,1.545 0.879,2.971 2.238,4.459c-8.482,-0.532 -5.889,-6.619 -7.425,-8.538c1.407,0.073 4.848,-3.183 5.665,-0.066c-1.121,-2.126 -2.792,1.111 -4.238,0.725Z"}),n.a.createElement("path",{d:"M3.236,15.092c1.323,-0.256 2.627,-2.5 4.842,-1.546c1.428,0.615 3.013,0.724 4.98,0.292c-4.701,7.079 -8.676,1.79 -11.106,2.161c0.766,-1.183 -0.332,-5.791 2.775,-4.94c-2.402,-0.091 -0.433,2.974 -1.491,4.033Z"}),n.a.createElement("path",{d:"M10.309,21.121c0.439,-1.274 -0.852,-3.525 1.081,-4.967c1.247,-0.929 2.133,-2.246 2.743,-4.167c3.781,7.611 -2.788,8.409 -3.681,10.699c-0.641,-1.255 -5.181,-2.607 -2.891,-4.873c-1.28,2.034 2.359,1.863 2.748,3.308Z"}),n.a.createElement("path",{d:"M19.066,18.01c-0.883,-1.017 -3.479,-1.024 -3.76,-3.42c-0.182,-1.544 -0.88,-2.971 -2.238,-4.459c8.482,0.532 5.889,6.619 7.425,8.538c-1.407,-0.072 -4.849,3.183 -5.665,0.067c1.121,2.125 2.792,-1.112 4.238,-0.726Z"}),n.a.createElement("path",{d:"M20.751,8.871c-1.323,0.256 -2.627,2.501 -4.842,1.546c-1.429,-0.615 -3.013,-0.723 -4.98,-0.291c4.701,-7.08 8.676,-1.791 11.106,-2.162c-0.767,1.183 0.332,5.791 -2.775,4.94c2.401,0.092 0.433,-2.974 1.491,-4.033Z"}));t.b=i()(l,"AppLogo")},253:function(e,t,a){"use strict";var r=a(16),n=a(0),o=a.n(n),i=a(1),l=a.n(i),c=a(20),s=a.n(c),u=a(97),p=a(356),d=a(272),m=a.n(d),g=a(176),f=a(12),h=Object(g.a)((function(e){return{root:Object(r.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(u.fade)(e.palette.common.white,.3),"&:hover":{backgroundColor:Object(u.fade)(e.palette.common.white,.5)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),transparent:{backgroundColor:Object(u.fade)(e.palette.common.white,.7),"&:hover":{backgroundColor:Object(u.fade)(e.palette.common.white,.9)}},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(r.a)({padding:e.spacing(1,1,1,4),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),searchIcon:{width:e.spacing(4),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}})),b=function(e){var t=e.autoFocus,a=e.disabled,r=e.onChange,i=e.onClick,l=e.defaultValue,c=e.isTransparent,u=Object(n.useRef)(),d=h(),g=Object(n.useCallback)(f.util.debounce(r,500),[r]);return Object(n.useLayoutEffect)((function(){u.current&&!t&&u.current.blur()}),[t]),o.a.createElement("div",{className:s()(d.root,c?d.transparent:null),onClick:i},o.a.createElement("div",{className:d.searchIcon},o.a.createElement(m.a,null)),o.a.createElement(p.a,{autoFocus:!a&&t,inputProps:{onBlur:function(){}},onChange:function(e){g(e.target.value)},placeholder:"Search\u2026",disabled:a,defaultValue:l,inputRef:u,classes:{root:d.inputRoot,input:d.inputInput}}))};b.propTypes={autoFocus:l.a.bool,isTransparent:l.a.bool,disabled:l.a.bool,onChange:l.a.func,defaultValue:l.a.string,onClick:l.a.func},t.a=b},254:function(e,t,a){"use strict";var r=a(0),n=a.n(r),o=a(1),i=a.n(o),l=a(227),c=a(111),s=a(176),u=a(45),p=a(67),d=a(2026),m=a(12),g=Object(s.a)((function(e){return{root:{height:"100%",padding:e.spacing(0)},imgContainer:{overflow:"hidden",height:"100%",position:"relative",borderRadius:0},findOnMapButtonContainer:{position:"absolute",opacity:.8,bottom:e.spacing(1),right:e.spacing(1)},titleContainer:{borderTop:"2px solid #FFFFFF99",background:"#444444AA",textShadow:"1px 1px 10px black",color:"white",position:"absolute",alignItems:"center",display:"flex",top:0,width:"100%",paddingRight:e.spacing(1)},avatar:{border:"1px solid white",margin:e.spacing(0,1)},title:{flex:"1 1 50%",overflow:"hidden"},seriesName:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},img:{},gravatarImg:{width:"100%"}}})),f="Added",h=function(e){var t=e.event,a=e.actions,r=t.series,o=t.photo,i=g();return n.a.createElement("div",{className:i.root},n.a.createElement(l.a,{className:i.imgContainer},n.a.createElement(p.g,{photo:o,sizePriority:["medium","large","thumb"],className:i.img,style:{objectFit:"cover"},onClick:function(){return a.onImageClick(r.id,o.id)}}),n.a.createElement("div",{className:i.titleContainer},n.a.createElement(d.a,{onClick:function(){return a.onProfileClick(o.createdUser.username)},className:i.avatar},n.a.createElement("img",{alt:"profile",className:i.gravatarImg,src:o.createdUser.gravatar})),n.a.createElement("div",{className:i.title},n.a.createElement(c.a,{className:i.seriesName,variant:"body1",color:"inherit"},r.name),n.a.createElement(c.a,{variant:"body2",color:"inherit"},o.createdUser.username," ",f," a photo"),n.a.createElement(c.a,{variant:"caption",color:"inherit"},m.dates.formatDate(o.updatedOn))),n.a.createElement(u.i,{onClick:function(){return a.onMapClick(r.id,o.id)}}))))};h.propTypes={event:i.a.object.isRequired,actions:i.a.shape({onImageClick:i.a.func.isRequired,onProfileClick:i.a.func.isRequired,onMapClick:i.a.func.isRequired})},t.a=h;i.a.object.isRequired},270:function(e,t,a){"use strict";var r=a(253);a.d(t,"a",(function(){return r.a})),t.b=a(2010).default},298:function(e,t){},301:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomObjectElement=t.randomArrayEl=t.filledArray=t.randomMap=t.randomChance=t.randomFloat=t.randomInt=void 0;var r,n=(r=a(714))&&r.__esModule?r:{default:r};function o(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.randomInt=function(e,t){return(0,n.default)(e,t)};t.randomFloat=function(e,t){return(0,n.default)(e,t,!0)};t.randomChance=function(e,t){return(0,n.default)(0,t)<=e};t.randomMap=function(e,t,a){return i((0,n.default)(e,t),null).map(a)};var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o(Array(e).keys()).map((function(){return t}))};t.filledArray=i;var l=function(e){return e&&0!==e.length?e[(0,n.default)(0,e.length-1)]:null};t.randomArrayEl=l;t.randomObjectElement=function(e){var t=l(Object.keys(e));return[t,e[t]]}},307:function(e,t){},336:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return d}));var r=a(18),n=a.n(r),o=a(146),i=a.n(o),l=a(475),c=a.n(l),s=a(49),u=a(4),p=a.n(u);function d(e,t,a,r){var o,l,u;return n.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return p.a.info("s3Upload::STARTING",{activeUpload:e}),o=new c.a,Object.keys(e.preAuth.fields).forEach((function(t){o.append(t,e.preAuth.fields[t])})),d.next=5,n.a.awrap(s.imgStore.getItem(e.uploadToken));case 5:return l=d.sent,o.append("file",l),u={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){p.a.info("s3Upload::PROGRESSEVENT",e);var a=e.loaded,r=e.total;t({progress:Math.floor(100*a/r)})}},d.next=11,n.a.awrap(i.a.post(e.preAuth.url,o,u).then((function(t){return n.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=p.a,t.next=3,n.a.awrap(s.imgStore.keys());case 3:return t.t1=t.sent,t.t0.info.call(t.t0,"s3Upload:: upload done. cleaning up imgStore",t.t1),t.next=7,n.a.awrap(s.imgStore.removeItem(e.uploadToken));case 7:return t.t2=p.a,t.next=10,n.a.awrap(s.imgStore.keys());case 10:t.t3=t.sent,t.t2.info.call(t.t2,"s3Upload:: Cleaned up img store",t.t3),a();case 13:case"end":return t.stop()}}))})).catch((function(e){p.a.error("s3Upload::ERROR"),p.a.error(e),r()})));case 11:p.a.info("s3Upload::COMPLETE");case 12:case"end":return d.stop()}}))}i.a.interceptors.request.use((function(e){return p.a.info("AXIOS:::: Starting Request",e),e}),(function(e){return p.a.info("AXIOS:::: Starting Request ERROR",e),Promise.reject(e)})),i.a.interceptors.response.use((function(e){return p.a.info("AXIOS:::: Response",e),e}),(function(e){return p.a.info("AXIOS:::: Starting Response ERROR",e),Promise.reject(e)}))},337:function(e,t,a){"use strict";a.r(t),a.d(t,"withMutation",(function(){return b}));var r=a(18),n=a.n(r),o=a(30),i=a(12),l=a(56),c=a(49),s=a(43),u=a.n(s),p=a(4),d=a.n(p),m=i.graphqlAPI.mutations.createSeries,g=i.graphqlAPI.mutations.newSeriesKeys,f=i.graphqlAPI.mutations.newPhotoKeys,h=i.graphqlAPI.optimistic.createSeriesResponse,b=Object(o.d)(m,{props:function(e){var t=e.mutate,a=e.ownProps;return{createSeriesMutation:function(e,r,o){var l,s,p,b,w,v,O,x,E;return n.a.async((function(S){for(;;)switch(S.prev=S.next){case 0:return l=a.currentUser,s=l.id,p=l.gravatar,b=l.gravatarProfile,w=l.username,v={id:s,gravatar:p,gravatarProfile:b,username:w,__typename:"UserSummary"},e.access||(e.access="PRIVATE"),O={series:u.a.pick(e,g),photo:u.a.pick(r,f),ext:o},x=h({meUserSummary:v,newSeries:e,newPhoto:r,ext:o}),S.next=7,n.a.awrap(Object(c.pushMutationPromise)({variables:O,optimisticResponse:x},m));case 7:return E=S.sent,d.a.info("createSeriesMutation:: start",{newSeries:e,newPhoto:r,variables:O,optimisticResponse:x,ext:o}),S.abrupt("return",t({variables:O,refetchQueries:[{query:i.graphqlAPI.queries.allSeries,variables:{limit:100}},{query:i.graphqlAPI.queries.userSeries},{query:i.graphqlAPI.queries.getMyFeed}],optimisticResponse:x,update:y({},a.doneCreatingSeries)}).then((function(e){return d.a.info("createSeriesMutation:: done",e),Object(c.popMutationPromise)(E),e})));case 10:case"end":return S.stop()}}))}}}}),y=function(e,t){return function(e,a){var r=a.data;d.a.info("createSeriesMutation::updateThunk",{data:r}),Object(l.getWholeSeriesUpdate)(e,r.createSeries.series),Object(l.userSeriesUpdate)(e,r.createSeries.series),Object(l.allSeriesUpdate)(e,r.createSeries.series),Object(l.feedUpdate)(e,r.createSeries.series,r.createSeries.series.photos[0]),t&&t(r.createSeries.series.id)}};t.default={withMutation:b,updateThunk:y}},338:function(e,t,a){"use strict";a.r(t),a.d(t,"withMutation",(function(){return h}));var r=a(18),n=a.n(r),o=a(30),i=a(12),l=a(49),c=a(56),s=a(4),u=a.n(s),p=a(43),d=a.n(p),m=i.graphqlAPI.mutations.updateSeries,g=i.graphqlAPI.mutations.updateSeriesKeys,f=i.graphqlAPI.optimistic.updateSeriesResponse,h=Object(o.d)(m,{props:function(e){var t=e.mutate,a=e.ownProps;return{updateSeriesMutation:function(e,r){var o,c,s,p,h,y,w,v,O;return n.a.async((function(x){for(;;)switch(x.prev=x.next){case 0:return o=a.currentUser,c=o.id,s=o.gravatar,p=o.gravatarProfile,h=o.username,y={id:c,gravatar:s,gravatarProfile:p,username:h,__typename:"UserSummary"},w={series:d.a.pick(r,g)},v=f({meUserSummary:y,series:e,seriesDelta:r}),x.next=6,n.a.awrap(Object(l.pushMutationPromise)({variables:w,optimisticResponse:v},m));case 6:return O=x.sent,x.abrupt("return",t({variables:w,refetchQueries:[{query:i.graphqlAPI.queries.allSeries,variables:{limit:100}}],optimisticResponse:v,update:b({series:e})}).then((function(e){return u.a.info("updateSeriesMutation:: done",e),Object(l.popMutationPromise)(O),e})));case 8:case"end":return x.stop()}}))}}}}),b=function(e,t){return function(t,a){var r=a.data;u.a.debug("updateSeriesMutation::updateThunk",{context:e,data:r}),Object(c.getWholeSeriesUpdate)(t,r.updateSeries),Object(c.allSeriesUpdate)(t,r.updateSeries),Object(c.feedUpdate)(t,r.updateSeries.series,e.series.photos[0])}};t.default={withMutation:h,updateThunk:b}},339:function(e,t,a){"use strict";a.r(t);var r=a(18),n=a.n(r),o=a(30),i=a(12),l=a(56),c=a(49),s=a(43),u=a.n(s),p=a(4),d=a.n(p),m=i.graphqlAPI.mutations.createPhoto,g=i.graphqlAPI.mutations.newPhotoKeys,f=i.graphqlAPI.optimistic.createPhotoResponse,h=Object(o.d)(m,{props:function(e){var t=e.mutate,a=e.ownProps;return{createPhotoMutation:function(e,r,o){var i,l,s,p,h,y,w,v,O,x;return n.a.async((function(E){for(;;)switch(E.prev=E.next){case 0:return!(i=u.a.cloneDeep(r)).seriesId&&a.activeSeries&&(i.seriesId=a.activeSeries),l=a.currentUser,s=l.id,p=l.gravatar,h=l.gravatarProfile,y=l.username,w={id:s,gravatar:p,gravatarProfile:h,username:y,__typename:"UserSummary"},v={photo:u.a.pick(i,g),ext:o},O=f({meUserSummary:w,series:e,newPhoto:r,ext:o}),E.next=8,n.a.awrap(Object(c.pushMutationPromise)({variables:v,optimisticResponse:O},m));case 8:return x=E.sent,E.abrupt("return",t({variables:v,optimisticResponse:O,update:b({series:e},a.doneCreatingPhoto)}).then((function(e){return d.a.info("createPhotoMutation:: done",e),Object(c.popMutationPromise)(x),e})));case 10:case"end":return E.stop()}}))}}}}),b=function(e,t){return function(a,r){var n=r.data;d.a.debug("createPhotoMutation::updateThunk",{context:e,data:n}),Object(l.getWholeSeriesPhotoUpdate)(a,n.createPhoto.photo),Object(l.allSeriesPhotoUpdate)(a,e.series,n.createPhoto.photo),Object(l.feedUpdate)(a,e.series,n.createPhoto.photo),t&&t(n.createPhoto.photo.id)}};t.default={withMutation:h,updateThunk:b}},340:function(e,t,a){"use strict";a.r(t);var r=a(16),n=a(18),o=a.n(n),i=a(30),l=a(12),c=a(56),s=a(49),u=a(4),p=a.n(u),d=a(43),m=a.n(d);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h=l.graphqlAPI.mutations.updatePhoto,b=l.graphqlAPI.mutations.updatePhotoKeys,y=l.graphqlAPI.optimistic.updatePhotoResponse,w=Object(i.d)(h,{props:function(e){var t=e.mutate,a=e.ownProps;return{updatePhotoMutation:function(e,r,n){var i,l,c,u,d,g,f,w,O,x;return o.a.async((function(E){for(;;)switch(E.prev=E.next){case 0:return(i=m.a.pick(n,b)).tags&&i.tags.length>0&&(i.tags=i.tags.map((function(e){var t=m.a.pick(e,["label","typeId","coords"]);return t.coords&&(t.coords=m.a.pick(t.coords,["x","y"])),t}))),l=a.currentUser,c=l.id,u=l.gravatar,d=l.gravatarProfile,g=l.username,w={photo:i},O=y({meUserSummary:f={id:c,gravatar:u,gravatarProfile:d,username:g,__typename:"UserSummary"},photo:r,photoDelta:n}),E.next=8,o.a.awrap(Object(s.pushMutationPromise)({variables:w,optimisticResponse:O},h));case 8:return x=E.sent,p.a.info("optimisticresponse",{optimisticResponse:O,meUserSummary:f,photo:r,photoDelta:n}),E.abrupt("return",t({variables:w,optimisticResponse:O,update:v({photo:r,series:e})}).then((function(e){return p.a.info("updatePhotoMutation:: done",e),Object(s.popMutationPromise)(x),e})));case 11:case"end":return E.stop()}}))}}}}),v=function(e,t){return function(a,r){var n=r.data;p.a.info("updateThunk",{context:e,data:n}),Object(c.getWholeSeriesPhotoUpdate)(a,f({},e.photo,{},n.updatePhoto)),Object(c.allSeriesPhotoUpdate)(a,e.series,f({},e.photo,{},n.updatePhoto)),Object(c.feedUpdate)(a,e.series,f({},e.photo,{},n.updatePhoto)),t&&t(n.createSeries.series.id)}};t.default={withMutation:w,updateThunk:v}},341:function(e,t,a){"use strict";a.r(t);var r=a(18),n=a.n(r),o=a(30),i=a(56),l=a(12),c=a(49),s=a(4),u=a.n(s),p=l.graphqlAPI.mutations.deletePhoto,d=Object(o.d)(p,{props:function(e){var t=e.mutate,a=e.ownProps;return{deletePhotoMutation:function(e){var r,o,i;return n.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return r={seriesId:a.series.id,photoId:e},o={deletePhoto:e},l.next=4,n.a.awrap(Object(c.pushMutationPromise)({variables:r,optimisticResponse:o},p));case 4:return i=l.sent,l.abrupt("return",t({variables:r,optimisticResponse:o,update:m({series:a.series})}).then((function(e){return u.a.info("deletePhotoMutation:: done",e),Object(c.popMutationPromise)(i),e})));case 6:case"end":return l.stop()}}))}}}}),m=function(e,t){return function(t,a){var r=a.data;u.a.debug("deletePhotoMutation::updateThunk",{context:e,data:r}),Object(i.allSeriesPhotoUpdate)(t,null,{id:r.deletePhoto},!0),Object(i.getWholeSeriesPhotoUpdate)(t,{id:r.deletePhoto,seriesId:e.series.id},!0),Object(i.feedUpdate)(t,e.series,{id:r.deletePhoto,seriesId:e.series.id},!0)}};t.default={withMutation:d,updateThunk:m}},342:function(e,t,a){"use strict";a.r(t);var r=a(18),n=a.n(r),o=a(30),i=a(56),l=a(12),c=a(49),s=a(4),u=a.n(s),p=l.graphqlAPI.mutations.deleteSeries,d=Object(o.d)(p,{props:function(e){var t=e.mutate,a=e.ownProps;return{deleteSeriesMutation:function(){var e,r,o;return n.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e={id:a.activeSeries},r={deleteSeries:a.activeSeries},i.next=4,n.a.awrap(Object(c.pushMutationPromise)({variables:e,optimisticResponse:r},p));case 4:return o=i.sent,i.abrupt("return",t({variables:e,refetchQueries:[{query:l.graphqlAPI.queries.allSeries,variables:{limit:100}},{query:l.graphqlAPI.queries.userSeries},{query:l.graphqlAPI.queries.getMyFeed}],optimisticResponse:r,update:m()}).then((function(e){return u.a.info("deleteSeriesMutation:: done",{data:e,mutationStackId:o}),Object(c.popMutationPromise)(o),e})));case 6:case"end":return i.stop()}}))}}}}),m=function(e,t){return function(e,a){var r=a.data;u.a.info("deleteSeriesMutation::updateThunk",{data:r}),Object(i.userSeriesUpdate)(e,r.deleteSeries,!0),Object(i.allSeriesUpdate)(e,{id:r.deleteSeries},!0),Object(i.feedUpdate)(e,{id:r.deleteSeries},null,!0),t&&t(r.createSeries.series.id)}};t.default={withMutation:d,updateThunk:m}},343:function(e,t,a){"use strict";a.r(t);var r=a(18),n=a.n(r),o=a(30),i=a(56),l=a(12),c=a(49),s=a(4),u=a.n(s),p=l.graphqlAPI.mutations.watchSeries,d=Object(o.d)(p,{props:function(e){var t=e.mutate,a=e.ownProps;return{watchSeriesMutation:function(e){var r,o,i;return n.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return r={seriesId:a.activeSeries},o={watchSeries:a.activeSeries},s.next=4,n.a.awrap(Object(c.pushMutationPromise)({variables:r,optimisticResponse:o},p));case 4:return i=s.sent,s.abrupt("return",t({variables:r,optimisticResponse:o,refetchQueries:[{query:l.graphqlAPI.queries.seriesFromList,variables:{seriesList:e.watching}},{query:l.graphqlAPI.queries.getMyFeed}],update:m({currentUser:e})}).then((function(e){return u.a.info("watchSeriesMutation:: done",e),Object(c.popMutationPromise)(i),e})));case 6:case"end":return s.stop()}}))}}}}),m=function(e,t){return function(t,a){var r=a.data;u.a.info("watchSeriesMutation::updateThunk",{context:e,data:r}),Object(i.watchUpdate)(t,r.watchSeries,e.currentUser.id,!1)}};t.default={withMutation:d,updateThunk:m}},344:function(e,t,a){"use strict";a.r(t);var r=a(18),n=a.n(r),o=a(30),i=a(56),l=a(12),c=a(49),s=a(4),u=a.n(s),p=l.graphqlAPI.mutations.unWatchSeries,d=Object(o.d)(p,{props:function(e){var t=e.mutate,a=e.ownProps;return{unWatchSeriesMutation:function(e){var r,o,i;return n.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return r={seriesId:a.activeSeries},o={unWatchSeries:a.activeSeries},s.next=4,n.a.awrap(Object(c.pushMutationPromise)({variables:r,optimisticResponse:o},p));case 4:return i=s.sent,s.abrupt("return",t({variables:r,optimisticResponse:o,refetchQueries:[{query:l.graphqlAPI.queries.seriesFromList,variables:{seriesList:e.watching}},{query:l.graphqlAPI.queries.getMyFeed}],update:m({currentUser:e})}).then((function(e){return u.a.info("unWatchSeriesMutation:: done",e),Object(c.popMutationPromise)(i),e})));case 6:case"end":return s.stop()}}))}}}}),m=function(e,t){return function(t,a){var r=a.data;u.a.debug("unWatchSeriesMutation::updateThunk",{context:e,data:r}),Object(i.watchUpdate)(t,r.unWatchSeries,e.currentUser.id,!0)}};t.default={withMutation:d,updateThunk:m}},345:function(e,t,a){"use strict";a.r(t),a.d(t,"actionMaker",(function(){return c})),a.d(t,"fakeGlobalActions",(function(){return s}));var r=a(16),n=a(4),o=a.n(n);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c=function(e,t){return e.reduce((function(e,a){return l({},e,Object(r.a)({},a,t?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.a.info(a,t)}:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return alert("".concat(a,"::")+JSON.stringify(t,null,2))}))}),{})},s=l({},c(["onQRButtonClick"]),{},c(["signOut","forceSignIn","addToHomeScreen","setHomeState","onCameraClick","onLibraryClick","onOfflineMenuClick","onSettingsClick","resetAllState","resetApp","dismissInstall","setUseOffline","onQRButtonClick","onMenuBack","onAvatarClick","onQRCapture"],!0))},367:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={admin:{series:{"create:own":["*"],"read:any":["*"],"update:any":["*"],"delete:any":["*"]},photo:{"create:any":["*"],"read:any":["*"],"update:any":["*"],"delete:any":["*"]}},nonuser:{photo:{"read:any":["*"],"update:any":["*"],"delete:any":["*"]},series_public:{"read:any":["*"]},series_open:{"read:any":["*"]}},user:{series:{"create:own":["*"],"read:own":["*"],"update:own":["*"],"delete:own":["*"]},series_public:{"read:any":["*"]},series_open:{"read:any":["*"],"update:any":["photos"]},photo:{"read:any":["*"],"create:own":["*"],"update:own":["*"],"delete:own":["*"]}}}},368:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timestampToHTML5Input=function(e){return(0,r.default)(e,"x").format("YYYY-MM-DDTkk:mm")},t.HTML5InputToTimestamp=function(e){return(0,r.default)(new Date(e),"YYYY-MM-DDTkk:mm").format("x")},t.convertJSDatetoTimestamp=t.parseDate=t.formatDateAgo=t.fixParseDate=t.formatDate=void 0;var r=i(a(369)),n=a(370),o=i(a(4));function i(e){return e&&e.__esModule?e:{default:e}}t.formatDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LLLL";e&&!(0,n.isNumeric)(e)&&o.default.error("formatDate: utctimestamp must be numeric");var a=e||Date.now();return(0,r.default)(a,"x").format(t)};t.fixParseDate=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=null;if(null!==e&&void 0!==e){var r=e;"string"===typeof r&&(0,n.isNumeric)(r)&&(r=parseInt(r,10));try{var i=new Date(r);if(a=i.getTime(),(0,n.isNumeric)(r)&&(!a||a<3445056e5)&&((a=parseInt(r,10))>0&&(a*=1e3),!t)){var l=i.getTimezoneOffset();a+=60*l*1e3}a=String(a)}catch(c){o.default.error("fixParseDate: Error parsing datetime:"+r)}}return a};t.formatDateAgo=function(e){var t=e||Date.now();return(0,r.default)(t,"x").fromNow()};t.parseDate=function(e){return(0,r.default)(e,"x")};t.convertJSDatetoTimestamp=function(e){return r.default.utc(e).format("x")}},370:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.formatNum=function(e,t){try{var a=t>0?"."+Array(t+1).join("0"):"";return(l(e)?(0,r.default)(e).format("0,0".concat(a)):e).replace(/(\.(0{0,1}[1-9]*))0+$/,"$1")}catch(n){return e}},t.clearSelection=function(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){window.getSelection().removeAllRanges()}},t.isObjectWithKeys=function(e){return"object"===i(e)&&null!==e&&Object.keys(e).length>0},t.makeDomArray=function(e){if(!e)return[];var t=Object.keys(e);if(t.length>1||0===t.length)throw Error("Expected nester domnode structure.");return e&&e[t[0]]?Array.isArray(e[t[0]])?e[t[0]]:[e[t[0]]]:[]},t.capitalizeFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.numericArrayCompare=function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&(e.length===t.length&&!e.some((function(e,a){return e!==t[a]})))},t.caseInsensitiveSort=function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0},t.decodeUnbufferedBase64=function(t){var a=t.length%4;if(0!==a){var r=t+Array(4-a).join("=");return e.from(r,"base64").toString()}return e.from(t,"base64").toString()},t.encodeUnbufferedBase64=function(t){return c(e.from(t).toString("base64"))},t.isObject=s,t.arrToObj=function e(t){for(var a in t)if(t.hasOwnProperty(a)){var r=t[a];r._&&(r.val=r._,delete r._),r.$&&(r.attr=r.$,delete r.$),"object"===i(r)&&(t[a]=e(r),Array.isArray(r)&&1===r.length&&"string"===typeof r[0]?l(r[0])?t[a]=Number(r[0]):t[a]=r[0].replace(/\\/g,"/"):Array.isArray(r)&&1===r.length&&s(r[0])&&1===Object.keys(r[0]).length&&(t[a]=r[0][Object.keys(r[0])[0]]),i(t[a])&&0===t[a].length&&delete t[a],"string"===typeof t[a]&&l(t[a])&&(t[a]=Number(t[a])))}return t},t.getRandomArbitraryInt=function(e,t){return parseInt(Math.random()*(t-e)+e,10)},t.debounce=function(e,t,a){var r=this,n=null;return function(){for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];var c=r,s=a&&!n;clearTimeout(n),n=setTimeout((function(){n=null,a||e.apply(c,i)}),t),s&&e.apply(c,i)}},t.chunkArray=t.base64toJSON=t.json2base64=t.urlizeb64=t.isNumeric=void 0;var r=o(a(218)),n=o(a(583));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=function(e){try{return!isNaN(parseFloat(e))&&isFinite(e)}catch(t){return!1}};t.isNumeric=l;var c=function(e){return e.replace("+","-").replace("/","_").replace(/=+$/,"")};function s(e){return e instanceof Object&&e.constructor===Object}t.urlizeb64=c;t.json2base64=function(e){return new Promise((function(t,a){n.default.gzip(JSON.stringify(e),(function(e,r){e?a(e):t(r.toString("base64"))}))}))};t.base64toJSON=function(t){var a=e.from(t,"base64");return new Promise((function(e,t){n.default.gunzip(a,(function(a,r){a?t(a):e(JSON.parse(r.toString()))}))}))};t.chunkArray=function(e,t){for(var a=[],r=0;r<e.length;r+=t)a.push(e.slice(r,r+t));return a}}).call(this,a(40).Buffer)},383:function(e,t,a){"use strict";a.r(t),t.default={"@global":{".mapboxgl-map":{font:"12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif",overflow:"hidden",position:"relative",W:"rgba(0, 0, 0, 0)"},".mapboxgl-map:-webkit-full-screen":{width:"100%",height:"100%"},".mapboxgl-canary":{backgroundColor:"salmon"},".mapboxgl-canvas-container.mapboxgl-interactive, .mapboxgl-ctrl-group > button.mapboxgl-ctrl-compass":{cursor:"grab",fallbacks:[{M:"none"},{cursor:"-moz-grab"},{cursor:"-webkit-grab"}],M:"none",W:"none",userSelect:"none"},".mapboxgl-canvas-container.mapboxgl-interactive:active, .mapboxgl-ctrl-group > button.mapboxgl-ctrl-compass:active":{cursor:"grabbing",fallbacks:[{cursor:"-moz-grabbing"},{cursor:"-webkit-grabbing"}]},".mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate, .mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas":{touchAction:"pan-x pan-y"},".mapboxgl-canvas-container.mapboxgl-touch-drag-pan, .mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas":{touchAction:"pinch-zoom"},".mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan, .mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas":{touchAction:"none"},".mapboxgl-ctrl-top-left, .mapboxgl-ctrl-top-right, .mapboxgl-ctrl-bottom-left, .mapboxgl-ctrl-bottom-right":{position:"absolute",pointerEvents:"none",zIndex:"2"},".mapboxgl-ctrl-top-left":{top:"0",left:"0"},".mapboxgl-ctrl-top-right":{top:"0",right:"0"},".mapboxgl-ctrl-bottom-left":{bottom:"0",left:"0"},".mapboxgl-ctrl-bottom-right":{right:"0",bottom:"0"},".mapboxgl-ctrl":{clear:"both",pointerEvents:"auto",transform:"translate(0, 0)"},".mapboxgl-ctrl-top-left .mapboxgl-ctrl":{margin:"10px 0 0 10px",float:"left"},".mapboxgl-ctrl-top-right .mapboxgl-ctrl":{margin:"10px 10px 0 0",float:"right"},".mapboxgl-ctrl-bottom-left .mapboxgl-ctrl":{margin:"0 0 10px 10px",float:"left"},".mapboxgl-ctrl-bottom-right .mapboxgl-ctrl":{margin:"0 10px 10px 0",float:"right"},".mapboxgl-ctrl-group":{borderRadius:4,overflow:"hidden",background:"#fff"},".mapboxgl-ctrl-group:not(:empty)":{M:"0 0 2px rgba(0, 0, 0, 0.1)",W:"0 0 2px rgba(0, 0, 0, 0.1)",boxShadow:"0 0 0 2px rgba(0, 0, 0, 0.1)"},".mapboxgl-ctrl-group > button":{width:30,height:30,display:"block",padding:"0",outline:"none",border:"0",boxSizing:"border-box",backgroundColor:"transparent",cursor:"pointer"},".mapboxgl-ctrl-group > button + button":{borderTop:"1px solid #ddd"},".mapboxgl-ctrl > button::-moz-focus-inner":{border:"0",padding:"0"},".mapboxgl-ctrl > button:hover":{backgroundColor:"rgba(0, 0, 0, 0.05)"},".mapboxgl-ctrl-icon, .mapboxgl-ctrl-icon > .mapboxgl-ctrl-compass-arrow":{speak:"none",W:"antialiased",M:"grayscale"},".mapboxgl-ctrl-icon":{padding:5},".mapboxgl-ctrl-icon.mapboxgl-ctrl-icon-disabled":{opacity:"0.25",borderColor:"#373737"},".mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-out":{backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath style='fill:%23333333;' d='m 7,9 c -0.554,0 -1,0.446 -1,1 0,0.554 0.446,1 1,1 l 6,0 c 0.554,0 1,-0.446 1,-1 0,-0.554 -0.446,-1 -1,-1 z'/%3E %3C/svg%3E\")"},".mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-in":{backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath style='fill:%23333333;' d='M 10 6 C 9.446 6 9 6.4459904 9 7 L 9 9 L 7 9 C 6.446 9 6 9.446 6 10 C 6 10.554 6.446 11 7 11 L 9 11 L 9 13 C 9 13.55401 9.446 14 10 14 C 10.554 14 11 13.55401 11 13 L 11 11 L 13 11 C 13.554 11 14 10.554 14 10 C 14 9.446 13.554 9 13 9 L 11 9 L 11 7 C 11 6.4459904 10.554 6 10 6 z'/%3E %3C/svg%3E\")"},".mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate":{backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\")"},".mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate:disabled":{backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\")"},".mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active":{backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\")"},".mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error":{backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E %3Cpath d='M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z'/%3E %3C/svg%3E\")"},".mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background":{backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E %3Cpath d='M 10,4 C 9,4 9,5 9,5 L 9,5.1 C 7.0357113,5.5006048 5.5006048,7.0357113 5.1,9 L 5,9 c 0,0 -1,0 -1,1 0,1 1,1 1,1 l 0.1,0 c 0.4006048,1.964289 1.9357113,3.499395 3.9,3.9 L 9,15 c 0,0 0,1 1,1 1,0 1,-1 1,-1 l 0,-0.1 c 1.964289,-0.400605 3.499395,-1.935711 3.9,-3.9 l 0.1,0 c 0,0 1,0 1,-1 C 16,9 15,9 15,9 L 14.9,9 C 14.499395,7.0357113 12.964289,5.5006048 11,5.1 L 11,5 c 0,0 0,-1 -1,-1 z m 0,2.5 c 1.932997,0 3.5,1.5670034 3.5,3.5 0,1.932997 -1.567003,3.5 -3.5,3.5 C 8.0670034,13.5 6.5,11.932997 6.5,10 6.5,8.0670034 8.0670034,6.5 10,6.5 Z'/%3E %3C/svg%3E\")"},".mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error":{backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E %3Cpath d='M 10,4 C 9,4 9,5 9,5 L 9,5.1 C 7.0357113,5.5006048 5.5006048,7.0357113 5.1,9 L 5,9 c 0,0 -1,0 -1,1 0,1 1,1 1,1 l 0.1,0 c 0.4006048,1.964289 1.9357113,3.499395 3.9,3.9 L 9,15 c 0,0 0,1 1,1 1,0 1,-1 1,-1 l 0,-0.1 c 1.964289,-0.400605 3.499395,-1.935711 3.9,-3.9 l 0.1,0 c 0,0 1,0 1,-1 C 16,9 15,9 15,9 L 14.9,9 C 14.499395,7.0357113 12.964289,5.5006048 11,5.1 L 11,5 c 0,0 0,-1 -1,-1 z m 0,2.5 c 1.932997,0 3.5,1.5670034 3.5,3.5 0,1.932997 -1.567003,3.5 -3.5,3.5 C 8.0670034,13.5 6.5,11.932997 6.5,10 6.5,8.0670034 8.0670034,6.5 10,6.5 Z'/%3E %3C/svg%3E\")"},".mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting":{W:"mapboxgl-spin 2s infinite linear",M:"mapboxgl-spin 2s infinite linear",O:"mapboxgl-spin 2s infinite linear",fallbacks:[{M:"mapboxgl-spin 2s infinite linear"}],animation:"mapboxgl-spin 2s infinite linear"},"@keyframes mapboxgl-spin":{"0%":{W:"rotate(0deg)",M:"rotate(0deg)",O:"rotate(0deg)",transform:"rotate(0deg)"},"100%":{W:"rotate(360deg)",M:"rotate(360deg)",O:"rotate(360deg)",transform:"rotate(360deg)"}},".mapboxgl-ctrl-icon.mapboxgl-ctrl-fullscreen":{backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath d='M 5 4 C 4.5 4 4 4.5 4 5 L 4 6 L 4 9 L 4.5 9 L 5.7773438 7.296875 C 6.7771319 8.0602131 7.835765 8.9565728 8.890625 10 C 7.8257121 11.0633 6.7761791 11.951675 5.78125 12.707031 L 4.5 11 L 4 11 L 4 15 C 4 15.5 4.5 16 5 16 L 9 16 L 9 15.5 L 7.2734375 14.205078 C 8.0428931 13.187886 8.9395441 12.133481 9.9609375 11.068359 C 11.042371 12.14699 11.942093 13.2112 12.707031 14.21875 L 11 15.5 L 11 16 L 14 16 L 15 16 C 15.5 16 16 15.5 16 15 L 16 14 L 16 11 L 15.5 11 L 14.205078 12.726562 C 13.177985 11.949617 12.112718 11.043577 11.037109 10.009766 C 12.151856 8.981061 13.224345 8.0798624 14.228516 7.3046875 L 15.5 9 L 16 9 L 16 5 C 16 4.5 15.5 4 15 4 L 11 4 L 11 4.5 L 12.703125 5.7773438 C 11.932647 6.7864834 11.026693 7.8554712 9.9707031 8.9199219 C 8.9584739 7.8204943 8.0698767 6.7627188 7.3046875 5.7714844 L 9 4.5 L 9 4 L 6 4 L 5 4 z '/%3E %3C/svg%3E\")"},".mapboxgl-ctrl-icon.mapboxgl-ctrl-shrink":{backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath style='fill:%23000000;' d='M 4.2421875 3.4921875 A 0.750075 0.750075 0 0 0 3.71875 4.78125 L 5.9648438 7.0273438 L 4 8.5 L 4 9 L 8 9 C 8.500001 8.9999988 9 8.4999992 9 8 L 9 4 L 8.5 4 L 7.0175781 5.9550781 L 4.78125 3.71875 A 0.750075 0.750075 0 0 0 4.2421875 3.4921875 z M 15.734375 3.4921875 A 0.750075 0.750075 0 0 0 15.21875 3.71875 L 12.984375 5.953125 L 11.5 4 L 11 4 L 11 8 C 11 8.4999992 11.499999 8.9999988 12 9 L 16 9 L 16 8.5 L 14.035156 7.0273438 L 16.28125 4.78125 A 0.750075 0.750075 0 0 0 15.734375 3.4921875 z M 4 11 L 4 11.5 L 5.9648438 12.972656 L 3.71875 15.21875 A 0.75130096 0.75130096 0 1 0 4.78125 16.28125 L 7.0273438 14.035156 L 8.5 16 L 9 16 L 9 12 C 9 11.500001 8.500001 11.000001 8 11 L 4 11 z M 12 11 C 11.499999 11.000001 11 11.500001 11 12 L 11 16 L 11.5 16 L 12.972656 14.035156 L 15.21875 16.28125 A 0.75130096 0.75130096 0 1 0 16.28125 15.21875 L 14.035156 12.972656 L 16 11.5 L 16 11 L 12 11 z '/%3E %3C/svg%3E\")"},".mapboxgl-ctrl-icon.mapboxgl-ctrl-compass > .mapboxgl-ctrl-compass-arrow":{width:20,height:20,margin:5,backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpolygon fill='%23333333' points='6,9 10,1 14,9'/%3E %3Cpolygon fill='%23CCCCCC' points='6,11 10,19 14,11 '/%3E %3C/svg%3E\")",backgroundRepeat:"no-repeat",display:"inline-block"},"a.mapboxgl-ctrl-logo":{width:85,height:21,margin:"0 0 -3px -3px",display:"block",backgroundRepeat:"no-repeat",cursor:"pointer",backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3C?xml version='1.0' encoding='utf-8'?%3E%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 84.49 21' style='enable-background:new 0 0 84.49 21;' xml:space='preserve'%3E%3Cg%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M83.25,14.26c0,0.12-0.09,0.21-0.21,0.21h-1.61c-0.13,0-0.24-0.06-0.3-0.17l-1.44-2.39l-1.44,2.39 c-0.06,0.11-0.18,0.17-0.3,0.17h-1.61c-0.04,0-0.08-0.01-0.12-0.03c-0.09-0.06-0.13-0.19-0.06-0.28l0,0l2.43-3.68L76.2,6.84 c-0.02-0.03-0.03-0.07-0.03-0.12c0-0.12,0.09-0.21,0.21-0.21h1.61c0.13,0,0.24,0.06,0.3,0.17l1.41,2.36l1.4-2.35 c0.06-0.11,0.18-0.17,0.3-0.17H83c0.04,0,0.08,0.01,0.12,0.03c0.09,0.06,0.13,0.19,0.06,0.28l0,0l-2.37,3.63l2.43,3.67 C83.24,14.18,83.25,14.22,83.25,14.26z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M66.24,9.59c-0.39-1.88-1.96-3.28-3.84-3.28c-1.03,0-2.03,0.42-2.73,1.18V3.51c0-0.13-0.1-0.23-0.23-0.23h-1.4 c-0.13,0-0.23,0.11-0.23,0.23v10.72c0,0.13,0.1,0.23,0.23,0.23h1.4c0.13,0,0.23-0.11,0.23-0.23V13.5c0.71,0.75,1.7,1.18,2.73,1.18 c1.88,0,3.45-1.41,3.84-3.29C66.37,10.79,66.37,10.18,66.24,9.59L66.24,9.59z M62.08,13c-1.32,0-2.39-1.11-2.41-2.48v-0.06 c0.02-1.38,1.09-2.48,2.41-2.48s2.42,1.12,2.42,2.51S63.41,13,62.08,13z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M71.67,6.32c-1.98-0.01-3.72,1.35-4.16,3.29c-0.13,0.59-0.13,1.19,0,1.77c0.44,1.94,2.17,3.32,4.17,3.3 c2.35,0,4.26-1.87,4.26-4.19S74.04,6.32,71.67,6.32z M71.65,13.01c-1.33,0-2.42-1.12-2.42-2.51s1.08-2.52,2.42-2.52 c1.33,0,2.42,1.12,2.42,2.51S72.99,13,71.65,13.01L71.65,13.01z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M62.08,7.98c-1.32,0-2.39,1.11-2.41,2.48v0.06C59.68,11.9,60.75,13,62.08,13s2.42-1.12,2.42-2.51 S63.41,7.98,62.08,7.98z M62.08,11.76c-0.63,0-1.14-0.56-1.17-1.25v-0.04c0.01-0.69,0.54-1.25,1.17-1.25 c0.63,0,1.17,0.57,1.17,1.27C63.24,11.2,62.73,11.76,62.08,11.76z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M71.65,7.98c-1.33,0-2.42,1.12-2.42,2.51S70.32,13,71.65,13s2.42-1.12,2.42-2.51S72.99,7.98,71.65,7.98z M71.65,11.76c-0.64,0-1.17-0.57-1.17-1.27c0-0.7,0.53-1.26,1.17-1.26s1.17,0.57,1.17,1.27C72.82,11.21,72.29,11.76,71.65,11.76z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M45.74,6.53h-1.4c-0.13,0-0.23,0.11-0.23,0.23v0.73c-0.71-0.75-1.7-1.18-2.73-1.18 c-2.17,0-3.94,1.87-3.94,4.19s1.77,4.19,3.94,4.19c1.04,0,2.03-0.43,2.73-1.19v0.73c0,0.13,0.1,0.23,0.23,0.23h1.4 c0.13,0,0.23-0.11,0.23-0.23V6.74c0-0.12-0.09-0.22-0.22-0.22C45.75,6.53,45.75,6.53,45.74,6.53z M44.12,10.53 C44.11,11.9,43.03,13,41.71,13s-2.42-1.12-2.42-2.51s1.08-2.52,2.4-2.52c1.33,0,2.39,1.11,2.41,2.48L44.12,10.53z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M41.71,7.98c-1.33,0-2.42,1.12-2.42,2.51S40.37,13,41.71,13s2.39-1.11,2.41-2.48v-0.06 C44.1,9.09,43.03,7.98,41.71,7.98z M40.55,10.49c0-0.7,0.52-1.27,1.17-1.27c0.64,0,1.14,0.56,1.17,1.25v0.04 c-0.01,0.68-0.53,1.24-1.17,1.24C41.08,11.75,40.55,11.19,40.55,10.49z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M52.41,6.32c-1.03,0-2.03,0.42-2.73,1.18V6.75c0-0.13-0.1-0.23-0.23-0.23h-1.4c-0.13,0-0.23,0.11-0.23,0.23 v10.72c0,0.13,0.1,0.23,0.23,0.23h1.4c0.13,0,0.23-0.1,0.23-0.23V13.5c0.71,0.75,1.7,1.18,2.74,1.18c2.17,0,3.94-1.87,3.94-4.19 S54.58,6.32,52.41,6.32z M52.08,13.01c-1.32,0-2.39-1.11-2.42-2.48v-0.07c0.02-1.38,1.09-2.49,2.4-2.49c1.32,0,2.41,1.12,2.41,2.51 S53.4,13,52.08,13.01L52.08,13.01z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M52.08,7.98c-1.32,0-2.39,1.11-2.42,2.48v0.06c0.03,1.38,1.1,2.48,2.42,2.48s2.41-1.12,2.41-2.51 S53.4,7.98,52.08,7.98z M52.08,11.76c-0.63,0-1.14-0.56-1.17-1.25v-0.04c0.01-0.69,0.54-1.25,1.17-1.25c0.63,0,1.17,0.58,1.17,1.27 S52.72,11.76,52.08,11.76z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M36.08,14.24c0,0.13-0.1,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68c0-0.98-0.74-1.71-1.62-1.71 c-0.8,0-1.46,0.7-1.59,1.62l0.01,4.66c0,0.13-0.11,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68 c0-0.98-0.74-1.71-1.62-1.71c-0.85,0-1.54,0.79-1.6,1.8v4.48c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V6.74 c0.01-0.13,0.1-0.22,0.23-0.22h1.4c0.13,0,0.22,0.11,0.23,0.22V7.4c0.5-0.68,1.3-1.09,2.16-1.1h0.03c1.09,0,2.09,0.6,2.6,1.55 c0.45-0.95,1.4-1.55,2.44-1.56c1.62,0,2.93,1.25,2.9,2.78L36.08,14.24z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M84.34,13.59l-0.07-0.13l-1.96-2.99l1.94-2.95c0.44-0.67,0.26-1.56-0.41-2.02c-0.02,0-0.03,0-0.04-0.01 c-0.23-0.15-0.5-0.22-0.78-0.22h-1.61c-0.56,0-1.08,0.29-1.37,0.78L79.72,6.6l-0.34-0.56C79.09,5.56,78.57,5.27,78,5.27h-1.6 c-0.6,0-1.13,0.37-1.35,0.92c-2.19-1.66-5.28-1.47-7.26,0.45c-0.35,0.34-0.65,0.72-0.89,1.14c-0.9-1.62-2.58-2.72-4.5-2.72 c-0.5,0-1.01,0.07-1.48,0.23V3.51c0-0.82-0.66-1.48-1.47-1.48h-1.4c-0.81,0-1.47,0.66-1.47,1.47v3.75 c-0.95-1.36-2.5-2.18-4.17-2.19c-0.74,0-1.46,0.16-2.12,0.47c-0.24-0.17-0.54-0.26-0.84-0.26h-1.4c-0.45,0-0.87,0.21-1.15,0.56 c-0.02-0.03-0.04-0.05-0.07-0.08c-0.28-0.3-0.68-0.47-1.09-0.47h-1.39c-0.3,0-0.6,0.09-0.84,0.26c-0.67-0.3-1.39-0.46-2.12-0.46 c-1.83,0-3.43,1-4.37,2.5c-0.2-0.46-0.48-0.89-0.83-1.25c-0.8-0.81-1.89-1.25-3.02-1.25h-0.01c-0.89,0.01-1.75,0.33-2.46,0.88 c-0.74-0.57-1.64-0.88-2.57-0.88H28.1c-0.29,0-0.58,0.03-0.86,0.11c-0.28,0.06-0.56,0.16-0.82,0.28c-0.21-0.12-0.45-0.18-0.7-0.18 h-1.4c-0.82,0-1.47,0.66-1.47,1.47v7.5c0,0.82,0.66,1.47,1.47,1.47h1.4c0.82,0,1.48-0.66,1.48-1.48l0,0V9.79 c0.03-0.36,0.23-0.59,0.36-0.59c0.18,0,0.38,0.18,0.38,0.47v4.57c0,0.82,0.66,1.47,1.47,1.47h1.41c0.82,0,1.47-0.66,1.47-1.47 l-0.01-4.57c0.06-0.32,0.25-0.47,0.35-0.47c0.18,0,0.38,0.18,0.38,0.47v4.57c0,0.82,0.66,1.47,1.47,1.47h1.41 c0.82,0,1.47-0.66,1.47-1.47v-0.38c0.96,1.29,2.46,2.06,4.06,2.06c0.74,0,1.46-0.16,2.12-0.47c0.24,0.17,0.54,0.26,0.84,0.26h1.39 c0.3,0,0.6-0.09,0.84-0.26v2.01c0,0.82,0.66,1.47,1.47,1.47h1.4c0.82,0,1.47-0.66,1.47-1.47v-1.77c0.48,0.15,0.99,0.23,1.49,0.22 c1.7,0,3.22-0.87,4.17-2.2v0.52c0,0.82,0.66,1.47,1.47,1.47h1.4c0.3,0,0.6-0.09,0.84-0.26c0.66,0.31,1.39,0.47,2.12,0.47 c1.92,0,3.6-1.1,4.49-2.73c1.54,2.65,4.95,3.53,7.58,1.98c0.18-0.11,0.36-0.22,0.53-0.36c0.22,0.55,0.76,0.91,1.35,0.9H78 c0.56,0,1.08-0.29,1.37-0.78l0.37-0.61l0.37,0.61c0.29,0.48,0.81,0.78,1.38,0.78h1.6c0.81,0,1.46-0.66,1.45-1.46 C84.49,14.02,84.44,13.8,84.34,13.59L84.34,13.59z M35.86,14.47h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68 c0-0.98-0.74-1.71-1.62-1.71c-0.8,0-1.46,0.7-1.59,1.62l0.01,4.66c0,0.13-0.1,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23 V9.68c0-0.98-0.74-1.71-1.62-1.71c-0.85,0-1.54,0.79-1.6,1.8v4.48c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23 V6.74c0.01-0.13,0.11-0.22,0.23-0.22h1.4c0.13,0,0.22,0.11,0.23,0.22V7.4c0.5-0.68,1.3-1.09,2.16-1.1h0.03 c1.09,0,2.09,0.6,2.6,1.55c0.45-0.95,1.4-1.55,2.44-1.56c1.62,0,2.93,1.25,2.9,2.78l0.01,5.16C36.09,14.36,35.98,14.46,35.86,14.47 L35.86,14.47z M45.97,14.24c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V13.5c-0.7,0.76-1.69,1.18-2.72,1.18 c-2.17,0-3.94-1.87-3.94-4.19s1.77-4.19,3.94-4.19c1.03,0,2.02,0.43,2.73,1.18V6.74c0-0.13,0.1-0.23,0.23-0.23h1.4 c0.12-0.01,0.22,0.08,0.23,0.21c0,0.01,0,0.01,0,0.02v7.51h-0.01V14.24z M52.41,14.67c-1.03,0-2.02-0.43-2.73-1.18v3.97 c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.1-0.23-0.23V6.75c0-0.13,0.1-0.22,0.23-0.22h1.4c0.13,0,0.23,0.11,0.23,0.23v0.73 c0.71-0.76,1.7-1.18,2.73-1.18c2.17,0,3.94,1.86,3.94,4.18S54.58,14.67,52.41,14.67z M66.24,11.39c-0.39,1.87-1.96,3.29-3.84,3.29 c-1.03,0-2.02-0.43-2.73-1.18v0.73c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V3.51c0-0.13,0.1-0.23,0.23-0.23 h1.4c0.13,0,0.23,0.11,0.23,0.23v3.97c0.71-0.75,1.7-1.18,2.73-1.17c1.88,0,3.45,1.4,3.84,3.28C66.37,10.19,66.37,10.8,66.24,11.39 L66.24,11.39L66.24,11.39z M71.67,14.68c-2,0.01-3.73-1.35-4.17-3.3c-0.13-0.59-0.13-1.19,0-1.77c0.44-1.94,2.17-3.31,4.17-3.3 c2.36,0,4.26,1.87,4.26,4.19S74.03,14.68,71.67,14.68L71.67,14.68z M83.04,14.47h-1.61c-0.13,0-0.24-0.06-0.3-0.17l-1.44-2.39 l-1.44,2.39c-0.06,0.11-0.18,0.17-0.3,0.17h-1.61c-0.04,0-0.08-0.01-0.12-0.03c-0.09-0.06-0.13-0.19-0.06-0.28l0,0l2.43-3.68 L76.2,6.84c-0.02-0.03-0.03-0.07-0.03-0.12c0-0.12,0.09-0.21,0.21-0.21h1.61c0.13,0,0.24,0.06,0.3,0.17l1.41,2.36l1.41-2.36 c0.06-0.11,0.18-0.17,0.3-0.17h1.61c0.04,0,0.08,0.01,0.12,0.03c0.09,0.06,0.13,0.19,0.06,0.28l0,0l-2.38,3.64l2.43,3.67 c0.02,0.03,0.03,0.07,0.03,0.12C83.25,14.38,83.16,14.47,83.04,14.47L83.04,14.47L83.04,14.47z'/%3E %3Cpath class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' d='M10.5,1.24c-5.11,0-9.25,4.15-9.25,9.25s4.15,9.25,9.25,9.25s9.25-4.15,9.25-9.25 C19.75,5.38,15.61,1.24,10.5,1.24z M14.89,12.77c-1.93,1.93-4.78,2.31-6.7,2.31c-0.7,0-1.41-0.05-2.1-0.16c0,0-1.02-5.64,2.14-8.81 c0.83-0.83,1.95-1.28,3.13-1.28c1.27,0,2.49,0.51,3.39,1.42C16.59,8.09,16.64,11,14.89,12.77z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M10.5-0.01C4.7-0.01,0,4.7,0,10.49s4.7,10.5,10.5,10.5S21,16.29,21,10.49C20.99,4.7,16.3-0.01,10.5-0.01z M10.5,19.74c-5.11,0-9.25-4.15-9.25-9.25s4.14-9.26,9.25-9.26s9.25,4.15,9.25,9.25C19.75,15.61,15.61,19.74,10.5,19.74z'/%3E %3Cpath class='st1' style='opacity:0.35; enable-background:new;' d='M14.74,6.25C12.9,4.41,9.98,4.35,8.23,6.1c-3.16,3.17-2.14,8.81-2.14,8.81s5.64,1.02,8.81-2.14 C16.64,11,16.59,8.09,14.74,6.25z M12.47,10.34l-0.91,1.87l-0.9-1.87L8.8,9.43l1.86-0.9l0.9-1.87l0.91,1.87l1.86,0.9L12.47,10.34z'/%3E %3Cpolygon class='st0' style='opacity:0.9; fill: %23FFFFFF; enable-background: new;' points='14.33,9.43 12.47,10.34 11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 '/%3E%3C/g%3E%3C/svg%3E\")"},"a.mapboxgl-ctrl-logo.mapboxgl-compact":{width:21,height:21,backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3C?xml version='1.0' encoding='utf-8'?%3E %3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 21 21' style='enable-background:new 0 0 21 21;' xml:space='preserve'%3E%3Cg transform='translate(0,0.01)'%3E%3Cpath d='m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z' style='opacity:0.9",fill:"%23ffffff",enableBackground:"new' class='st0'/%3E%3C/g%3E%3C/svg%3E\")",fallbacks:[{enableBackground:"new' class='st1'/%3E%3Cpolygon points='11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 ' style='opacity:0.9"},{fill:"%23ffffff"},{enableBackground:"new' class='st1'/%3E%3Cpath d='M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z' style='opacity:0.35"},{enableBackground:"new' class='st0'/%3E%3Cpath d='M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z' style='opacity:0.35"}]},".mapboxgl-ctrl.mapboxgl-ctrl-attrib":{padding:"0 5px",backgroundColor:"rgba(255, 255, 255, 0.5)",margin:"0"},"@media screen":{".mapboxgl-ctrl-attrib.mapboxgl-compact":{minHeight:20,padding:"0",margin:10,position:"relative",backgroundColor:"#fff",borderRadius:"3px 12px 12px 3px"},".mapboxgl-ctrl-attrib.mapboxgl-compact:hover":{padding:"2px 24px 2px 4px",visibility:"visible",marginTop:6},".mapboxgl-ctrl-top-left > .mapboxgl-ctrl-attrib.mapboxgl-compact:hover, .mapboxgl-ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact:hover":{padding:"2px 4px 2px 24px",borderRadius:"12px 3px 3px 12px"},".mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":{display:"none"},".mapboxgl-ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":{display:"block"},".mapboxgl-ctrl-attrib.mapboxgl-compact::after":{content:"''",cursor:"pointer",position:"absolute",backgroundImage:"url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath fill='%23333333' fill-rule='evenodd' d='M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0'/%3E %3C/svg%3E\")",backgroundColor:"rgba(255, 255, 255, 0.5)",width:24,height:24,boxSizing:"border-box",borderRadius:12},".mapboxgl-ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":{bottom:"0",right:"0"},".mapboxgl-ctrl-top-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":{top:"0",right:"0"},".mapboxgl-ctrl-top-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":{top:"0",left:"0"},".mapboxgl-ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":{bottom:"0",left:"0"}},".mapboxgl-ctrl-attrib a":{color:"rgba(0, 0, 0, 0.75)",textDecoration:"none"},".mapboxgl-ctrl-attrib a:hover":{color:"inherit",textDecoration:"underline"},".mapboxgl-ctrl-attrib .mapbox-improve-map":{fontWeight:"bold",marginLeft:2},".mapboxgl-attrib-empty":{display:"none"},".mapboxgl-ctrl-scale":{backgroundColor:"rgba(255, 255, 255, 0.75)",fontSize:10,borderWidth:"medium 2px 2px",borderStyle:"none solid solid",borderColor:"#333",padding:"0 5px",color:"#333",boxSizing:"border-box"},".mapboxgl-popup":{position:"absolute",top:"0",left:"0",display:"flex",fallbacks:[{display:"-webkit-flex"}],willChange:"transform",pointerEvents:"none"},".mapboxgl-popup-anchor-top, .mapboxgl-popup-anchor-top-left, .mapboxgl-popup-anchor-top-right":{W:"column",flexDirection:"column"},".mapboxgl-popup-anchor-bottom, .mapboxgl-popup-anchor-bottom-left, .mapboxgl-popup-anchor-bottom-right":{W:"column-reverse",flexDirection:"column-reverse"},".mapboxgl-popup-anchor-left":{W:"row",flexDirection:"row"},".mapboxgl-popup-anchor-right":{W:"row-reverse",flexDirection:"row-reverse"},".mapboxgl-popup-tip":{width:"0",height:"0",border:"10px solid transparent",zIndex:"1"},".mapboxgl-popup-anchor-top .mapboxgl-popup-tip":{W:"center",alignSelf:"center",borderTop:"none",borderBottomColor:"#fff"},".mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip":{W:"flex-start",alignSelf:"flex-start",borderTop:"none",borderLeft:"none",borderBottomColor:"#fff"},".mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip":{W:"flex-end",alignSelf:"flex-end",borderTop:"none",borderRight:"none",borderBottomColor:"#fff"},".mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip":{W:"center",alignSelf:"center",borderBottom:"none",borderTopColor:"#fff"},".mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip":{W:"flex-start",alignSelf:"flex-start",borderBottom:"none",borderLeft:"none",borderTopColor:"#fff"},".mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip":{W:"flex-end",alignSelf:"flex-end",borderBottom:"none",borderRight:"none",borderTopColor:"#fff"},".mapboxgl-popup-anchor-left .mapboxgl-popup-tip":{W:"center",alignSelf:"center",borderLeft:"none",borderRightColor:"#fff"},".mapboxgl-popup-anchor-right .mapboxgl-popup-tip":{W:"center",alignSelf:"center",borderRight:"none",borderLeftColor:"#fff"},".mapboxgl-popup-close-button":{position:"absolute",right:"0",top:"0",border:"0",borderRadius:"0 3px 0 0",cursor:"pointer",backgroundColor:"transparent"},".mapboxgl-popup-close-button:hover":{backgroundColor:"rgba(0, 0, 0, 0.05)"},".mapboxgl-popup-content":{position:"relative",background:"#fff",borderRadius:3,boxShadow:"0 1px 2px rgba(0, 0, 0, 0.1)",padding:"10px 10px 15px",pointerEvents:"auto"},".mapboxgl-popup-anchor-top-left .mapboxgl-popup-content":{borderTopLeftRadius:"0"},".mapboxgl-popup-anchor-top-right .mapboxgl-popup-content":{borderTopRightRadius:"0"},".mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content":{borderBottomLeftRadius:"0"},".mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content":{borderBottomRightRadius:"0"},".mapboxgl-marker":{position:"absolute",top:"0",left:"0",willChange:"transform"},".mapboxgl-user-location-dot":{backgroundColor:"#1da1f2",width:15,height:15,borderRadius:"50%",boxShadow:"0 0 2px rgba(0, 0, 0, 0.25)"},".mapboxgl-user-location-dot::before":{backgroundColor:"#1da1f2",content:"''",width:15,height:15,borderRadius:"50%",position:"absolute",W:"mapboxgl-user-location-dot-pulse 2s infinite",M:"mapboxgl-user-location-dot-pulse 2s infinite",fallbacks:[{M:"mapboxgl-user-location-dot-pulse 2s infinite"}],animation:"mapboxgl-user-location-dot-pulse 2s infinite"},".mapboxgl-user-location-dot::after":{borderRadius:"50%",border:"2px solid #fff",content:"''",height:19,left:-2,position:"absolute",top:-2,width:19,boxSizing:"border-box"},"@keyframes mapboxgl-user-location-dot-pulse":{"0%":{W:"scale(1)",opacity:"1",M:"scale(1)",transform:"scale(1)"},"70%":{W:"scale(3)",opacity:"0",M:"scale(3)",transform:"scale(3)"},"100%":{W:"scale(1)",opacity:"0",M:"scale(1)",transform:"scale(1)"}},".mapboxgl-user-location-dot-stale":{backgroundColor:"#aaa"},".mapboxgl-user-location-dot-stale::after":{display:"none"},".mapboxgl-crosshair, .mapboxgl-crosshair .mapboxgl-interactive, .mapboxgl-crosshair .mapboxgl-interactive:active":{cursor:"crosshair"},".mapboxgl-boxzoom":{position:"absolute",top:"0",left:"0",width:"0",height:"0",background:"#fff",border:"2px dotted #202020",opacity:"0.5"},"@media print":{".mapbox-improve-map":{display:"none"}}}}},384:function(e,t,a){"use strict";a.r(t),t.default={"@global":{"@font-face":{fontFamily:"'Roboto'",fontStyle:"italic",fontDisplay:"swap",fontWeight:"900",src:"local('Roboto Black italic'),\n    local('Roboto-Blackitalic'),\n    url('./files/roboto-latin-900italic.woff2') format('woff2'), \n    url('./files/roboto-latin-900italic.woff') format('woff')","":void 0}}}},393:function(e,t,a){"use strict";a.r(t),a.d(t,"APOLLOSTATES",(function(){return S}));var r=a(16),n=a(18),o=a.n(n),i=a(7),l=a(0),c=a(539),s=a(479),u=a(480),p=a(354),d=a(477),m=a(11),g=a(14),f=a(84),h=a(49),b=a(224),y=a(478),w=a(4),v=a.n(w);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E=m.d.endpoints,S={INITIALIZING:"Initializing",AUTHENTICATING:"Authenticating",LOADING:"Loading State",APPLY_MUTATIONS:"Applying history",ERROR:"ERROR!",DONE:"DONE"};t.default=function(){var e=Object(l.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1],n=Object(l.useState)(!1),m=Object(i.a)(n,2),g=m[0],w=m[1],O=Object(l.useState)(S.INITIALIZING),j=Object(i.a)(O,2),C=j[0],P=j[1];return Object(l.useEffect)((function(){!function(e){var t,a,r,n,i;o.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=new p.a({fragmentMatcher:new p.b({introspectionQueryResultData:d})}),l.prev=1,e(null,S.LOADING),l.next=5,o.a.awrap(Object(y.persistCache)({cache:t,storage:h.stateStore}));case 5:l.next=12;break;case 7:return l.prev=7,l.t0=l.catch(1),v.a.error("Error restoring Apollo cache",l.t0),e(null,S.ERROR),l.abrupt("return");case 12:return a=Object(s.a)((function(e,t){var a,r,n;return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.headers,e.next=3,o.a.awrap(k());case 3:return r=e.sent,n=x({},a,{authorization:r?"Bearer ".concat(r):""}),e.abrupt("return",{headers:n});case 7:case"end":return e.stop()}}))})),r=Object(c.a)({uri:E.graphql}),n=new u.a({attempts:{max:1/0,retryIf:function(e,t){return e.statusCode&&e.statusCode>=400?(v.a.error("GRAPHQL ERRORS (NO RETRY)",{error:e,_operation:t}),!1):(v.a.error("GRAPHQL ERRORS (RETRY)",{error:e,_operation:t}),!0)}}}),i=new b.a({link:f.a.from([n,a,r]),tokenName:"apollo-token",addTypename:!0,cache:t,connectToDevTools:!1}),e(null,S.APPLY_MUTATIONS),l.next=19,o.a.awrap(Object(h.restoreRequests)(i));case 19:e(i,S.DONE);case 20:case"end":return l.stop()}}),null,null,[[1,7]])}((function(e,t){r(e),w((a||e)&&t===S.DONE),P(t)}))}),[]),{client:a,done:g,currState:C}};var k=function(){var e;return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.awrap(g.a.currentSession());case 3:return e=t.sent,t.abrupt("return",e.accessToken.jwtToken);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",null);case 10:case"end":return t.stop()}}),null,null,[[0,7]])}},45:function(e,t,a){"use strict";var r=a(0),n=a.n(r),o=a(1),i=a.n(o),l=a(2026),c=a(2055),s=a(176),u=a(144),p=a.n(u),d=Object(s.a)((function(e){return{root:{textAlign:"center"},placeAvatar:{color:e.palette.primary.contrastText,border:"2px solid ".concat(e.palette.primary.contrastText),background:e.palette.text.primary,margin:"auto"},placeIcon:{}}})),m=function(e){var t=e.onClick,a=d();return n.a.createElement("div",{className:a.root},n.a.createElement(l.a,{className:a.placeAvatar},n.a.createElement(c.a,{color:"inherit",onClick:function(e){e.preventDefault(),e.stopPropagation(),t()}},n.a.createElement(p.a,{color:"inherit"}))))};m.propTypes={onClick:i.a.func.isRequired};var g=m,f=a(2057),h=a(2060),b=a(2059),y=a(2016),w=a(111),v=a(2061),O=a(192),x=a.n(O),E=a(251),S=a(11),k=Object(s.a)((function(e){return{root:{},dialogContent:{display:"flex",flexDirection:"column",overflow:"hidden",height:"100%"},iconContainer:{flex:"1 1 10%",textAlign:"center",padding:e.spacing(1,0,1,0)},icon:{height:200,margin:"0 auto",border:"1px solid ".concat(e.palette.grey[100]),background:e.palette.grey[100],borderRadius:"50%","& path":{fill:"url(#my-cool-gradient) #447799;"}},title:{textAlign:"center"},stop1:{stopColor:e.palette.rose.main},stop2:{stopColor:e.palette.redorange.main},spacer:{flex:"1 1"},buttonIcon:{marginRight:e.spacing(1)},scrollText:{flex:"1 1 60%",overflowX:"hidden",overflowY:"scroll",whiteSpace:"pre-line",paddingBottom:e.spacing(1)}}})),j=function(e){var t=e.onClose,a=e.open,r=k();return n.a.createElement(f.a,{className:r.root,onClose:t,fullWidth:!0,open:a,PaperProps:{style:{}},maxWidth:"xl","aria-labelledby":"confirmation-dialog-title"},n.a.createElement(b.a,{className:r.dialogContent},n.a.createElement(y.a,{maxWidth:"xs"},n.a.createElement("div",{className:r.iconContainer},n.a.createElement("svg",{className:r.icon,focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},E.a),n.a.createElement("svg",{style:{width:0,height:0,position:"absolute"},"aria-hidden":"true",focusable:"false"},n.a.createElement("linearGradient",{id:"my-cool-gradient",x2:"1",y2:"1"},n.a.createElement("stop",{offset:"0%",stopColor:"#447799",className:r.stop1}),n.a.createElement("stop",{offset:"100%",stopColor:"#112266",className:r.stop2})))),n.a.createElement("div",{className:r.title},n.a.createElement(w.a,{component:"div",variant:"h5"},"MorPhoto"),n.a.createElement(w.a,{component:"div",variant:"caption"},"Version:  ",S.d.version," ",n.a.createElement("em",null,"BETA"))),n.a.createElement(w.a,{className:r.scrollText,component:"div",variant:"caption"}),n.a.createElement("div",{className:r.spacer}),n.a.createElement(h.a,{fullWidth:!0,href:"mailto:".concat(S.d.contact),color:"primary",variant:"outlined"},n.a.createElement(x.a,{className:r.buttonIcon}),"Get in touch"))),n.a.createElement(v.a,null,n.a.createElement(h.a,{onClick:t,color:"inherit"},"Close")))};j.propTypes={open:i.a.bool,onClose:i.a.func.isRequired};var C=j,P=a(7),T=a(2018),I=a(2069),N=a(2068),A=a(2071),z=a(2019),_=a(2072),R=a(2070),D=a(95),L=a.n(D),M=a(484),F=a.n(M),U=a(485),B=a.n(U),q=a(78),W=Object(s.a)((function(e){return{root:{},nuclear:{color:"red"}}})),G=function(e){var t=e.onMenuBack,a=W(),o=Object(r.useState)(),i=Object(P.a)(o,2),l=i[0],s=i[1],u=Object(r.useContext)(S.a).globalActions;return n.a.createElement("div",{className:a.root},n.a.createElement(T.a,null)," ",n.a.createElement(I.a,{position:"static",className:a.appBar},n.a.createElement(R.a,{disableGutters:!0},n.a.createElement(c.a,{className:a.menuButton,color:"inherit",onClick:t,"aria-label":"Menu"},n.a.createElement(L.a,null)),n.a.createElement(w.a,{variant:"subtitle1",color:"inherit",className:a.toolbarTitle},"Offline data manager"))),n.a.createElement("div",{className:a.mapWrapper},n.a.createElement(N.a,null,n.a.createElement(z.a,{button:!0,onClick:function(){return s({action:u.resetAllState,title:"Reset App State",message:"Might resolve a temporary glitch. Unfortunately this will wipe your upload queue."})}},n.a.createElement(A.a,null,n.a.createElement(F.a,null)),n.a.createElement(_.a,{primary:"Reset app state",secondary:"Might resolve a temporary glitch."})),n.a.createElement(z.a,{button:!0,className:a.nuclear,onClick:function(){return s({action:u.resetApp,title:"RESET ALL LOCAL DATA",message:"All local images and data will be reset and you will be logged out. BE VERY SURE ABOUT THIS"})}},n.a.createElement(A.a,{color:"inherit"},n.a.createElement(B.a,{color:"inherit"})),n.a.createElement(_.a,{primary:"RESET ALL LOCAL DATA",secondary:"All local images and data will be reset and you will be logged out"})))),l&&n.a.createElement(q.d,{open:!!l,title:l&&l.title,message:l&&l.message,onConfirm:function(e){e&&l.action(),s(null)}}))};G.propTypes={onMenuBack:i.a.func.isRequired};var H=G,V=a(42),Y=a(20),Q=a.n(Y),$=a(2020),X=a(2025),Z=a(2021),K=a(97),J=a(159),ee=a.n(J),te=a(193),ae=a.n(te),re=a(121),ne=a.n(re),oe=Object(s.a)((function(e){var t=Object(K.fade)(e.palette.secondary.light,.4);return{root:{},fab:{background:e.palette.secondary.main,color:e.palette.secondary.contrastText,"&::before":{content:'"  "',display:"block",position:"absolute",width:"100%",height:"100%",borderRadius:"inherit",boxShadow:"0 0 0 0 ".concat(t),animation:"$fabPulse 4s",animationIterationCount:5,animationTimingFunction:"linear"}},"@keyframes fabPulse":{"0%":{boxShadow:"0 0 0 0px ".concat(t)},"90%":{boxShadow:"0 0 0 0px ".concat(t)},"100%":{boxShadow:"0 0 0 10px transparent"}},directionUp:{},actionsClosed:{display:"none"},modalContainer:{position:"absolute",bottom:"0%",left:"50%",transformOrigin:"50% 50%",transform:"translateY(-50%) translateX(-50%)"},subFabContainer:{padding:e.spacing(2)},subFab:{},subFabIcon:{margin:e.spacing(1)}}})),ie=function(e){var t=e.className,a=e.children,o=e.onCameraClick,i=e.onLibraryClick,l=Object(r.useState)(!1),c=Object(P.a)(l,2),s=c[0],u=c[1],p=Object(r.useState)(!1),d=Object(P.a)(p,2),m=d[0],g=d[1],f=Object(r.useContext)(S.a),h=f.device,b=(Object(V.a)(f,["device"]),Object(r.useRef)()),y=oe(),w=Object(r.useRef)(m),v=Object(r.useRef)();w.current=m;var O=a||(h.cameraAccess?n.a.createElement(ae.a,null):n.a.createElement(ne.a,null));Object(r.useEffect)((function(){return function(){b.current=null,w.current=null}}),[]);var x=function(e){e.currentTarget,h.ios||v.current&&(g(!0),s||b.current||(b.current=setTimeout((function(){w.current&&u(!0),b.current=null}),300)))},E=function(e){e&&e.stopPropagation&&(e.stopPropagation(),e.preventDefault())};return n.a.createElement("div",{className:Q()(y.rootContainer,t),ref:v},n.a.createElement($.a,{className:y.fab,onMouseDown:x,onTouchStart:x,onClick:function(e){E(e),g(!1),s||(h.cameraAccess?o():i())},disableFocusRipple:!0,disableTouchRipple:!0,disableRipple:!0,size:"large",color:"secondary","aria-label":"Add"},O),n.a.createElement(X.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:s,onClose:function(){return u(!1)}},n.a.createElement("div",{className:y.modalContainer},n.a.createElement(Z.a,{in:s,timeout:500,unmountOnExit:!0},n.a.createElement("div",{className:y.subFabContainer},n.a.createElement($.a,{className:y.subFab,disableFocusRipple:!0,variant:"extended",size:"large",color:"secondary","aria-label":"Add",onClick:function(){var e;u(!1),u(!1),g(!1),i(),E(e)}},n.a.createElement(ne.a,{color:"inherit",className:y.subFabIcon}),"Library"))),n.a.createElement(Z.a,{in:s,timeout:250,unmountOnExit:!0},n.a.createElement("div",{className:y.subFabContainer},n.a.createElement($.a,{className:y.subFab,disableFocusRipple:!0,variant:"extended",size:"large",disabled:!h.cameraAccess,color:"secondary","aria-label":"Add",onClick:function(){var e;u(!1),u(!1),g(!1),o(),E(e)}},n.a.createElement(ee.a,{color:"inherit",className:y.subFabIcon}),"Camera"))))))};ie.propTypes={className:i.a.string,children:i.a.any,onCameraClick:i.a.func.isRequired,onLibraryClick:i.a.func.isRequired};var le=ie,ce=a(538),se=a(2074),ue=a(2073),pe=function(e){var t=e.anchorEl,a=e.onClose,r=e.menuItems;return n.a.createElement(ce.a,{anchorEl:t,open:!!t,onClose:a},r.map((function(e,t){var r=e.icon,o=e.color,i=e.text,l=e.hide,c=e.disabled,s=e.action,u=e.divider,p=r||null;return l?null:u?n.a.createElement(ue.a,{key:"contextMenu-".concat(t)}):n.a.createElement(se.a,{button:!0,key:"contextMenu-".concat(t),disabled:c,onClick:function(){a(),s()}},p&&n.a.createElement(A.a,null,n.a.createElement(p,{color:c?"disabled":void 0})),n.a.createElement(_.a,{primary:i,primaryTypographyProps:{color:o}}))})))};pe.propTypes={anchorEl:i.a.object,onClose:i.a.func,menuItems:i.a.arrayOf(i.a.shape({text:i.a.string,icon:i.a.any,divider:i.a.any,hide:i.a.bool,disabled:i.a.bool,color:i.a.string,action:i.a.func}))};var de=pe,me=a(486),ge=a.n(me),fe=Object(s.a)((function(e){return{root:{height:"100%",display:"flex",flexDirection:"column",textAlign:"center",background:e.palette.background.paper,color:e.palette.text.primary,border:"20px solid ".concat(e.palette.background.default)},icon:{color:e.palette.text.primary,margin:"auto",flex:"1 1 50%",height:"70%",width:"70%"},button:{margin:e.spacing(2)}}})),he=function(e){var t=e.onLibraryAdd,a=e.onCancel,r=e.cameraPicker,o=fe(),i=Object(S.k)(t,r),l=i.fileClickEl,c=i.forceClick,s="Library",u=ne.a;return r&&(s="Camera",u=ge.a),n.a.createElement("div",{className:o.root},l,n.a.createElement(u,{className:o.icon,color:"inherit",onClick:c}),n.a.createElement(h.a,{variant:"contained",className:o.button,color:"primary",onClick:c},"Import from ",s),n.a.createElement(h.a,{variant:"outlined",className:o.button,color:"secondary",onClick:a},"Cancel"))};he.propTypes={onLibraryAdd:i.a.func.isRequired,cameraPicker:i.a.bool,onCancel:i.a.func.isRequired};var be=he,ye=Object(s.a)((function(e){return{root:{position:"relative",display:"block",overflow:"hidden",whiteSpace:"pre-line","&::before":{content:'"  "',display:"block",position:"absolute",bottom:0,width:"100%",height:100,background:"linear-gradient(180deg, rgba(255,255,255,0) 0%, ".concat(e.palette.background.paper," 100%)")},placeholder:{color:e.palette.text.secondary}}}})),we=function(e){var t=e.className,a=e.label,r=e.text,o=e.height,i=e.onClick,l=e.placeholder,c=ye();return n.a.createElement("div",{onClick:i,className:t},a&&n.a.createElement(w.a,{className:c.formLabel,variant:"overline"},a),!r&&n.a.createElement(w.a,{component:"div",variant:"caption",color:"inherit",style:{height:o},className:Q()(c.placeholder)},l||"none"),r&&n.a.createElement(w.a,{component:"div",variant:"body1",color:"inherit",style:{height:o},className:Q()(c.root)},r))};we.propTypes={className:i.a.string,label:i.a.string,text:i.a.string,placeholder:i.a.string,height:i.a.number,onClick:i.a.func},we.defaultProps={height:100};var ve=we,Oe=function(e,t){var a=Object(r.useState)(null),o=Object(P.a)(a,2),i=o[0],l=o[1],c=Object(r.useState)(null),s=Object(P.a)(c,2),u=s[0],p=s[1],d=Object(r.useState)(!1),m=Object(P.a)(d,2),g=m[0],f=m[1],h=Object(r.useRef)(g);h.current=g;return{onDownThunk:function(e){return function(t){var a;p(e),a=t.currentTarget,f(!0),setTimeout((function(){h&&h.current&&l(a)}),300)}},onUpThunk:function(t){return function(a){p(t),f(!1),e(t)}},onBlock:function(e){e.stopPropagation(),e.preventDefault()},menu:n.a.createElement(Se,{menuEl:i,onCamera:function(t){t.stopPropagation(),t.preventDefault(),e(u),l(null)},onLibrary:function(e){e.stopPropagation(),e.preventDefault(),t(u),l(null)},onClose:function(e){e.stopPropagation(),e.preventDefault(),l(null)}})}},xe=function(e){var t=e.menuEl,a=e.onCamera,r=e.onLibrary,o=e.onClose,i=Ee();return n.a.createElement(ce.a,{id:"simple-menu",anchorEl:t,open:Boolean(t),className:i.root,onClose:o},n.a.createElement(se.a,{onMouseUp:a,onTouchEnd:a},n.a.createElement(ee.a,null),"Add from camera"),n.a.createElement(se.a,{onMouseUp:r,onTouchEnd:r},n.a.createElement(ne.a,null)," Add from Library"))};xe.propTypes={menuEl:i.a.object,onCamera:i.a.func.isRequired,onClose:i.a.func.isRequired,onLibrary:i.a.func.isRequired};var Ee=Object(s.a)((function(e){return{root:{}}})),Se=xe,ke=a(227),je=a(2022),Ce=Object(s.a)((function(e){return{root:{},bar:{height:e.spacing(2)},message:{},msgContainer:{padding:e.spacing(0,.5),zIndex:3,position:"absolute",display:"flex",width:"100%"},msgTextBright:{color:"white",textShadow:"1px 1px 2px #00000066"},msgTextDark:{color:e.palette.jet?e.palette.jet.main:"inherit",textShadow:"1px 1px 2px #FFFFFF66"},spacer:{flexGrow:1},messageInner:{}}})),Pe=function(e){var t=e.className,a=e.text,r=e.progress,o=Ce(),i=r>0?r:0;if(!a)return null;var l="Uploading: ".concat(a);return n.a.createElement("div",{className:Q()(o.root,t)},n.a.createElement("div",{className:o.messageInner},n.a.createElement("div",{className:Q()(o.msgContainer)},n.a.createElement(w.a,{variant:"caption",className:i>30?o.msgTextBright:o.msgTextDark},l),n.a.createElement("div",{className:o.spacer}),n.a.createElement(w.a,{variant:"caption",className:i>90?o.msgTextBright:o.msgTextDark},i,"%")),n.a.createElement(je.a,{className:o.bar,color:"primary",variant:"determinate",value:i})))};Pe.propTypes={className:i.a.string,text:i.a.string,progress:i.a.number};var Te=Pe,Ie=Te,Ne=function(e){var t=e.text,a=e.progress,r=Ae();return n.a.createElement("div",{className:r.root},n.a.createElement(T.a,null)," ",n.a.createElement(ke.a,{className:r.paper},n.a.createElement(w.a,{variant:"h5"},"This is a dummy component.")),n.a.createElement(Te,{text:t,progress:a}))};Ne.propTypes={text:i.a.string,progress:i.a.number};var Ae=Object(s.a)((function(e){return{root:{height:"100%",display:"flex",flexDirection:"column"},paper:{flexGrow:1}}}));Ne.displayName=Te.displayName;var ze=a(541),_e=a(47),Re=a(108),De=Object(s.a)((function(e){return{root:{height:"100%"},bgSwoosh:{width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:0},logoSpin:{animation:"$loadingSpin 4s linear infinite, $loadingFade 6s infinite"},"@keyframes loadingSpin":{from:{transform:"rotate(0deg) translateY(-50%) translateX(-50%)"},to:{transform:"rotate(360deg) translateY(-50%) translateX(-50%)"}},"@keyframes loadingFade":{"0%":{opacity:.1},"50%":{opacity:1},"100%":{opacity:.1}},spacer:{flex:"1 1 5%"},logoContainer:{overflow:"hidden",position:"relative",flex:"1 1 40%",width:"100%",minHeight:90},logo:{position:"absolute",top:"50%",left:"50%",transformOrigin:"0% 0%",transform:"translateY(-50%) translateX(-50%)",width:"90%",height:"90%"},inner:{margin:"0 auto",padding:e.spacing(0,1),width:"100%",height:"100%",minWidth:200,maxWidth:350,display:"flex",flexDirection:"column",textAlign:"center"}}})),Le=function(e){var t=e.children,a=e.spin,r=e.noAppInfo,o=e.message,i=De();return n.a.createElement("div",{className:i.root},n.a.createElement(T.a,null),n.a.createElement("div",{className:i.inner},n.a.createElement("div",{className:i.logoContainer},n.a.createElement(Re.a,{className:Q()(i.logo,a?i.logoSpin:null)})),!r&&n.a.createElement(n.a.Fragment,null,n.a.createElement(w.a,{component:"div",variant:"h5"},S.d.appName),n.a.createElement(w.a,{component:"div",variant:"caption"},S.d.versionText)),o&&n.a.createElement(w.a,{component:"div",variant:"subtitle1"},o),t,n.a.createElement("div",{className:i.spacer})))};Le.propTypes={children:i.a.any,spin:i.a.bool,message:i.a.string,noAppInfo:i.a.bool};var Me=Le,Fe=function(e){return n.a.createElement(ze.a,{theme:_e.a.login},n.a.createElement(Le,e))},Ue=a(2099),Be=a(12),qe=Object(s.a)((function(e){return{root:{},rootEdit:{},formControl:{width:"100%"},textBody:{whiteSpace:"pre-line"},actionButtons:{textAlign:"right"}}})),We=function(e){var t=e.label,a=e.value,r=e.hint,o=e.onChange,i=e.className,l=qe();return n.a.createElement("div",{className:Q()(l.root,i)},n.a.createElement(w.a,{variant:"overline",className:l.fieldTitle},t),n.a.createElement(Ue.a,{type:"datetime-local",fullWidth:!0,value:Be.dates.timestampToHTML5Input(a),className:l.textField,onChange:function(e){return o(Be.dates.HTML5InputToTimestamp(e.target.value))}}),r&&n.a.createElement(w.a,{variant:"caption",className:l.hint},r))};We.propTypes={className:i.a.string,label:i.a.string.isRequired,hint:i.a.string,value:i.a.string,onChange:i.a.func.isRequired};var Ge=We,He=Object(s.a)((function(e){return{root:{},rootEdit:{},formControl:{width:"100%"},textBody:{whiteSpace:"pre-line"},actionButtons:{textAlign:"right"}}})),Ve=function(e){var t=e.label,a=e.value,r=e.className,o=He();return n.a.createElement("div",{className:Q()(o.root,r)},n.a.createElement(w.a,{variant:"overline",className:o.fieldTitle},t),n.a.createElement(w.a,{variant:"body1",className:o.hint},a?Be.dates.formatDate(a):""))};Ve.propTypes={className:i.a.string,label:i.a.string.isRequired,value:i.a.string};var Ye=Ve,Qe=a(2062),$e=a(2075),Xe=a(487),Ze=a.n(Xe),Ke=a(194),Je=a.n(Ke),et=a(222),tt=a.n(et),at=a(4),rt=a.n(at),nt={UNSENT:"UNSENT",SENDING:"SENDING",SENT:"SENT",ERROR:"ERROR"},ot=Object(s.a)((function(e){return{root:{height:"100%",overflow:"hidden",padding:e.spacing(1),display:"flex",flexDirection:"column",textAlign:"center",color:e.palette.text.primary,border:"20px solid ".concat(e.palette.text.secondary)},buttonGroup:{display:"flex"},button:{},icon:{opacity:.5,margin:"auto",flex:"0 1 10%",width:"50%"},text:{},helperText:{textAlign:"left"},spacer:{flexGrow:1},stack:{padding:e.spacing(2),marginBottom:e.spacing(2),fontSize:"8px",flexGrow:1,textAlign:"left",whiteSpace:"pre-wrap",overflow:"scroll",color:e.palette.error.main,fontFamily:"Consolas, monaco, monospace"}}})),it=function(e){var t=e.error,a=e.sendState,o=e.reportError,i=ot(),l=Object(r.useState)(!1),c=Object(P.a)(l,2),s=c[0],u=c[1],p=Object(r.useContext)(S.a).globalActions,d=Object(r.useState)(""),m=Object(P.a)(d,2),g=m[0],y=m[1];rt.a.info("ERRORCOJNTEXT",{reportError:o});var O=n.a.createElement("div",{className:i.spacer});try{0}catch(j){}var x="Report this bug",E=!1,k="primary";switch(a){case nt.UNSENT:x="Report this bug";break;case nt.SENDING:E=!0,k="default",x="Sending...";break;case nt.SENT:k="default",E=!0,x="Thank you for your feedback";break;case nt.ERROR:k="secondary",E=!0,x="ERROR SENDING BUG REPORT"}return n.a.createElement(ze.a,{theme:_e.a.home},n.a.createElement("div",{className:i.root},n.a.createElement(T.a,null),n.a.createElement(Je.a,{className:i.icon,color:"error"}),n.a.createElement(w.a,{variant:"subtitle1",className:i.text,color:"inherit"},"Something went wrong"),t&&t.message&&n.a.createElement(w.a,{variant:"body1",className:i.text,color:"inherit"},t.message),n.a.createElement(h.a,{className:i.button,variant:"contained",disabled:E,color:k,onClick:function(){return u(!0)}},n.a.createElement(Ze.a,null),x),O,n.a.createElement("div",{className:i.buttonGroup},n.a.createElement(h.a,{className:i.button,variant:"contained",color:"primary",onClick:p.resetAllState},n.a.createElement(tt.a,null),"Soft Reset"),n.a.createElement("div",{className:i.spacer}),n.a.createElement(h.a,{className:i.button,variant:"contained",color:"secondary",onClick:p.resetApp},n.a.createElement(tt.a,null),"Hard Reset")),n.a.createElement(w.a,{className:i.helperText,variant:"caption",color:"inherit",component:"div"},n.a.createElement("strong",null,"Soft")," will try to retain any queued uploads or pending edits."),n.a.createElement(w.a,{className:i.helperText,variant:"caption",color:"inherit",component:"div"},n.a.createElement("strong",null,"Hard")," will wipe any local data and then re-download it from the server."),n.a.createElement(f.a,{open:s,fullScreen:!0,onClose:function(){return u(!1)},"aria-labelledby":"form-dialog-title"},n.a.createElement(Qe.a,{id:"form-dialog-title"},"Report a bug"),n.a.createElement(b.a,null,n.a.createElement($e.a,null,"What were you trying to do when the error happened? (optional)"),n.a.createElement(Ue.a,{autoFocus:!0,margin:"dense",multiline:!0,onChange:function(e){return y(e.target.value)},rows:"3",rowsMax:"6",id:"note",placeholder:"I tried to X and then Y happened...",label:"My report",fullWidth:!0})),n.a.createElement(v.a,null,n.a.createElement(h.a,{onClick:function(){return u(!1)},color:"primary"},"Cancel"),n.a.createElement(h.a,{onClick:function(){o(g),u(!1)},color:"primary"},"Send")))))};it.propTypes={error:i.a.object,sendState:i.a.string,reportError:i.a.func.isRequired};var lt=it;a.d(t,"i",(function(){return g})),a.d(t,"a",(function(){return C})),a.d(t,"c",(function(){return H})),a.d(t,"b",(function(){return le})),a.d(t,"d",(function(){return de})),a.d(t,"j",(function(){return be})),a.d(t,"m",(function(){return ve})),a.d(t,"o",(function(){return Oe})),a.d(t,"n",(function(){return Ie})),a.d(t,"k",(function(){return Me})),a.d(t,"l",(function(){return Fe})),a.d(t,"e",(function(){return Ge})),a.d(t,"f",(function(){return Ye})),a.d(t,"h",(function(){return lt})),a.d(t,"g",(function(){return nt}))},452:function(e,t,a){"use strict";a.r(t),t.default=function(e){return{"@global":{".mapboxgl-ctrl-group":{position:"absolute",top:"70px",left:"10px",opacity:"0.8"}},mapContainer:{height:"100%",width:"100%"}}}},47:function(e,t,a){"use strict";a.d(t,"b",(function(){return o}));var r=a(16);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}t.a=a(570).default;a(383).default,a(384).default,a(625).default;var o={"@global":function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a(383)["@global"],{},a(384)["@global"])}},477:function(e){e.exports=JSON.parse('{"__schema":{"types":[]}}')},49:function(e,t,a){"use strict";a.r(t),a.d(t,"imgStore",(function(){return w})),a.d(t,"stateStore",(function(){return v})),a.d(t,"pushMutationPromise",(function(){return E})),a.d(t,"popMutationPromise",(function(){return S})),a.d(t,"restoreRequests",(function(){return j}));var r=a(18),n=a.n(r),o=a(279),i=a.n(o),l=a(337),c=a(338),s=a(339),u=a(340),p=a(341),d=a(342),m=a(343),g=a(344),f=a(105),h=a.n(f),b=a(4),y=a.n(b);i.a.config({storeName:"MorPhoto",description:"image blobs"});var w=i.a.createInstance({name:"imgStore"}),v=i.a.createInstance({name:"stateStore"});function O(){return v.getItem("offlineMutations").then((function(e){return y.a.debug("offline::getPendingPromise",JSON.parse(e)||[]),JSON.parse(e)||[]}))}function x(e){return y.a.debug("offline::setPendingPromise",e),v.setItem("offlineMutations",JSON.stringify(e))}function E(e,t,a){var r=h()();return O().then((function(n){return n.concat({id:r,params:e,mutation:t,context:a})})).then((function(e){return y.a.debug("offline::pushMutationPromise",e),e})).then(x).then((function(){return r}))}function S(e){return O().then((function(t){return t.filter((function(t){return t.id!==e}))})).then((function(e){return y.a.debug("offline::popMutationPromise",e),e})).then(x)}function k(e,t){return function(a,r){return function(e,t){return y.a.debug("offline::updateHandler",{resp:e,context:t}),e.data.createSeries?l.default.updateThunk(t):e.data.createPhoto?s.default.updateThunk(t):e.data.updateSeries?c.default.updateThunk(t):e.data.updatePhoto?u.default.updateThunk(t):e.data.deletePhoto?p.default.updateThunk(t):e.data.deleteSeries?d.default.updateThunk(t):e.data.watch?m.default.updateThunk(t):e.data.unWatch?g.default.updateThunk(t):function(){}}(r,t)(a,r),r.data.__optimistic?Promise.resolve():S(e)}}function j(e){return O().then((function(t){var a,r;return n.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:a=function(a){var r,o,i,l,c;return n.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return r=t[a],y.a.debug("offline::restoreRequests",t,r),o=r.id,i=r.params,l=r.mutation,c=r.context,i.optimisticResponse.__optimistic=!0,i.update=k(o,c),i.mutation=l,s.next=8,n.a.awrap(e.mutate(i).then((function(e){y.a.debug("restoreRequests:: Successfully restored",{params:i,data:e})})).catch((function(e){y.a.debug("restoreRequests:: Error replaying mutation",{params:i,err:e})})));case 8:case"end":return s.stop()}}))},r=0;case 2:if(!(r<t.length)){o.next=8;break}return o.next=5,n.a.awrap(a(r));case 5:r++,o.next=2;break;case 8:case"end":return o.stop()}}))}))}},490:function(e,t,a){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"FakeData",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"fakePastDate",{enumerable:!0,get:function(){return n.fakePastDate}}),Object.defineProperty(t,"randomLocation",{enumerable:!0,get:function(){return n.randomLocation}}),t.random=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var l=n?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,t&&t.set(e,a);return a}(a(713));function o(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}var i=a(301);t.random=i},522:function(e){e.exports=JSON.parse('{"version":8,"name":"Morphoto: satellite Streets","metadata":{"mapbox:type":"default","mapbox:origin":"satellite-streets-v11","mapbox:sdk-support":{"js":"1.6.0","android":"7.4.0","ios":"4.11.0"},"mapbox:autocomposite":true,"mapbox:groups":{"Transit, transit-labels":{"name":"Transit, transit-labels","collapsed":false},"Administrative boundaries, admin":{"name":"Administrative boundaries, admin","collapsed":false},"Road network, bridges":{"name":"Road network, bridges","collapsed":false},"Road network, tunnels":{"name":"Road network, tunnels","collapsed":false},"Road network, road-labels":{"name":"Road network, road-labels","collapsed":false},"Natural features, natural-labels":{"name":"Natural features, natural-labels","collapsed":false},"Road network, surface":{"name":"Road network, surface","collapsed":false},"Road network, bridges-2":{"name":"Road network, bridges-2","collapsed":false},"Place labels, place-labels":{"name":"Place labels, place-labels","collapsed":false},"Transit, elevated":{"name":"Transit, elevated","collapsed":false},"Road network, surface-case":{"name":"Road network, surface-case","collapsed":false},"Point of interest labels, poi-labels":{"name":"Point of interest labels, poi-labels","collapsed":false},"Walking, cycling, etc., bridges":{"name":"Walking, cycling, etc., bridges","collapsed":false},"Walking, cycling, etc., tunnels":{"name":"Walking, cycling, etc., tunnels","collapsed":false},"Road network, tunnels-case":{"name":"Road network, tunnels-case","collapsed":false},"Road network, bridges-case":{"name":"Road network, bridges-case","collapsed":false},"Walking, cycling, etc., surface":{"name":"Walking, cycling, etc., surface","collapsed":false},"Road network, surface-icons":{"name":"Road network, surface-icons","collapsed":false},"Satellite imagery, land":{"name":"Satellite imagery, land","collapsed":false},"Transit, ferry-aerialway-labels":{"name":"Transit, ferry-aerialway-labels","collapsed":false}},"mapbox:decompiler":{"id":"ck5wquwre2ogs1io6fpwgxilu","componentVersion":"0.4.1","propConfig":{"road-network":{"roadsFont":["DIN Pro Medium","Arial Unicode MS Regular"],"color-road":"hsla(0, 0%, 90%, 0.5)","color-motorway-trunk":"hsla(36, 87%, 68%, 0.7)","construction":false,"color-road-label":"hsl(0, 0%, 100%)","fadeOutRoadsOnZoom":true,"color-road-detail":"hsla(0, 1%, 10%, 0.5)","railwayCrossings":false,"polygonFeatures":false,"color-base":"hsl(0, 0%, 0%)","minorRoads":false,"turningCircles":false},"walking-cycling":{"roadsFont":["DIN Pro Medium","Arial Unicode MS Regular"],"golfHoleLabelLine":false,"color-road":"hsla(0, 0%, 90%, 0.5)","color-greenspace":"hsl(95, 100%, 58%)","walkingCyclingPisteBackground":false,"color-road-label":"hsl(0, 0%, 100%)","color-road-detail":"hsla(0, 1%, 10%, 0.5)","poiEtcFont":["DIN Pro Bold","Arial Unicode MS Bold"],"color-base":"hsl(0, 0%, 0%)","pedestrianPolygonFeatures":false,"labels":false},"transit":{"color-airport":"hsl(0, 0%, 100%)","matchLabelAndIcon":false,"roadsFont":["DIN Pro Medium","Arial Unicode MS Regular"],"aeroways":false,"color-transit":"hsl(0, 0%, 100%)","color-road":"hsla(0, 0%, 90%, 0.5)","color-water":"hsl(196, 50%, 50%)","color-road-label":"hsl(0, 0%, 100%)","color-road-detail":"hsla(0, 1%, 10%, 0.5)","railways":false,"ferries":false,"poiEtcFont":["DIN Pro Bold","Arial Unicode MS Bold"],"color-base":"hsl(0, 0%, 0%)"},"admin-boundaries":{"admin0Width":1.5,"color-base":"hsl(0, 0%, 0%)","color-place-label":"hsl(0, 0%, 100%)","color-admin-boundary":"hsl(0, 0%, 0%)"},"natural-features":{"poiEtcFont":["DIN Pro Bold","Arial Unicode MS Bold"],"color-base":"hsl(0, 0%, 0%)","color-water":"hsl(196, 50%, 50%)","color-poi":"hsl(0, 0%, 100%)"},"point-of-interest-labels":{"poiEtcFont":["DIN Pro Bold","Arial Unicode MS Bold"],"color-base":"hsl(0, 0%, 0%)","color-poi":"hsl(0, 0%, 100%)","color-greenspace":"hsl(95, 100%, 58%)","color-hospital":"hsl(0, 0%, 100%)","color-school":"hsl(0, 0%, 100%)"},"place-labels":{"settlementsMinorFont":["DIN Pro Medium","Arial Unicode MS Regular"],"settlementSubdivisionsFont":["DIN Pro Medium","Arial Unicode MS Regular"],"color-base":"hsl(0, 0%, 0%)","color-place-label":"hsl(0, 0%, 100%)"},"satellite":{}},"strata":[{"id":"satellite-streets-v11","order":[["transit","built"],["satellite","land"],["road-network","tunnels-case"],["walking-cycling","tunnels"],["road-network","tunnels"],["transit","ferries"],["road-network","surface-case"],["walking-cycling","surface"],["road-network","surface"],["transit","surface"],["road-network","surface-icons"],["road-network","bridges-case"],["walking-cycling","bridges"],["road-network","bridges"],["transit","bridges"],["road-network","bridges-2"],["road-network","traffic-and-closures"],["walking-cycling","barriers"],["transit","elevated"],["admin-boundaries","admin"],["road-network","road-labels"],["transit","ferry-aerialway-labels"],["walking-cycling","walking-cycling-labels"],["natural-features","natural-labels"],["point-of-interest-labels","poi-labels"],["transit","transit-labels"],["place-labels","place-labels"]]}],"components":{"satellite":"0.4.1","road-network":"0.4.1","walking-cycling":"0.4.1","admin-boundaries":"0.4.1","natural-features":"0.4.1","point-of-interest-labels":"0.4.1","transit":"0.4.1","place-labels":"0.4.1"}},"mapbox:uiParadigm":"components"},"center":[-118.4106,33.750013],"zoom":13,"bearing":0,"pitch":0,"sources":{"mapbox://mapbox.satellite":{"url":"mapbox://mapbox.satellite","type":"raster","tileSize":256},"composite":{"url":"mapbox://mapbox.mapbox-streets-v8","type":"vector"}},"sprite":"mapbox://sprites/raychaser/ck5wquwre2ogs1io6fpwgxilu/bsdkeqxrjrokket7c3uwink6y","glyphs":"mapbox://fonts/raychaser/{fontstack}/{range}.pbf","layers":[{"id":"background","type":"background","metadata":{"mapbox:featureComponent":"satellite","mapbox:group":"Satellite imagery, land"},"layout":{},"paint":{"background-color":"hsl(222, 56%, 4%)"}},{"id":"satellite","type":"raster","metadata":{"mapbox:featureComponent":"satellite","mapbox:group":"Satellite imagery, land"},"source":"mapbox://mapbox.satellite","layout":{},"paint":{}},{"id":"tunnel-street-minor-low","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["step",["zoom"],["match",["get","class"],["street","street_limited","primary_link"],true,false],14,["match",["get","class"],["street","street_limited","primary_link","secondary_link","tertiary_link"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-color":"hsla(0, 0%, 90%, 0.5)","line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"tunnel-street-minor-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["step",["zoom"],["match",["get","class"],["street","street_limited","primary_link"],true,false],14,["match",["get","class"],["street","street_limited","primary_link","secondary_link","tertiary_link"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsla(0, 0%, 0%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0],"line-dasharray":[3,3]}},{"id":"tunnel-primary-secondary-tertiary-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["primary","secondary","tertiary"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,["match",["get","class"],"primary",1,0.75],18,2],"line-color":"hsla(0, 0%, 0%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,["match",["get","class"],"primary",0.75,0.1],18,["match",["get","class"],"primary",32,26]],"line-dasharray":[3,3],"line-opacity":["interpolate",["linear"],["zoom"],13,0.3,15,0]}},{"id":"tunnel-major-link-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway_link","trunk_link"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsla(0, 0%, 90%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-dasharray":[3,3],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"tunnel-motorway-trunk-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway","trunk"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsla(0, 1%, 22%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-dasharray":[3,3],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"tunnel-path","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., tunnels"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","class"],"path"],["!=",["get","type"],"steps"],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(0, 0%, 10%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[1,0.5]]]}},{"id":"tunnel-steps","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., tunnels"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","class"],"steps"],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,16,1.6,18,6],"line-color":"hsl(0, 0%, 10%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[0.3,0.3]]]}},{"id":"tunnel-pedestrian","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., tunnels"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","class"],"pedestrian"],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"hsl(0, 0%, 10%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.5,0.4]],16,["literal",[1,0.2]]]}},{"id":"tunnel-major-link","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway_link","trunk_link"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"motorway_link","hsla(26, 100%, 78%, 0.7)","hsla(46, 77%, 78%, 0.7)"],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"tunnel-street-minor","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["step",["zoom"],["match",["get","class"],["street","street_limited","primary_link"],true,false],14,["match",["get","class"],["street","street_limited","primary_link","secondary_link","tertiary_link"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-color":["match",["get","class"],"street_limited","hsl(0, 2%, 22%)","hsla(0, 0%, 90%, 0.5)"],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"tunnel-primary-secondary-tertiary","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["primary","secondary","tertiary"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,["match",["get","class"],"primary",0.75,0.1],18,["match",["get","class"],"primary",32,26]],"line-color":"hsla(0, 0%, 90%, 0.5)","line-opacity":["interpolate",["linear"],["zoom"],13,0.3,15,0]}},{"id":"tunnel-oneway-arrow-blue","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":15,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","oneway"],"true"],["step",["zoom"],["match",["get","class"],["primary","secondary","street","street_limited","tertiary"],true,false],16,["match",["get","class"],["primary","secondary","tertiary","street","street_limited","primary_link","secondary_link","tertiary_link"],true,false]]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-small",17,["match",["get","class"],["primary","secondary","tertiary","street","street_limited"],"oneway-large","oneway-small"],18,"oneway-large"],"symbol-spacing":200,"icon-rotation-alignment":"map"},"paint":{}},{"id":"tunnel-motorway-trunk","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway","trunk"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":["match",["get","class"],"motorway","hsla(26, 100%, 78%, 0.7)","hsla(46, 77%, 78%, 0.7)"],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"tunnel-oneway-arrow-white","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, tunnels"},"source":"composite","source-layer":"road","minzoom":16,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway","motorway_link","trunk","trunk_link"],true,false],["==",["get","oneway"],"true"]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-white-small",17,"oneway-white-large"],"symbol-spacing":200},"paint":{}},{"id":"road-minor-low","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["step",["zoom"],false,14,["match",["get","class"],["secondary_link","tertiary_link"],true,false]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,["match",["get","class"],"track",1,0.5],18,12],"line-color":"hsla(0, 0%, 90%, 0.5)","line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"road-minor-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["step",["zoom"],false,14,["match",["get","class"],["secondary_link","tertiary_link"],true,false]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsla(0, 1%, 10%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],14,["match",["get","class"],"track",1,0.5],18,12],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"road-street-low","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface-case"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["match",["get","class"],["street","street_limited","primary_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":"hsla(0, 0%, 90%, 0.5)","line-opacity":["interpolate",["linear"],["zoom"],13,0.3,15,0]}},{"id":"road-street-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface-case"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["match",["get","class"],["street","street_limited","primary_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsla(0, 1%, 10%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-opacity":["interpolate",["linear"],["zoom"],13,0.3,15,0]}},{"id":"road-secondary-tertiary-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface-case"},"source":"composite","source-layer":"road","minzoom":8,"filter":["all",["match",["get","class"],["secondary","tertiary"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,0.75,18,2],"line-color":"hsla(0, 1%, 10%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.1,18,26],"line-opacity":["interpolate",["linear"],["zoom"],13,0.3,15,0]}},{"id":"road-primary-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface-case"},"source":"composite","source-layer":"road","minzoom":7,"filter":["all",["==",["get","class"],"primary"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsla(0, 1%, 10%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"road-major-link-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface-case"},"source":"composite","source-layer":"road","minzoom":10,"filter":["all",["match",["get","class"],["motorway_link","trunk_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsla(0, 1%, 22%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"road-motorway-trunk-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface-case"},"source":"composite","source-layer":"road","minzoom":5,"filter":["all",["match",["get","class"],["motorway","trunk"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsla(0, 1%, 22%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"road-path","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","class"],"path"],["step",["zoom"],["!",["match",["get","type"],["steps","sidewalk","crossing"],true,false]],16,["!=",["get","type"],"steps"]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],13,0.5,14,1,15,1,18,4],"line-color":"hsl(0, 0%, 22%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[1,0.5]]]}},{"id":"road-steps","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","type"],"steps"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,16,1.6,18,6],"line-color":"hsl(0, 0%, 22%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[0.3,0.3]]]}},{"id":"road-pedestrian","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., surface"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","class"],"pedestrian"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"hsl(0, 0%, 22%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.5,0.4]],16,["literal",[1,0.2]]]}},{"id":"road-major-link","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":10,"filter":["all",["match",["get","class"],["motorway_link","trunk_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",13,"round"],"line-join":["step",["zoom"],"miter",13,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"motorway_link","hsla(26, 100%, 68%, 0.7)","hsla(46, 87%, 68%, 0.7)"],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"road-minor","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["step",["zoom"],false,14,["match",["get","class"],["secondary_link","tertiary_link"],true,false]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,["match",["get","class"],"track",1,0.5],18,12],"line-color":"hsla(0, 0%, 90%, 0.5)","line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"road-street","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["match",["get","class"],["street","street_limited","primary_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"street_limited","hsl(0, 2%, 22%)","hsla(0, 0%, 90%, 0.5)"],"line-opacity":["interpolate",["linear"],["zoom"],13,0.3,15,0]}},{"id":"road-secondary-tertiary","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":8,"filter":["all",["match",["get","class"],["secondary","tertiary"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.1,18,26],"line-color":"hsla(0, 0%, 90%, 0.5)","line-opacity":["interpolate",["linear"],["zoom"],13,0.3,15,0]}},{"id":"road-primary","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":7,"filter":["all",["==",["get","class"],"primary"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":"hsla(0, 0%, 90%, 0.5)","line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"road-oneway-arrow-blue","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","minzoom":15,"filter":["all",["==",["get","oneway"],"true"],["step",["zoom"],["match",["get","class"],["primary","secondary","tertiary","street","street_limited"],true,false],16,["match",["get","class"],["primary","secondary","tertiary","street","street_limited","primary_link","secondary_link","tertiary_link"],true,false]],["match",["get","structure"],["none","ford"],true,false]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-small",17,["match",["get","class"],["primary","secondary","tertiary","street","street_limited"],"oneway-large","oneway-small"],18,"oneway-large"],"symbol-spacing":200,"icon-rotation-alignment":"map"},"paint":{}},{"id":"road-motorway-trunk","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface"},"source":"composite","source-layer":"road","filter":["all",["match",["get","class"],["motorway","trunk"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",13,"round"],"line-join":["step",["zoom"],"miter",13,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":["step",["zoom"],["match",["get","class"],"motorway","hsla(26, 87%, 62%, 0.7)","hsla(0, 0%, 90%, 0.5)"],6,["match",["get","class"],"motorway","hsla(26, 87%, 62%, 0.7)","hsla(46, 80%, 60%, 0.7)"],9,["match",["get","class"],"motorway","hsla(26, 100%, 68%, 0.7)","hsla(46, 87%, 68%, 0.7)"]],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"road-oneway-arrow-white","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, surface-icons"},"source":"composite","source-layer":"road","minzoom":16,"filter":["all",["==",["get","oneway"],"true"],["match",["get","class"],["motorway","trunk","motorway_link","trunk_link"],true,false],["match",["get","structure"],["none","ford"],true,false]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-white-small",17,"oneway-white-large"],"symbol-spacing":200},"paint":{}},{"id":"bridge-street-minor-low","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["step",["zoom"],["match",["get","class"],["street","street_limited","primary_link"],true,false],14,["match",["get","class"],["street","street_limited","primary_link","secondary_link","tertiary_link"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-color":"hsla(0, 0%, 90%, 0.5)","line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-street-minor-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["step",["zoom"],["match",["get","class"],["street","street_limited","primary_link"],true,false],14,["match",["get","class"],["street","street_limited","primary_link","secondary_link","tertiary_link"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsla(0, 1%, 10%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-primary-secondary-tertiary-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["primary","secondary","tertiary"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,["match",["get","class"],"primary",1,0.75],18,2],"line-color":"hsla(0, 1%, 10%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,["match",["get","class"],"primary",0.75,0.1],18,["match",["get","class"],"primary",32,26]],"line-opacity":["interpolate",["linear"],["zoom"],13,0.3,15,0]}},{"id":"bridge-major-link-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway_link","trunk_link"],true,false],["<=",["get","layer"],1],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsla(0, 1%, 22%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-motorway-trunk-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges-case"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway","trunk"],true,false],["<=",["get","layer"],1],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsla(0, 1%, 22%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-path","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., bridges"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"path"],["==",["geometry-type"],"LineString"],["!=",["get","type"],"steps"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(0, 0%, 22%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[1,0.5]]]}},{"id":"bridge-steps","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., bridges"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","type"],"steps"],["==",["get","structure"],"bridge"],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,16,1.6,18,6],"line-color":"hsl(0, 0%, 22%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[0.3,0.3]]]}},{"id":"bridge-pedestrian","type":"line","metadata":{"mapbox:featureComponent":"walking-cycling","mapbox:group":"Walking, cycling, etc., bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"pedestrian"],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"hsl(0, 0%, 22%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.5,0.4]],16,["literal",[1,0.2]]]}},{"id":"bridge-major-link","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway_link","trunk_link"],true,false],["<=",["get","layer"],1],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"motorway_link","hsla(26, 100%, 68%, 0.7)","hsla(46, 87%, 68%, 0.7)"],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-street-minor","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["step",["zoom"],["match",["get","class"],["street","street_limited","primary_link"],true,false],14,["match",["get","class"],["street","street_limited","primary_link","secondary_link","tertiary_link"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-color":["match",["get","class"],"street_limited","hsl(0, 2%, 22%)","hsla(0, 0%, 90%, 0.5)"],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-primary-secondary-tertiary","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["primary","secondary","tertiary"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,["match",["get","class"],"primary",0.75,0.1],18,["match",["get","class"],"primary",32,26]],"line-color":"hsla(0, 0%, 90%, 0.5)","line-opacity":["interpolate",["linear"],["zoom"],13,0.3,15,0]}},{"id":"bridge-oneway-arrow-blue","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":15,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","oneway"],"true"],["step",["zoom"],["match",["get","class"],["primary","secondary","tertiary","street","street_limited"],true,false],16,["match",["get","class"],["primary","secondary","tertiary","street","street_limited","primary_link","secondary_link","tertiary_link"],true,false]]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-small",17,["match",["get","class"],["primary","secondary","tertiary","street","street_limited"],"oneway-large","oneway-small"],18,"oneway-large"],"symbol-spacing":200,"icon-rotation-alignment":"map"},"paint":{}},{"id":"bridge-motorway-trunk","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway","trunk"],true,false],["<=",["get","layer"],1],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":["match",["get","class"],"motorway","hsla(26, 100%, 68%, 0.7)","hsla(46, 87%, 68%, 0.7)"],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-major-link-2-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges-2"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],[">=",["get","layer"],2],["match",["get","class"],["motorway_link","trunk_link"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsla(0, 1%, 22%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-motorway-trunk-2-case","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges-2"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],[">=",["get","layer"],2],["match",["get","class"],["motorway","trunk"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsla(0, 1%, 22%, 0.5)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-major-link-2","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges-2"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],[">=",["get","layer"],2],["match",["get","class"],["motorway_link","trunk_link"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"motorway_link","hsla(26, 100%, 68%, 0.7)","hsla(46, 87%, 68%, 0.7)"],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-motorway-trunk-2","type":"line","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges-2"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],[">=",["get","layer"],2],["match",["get","class"],["motorway","trunk"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":["step",["zoom"],"butt",14,"round"],"line-join":["step",["zoom"],"miter",14,"round"]},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":["match",["get","class"],"motorway","hsla(26, 100%, 68%, 0.7)","hsla(46, 87%, 68%, 0.7)"],"line-opacity":["interpolate",["linear"],["zoom"],13,1,15,0]}},{"id":"bridge-oneway-arrow-white","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, bridges-2"},"source":"composite","source-layer":"road","minzoom":16,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway","trunk","motorway_link","trunk_link"],true,false],["==",["get","oneway"],"true"]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-white-small",17,"oneway-white-large"],"symbol-spacing":200},"paint":{}},{"id":"aerialway","type":"line","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, elevated"},"source":"composite","source-layer":"road","minzoom":12,"filter":["==",["get","class"],"aerialway"],"layout":{"line-join":"round"},"paint":{"line-color":"hsla(0, 0%, 0%, 0.5)","line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,20,1]}},{"id":"admin-1-boundary-bg","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","filter":["all",["==",["get","admin_level"],1],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"bevel"},"paint":{"line-color":["interpolate",["linear"],["zoom"],8,"hsl(0, 0%, 14%)",16,"hsl(0, 0%, 30%)"],"line-width":["interpolate",["linear"],["zoom"],7,3.75,12,5.5],"line-opacity":["interpolate",["linear"],["zoom"],7,0,8,0.75],"line-dasharray":[1,0],"line-translate":[0,0],"line-blur":["interpolate",["linear"],["zoom"],3,0,8,3]}},{"id":"admin-0-boundary-bg","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","minzoom":1,"filter":["all",["==",["get","admin_level"],0],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{},"paint":{"line-width":["interpolate",["linear"],["zoom"],3,5.25,10,12],"line-color":["interpolate",["linear"],["zoom"],6,"hsl(0, 0%, 14%)",8,"hsl(0, 0%, 30%)"],"line-opacity":["interpolate",["linear"],["zoom"],3,0,4,0.5],"line-translate":[0,0],"line-blur":["interpolate",["linear"],["zoom"],3,0,10,3]}},{"id":"admin-1-boundary","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","filter":["all",["==",["get","admin_level"],1],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"round","line-cap":"round"},"paint":{"line-dasharray":["step",["zoom"],["literal",[2,0]],7,["literal",[2,2,6,2]]],"line-width":["interpolate",["linear"],["zoom"],7,0.75,12,1.5],"line-opacity":["interpolate",["linear"],["zoom"],2,0,3,1],"line-color":["interpolate",["linear"],["zoom"],3,"hsl(0, 0%, 0%)",7,"hsl(0, 0%, 5%)"]}},{"id":"admin-0-boundary","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","minzoom":1,"filter":["all",["==",["get","admin_level"],0],["==",["get","disputed"],"false"],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"round","line-cap":"round"},"paint":{"line-color":"hsl(0, 0%, 0%)","line-width":["interpolate",["linear"],["zoom"],3,0.75,10,3],"line-dasharray":[10,0]}},{"id":"admin-0-boundary-disputed","type":"line","metadata":{"mapbox:featureComponent":"admin-boundaries","mapbox:group":"Administrative boundaries, admin"},"source":"composite","source-layer":"admin","minzoom":1,"filter":["all",["==",["get","disputed"],"true"],["==",["get","admin_level"],0],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"round"},"paint":{"line-color":"hsl(0, 0%, 0%)","line-width":["interpolate",["linear"],["zoom"],3,0.75,10,3],"line-dasharray":["step",["zoom"],["literal",[3.25,3.25]],6,["literal",[2.5,2.5]],7,["literal",[2,2.25]],8,["literal",[1.75,2]]]}},{"id":"road-label","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, road-labels"},"source":"composite","source-layer":"road","minzoom":10,"filter":["step",["zoom"],["match",["get","class"],["motorway","trunk","primary","secondary","tertiary"],true,false],12,["match",["get","class"],["motorway","trunk","primary","secondary","tertiary","street","street_limited"],true,false],15,["match",["get","class"],["path","pedestrian","golf","ferry","aerialway","track","service"],false,true]],"layout":{"text-size":["interpolate",["linear"],["zoom"],10,["match",["get","class"],["motorway","trunk","primary","secondary","tertiary"],10,["motorway_link","trunk_link","primary_link","secondary_link","tertiary_link","street","street_limited"],9,6.5],18,["match",["get","class"],["motorway","trunk","primary","secondary","tertiary"],16,["motorway_link","trunk_link","primary_link","secondary_link","tertiary_link","street","street_limited"],14,13]],"text-max-angle":30,"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]],"text-letter-spacing":0.01},"paint":{"text-color":"hsl(0, 0%, 100%)","text-halo-color":["match",["get","class"],["motorway","trunk"],"hsla(0, 5%, 0%, 0.75)","hsla(0, 0%, 90%, 0.5)"],"text-halo-width":1,"text-halo-blur":1}},{"id":"road-number-shield","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, road-labels"},"source":"composite","source-layer":"road","minzoom":6,"filter":["all",["has","reflen"],["<=",["get","reflen"],6],["step",["zoom"],["==",["geometry-type"],"Point"],11,[">",["get","len"],5000],12,[">",["get","len"],2500],13,[">",["get","len"],1000],14,true]],"layout":{"text-size":9,"icon-image":["concat",["get","shield"],"-",["to-string",["get","reflen"]]],"icon-rotation-alignment":"viewport","text-max-angle":38,"symbol-spacing":["interpolate",["linear"],["zoom"],11,150,14,200],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"symbol-placement":["step",["zoom"],"point",11,"line"],"text-rotation-alignment":"viewport","text-field":["get","ref"],"text-letter-spacing":0.05},"paint":{"text-color":["match",["get","shield_text_color"],"white","hsl(0, 0%, 100%)","yellow","hsl(50, 100%, 70%)","orange","hsl(25, 100%, 75%)","blue","hsl(230, 57%, 44%)","hsl(230, 18%, 13%)"]}},{"id":"road-exit-shield","type":"symbol","metadata":{"mapbox:featureComponent":"road-network","mapbox:group":"Road network, road-labels"},"source":"composite","source-layer":"motorway_junction","minzoom":14,"filter":["all",["has","reflen"],["<=",["get","reflen"],9]],"layout":{"text-field":["get","ref"],"text-size":9,"icon-image":["concat","motorway-exit-",["to-string",["get","reflen"]]],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"]},"paint":{"text-color":"hsl(0, 0%, 100%)","text-translate":[0,0]}},{"id":"ferry-aerialway-label","type":"symbol","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, ferry-aerialway-labels"},"source":"composite","source-layer":"road","minzoom":15,"filter":["match",["get","class"],"aerialway",true,false],"layout":{"text-size":["interpolate",["linear"],["zoom"],10,6.5,18,13],"text-max-angle":30,"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]],"text-letter-spacing":0.01},"paint":{"text-color":["match",["get","class"],"ferry","hsl(230, 18%, 86%)","hsl(0, 0%, 100%)"],"text-halo-color":["match",["get","class"],"ferry","hsl(196, 50%, 50%)","hsl(0, 5%, 0%)"],"text-halo-width":1,"text-halo-blur":1}},{"id":"waterway-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","minzoom":13,"filter":["all",["match",["get","class"],["canal","river","stream"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"text-font":["DIN Pro Italic","Arial Unicode MS Regular"],"text-max-angle":30,"symbol-spacing":["interpolate",["linear",1],["zoom"],15,250,17,400],"text-size":["interpolate",["linear"],["zoom"],13,12,18,16],"symbol-placement":"line","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"text-color":"hsl(230, 18%, 90%)"}},{"id":"natural-line-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","minzoom":4,"filter":["all",["match",["get","class"],["glacier","landform"],true,false],["==",["geometry-type"],"LineString"],["<=",["get","filterrank"],2]],"layout":{"text-size":["step",["zoom"],["step",["get","sizerank"],18,5,12],17,["step",["get","sizerank"],18,13,12]],"text-max-angle":30,"text-field":["coalesce",["get","name_en"],["get","name"]],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"symbol-placement":"line-center","text-pitch-alignment":"viewport"},"paint":{"text-halo-width":0.5,"text-halo-color":"hsl(0, 5%, 0%)","text-halo-blur":0.5,"text-color":["step",["zoom"],["step",["get","sizerank"],"hsl(0, 0%, 100%)",5,"hsl(0, 0%, 100%)"],17,["step",["get","sizerank"],"hsl(0, 0%, 100%)",13,"hsl(0, 0%, 100%)"]]}},{"id":"natural-point-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","minzoom":4,"filter":["all",["match",["get","class"],["dock","glacier","landform","water_feature","wetland"],true,false],["==",["geometry-type"],"Point"],["<=",["get","filterrank"],2]],"layout":{"text-size":["step",["zoom"],["step",["get","sizerank"],18,5,12],17,["step",["get","sizerank"],18,13,12]],"icon-image":["step",["zoom"],["concat",["get","maki"],"-11"],15,["concat",["get","maki"],"-15"]],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"text-offset":["step",["zoom"],["step",["get","sizerank"],["literal",[0,0]],5,["literal",[0,0.75]]],17,["step",["get","sizerank"],["literal",[0,0]],13,["literal",[0,0.75]]]],"text-anchor":["step",["zoom"],["step",["get","sizerank"],"center",5,"top"],17,["step",["get","sizerank"],"center",13,"top"]],"text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"icon-opacity":["step",["zoom"],["step",["get","sizerank"],0,5,1],17,["step",["get","sizerank"],0,13,1]],"text-halo-color":"hsl(0, 5%, 0%)","text-halo-width":0.5,"text-halo-blur":0.5,"text-color":["step",["zoom"],["step",["get","sizerank"],"hsl(0, 0%, 100%)",5,"hsl(0, 0%, 100%)"],17,["step",["get","sizerank"],"hsl(0, 0%, 100%)",13,"hsl(0, 0%, 100%)"]]}},{"id":"water-line-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","filter":["all",["match",["get","class"],["bay","ocean","reservoir","sea","water"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"text-size":["interpolate",["linear"],["zoom"],7,["step",["get","sizerank"],24,6,18,12,12],10,["step",["get","sizerank"],18,9,12],18,["step",["get","sizerank"],18,9,16]],"text-max-angle":30,"text-letter-spacing":["match",["get","class"],"ocean",0.25,["sea","bay"],0.15,0],"text-font":["DIN Pro Italic","Arial Unicode MS Regular"],"symbol-placement":"line-center","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"text-color":["match",["get","class"],["bay","ocean","sea"],"hsl(205, 54%, 70%)","hsl(230, 18%, 90%)"]}},{"id":"water-point-label","type":"symbol","metadata":{"mapbox:featureComponent":"natural-features","mapbox:group":"Natural features, natural-labels"},"source":"composite","source-layer":"natural_label","filter":["all",["match",["get","class"],["bay","ocean","reservoir","sea","water"],true,false],["==",["geometry-type"],"Point"]],"layout":{"text-line-height":1.3,"text-size":["interpolate",["linear"],["zoom"],7,["step",["get","sizerank"],24,6,18,12,12],10,["step",["get","sizerank"],18,9,12]],"text-font":["DIN Pro Italic","Arial Unicode MS Regular"],"text-field":["coalesce",["get","name_en"],["get","name"]],"text-letter-spacing":["match",["get","class"],"ocean",0.25,["bay","sea"],0.15,0.01],"text-max-width":["match",["get","class"],"ocean",4,"sea",5,["bay","water"],7,10]},"paint":{"text-color":["match",["get","class"],["bay","ocean","sea"],"hsl(205, 54%, 70%)","hsl(230, 18%, 90%)"]}},{"id":"poi-label","type":"symbol","metadata":{"mapbox:featureComponent":"point-of-interest-labels","mapbox:group":"Point of interest labels, poi-labels"},"source":"composite","source-layer":"poi_label","minzoom":6,"filter":["<=",["get","filterrank"],["+",["step",["zoom"],0,16,1,17,2],3]],"layout":{"text-size":["step",["zoom"],["step",["get","sizerank"],18,5,12],17,["step",["get","sizerank"],18,13,12]],"icon-image":["step",["zoom"],["concat",["get","maki"],"-11"],15,["concat",["get","maki"],"-15"]],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"text-offset":["step",["zoom"],["step",["get","sizerank"],["literal",[0,0]],5,["literal",[0,0.75]]],17,["step",["get","sizerank"],["literal",[0,0]],13,["literal",[0,0.75]]]],"text-anchor":["step",["zoom"],["step",["get","sizerank"],"center",5,"top"],17,["step",["get","sizerank"],"center",13,"top"]],"text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"icon-opacity":["step",["zoom"],["step",["get","sizerank"],0,5,1],17,["step",["get","sizerank"],0,13,1]],"text-halo-color":["match",["get","class"],"park_like","hsl(95, 56%, 0%)","medical","hsl(0, 5%, 3%)","hsl(0, 5%, 0%)"],"text-halo-width":0.5,"text-halo-blur":0.5,"text-color":["step",["zoom"],["step",["get","sizerank"],["match",["get","class"],"food_and_drink","hsl(356, 0%, 100%)","park_like","hsl(95, 45%, 78%)","hsl(0, 0%, 100%)"],5,["match",["get","class"],"food_and_drink","hsl(356, 0%, 100%)","park_like","hsl(95, 100%, 78%)","hsl(0, 0%, 100%)"]],17,["step",["get","sizerank"],["match",["get","class"],"food_and_drink","hsl(356, 0%, 100%)","park_like","hsl(95, 45%, 78%)","hsl(0, 0%, 100%)"],13,["match",["get","class"],"food_and_drink","hsl(356, 0%, 100%)","park_like","hsl(95, 100%, 78%)","hsl(0, 0%, 100%)"]]]}},{"id":"transit-label","type":"symbol","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, transit-labels"},"source":"composite","source-layer":"transit_stop_label","minzoom":12,"filter":["step",["zoom"],["all",["match",["get","mode"],"rail",true,"metro_rail",true,false],["!=",["get","stop_type"],"entrance"]],15,["all",["match",["get","mode"],"rail",true,"metro_rail",true,"light_rail",true,false],["!=",["get","stop_type"],"entrance"]],16,["all",["match",["get","mode"],"ferry",false,"bus",false,true],["!=",["get","stop_type"],"entrance"]],17,["all",["match",["get","mode"],"ferry",false,true],["!=",["get","stop_type"],"entrance"]],19,["match",["get","mode"],"ferry",false,true]],"layout":{"text-size":12,"icon-image":["get","network"],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"text-justify":["match",["get","stop_type"],"entrance","left","center"],"text-offset":["match",["get","stop_type"],"entrance",["literal",[1,0]],["literal",[0,0.8]]],"text-anchor":["match",["get","stop_type"],"entrance","left","top"],"text-field":["step",["zoom"],"",14,["match",["get","mode"],["rail","metro_rail"],["coalesce",["get","name_en"],["get","name"]],""],16,["match",["get","mode"],["bus","bicycle"],"",["coalesce",["get","name_en"],["get","name"]]],18,["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.01,"text-max-width":["match",["get","stop_type"],"entrance",15,9]},"paint":{"text-halo-color":"hsl(0, 5%, 0%)","text-color":"hsl(0, 0%, 100%)","text-halo-blur":0.5,"text-halo-width":0.5}},{"id":"airport-label","type":"symbol","metadata":{"mapbox:featureComponent":"transit","mapbox:group":"Transit, transit-labels"},"source":"composite","source-layer":"airport_label","minzoom":8,"layout":{"text-line-height":1.1,"text-size":["step",["get","sizerank"],18,9,12],"icon-image":["step",["get","sizerank"],["concat",["get","maki"],"-15"],9,["concat",["get","maki"],"-11"]],"text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"text-offset":[0,0.75],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":["step",["get","sizerank"],["coalesce",["get","name_en"],["get","name"]],15,["get","ref"]],"text-letter-spacing":0.01,"text-max-width":9},"paint":{"text-color":"hsl(0, 0%, 100%)","text-halo-color":"hsl(0, 20%, 3%)","text-halo-width":1}},{"id":"settlement-subdivision-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","minzoom":10,"maxzoom":15,"filter":["all",["==",["get","class"],"settlement_subdivision"],["<=",["get","filterrank"],4]],"layout":{"text-field":["coalesce",["get","name_en"],["get","name"]],"text-transform":"uppercase","text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-letter-spacing":["match",["get","type"],"suburb",0.15,0.1],"text-max-width":7,"text-padding":3,"text-size":["interpolate",["cubic-bezier",0.5,0,1,1],["zoom"],11,["match",["get","type"],"suburb",11,10.5],15,["match",["get","type"],"suburb",17,16]]},"paint":{"text-halo-color":"hsla(0, 5%, 0%, 0.75)","text-halo-width":1,"text-color":"hsl(0, 0%, 100%)","text-halo-blur":0.5}},{"id":"settlement-minor-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","maxzoom":15,"filter":["all",["<=",["get","filterrank"],3],["==",["get","class"],"settlement"],["step",["zoom"],true,8,[">=",["get","symbolrank"],11],10,[">=",["get","symbolrank"],12],11,[">=",["get","symbolrank"],13],12,[">=",["get","symbolrank"],15],13,[">=",["get","symbolrank"],11],14,[">=",["get","symbolrank"],13]]],"layout":{"text-line-height":1.1,"text-size":["interpolate",["cubic-bezier",0.2,0,0.9,1],["zoom"],3,["step",["get","symbolrank"],12,9,11,10,10.5,12,9.5,14,8.5,16,6.5,17,4],13,["step",["get","symbolrank"],25,9,23,10,21,11,19,12,18,13,17,15,15]],"icon-image":["step",["zoom"],["case",["==",["get","capital"],2],"border-dot-13",["step",["get","symbolrank"],"dot-11",9,"dot-10",11,"dot-9"]],8,""],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-justify":["step",["zoom"],["match",["get","text_anchor"],["left","bottom-left","top-left"],"left",["right","bottom-right","top-right"],"right","center"],8,"center"],"text-offset":["step",["zoom"],["match",["get","capital"],2,["match",["get","text_anchor"],"bottom",["literal",[0,-0.3]],"bottom-left",["literal",[0.3,-0.1]],"left",["literal",[0.45,0.1]],"top-left",["literal",[0.3,0.1]],"top",["literal",[0,0.3]],"top-right",["literal",[-0.3,0.1]],"right",["literal",[-0.45,0]],"bottom-right",["literal",[-0.3,-0.1]],["literal",[0,-0.3]]],["match",["get","text_anchor"],"bottom",["literal",[0,-0.25]],"bottom-left",["literal",[0.2,-0.05]],"left",["literal",[0.4,0.05]],"top-left",["literal",[0.2,0.05]],"top",["literal",[0,0.25]],"top-right",["literal",[-0.2,0.05]],"right",["literal",[-0.4,0.05]],"bottom-right",["literal",[-0.2,-0.05]],["literal",[0,-0.25]]]],8,["literal",[0,0]]],"text-anchor":["step",["zoom"],["get","text_anchor"],8,"center"],"text-field":["coalesce",["get","name_en"],["get","name"]],"text-max-width":7},"paint":{"text-color":"hsl(0, 0%, 95%)","text-halo-color":"hsl(0, 5%, 0%)","text-halo-width":1,"text-halo-blur":1}},{"id":"settlement-major-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","maxzoom":15,"filter":["all",["<=",["get","filterrank"],3],["==",["get","class"],"settlement"],["step",["zoom"],false,8,["<",["get","symbolrank"],11],10,["<",["get","symbolrank"],12],11,["<",["get","symbolrank"],13],12,["<",["get","symbolrank"],15],13,[">=",["get","symbolrank"],11],14,[">=",["get","symbolrank"],13]]],"layout":{"text-line-height":1.1,"text-size":["interpolate",["cubic-bezier",0.2,0,0.9,1],["zoom"],8,["step",["get","symbolrank"],18,9,17,10,15],15,["step",["get","symbolrank"],28,9,26,10,23,11,21,12,20,13,19,15,16]],"icon-image":["step",["zoom"],["case",["==",["get","capital"],2],"border-dot-13",["step",["get","symbolrank"],"dot-11",9,"dot-10",11,"dot-9"]],8,""],"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-justify":["step",["zoom"],["match",["get","text_anchor"],["left","bottom-left","top-left"],"left",["right","bottom-right","top-right"],"right","center"],8,"center"],"text-offset":["step",["zoom"],["match",["get","capital"],2,["match",["get","text_anchor"],"bottom",["literal",[0,-0.3]],"bottom-left",["literal",[0.3,-0.1]],"left",["literal",[0.45,0.1]],"top-left",["literal",[0.3,0.1]],"top",["literal",[0,0.3]],"top-right",["literal",[-0.3,0.1]],"right",["literal",[-0.45,0]],"bottom-right",["literal",[-0.3,-0.1]],["literal",[0,-0.3]]],["match",["get","text_anchor"],"bottom",["literal",[0,-0.25]],"bottom-left",["literal",[0.2,-0.05]],"left",["literal",[0.4,0.05]],"top-left",["literal",[0.2,0.05]],"top",["literal",[0,0.25]],"top-right",["literal",[-0.2,0.05]],"right",["literal",[-0.4,0.05]],"bottom-right",["literal",[-0.2,-0.05]],["literal",[0,-0.25]]]],8,["literal",[0,0]]],"text-anchor":["step",["zoom"],["get","text_anchor"],8,"center"],"text-field":["coalesce",["get","name_en"],["get","name"]],"text-max-width":7},"paint":{"text-color":"hsl(0, 0%, 95%)","text-halo-color":"hsl(0, 5%, 0%)","text-halo-width":1,"text-halo-blur":1}},{"id":"state-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","minzoom":3,"maxzoom":9,"filter":["==",["get","class"],"state"],"layout":{"text-size":["interpolate",["cubic-bezier",0.85,0.7,0.65,1],["zoom"],4,["step",["get","symbolrank"],10,6,9.5,7,9],9,["step",["get","symbolrank"],24,6,18,7,14]],"text-transform":"uppercase","text-font":["DIN Pro Bold","Arial Unicode MS Bold"],"text-field":["step",["zoom"],["step",["get","symbolrank"],["coalesce",["get","name_en"],["get","name"]],5,["coalesce",["get","abbr"],["get","name_en"],["get","name"]]],5,["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.15,"text-max-width":6},"paint":{"text-color":"hsl(0, 0%, 95%)","text-halo-color":"hsl(0, 5%, 0%)","text-halo-width":1}},{"id":"country-label","type":"symbol","metadata":{"mapbox:featureComponent":"place-labels","mapbox:group":"Place labels, place-labels"},"source":"composite","source-layer":"place_label","minzoom":1,"maxzoom":10,"filter":["==",["get","class"],"country"],"layout":{"icon-image":"","text-field":["coalesce",["get","name_en"],["get","name"]],"text-line-height":1.1,"text-max-width":6,"text-font":["DIN Pro Medium","Arial Unicode MS Regular"],"text-offset":["literal",[0,0]],"text-justify":["step",["zoom"],["match",["get","text_anchor"],["left","bottom-left","top-left"],"left",["right","bottom-right","top-right"],"right","center"],7,"center"],"text-size":["interpolate",["cubic-bezier",0.2,0,0.7,1],["zoom"],1,["step",["get","symbolrank"],11,4,9,5,8],9,["step",["get","symbolrank"],28,4,22,5,21]]},"paint":{"icon-opacity":["step",["zoom"],["case",["has","text_anchor"],1,0],7,0],"text-color":"hsl(0, 0%, 95%)","text-halo-color":["interpolate",["linear"],["zoom"],2,"hsla(0, 5%, 0%, 0.75)",3,"hsl(0, 5%, 0%)"],"text-halo-width":1.25}}],"created":"2020-01-27T17:47:03.929Z","id":"ck5wquwre2ogs1io6fpwgxilu","modified":"2020-01-27T17:48:02.236Z","owner":"raychaser","visibility":"private","draft":false}')},523:function(e){e.exports=JSON.parse('{"version":8,"name":"MorPhoto - Topo Layer","metadata":{"mapbox:type":"default","mapbox:origin":"outdoors-v11","mapbox:autocomposite":true,"mapbox:groups":{"1444855786460.0557":{"name":"Roads","collapsed":true},"1444934295202.7542":{"name":"Admin boundaries","collapsed":true},"1444855799204.86":{"name":"Bridges","collapsed":true},"1444855769305.6016":{"name":"Tunnels","collapsed":true}},"mapbox:sdk-support":{"js":"0.54.0","android":"6.7.0","ios":"4.7.0"}},"center":[-112.9425,37.2686],"zoom":14,"bearing":0,"pitch":0,"sources":{"composite":{"url":"mapbox://mapbox.mapbox-streets-v8,mapbox.mapbox-terrain-v2","type":"vector"}},"sprite":"mapbox://sprites/raychaser/cjxjv17d741bz1cs34i567d73/ayuihl2d38ufkjhmu0pwx0cto","glyphs":"mapbox://fonts/raychaser/{fontstack}/{range}.pbf","layers":[{"id":"land","type":"background","layout":{},"paint":{"background-color":["interpolate",["linear"],["zoom"],11,"hsl(35, 32%, 91%)",13,"hsl(35, 12%, 89%)"]}},{"id":"landcover","type":"fill","source":"composite","source-layer":"landcover","maxzoom":12,"layout":{},"paint":{"fill-color":["match",["get","class"],"snow","hsl(0, 0%, 100%)","hsl(75, 62%, 81%)"],"fill-opacity":["interpolate",["exponential",1.5],["zoom"],2,0.3,12,0],"fill-antialias":false}},{"id":"national-park","type":"fill","source":"composite","source-layer":"landuse_overlay","minzoom":5,"filter":["==",["get","class"],"national_park"],"layout":{},"paint":{"fill-color":"hsl(100, 58%, 76%)","fill-opacity":["interpolate",["linear"],["zoom"],5,0,6,0.75,10,0.35]}},{"id":"national_park-tint-band","type":"line","source":"composite","source-layer":"landuse_overlay","minzoom":9,"filter":["==",["get","class"],"national_park"],"layout":{"line-cap":"round"},"paint":{"line-color":"hsl(100, 62%, 74%)","line-width":["interpolate",["exponential",1.4],["zoom"],9,1,14,8],"line-offset":["interpolate",["exponential",1.4],["zoom"],9,0,14,-2.5],"line-opacity":["interpolate",["linear"],["zoom"],9,0,10,0.75],"line-blur":3}},{"id":"landuse","type":"fill","source":"composite","source-layer":"landuse","minzoom":5,"filter":["match",["get","class"],["park","airport","cemetery","glacier","hospital","pitch","sand","school","agriculture","wood","grass","scrub"],true,false],"layout":{},"paint":{"fill-color":["interpolate",["linear"],["zoom"],15,["match",["get","class"],"park",["match",["get","type"],["garden","playground","zoo"],"hsl(100, 59%, 81%)","hsl(100, 58%, 76%)"],"airport","hsl(230, 15%, 86%)","cemetery","hsl(75, 37%, 81%)","glacier","hsl(196, 72%, 93%)","hospital","hsl(340, 37%, 87%)","pitch","hsl(100, 57%, 72%)","sand","hsl(60, 46%, 87%)","school","hsl(50, 47%, 81%)","agriculture","hsl(75, 37%, 81%)",["wood","grass","scrub"],"hsl(75, 41%, 74%)","hsla(0, 0%, 0%, 0)"],16,["match",["get","class"],"park",["match",["get","type"],["garden","playground","zoo"],"hsl(100, 59%, 81%)","hsl(100, 58%, 76%)"],"airport","hsl(230, 29%, 89%)","cemetery","hsl(75, 37%, 81%)","glacier","hsl(196, 72%, 93%)","hospital","hsl(340, 63%, 89%)","pitch","hsl(100, 57%, 72%)","sand","hsl(60, 46%, 87%)","school","hsl(50, 63%, 84%)","agriculture","hsl(75, 37%, 81%)",["wood","grass","scrub"],"hsl(75, 41%, 74%)","hsla(0, 0%, 0%, 0)"]],"fill-opacity":["interpolate",["linear"],["zoom"],5,0,6,["match",["get","class"],["agriculture","wood","grass","scrub"],0,"glacier",0.5,1],15,["match",["get","class"],"agriculture",0.75,["wood","glacier"],0.5,"grass",0.4,"scrub",0.2,1]]}},{"id":"pitch-outline","type":"line","source":"composite","source-layer":"landuse","minzoom":15,"filter":["==",["get","class"],"pitch"],"layout":{},"paint":{"line-color":"hsl(75, 57%, 84%)"}},{"id":"waterway-shadow","type":"line","source":"composite","source-layer":"waterway","minzoom":8,"layout":{"line-cap":["step",["zoom"],"butt",11,"round"],"line-join":"round"},"paint":{"line-color":"hsl(215, 84%, 69%)","line-width":["interpolate",["exponential",1.3],["zoom"],9,["match",["get","class"],["canal","river"],0.1,0],20,["match",["get","class"],["canal","river"],8,3]],"line-translate":["interpolate",["exponential",1.2],["zoom"],7,["literal",[0,0]],16,["literal",[-1,-1]]],"line-translate-anchor":"viewport","line-opacity":["interpolate",["linear"],["zoom"],8,0,8.5,1]}},{"id":"water-shadow","type":"fill","source":"composite","source-layer":"water","layout":{},"paint":{"fill-color":"hsl(215, 84%, 69%)","fill-translate":["interpolate",["exponential",1.2],["zoom"],7,["literal",[0,0]],16,["literal",[-1,-1]]],"fill-translate-anchor":"viewport"}},{"id":"waterway","type":"line","source":"composite","source-layer":"waterway","minzoom":8,"layout":{"line-cap":["step",["zoom"],"butt",11,"round"],"line-join":"round"},"paint":{"line-color":"hsl(205, 87%, 76%)","line-width":["interpolate",["exponential",1.3],["zoom"],9,["match",["get","class"],["canal","river"],0.1,0],20,["match",["get","class"],["canal","river"],8,3]],"line-opacity":["interpolate",["linear"],["zoom"],8,0,8.5,1]}},{"id":"water","type":"fill","source":"composite","source-layer":"water","layout":{},"paint":{"fill-color":"hsl(196, 80%, 70%)"}},{"id":"wetland","type":"fill","source":"composite","source-layer":"landuse_overlay","minzoom":5,"filter":["match",["get","class"],["wetland","wetland_noveg"],true,false],"paint":{"fill-color":"hsl(185, 43%, 74%)","fill-opacity":["interpolate",["linear"],["zoom"],10,0.25,10.5,0.15]}},{"id":"wetland-pattern","type":"fill","source":"composite","source-layer":"landuse_overlay","minzoom":5,"filter":["match",["get","class"],["wetland","wetland_noveg"],true,false],"paint":{"fill-color":"hsl(185, 43%, 74%)","fill-opacity":["interpolate",["linear"],["zoom"],10,0,10.5,1],"fill-pattern":"wetland","fill-translate-anchor":"viewport"}},{"id":"hillshade","type":"fill","source":"composite","source-layer":"hillshade","maxzoom":16,"layout":{},"paint":{"fill-color":["match",["get","class"],"shadow","hsl(56, 59%, 22%)","hsl(0, 0%, 100%)"],"fill-opacity":["interpolate",["linear"],["zoom"],14,["match",["get","level"],[67,56],0.08,[89,78],0.07,0.15],16,0],"fill-antialias":false}},{"id":"contour-line","type":"line","source":"composite","source-layer":"contour","minzoom":11,"filter":["!=",["get","index"],-1],"layout":{},"paint":{"line-opacity":["interpolate",["linear"],["zoom"],11,["match",["get","index"],[1,2],0.15,0.25],12,["match",["get","index"],[1,2],0.3,0.5]],"line-color":"hsl(100, 100%, 20%)","line-width":["interpolate",["linear"],["zoom"],13,["match",["get","index"],[1,2],0.5,0.6],16,["match",["get","index"],[1,2],0.8,1.2]],"line-offset":["interpolate",["linear"],["zoom"],13,["match",["get","index"],[1,2],1,0.6],16,["match",["get","index"],[1,2],1.6,1.2]]}},{"id":"land-structure-polygon","type":"fill","source":"composite","source-layer":"structure","minzoom":13,"filter":["all",["==",["geometry-type"],"Polygon"],["==",["get","class"],"land"]],"layout":{},"paint":{"fill-color":"hsl(35, 12%, 89%)"}},{"id":"land-structure-line","type":"line","source":"composite","source-layer":"structure","minzoom":13,"filter":["all",["==",["geometry-type"],"LineString"],["==",["get","class"],"land"]],"layout":{"line-cap":"round"},"paint":{"line-width":["interpolate",["exponential",1.99],["zoom"],14,0.75,20,40],"line-color":"hsl(35, 12%, 89%)"}},{"id":"aeroway-polygon","type":"fill","source":"composite","source-layer":"aeroway","minzoom":11,"filter":["all",["==",["geometry-type"],"Polygon"],["match",["get","type"],["runway","taxiway","helipad"],true,false]],"layout":{},"paint":{"fill-color":["interpolate",["linear"],["zoom"],15,"hsl(230, 23%, 82%)",16,"hsl(230, 37%, 84%)"],"fill-opacity":["interpolate",["linear"],["zoom"],11,0,11.5,1]}},{"id":"aeroway-line","type":"line","source":"composite","source-layer":"aeroway","minzoom":9,"filter":["==",["geometry-type"],"LineString"],"layout":{},"paint":{"line-color":["interpolate",["linear"],["zoom"],15,"hsl(230, 23%, 82%)",16,"hsl(230, 37%, 84%)"],"line-width":["interpolate",["exponential",1.5],["zoom"],9,["match",["get","type"],"runway",1,"taxiway",0.5,0.5],18,["match",["get","type"],"runway",80,"taxiway",20,20]]}},{"id":"building-outline","type":"line","source":"composite","source-layer":"building","minzoom":15,"filter":["all",["!=",["get","type"],"building:part"],["==",["get","underground"],"false"]],"layout":{},"paint":{"line-color":"hsl(35, 6%, 79%)","line-width":["interpolate",["exponential",1.5],["zoom"],15,0.75,20,3],"line-opacity":["interpolate",["linear"],["zoom"],15,0,16,1]}},{"id":"building","type":"fill","source":"composite","source-layer":"building","minzoom":15,"filter":["all",["!=",["get","type"],"building:part"],["==",["get","underground"],"false"]],"layout":{},"paint":{"fill-color":["interpolate",["linear"],["zoom"],15,"hsl(35, 11%, 86%)",16,"hsl(35, 8%, 85%)"],"fill-opacity":["interpolate",["linear"],["zoom"],15,0,16,1],"fill-outline-color":"hsl(35, 6%, 79%)"}},{"id":"tunnel-street-minor-low","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["step",["zoom"],["match",["get","class"],["street","street_limited","track","primary_link"],true,false],14,["match",["get","class"],["street","street_limited","track","primary_link","secondary_link","tertiary_link","service"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-color":"hsl(0, 0%, 100%)","line-opacity":["step",["zoom"],1,14,0]}},{"id":"tunnel-street-minor-case","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["step",["zoom"],["match",["get","class"],["street","street_limited","track","primary_link"],true,false],14,["match",["get","class"],["street","street_limited","track","primary_link","secondary_link","tertiary_link","service"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":["match",["get","class"],"track","hsl(50, 100%, 40%)","hsl(230, 19%, 75%)"],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-opacity":["step",["zoom"],["match",["get","class"],"track",1,0],14,1],"line-dasharray":[3,3]}},{"id":"tunnel-primary-secondary-tertiary-case","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["primary","secondary","tertiary"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,["match",["get","class"],"primary",1,["secondary","tertiary"],0.75,0.75],18,2],"line-color":"hsl(230, 19%, 75%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,["match",["get","class"],"primary",0.75,["secondary","tertiary"],0.1,0.1],18,["match",["get","class"],"primary",32,["secondary","tertiary"],26,26]],"line-dasharray":[3,3]}},{"id":"tunnel-major-link-case","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway_link","trunk_link"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsl(0, 0%, 100%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-dasharray":[3,3]}},{"id":"tunnel-motorway-trunk-case","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway","trunk"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsl(0, 0%, 100%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-dasharray":[3,3]}},{"id":"tunnel-construction","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","class"],"construction"],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,2,18,18],"line-color":"hsl(230, 24%, 87%)","line-dasharray":["step",["zoom"],["literal",[0.4,0.8]],15,["literal",[0.3,0.6]],16,["literal",[0.2,0.3]],17,["literal",[0.2,0.25]],18,["literal",[0.15,0.15]]]}},{"id":"tunnel-path-smooth-rough","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","class"],"path"],["step",["zoom"],["match",["get","type"],["bridleway","footway","path","hiking","mountain_bike","trail"],true,false],16,["match",["get","type"],["bridleway","footway","path","hiking","mountain_bike","trail","corridor","sidewalk","crossing"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(35, 26%, 95%)","line-dasharray":["step",["zoom"],["literal",[4,0.4]],15,["literal",[3,0.4]],16,["literal",[3,0.35]]]}},{"id":"tunnel-path-cycleway-piste","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","class"],"path"],["match",["get","type"],["cycleway","piste"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(35, 26%, 95%)"}},{"id":"tunnel-steps","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","class"],"steps"],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,16,1.6,18,6],"line-color":"hsl(35, 26%, 95%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[0.3,0.3]]]}},{"id":"tunnel-major-link","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway_link","trunk_link"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"motorway_link","hsl(26, 74%, 81%)","trunk_link","hsl(46, 77%, 78%)","hsl(46, 77%, 78%)"]}},{"id":"tunnel-pedestrian","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","class"],"pedestrian"],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"hsl(0, 0%, 100%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.5,0.4]],16,["literal",[1,0.2]]]}},{"id":"tunnel-street-minor","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["step",["zoom"],["match",["get","class"],["street","street_limited","track","primary_link"],true,false],14,["match",["get","class"],["street","street_limited","track","primary_link","secondary_link","tertiary_link","service"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-color":["match",["get","class"],"street_limited","hsl(35, 14%, 93%)","hsl(0, 0%, 100%)"],"line-opacity":["step",["zoom"],["match",["get","class"],"track",1,0],14,1]}},{"id":"tunnel-primary-secondary-tertiary","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["primary","secondary","tertiary"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,["match",["get","class"],"primary",0.75,["secondary","tertiary"],0.1,0.1],18,["match",["get","class"],"primary",32,["secondary","tertiary"],26,26]],"line-color":"hsl(0, 0%, 100%)"}},{"id":"tunnel-oneway-arrow-blue","type":"symbol","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":15,"filter":["all",["==",["get","structure"],"tunnel"],["==",["get","oneway"],"true"],["step",["zoom"],["match",["get","class"],["primary","secondary","street","street_limited","tertiary"],true,false],16,["match",["get","class"],["primary","secondary","tertiary","street","street_limited","primary_link","secondary_link","tertiary_link","path","pedestrian","service","track"],true,false]]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-small",17,["match",["get","class"],["primary","secondary","tertiary","street","street_limited"],"oneway-large","oneway-small"],18,"oneway-large"],"symbol-spacing":200,"icon-rotation-alignment":"map"},"paint":{}},{"id":"tunnel-motorway-trunk","type":"line","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway","trunk"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":["match",["get","class"],"motorway","hsl(26, 74%, 81%)","trunk","hsl(46, 77%, 78%)","hsl(46, 77%, 78%)"]}},{"id":"tunnel-oneway-arrow-white","type":"symbol","metadata":{"mapbox:group":"1444855769305.6016"},"source":"composite","source-layer":"road","minzoom":16,"filter":["all",["==",["get","structure"],"tunnel"],["match",["get","class"],["motorway","motorway_link","trunk","trunk_link"],true,false],["==",["get","oneway"],"true"]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-white-small",17,"oneway-white-large"],"symbol-spacing":200},"paint":{}},{"id":"cliff","type":"line","source":"composite","source-layer":"structure","minzoom":15,"filter":["==",["get","class"],"cliff"],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-opacity":["interpolate",["linear"],["zoom"],15,0,15.25,1],"line-width":10,"line-pattern":"cliff"}},{"id":"ferry","type":"line","source":"composite","source-layer":"road","minzoom":8,"filter":["==",["get","type"],"ferry"],"layout":{"line-join":"round"},"paint":{"line-color":["interpolate",["linear"],["zoom"],15,"hsl(205, 73%, 63%)",17,"hsl(230, 73%, 63%)"],"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,20,1],"line-dasharray":["step",["zoom"],["literal",[1,0]],13,["literal",[12,4]]]}},{"id":"ferry-auto","type":"line","source":"composite","source-layer":"road","filter":["==",["get","type"],"ferry_auto"],"layout":{"line-join":"round"},"paint":{"line-color":["interpolate",["linear"],["zoom"],15,"hsl(205, 73%, 63%)",17,"hsl(230, 73%, 63%)"],"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,20,1]}},{"id":"road-path-bg","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","class"],"path"],["step",["zoom"],["!",["match",["get","type"],["steps","sidewalk","crossing"],true,false]],16,["!=",["get","type"],"steps"]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,2.5,18,7],"line-color":["match",["get","type"],"piste","hsl(230, 85%, 67%)",["corridor","crossing","sidewalk"],"hsl(230, 17%, 82%)","hsl(50, 100%, 40%)"],"line-opacity":1}},{"id":"road-steps-bg","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","type"],"steps"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,2.5,18,7],"line-color":"hsl(50, 100%, 40%)","line-opacity":0.75}},{"id":"road-pedestrian-case","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","class"],"pedestrian"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,2,18,14.5],"line-color":"hsl(230, 24%, 87%)","line-opacity":["step",["zoom"],0,14,1]}},{"id":"road-street-low","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["match",["get","class"],["street","street_limited","primary_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":"hsl(0, 0%, 100%)","line-opacity":["step",["zoom"],1,14,0]}},{"id":"road-minor-case","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["step",["zoom"],["==",["get","class"],"track"],14,["match",["get","class"],["track","secondary_link","tertiary_link","service"],true,false]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":["match",["get","class"],"track","hsl(50, 100%, 40%)","hsl(230, 24%, 87%)"],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],14,["match",["get","class"],"track",1,0.5],18,12],"line-opacity":1}},{"id":"road-street-case","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["match",["get","class"],["street","street_limited","primary_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsl(230, 24%, 87%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-opacity":["step",["zoom"],0,14,1]}},{"id":"road-secondary-tertiary-case","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","filter":["all",["match",["get","class"],["secondary","tertiary"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,0.75,18,2],"line-color":"hsl(230, 24%, 87%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.1,18,26],"line-opacity":["step",["zoom"],0,10,1]}},{"id":"road-primary-case","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","filter":["all",["==",["get","class"],"primary"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsl(230, 24%, 87%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-opacity":["step",["zoom"],0,10,1]}},{"id":"road-major-link-case","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":10,"filter":["all",["match",["get","class"],["motorway_link","trunk_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsl(0, 0%, 100%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-opacity":["step",["zoom"],0,11,1]}},{"id":"road-motorway-trunk-case","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","filter":["all",["match",["get","class"],["motorway","trunk"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsl(0, 0%, 100%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-opacity":["step",["zoom"],["match",["get","class"],"motorway",1,0],6,1]}},{"id":"road-construction","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","class"],"construction"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,2,18,18],"line-color":"hsl(230, 24%, 87%)","line-dasharray":["step",["zoom"],["literal",[0.4,0.8]],15,["literal",[0.3,0.6]],16,["literal",[0.2,0.3]],17,["literal",[0.2,0.25]],18,["literal",[0.15,0.15]]]}},{"id":"road-path-smooth","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","class"],"path"],["step",["zoom"],["match",["get","type"],["bridleway","footway","path"],true,false],16,["match",["get","type"],["bridleway","footway","path","corridor","sidewalk","crossing"],true,false]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(0, 0%, 100%)","line-dasharray":["step",["zoom"],["literal",[4,0.4]],15,["literal",[3,0.4]],16,["literal",[3,0.35]]]}},{"id":"road-path-rough","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","class"],"path"],["match",["get","type"],["hiking","mountain_bike","trail"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(0, 0%, 100%)","line-dasharray":["step",["zoom"],["literal",[4,0.4]],15,["literal",[1.75,0.4]],16,["literal",[1,0.4]],17,["literal",[1,0.35]]]}},{"id":"road-path-cycleway-piste","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","class"],"path"],["match",["get","type"],["cycleway","piste"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(0, 0%, 100%)"}},{"id":"road-steps","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","type"],"steps"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,16,1.6,18,6],"line-color":"hsl(0, 0%, 100%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[0.3,0.3]]]}},{"id":"road-major-link","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":10,"filter":["all",["match",["get","class"],["motorway_link","trunk_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"motorway_link","hsl(26, 67%, 70%)","trunk_link","hsl(46, 69%, 68%)","hsl(46, 69%, 68%)"]}},{"id":"road-pedestrian","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","class"],"pedestrian"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"hsl(0, 0%, 100%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.5,0.4]],16,["literal",[1,0.2]]]}},{"id":"road-pedestrian-polygon-fill","type":"fill","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["geometry-type"],"Polygon"],["match",["get","class"],["path","pedestrian"],true,false],["match",["get","structure"],["none","ford"],true,false]],"layout":{},"paint":{"fill-color":["interpolate",["linear"],["zoom"],16,"hsl(230, 16%, 94%)",16.25,"hsl(230, 50%, 98%)"],"fill-outline-color":"hsl(230, 26%, 88%)"}},{"id":"road-pedestrian-polygon-pattern","type":"fill","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["geometry-type"],"Polygon"],["match",["get","class"],["path","pedestrian"],true,false],["match",["get","structure"],["none","ford"],true,false]],"layout":{},"paint":{"fill-color":"hsl(0, 0%, 100%)","fill-outline-color":"hsl(35, 10%, 83%)","fill-pattern":"pedestrian-polygon","fill-opacity":["interpolate",["linear"],["zoom"],16,0,16.25,1]}},{"id":"road-polygon","type":"fill","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["geometry-type"],"Polygon"],["match",["get","class"],["primary","secondary","tertiary","primary_link","secondary_link","tertiary_link","street","street_limited","track","service"],true,false],["match",["get","structure"],["none","ford"],true,false]],"layout":{},"paint":{"fill-color":"hsl(0, 0%, 100%)","fill-outline-color":"#d6d9e6"}},{"id":"road-minor","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["step",["zoom"],["==",["get","class"],"track"],14,["match",["get","class"],["track","secondary_link","tertiary_link","service"],true,false]],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,["match",["get","class"],"track",1,0.5],18,12],"line-color":"hsl(0, 0%, 100%)","line-opacity":1}},{"id":"road-street","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":11,"filter":["all",["match",["get","class"],["street","street_limited","primary_link"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"street_limited","hsl(35, 14%, 93%)","hsl(0, 0%, 100%)"],"line-opacity":["step",["zoom"],0,14,1]}},{"id":"road-secondary-tertiary","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","filter":["all",["match",["get","class"],["secondary","tertiary"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.1,18,26],"line-color":"hsl(0, 0%, 100%)"}},{"id":"road-primary","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","filter":["all",["==",["get","class"],"primary"],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":"hsl(0, 0%, 100%)"}},{"id":"road-oneway-arrow-blue","type":"symbol","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":15,"filter":["all",["==",["get","oneway"],"true"],["step",["zoom"],["match",["get","class"],["primary","secondary","tertiary","street","street_limited"],true,false],16,["match",["get","class"],["primary","secondary","tertiary","street","street_limited","primary_link","secondary_link","tertiary_link","path","pedestrian","service","track"],true,false]],["match",["get","structure"],["none","ford"],true,false]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-small",17,["match",["get","class"],["primary","secondary","tertiary","street","street_limited"],"oneway-large","oneway-small"],18,"oneway-large"],"symbol-spacing":200,"icon-rotation-alignment":"map"},"paint":{}},{"id":"road-motorway-trunk","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","filter":["all",["match",["get","class"],["motorway","trunk"],true,false],["match",["get","structure"],["none","ford"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":["step",["zoom"],["match",["get","class"],"motorway","hsl(26, 87%, 62%)","trunk","hsl(0, 0%, 100%)","hsl(0, 0%, 100%)"],6,["match",["get","class"],"motorway","hsl(26, 87%, 62%)","trunk","hsl(46, 80%, 60%)","hsl(46, 80%, 60%)"],9,["match",["get","class"],"motorway","hsl(26, 67%, 70%)","trunk","hsl(46, 69%, 68%)","hsl(46, 69%, 68%)"]]}},{"id":"road-rail","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["match",["get","class"],["major_rail","minor_rail"],true,false],["match",["get","structure"],["none","ford"],true,false]],"layout":{"line-join":"round"},"paint":{"line-color":["interpolate",["linear"],["zoom"],13,"hsl(50, 17%, 82%)",16,"hsl(230, 10%, 74%)"],"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,20,1]}},{"id":"road-rail-tracks","type":"line","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["match",["get","class"],["major_rail","minor_rail"],true,false],["match",["get","structure"],["none","ford"],true,false]],"layout":{"line-join":"round"},"paint":{"line-color":["interpolate",["linear"],["zoom"],13,"hsl(50, 17%, 82%)",16,"hsl(230, 10%, 74%)"],"line-width":["interpolate",["exponential",1.5],["zoom"],14,4,20,8],"line-dasharray":[0.1,15],"line-opacity":["interpolate",["linear"],["zoom"],13.75,0,14,1]}},{"id":"level-crossing","type":"symbol","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":16,"filter":["==",["get","class"],"level_crossing"],"layout":{"icon-image":"level-crossing","icon-allow-overlap":true},"paint":{}},{"id":"road-oneway-arrow-white","type":"symbol","metadata":{"mapbox:group":"1444855786460.0557"},"source":"composite","source-layer":"road","minzoom":16,"filter":["all",["==",["get","oneway"],"true"],["match",["get","class"],["motorway","trunk","motorway_link","trunk_link"],true,false],["match",["get","structure"],["none","ford"],true,false]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-white-small",17,"oneway-white-large"],"symbol-spacing":200},"paint":{}},{"id":"golf-hole-line","type":"line","source":"composite","source-layer":"road","minzoom":16,"filter":["==",["get","class"],"golf"],"layout":{},"paint":{"line-color":"hsl(100, 47%, 58%)"}},{"id":"gate-fence-hedge","type":"line","source":"composite","source-layer":"structure","minzoom":16,"filter":["match",["get","class"],["gate","fence","hedge"],true,false],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":["match",["get","class"],"hedge","hsl(100, 59%, 70%)","hsl(46, 17%, 76%)"],"line-width":{"base":1,"stops":[[16,1],[20,3]]},"line-opacity":["match",["get","class"],"gate",0.5,1],"line-dasharray":[1,2,5,2,1,2]}},{"id":"bridge-path-bg","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"path"],["!=",["get","type"],"steps"],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,2.5,18,7],"line-color":["match",["get","type"],"piste","hsl(230, 85%, 67%)",["corridor","crossing","sidewalk"],"hsl(230, 17%, 82%)","hsl(50, 100%, 40%)"],"line-opacity":["step",["zoom"],0,14,1]}},{"id":"bridge-steps-bg","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","type"],"steps"],["==",["get","structure"],"bridge"],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,2.5,18,7],"line-color":"hsl(50, 100%, 40%)","line-opacity":0.75}},{"id":"bridge-pedestrian-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"pedestrian"],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,2,18,14.5],"line-color":"hsl(230, 24%, 87%)","line-opacity":["step",["zoom"],0,14,1]}},{"id":"bridge-street-minor-low","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["step",["zoom"],["match",["get","class"],["street","street_limited","track","primary_link"],true,false],14,["match",["get","class"],["street","street_limited","track","primary_link","secondary_link","tertiary_link","service"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-color":"hsl(0, 0%, 100%)","line-opacity":["step",["zoom"],1,14,0]}},{"id":"bridge-street-minor-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["step",["zoom"],["match",["get","class"],["street","street_limited","track","primary_link"],true,false],14,["match",["get","class"],["street","street_limited","track","primary_link","secondary_link","tertiary_link","service"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":["match",["get","class"],"track","hsl(50, 100%, 40%)","hsl(230, 24%, 87%)"],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-opacity":["step",["zoom"],["match",["get","class"],"track",1,0],14,1]}},{"id":"bridge-primary-secondary-tertiary-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["primary","secondary","tertiary"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,["match",["get","class"],"primary",1,["secondary","tertiary"],0.75,0.75],18,2],"line-color":"hsl(230, 24%, 87%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,["match",["get","class"],"primary",0.75,["secondary","tertiary"],0.1,0.1],18,["match",["get","class"],"primary",32,["secondary","tertiary"],26,26]],"line-opacity":["step",["zoom"],0,10,1]}},{"id":"bridge-major-link-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway_link","trunk_link"],true,false],["<=",["get","layer"],1],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsl(0, 0%, 100%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18]}},{"id":"bridge-motorway-trunk-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway","trunk"],true,false],["<=",["get","layer"],1],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsl(0, 0%, 100%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32]}},{"id":"bridge-construction","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"construction"],["==",["geometry-type"],"LineString"]],"layout":{},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,2,18,18],"line-color":"hsl(230, 24%, 87%)","line-dasharray":["step",["zoom"],["literal",[0.4,0.8]],15,["literal",[0.3,0.6]],16,["literal",[0.2,0.3]],17,["literal",[0.2,0.25]],18,["literal",[0.15,0.15]]]}},{"id":"bridge-path-smooth-rough","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"path"],["step",["zoom"],["match",["get","type"],["bridleway","footway","path","hiking","mountain_bike","trail"],true,false],16,["match",["get","type"],["bridleway","footway","path","hiking","mountain_bike","trail","corridor","sidewalk","crossing"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(0, 0%, 100%)","line-dasharray":["step",["zoom"],["literal",[4,0.4]],15,["literal",[3,0.4]],16,["literal",[3,0.35]]]}},{"id":"bridge-path-cycleway-piste","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":12,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"path"],["match",["get","type"],["cycleway","piste"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,18,4],"line-color":"hsl(0, 0%, 100%)"}},{"id":"bridge-steps","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":14,"filter":["all",["==",["get","type"],"steps"],["==",["get","structure"],"bridge"],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],15,1,16,1.6,18,6],"line-color":"hsl(0, 0%, 100%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.75,1]],16,["literal",[1,0.75]],17,["literal",[0.3,0.3]]]}},{"id":"bridge-major-link","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway_link","trunk_link"],true,false],["<=",["get","layer"],1],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"motorway_link","hsl(26, 67%, 70%)","trunk_link","hsl(46, 69%, 68%)","hsl(46, 69%, 68%)"]}},{"id":"bridge-pedestrian","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","class"],"pedestrian"],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,18,12],"line-color":"hsl(0, 0%, 100%)","line-dasharray":["step",["zoom"],["literal",[1,0]],15,["literal",[1.5,0.4]],16,["literal",[1,0.2]]]}},{"id":"bridge-street-minor","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["step",["zoom"],["match",["get","class"],["street","street_limited","track","primary_link"],true,false],14,["match",["get","class"],["street","street_limited","track","primary_link","secondary_link","tertiary_link","service"],true,false]],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,["match",["get","class"],["street","street_limited","primary_link"],2,"track",1,0.5],18,["match",["get","class"],["street","street_limited","primary_link"],18,12]],"line-color":["match",["get","class"],"street_limited","hsl(35, 14%, 93%)","hsl(0, 0%, 100%)"],"line-opacity":["step",["zoom"],0,14,1]}},{"id":"bridge-primary-secondary-tertiary","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["primary","secondary","tertiary"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,["match",["get","class"],"primary",0.75,["secondary","tertiary"],0.1,0.1],18,["match",["get","class"],"primary",32,["secondary","tertiary"],26,26]],"line-color":"hsl(0, 0%, 100%)"}},{"id":"bridge-oneway-arrow-blue","type":"symbol","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":15,"filter":["all",["==",["get","structure"],"bridge"],["==",["get","oneway"],"true"],["step",["zoom"],["match",["get","class"],["primary","secondary","tertiary","street","street_limited"],true,false],16,["match",["get","class"],["primary","secondary","tertiary","street","street_limited","primary_link","secondary_link","tertiary_link","path","pedestrian","track","service"],true,false]]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-small",17,["match",["get","class"],["primary","secondary","tertiary","street","street_limited"],"oneway-large","oneway-small"],18,"oneway-large"],"symbol-spacing":200,"icon-rotation-alignment":"map"},"paint":{}},{"id":"bridge-motorway-trunk","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway","trunk"],true,false],["<=",["get","layer"],1],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":["match",["get","class"],"motorway","hsl(26, 67%, 70%)","trunk","hsl(46, 69%, 68%)","hsl(46, 69%, 68%)"]}},{"id":"bridge-rail","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["major_rail","minor_rail"],true,false]],"layout":{"line-join":"round"},"paint":{"line-color":["interpolate",["linear"],["zoom"],13,"hsl(50, 17%, 82%)",16,"hsl(230, 10%, 74%)"],"line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,20,1]}},{"id":"bridge-rail-tracks","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["major_rail","minor_rail"],true,false]],"layout":{"line-join":"round"},"paint":{"line-color":["interpolate",["linear"],["zoom"],13,"hsl(50, 17%, 82%)",16,"hsl(230, 10%, 74%)"],"line-width":["interpolate",["exponential",1.5],["zoom"],14,4,20,8],"line-dasharray":[0.1,15],"line-opacity":["interpolate",["linear"],["zoom"],13.75,0,14,1]}},{"id":"bridge-major-link-2-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],[">=",["get","layer"],2],["match",["get","class"],["motorway_link","trunk_link"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.75,20,2],"line-color":"hsl(0, 0%, 100%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18]}},{"id":"bridge-motorway-trunk-2-case","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],[">=",["get","layer"],2],["match",["get","class"],["motorway","trunk"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,18,2],"line-color":"hsl(0, 0%, 100%)","line-gap-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32]}},{"id":"bridge-major-link-2","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],[">=",["get","layer"],2],["match",["get","class"],["motorway_link","trunk_link"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],12,0.5,14,2,18,18],"line-color":["match",["get","class"],"motorway_link","hsl(26, 67%, 70%)","trunk_link","hsl(46, 69%, 68%)","hsl(46, 69%, 68%)"]}},{"id":"bridge-motorway-trunk-2","type":"line","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":13,"filter":["all",["==",["get","structure"],"bridge"],[">=",["get","layer"],2],["match",["get","class"],["motorway","trunk"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-width":["interpolate",["exponential",1.5],["zoom"],5,0.75,18,32],"line-color":["match",["get","class"],"motorway","hsl(26, 67%, 70%)","trunk","hsl(46, 69%, 68%)","hsl(46, 69%, 68%)"]}},{"id":"bridge-oneway-arrow-white","type":"symbol","metadata":{"mapbox:group":"1444855799204.86"},"source":"composite","source-layer":"road","minzoom":16,"filter":["all",["==",["get","structure"],"bridge"],["match",["get","class"],["motorway","trunk","motorway_link","trunk_link"],true,false],["==",["get","oneway"],"true"]],"layout":{"symbol-placement":"line","icon-image":["step",["zoom"],"oneway-white-small",17,"oneway-white-large"],"symbol-spacing":200},"paint":{}},{"id":"aerialway-bg","type":"line","source":"composite","source-layer":"road","minzoom":12,"filter":["==",["get","class"],"aerialway"],"layout":{"line-join":"round"},"paint":{"line-color":"hsl(0, 0%, 100%)","line-width":["interpolate",["exponential",1.5],["zoom"],14,2.5,20,3],"line-blur":0.5}},{"id":"aerialway","type":"line","source":"composite","source-layer":"road","minzoom":12,"filter":["==",["get","class"],"aerialway"],"layout":{"line-join":"round"},"paint":{"line-color":"hsl(230, 4%, 29%)","line-width":["interpolate",["exponential",1.5],["zoom"],14,0.5,20,1]}},{"id":"admin-1-boundary-bg","type":"line","metadata":{"mapbox:group":"1444934295202.7542"},"source":"composite","source-layer":"admin","filter":["all",["==",["get","admin_level"],1],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"bevel"},"paint":{"line-color":["interpolate",["linear"],["zoom"],8,"hsl(35, 12%, 89%)",16,"hsl(230, 49%, 90%)"],"line-width":["interpolate",["linear"],["zoom"],7,3.75,12,5.5],"line-opacity":["interpolate",["linear"],["zoom"],7,0,8,0.75],"line-dasharray":[1,0],"line-translate":[0,0],"line-blur":["interpolate",["linear"],["zoom"],3,0,8,3]}},{"id":"admin-0-boundary-bg","type":"line","metadata":{"mapbox:group":"1444934295202.7542"},"source":"composite","source-layer":"admin","minzoom":1,"filter":["all",["==",["get","admin_level"],0],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{},"paint":{"line-width":["interpolate",["linear"],["zoom"],3,3.5,10,8],"line-color":["interpolate",["linear"],["zoom"],6,"hsl(35, 12%, 89%)",8,"hsl(230, 49%, 90%)"],"line-opacity":["interpolate",["linear"],["zoom"],3,0,4,0.5],"line-translate":[0,0],"line-blur":["interpolate",["linear"],["zoom"],3,0,10,2]}},{"id":"admin-1-boundary","type":"line","metadata":{"mapbox:group":"1444934295202.7542"},"source":"composite","source-layer":"admin","filter":["all",["==",["get","admin_level"],1],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"round","line-cap":"round"},"paint":{"line-dasharray":["step",["zoom"],["literal",[2,0]],7,["literal",[2,2,6,2]]],"line-width":["interpolate",["linear"],["zoom"],7,0.75,12,1.5],"line-opacity":["interpolate",["linear"],["zoom"],2,0,3,1],"line-color":["interpolate",["linear"],["zoom"],3,"hsl(230, 14%, 77%)",7,"hsl(230, 8%, 62%)"]}},{"id":"admin-0-boundary","type":"line","metadata":{"mapbox:group":"1444934295202.7542"},"source":"composite","source-layer":"admin","minzoom":1,"filter":["all",["==",["get","admin_level"],0],["==",["get","disputed"],"false"],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"round","line-cap":"round"},"paint":{"line-color":"hsl(230, 8%, 51%)","line-width":["interpolate",["linear"],["zoom"],3,0.5,10,2]}},{"id":"admin-0-boundary-disputed","type":"line","metadata":{"mapbox:group":"1444934295202.7542"},"source":"composite","source-layer":"admin","minzoom":1,"filter":["all",["==",["get","disputed"],"true"],["==",["get","admin_level"],0],["==",["get","maritime"],"false"],["match",["get","worldview"],["all","US"],true,false]],"layout":{"line-join":"round"},"paint":{"line-dasharray":[1.5,1.5],"line-color":"hsl(230, 8%, 51%)","line-width":["interpolate",["linear"],["zoom"],3,0.5,10,2]}},{"id":"contour-label","type":"symbol","source":"composite","source-layer":"contour","minzoom":11,"filter":["any",["==",["get","index"],10],["==",["get","index"],5]],"layout":{"text-field":"{ele} m","symbol-placement":"line","text-pitch-alignment":"viewport","text-max-angle":25,"text-padding":5,"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-size":["interpolate",["linear"],["zoom"],15,9.5,20,12]},"paint":{"text-color":"hsl(100, 60%, 28%)","text-halo-width":1,"text-halo-color":"hsla(0, 0%, 100%, 0.5)"}},{"id":"building-number-label","type":"symbol","source":"composite","source-layer":"housenum_label","minzoom":17,"layout":{"text-field":["get","house_num"],"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-padding":4,"text-max-width":7,"text-size":9.5},"paint":{"text-color":"hsl(35, 2%, 69%)","text-halo-color":"hsl(35, 8%, 85%)","text-halo-width":0.5}},{"id":"road-label","type":"symbol","source":"composite","source-layer":"road","minzoom":10,"filter":["step",["zoom"],["match",["get","class"],["motorway","trunk","primary","secondary","tertiary"],true,false],12,["match",["get","class"],["motorway","trunk","primary","secondary","tertiary","pedestrian","street","street_limited","track","path","aerialway"],true,false],15,["match",["get","class"],"golf",false,true]],"layout":{"text-size":["interpolate",["linear"],["zoom"],10,["match",["get","class"],["motorway","trunk","primary","secondary","tertiary"],10,["motorway_link","trunk_link","primary_link","secondary_link","tertiary_link","pedestrian","street","street_limited","track","path","aerialway"],9,6.5],18,["match",["get","class"],["motorway","trunk","primary","secondary","tertiary"],16,["motorway_link","trunk_link","primary_link","secondary_link","tertiary_link","pedestrian","street","street_limited","path"],14,13]],"text-max-angle":30,"text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"symbol-placement":"line","text-padding":1,"text-rotation-alignment":"map","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]],"text-letter-spacing":0.01},"paint":{"text-color":["match",["get","class"],"ferry","hsl(230, 48%, 44%)","hsl(0, 0%, 0%)"],"text-halo-color":["match",["get","class"],["motorway","trunk"],"hsla(0, 0%, 100%, 0.75)","ferry","hsl(196, 80%, 70%)","hsl(0, 0%, 100%)"],"text-halo-width":1,"text-halo-blur":1}},{"id":"road-number-shield","type":"symbol","source":"composite","source-layer":"road","minzoom":6,"filter":["all",["has","reflen"],["<=",["get","reflen"],6],["step",["zoom"],["==",["geometry-type"],"Point"],11,[">",["get","len"],5000],12,[">",["get","len"],2500],13,[">",["get","len"],1000],14,true]],"layout":{"text-size":9,"icon-image":["concat",["get","shield"],"-",["to-string",["get","reflen"]]],"icon-rotation-alignment":"viewport","text-max-angle":38,"symbol-spacing":["interpolate",["linear"],["zoom"],11,150,14,200],"text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"symbol-placement":["step",["zoom"],"point",11,"line"],"text-rotation-alignment":"viewport","text-field":["get","ref"],"text-letter-spacing":0.05},"paint":{"text-color":["match",["get","shield_text_color"],"white","hsl(0, 0%, 100%)","black","hsl(230, 21%, 37%)","yellow","hsl(50, 81%, 74%)","orange","hsl(25, 73%, 63%)","blue","hsl(230, 40%, 58%)","hsl(0, 0%, 100%)"]}},{"id":"road-exit-shield","type":"symbol","source":"composite","source-layer":"motorway_junction","minzoom":14,"filter":["all",["has","reflen"],["<=",["get","reflen"],9]],"layout":{"text-field":["get","ref"],"text-size":9,"icon-image":["concat","motorway-exit-",["to-string",["get","reflen"]]],"text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"]},"paint":{"text-color":"hsl(0, 0%, 100%)","text-translate":[0,0]}},{"id":"golf-hole-label","type":"symbol","source":"composite","source-layer":"road","minzoom":16,"filter":["==",["get","class"],"golf"],"layout":{"text-field":["coalesce",["get","name_en"],["get","name"]],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-size":12},"paint":{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":0.5,"text-halo-blur":0.5,"text-color":"hsl(100, 100%, 20%)"}},{"id":"waterway-label","type":"symbol","source":"composite","source-layer":"natural_label","minzoom":13,"filter":["all",["match",["get","class"],["canal","river","stream"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-max-angle":30,"symbol-spacing":["interpolate",["linear",1],["zoom"],15,250,17,400],"text-size":["interpolate",["linear"],["zoom"],13,12,18,16],"symbol-placement":"line","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"text-color":"hsl(230, 48%, 44%)"}},{"id":"natural-line-label","type":"symbol","source":"composite","source-layer":"natural_label","minzoom":4,"filter":["all",["match",["get","class"],["glacier","landform"],true,false],["==",["geometry-type"],"LineString"],["<=",["get","filterrank"],4]],"layout":{"text-size":["step",["zoom"],["step",["get","sizerank"],18,5,12],17,["step",["get","sizerank"],18,13,12]],"text-max-angle":30,"text-field":["coalesce",["get","name_en"],["get","name"]],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"symbol-placement":"line-center","text-pitch-alignment":"viewport"},"paint":{"text-halo-width":0.5,"text-halo-color":"hsl(0, 0%, 100%)","text-halo-blur":0.5,"text-color":["step",["zoom"],["step",["get","sizerank"],"hsl(26, 20%, 42%)",5,"hsl(26, 25%, 32%)"],17,["step",["get","sizerank"],"hsl(26, 20%, 42%)",13,"hsl(26, 25%, 32%)"]]}},{"id":"natural-point-label","type":"symbol","source":"composite","source-layer":"natural_label","minzoom":4,"filter":["all",["match",["get","class"],["dock","glacier","landform","water_feature","wetland"],true,false],["==",["geometry-type"],"Point"],["<=",["get","filterrank"],4]],"layout":{"text-size":["step",["zoom"],["step",["get","sizerank"],18,5,12],17,["step",["get","sizerank"],18,13,12]],"icon-image":["step",["zoom"],["concat",["get","maki"],"-11"],15,["concat",["get","maki"],"-15"]],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-offset":["step",["zoom"],["step",["get","sizerank"],["literal",[0,0]],5,["literal",[0,0.75]]],17,["step",["get","sizerank"],["literal",[0,0]],13,["literal",[0,0.75]]]],"text-anchor":["step",["zoom"],["step",["get","sizerank"],"center",5,"top"],17,["step",["get","sizerank"],"center",13,"top"]],"text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"icon-opacity":["step",["zoom"],["step",["get","sizerank"],0,5,1],17,["step",["get","sizerank"],0,13,1]],"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":0.5,"text-halo-blur":0.5,"text-color":["step",["zoom"],["step",["get","sizerank"],"hsl(26, 20%, 42%)",5,"hsl(26, 25%, 32%)"],17,["step",["get","sizerank"],"hsl(26, 20%, 42%)",13,"hsl(26, 25%, 32%)"]]}},{"id":"water-line-label","type":"symbol","source":"composite","source-layer":"natural_label","filter":["all",["match",["get","class"],["bay","ocean","reservoir","sea","water"],true,false],["==",["geometry-type"],"LineString"]],"layout":{"text-size":["interpolate",["linear"],["zoom"],7,["step",["get","sizerank"],24,6,18,12,12],10,["step",["get","sizerank"],18,9,12],18,["step",["get","sizerank"],18,9,16]],"text-max-angle":30,"text-letter-spacing":["match",["get","class"],"ocean",0.25,["sea","bay"],0.15,0],"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"symbol-placement":"line-center","text-pitch-alignment":"viewport","text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"text-color":["match",["get","class"],["bay","ocean","sea"],"hsl(205, 84%, 88%)","hsl(230, 48%, 44%)"]}},{"id":"water-point-label","type":"symbol","source":"composite","source-layer":"natural_label","filter":["all",["match",["get","class"],["bay","ocean","reservoir","sea","water"],true,false],["==",["geometry-type"],"Point"]],"layout":{"text-line-height":1.3,"text-size":["interpolate",["linear"],["zoom"],7,["step",["get","sizerank"],24,6,18,12,12],10,["step",["get","sizerank"],18,9,12]],"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],"text-field":["coalesce",["get","name_en"],["get","name"]],"text-letter-spacing":["match",["get","class"],"ocean",0.25,["bay","sea"],0.15,0.01],"text-max-width":["match",["get","class"],"ocean",4,"sea",5,["bay","water"],7,10]},"paint":{"text-color":["match",["get","class"],["bay","ocean","sea"],"hsl(205, 84%, 88%)","hsl(230, 48%, 44%)"]}},{"id":"poi-label","type":"symbol","source":"composite","source-layer":"poi_label","minzoom":6,"filter":["let","densityByClass",["match",["get","class"],["food_and_drink_stores","historic","landmark","medical","motorist"],3,["park_like","sport_and_leisure","visitor_amenities"],4,2],["<=",["get","filterrank"],["case",["<",0,["var","densityByClass"]],["+",["step",["zoom"],0,16,1,17,2],["var","densityByClass"]],["var","densityByClass"]]]],"layout":{"text-size":["step",["zoom"],["step",["get","sizerank"],18,5,12],17,["step",["get","sizerank"],18,13,12]],"icon-image":["step",["zoom"],["concat",["get","maki"],"-11"],15,["concat",["get","maki"],"-15"]],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-offset":["step",["zoom"],["step",["get","sizerank"],["literal",[0,0]],5,["literal",[0,0.75]]],17,["step",["get","sizerank"],["literal",[0,0]],13,["literal",[0,0.75]]]],"text-anchor":["step",["zoom"],["step",["get","sizerank"],"center",5,"top"],17,["step",["get","sizerank"],"center",13,"top"]],"text-field":["coalesce",["get","name_en"],["get","name"]]},"paint":{"icon-opacity":["step",["zoom"],["step",["get","sizerank"],0,5,1],17,["step",["get","sizerank"],0,13,1]],"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":0.5,"text-halo-blur":0.5,"text-color":["step",["zoom"],["step",["get","sizerank"],["match",["get","class"],"food_and_drink","hsl(22, 55%, 55%)","park_like","hsl(100, 45%, 37%)","education","hsl(51, 40%, 40%)","medical","hsl(340, 30%, 52%)","hsl(26, 20%, 42%)"],5,["match",["get","class"],"food_and_drink","hsl(22, 85%, 38%)","park_like","hsl(100, 100%, 20%)","education","hsl(51, 100%, 20%)","medical","hsl(340, 39%, 42%)","hsl(26, 25%, 32%)"]],17,["step",["get","sizerank"],["match",["get","class"],"food_and_drink","hsl(22, 55%, 55%)","park_like","hsl(100, 45%, 37%)","education","hsl(51, 40%, 40%)","medical","hsl(340, 30%, 52%)","hsl(26, 20%, 42%)"],13,["match",["get","class"],"food_and_drink","hsl(22, 85%, 38%)","park_like","hsl(100, 100%, 20%)","education","hsl(51, 100%, 20%)","medical","hsl(340, 39%, 42%)","hsl(26, 25%, 32%)"]]]}},{"id":"transit-label","type":"symbol","source":"composite","source-layer":"transit_stop_label","minzoom":12,"filter":["step",["zoom"],["all",["match",["get","mode"],["rail","metro_rail"],true,false],["!=",["get","stop_type"],"entrance"]],15,["all",["match",["get","mode"],["rail","metro_rail","ferry","light_rail"],true,false],["!=",["get","stop_type"],"entrance"]],16,["all",["!=",["get","mode"],"bus"],["!=",["get","stop_type"],"entrance"]],17,["!=",["get","stop_type"],"entrance"],19,true],"layout":{"text-size":12,"icon-image":["get","network"],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-justify":["match",["get","stop_type"],"entrance","left","center"],"text-offset":["match",["get","stop_type"],"entrance",["literal",[1,0]],["literal",[0,0.8]]],"text-anchor":["match",["get","stop_type"],"entrance","left","top"],"text-field":["step",["zoom"],"",14,["match",["get","mode"],["rail","metro_rail"],["coalesce",["get","name_en"],["get","name"]],""],16,["match",["get","mode"],["bus","bicycle"],"",["coalesce",["get","name_en"],["get","name"]]],18,["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.01,"text-max-width":["match",["get","stop_type"],"entrance",15,9]},"paint":{"text-halo-color":"hsl(0, 0%, 100%)","text-color":["match",["get","network"],"entrance","hsl(230, 48%, 44%)","tokyo-metro","hsl(180, 50%, 30%)","mexico-city-metro","hsl(25, 100%, 40%)",["barcelona-metro","delhi-metro","hong-kong-mtr","milan-metro","osaka-subway"],"hsl(0, 90%, 47%)",["boston-t","washington-metro"],"hsl(0, 0%, 0%)",["chongqing-rail-transit","kiev-metro","singapore-mrt","taipei-metro"],"hsl(140, 90%, 25%)","hsl(230, 48%, 44%)"],"text-halo-blur":0.5,"text-halo-width":0.5}},{"id":"airport-label","type":"symbol","source":"composite","source-layer":"airport_label","minzoom":8,"layout":{"text-line-height":1.1,"text-size":["step",["get","sizerank"],18,9,12],"icon-image":["step",["get","sizerank"],["concat",["get","maki"],"-15"],9,["concat",["get","maki"],"-11"]],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-offset":[0,0.75],"text-rotation-alignment":"viewport","text-anchor":"top","text-field":["step",["get","sizerank"],["coalesce",["get","name_en"],["get","name"]],15,["get","ref"]],"text-letter-spacing":0.01,"text-max-width":9},"paint":{"text-color":"hsl(230, 48%, 44%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1}},{"id":"settlement-subdivision-label","type":"symbol","source":"composite","source-layer":"place_label","minzoom":10,"maxzoom":15,"filter":["all",["==",["get","class"],"settlement_subdivision"],["<=",["get","filterrank"],4]],"layout":{"text-field":["coalesce",["get","name_en"],["get","name"]],"text-transform":"uppercase","text-font":["DIN Offc Pro Regular","Arial Unicode MS Regular"],"text-letter-spacing":["match",["get","type"],"suburb",0.15,["quarter","neighborhood"],0.1,0.1],"text-max-width":7,"text-padding":3,"text-size":["interpolate",["cubic-bezier",0.5,0,1,1],["zoom"],11,["match",["get","type"],"suburb",11,["quarter","neighborhood"],10.5,10.5],15,["match",["get","type"],"suburb",17,["quarter","neighborhood"],16,16]]},"paint":{"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"text-color":"hsl(230, 29%, 35%)","text-halo-blur":0.5}},{"id":"settlement-label","type":"symbol","source":"composite","source-layer":"place_label","maxzoom":15,"filter":["all",["<=",["get","filterrank"],3],["==",["get","class"],"settlement"],["step",["zoom"],true,13,[">=",["get","symbolrank"],11],14,[">=",["get","symbolrank"],13]]],"layout":{"text-line-height":1.1,"text-size":["interpolate",["cubic-bezier",0.2,0,0.9,1],["zoom"],3,["step",["get","symbolrank"],12,9,11,10,10.5,12,9.5,14,8.5,16,6.5,17,4],15,["step",["get","symbolrank"],28,9,26,10,23,11,21,12,20,13,19,15,17]],"icon-image":["case",["==",["get","capital"],2],"border-dot-13",["step",["get","symbolrank"],"dot-11",9,"dot-10",11,"dot-9"]],"text-font":["step",["zoom"],["literal",["DIN Offc Pro Regular","Arial Unicode MS Regular"]],8,["step",["get","symbolrank"],["literal",["DIN Offc Pro Medium","Arial Unicode MS Regular"]],11,["literal",["DIN Offc Pro Regular","Arial Unicode MS Regular"]]],10,["step",["get","symbolrank"],["literal",["DIN Offc Pro Medium","Arial Unicode MS Regular"]],12,["literal",["DIN Offc Pro Regular","Arial Unicode MS Regular"]]],11,["step",["get","symbolrank"],["literal",["DIN Offc Pro Medium","Arial Unicode MS Regular"]],13,["literal",["DIN Offc Pro Regular","Arial Unicode MS Regular"]]],12,["step",["get","symbolrank"],["literal",["DIN Offc Pro Medium","Arial Unicode MS Regular"]],15,["literal",["DIN Offc Pro Regular","Arial Unicode MS Regular"]]],13,["literal",["DIN Offc Pro Medium","Arial Unicode MS Regular"]]],"text-justify":["step",["zoom"],["match",["get","text_anchor"],["bottom","top"],"center",["left","bottom-left","top-left"],"left",["right","bottom-right","top-right"],"right","center"],8,"center"],"text-offset":["step",["zoom"],["match",["get","capital"],2,["match",["get","text_anchor"],"bottom",["literal",[0,-0.3]],"bottom-left",["literal",[0.3,-0.1]],"left",["literal",[0.45,0.1]],"top-left",["literal",[0.3,0.1]],"top",["literal",[0,0.3]],"top-right",["literal",[-0.3,0.1]],"right",["literal",[-0.45,0]],"bottom-right",["literal",[-0.3,-0.1]],["literal",[0,-0.3]]],["match",["get","text_anchor"],"bottom",["literal",[0,-0.25]],"bottom-left",["literal",[0.2,-0.05]],"left",["literal",[0.4,0.05]],"top-left",["literal",[0.2,0.05]],"top",["literal",[0,0.25]],"top-right",["literal",[-0.2,0.05]],"right",["literal",[-0.4,0.05]],"bottom-right",["literal",[-0.2,-0.05]],["literal",[0,-0.25]]]],8,["literal",[0,0]]],"text-anchor":["step",["zoom"],["get","text_anchor"],8,"center"],"text-field":["coalesce",["get","name_en"],["get","name"]],"text-max-width":7},"paint":{"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"icon-opacity":["step",["zoom"],1,8,0],"text-halo-blur":1}},{"id":"state-label","type":"symbol","source":"composite","source-layer":"place_label","minzoom":3,"maxzoom":9,"filter":["==",["get","class"],"state"],"layout":{"text-size":["interpolate",["cubic-bezier",0.85,0.7,0.65,1],["zoom"],4,["step",["get","symbolrank"],10,6,9.5,7,9],9,["step",["get","symbolrank"],24,6,18,7,14]],"text-transform":"uppercase","text-font":["DIN Offc Pro Bold","Arial Unicode MS Bold"],"text-field":["step",["zoom"],["step",["get","symbolrank"],["coalesce",["get","name_en"],["get","name"]],5,["coalesce",["get","abbr"],["get","name_en"],["get","name"]]],5,["coalesce",["get","name_en"],["get","name"]]],"text-letter-spacing":0.15,"text-max-width":6},"paint":{"text-color":"hsl(0, 0%, 0%)","text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1}},{"id":"country-label","type":"symbol","source":"composite","source-layer":"place_label","minzoom":1,"maxzoom":10,"filter":["==",["get","class"],"country"],"layout":{"text-line-height":1.1,"text-size":["interpolate",["cubic-bezier",0.2,0,0.7,1],["zoom"],1,["step",["get","symbolrank"],11,4,9,5,8],9,["step",["get","symbolrank"],28,4,22,5,21]],"icon-image":"dot-11","text-font":["DIN Offc Pro Medium","Arial Unicode MS Regular"],"text-justify":["step",["zoom"],["match",["get","text_anchor"],["bottom","top"],"center",["left","bottom-left","top-left"],"left",["right","bottom-right","top-right"],"right","center"],7,"center"],"text-offset":["step",["zoom"],["match",["get","text_anchor"],"bottom",["literal",[0,-0.25]],"bottom-left",["literal",[0.2,-0.05]],"left",["literal",[0.4,0.05]],"top-left",["literal",[0.2,0.05]],"top",["literal",[0,0.25]],"top-right",["literal",[-0.2,0.05]],"right",["literal",[-0.4,0.05]],"bottom-right",["literal",[-0.2,-0.05]],["literal",[0,-0.25]]],7,["literal",[0,0]]],"text-anchor":["step",["zoom"],["coalesce",["get","text_anchor"],"center"],7,"center"],"text-field":["coalesce",["get","name_en"],["get","name"]],"text-max-width":6},"paint":{"icon-opacity":["step",["zoom"],["case",["has","text_anchor"],1,0],7,0],"text-color":"hsl(0, 0%, 0%)","text-halo-color":["interpolate",["linear"],["zoom"],2,"rgba(255,255,255,0.75)",3,"hsl(0, 0%, 100%)"],"text-halo-width":1.25}}],"created":"2019-07-01T04:05:17.166Z","id":"cjxjv17d741bz1cs34i567d73","modified":"2019-07-01T04:05:41.650Z","owner":"raychaser","visibility":"private","draft":false}')},56:function(e,t,a){"use strict";a.r(t),a.d(t,"getWholeSeriesUpdate",(function(){return P})),a.d(t,"getUserUpdate",(function(){return T})),a.d(t,"getWholeSeriesPhotoUpdate",(function(){return I})),a.d(t,"allSeriesUpdate",(function(){return z})),a.d(t,"allSeriesPhotoUpdate",(function(){return _})),a.d(t,"userSeriesUpdate",(function(){return R})),a.d(t,"feedUpdate",(function(){return D})),a.d(t,"watchUpdate",(function(){return L})),a.d(t,"_seriesSummaryFragmentUpdate",(function(){return M}));var r=a(346),n=a(25),o=a(16),i=a(12),l=a(171),c=a.n(l),s=a(43),u=a.n(s),p=a(4),d=a.n(p);function m(){var e=Object(r.a)(["\n      fragment myUserWatching on User {\n        watching\n        __typename\n      }\n    "]);return m=function(){return e},e}function g(){var e=Object(r.a)(["\n      fragment myWatchers on Series {\n        watchers\n        __typename\n      }\n    "]);return g=function(){return e},e}function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b=i.graphqlAPI.queries,y=b.getWholeSeries,w=b.allSeries,v=b.userSeries,O=b.getMyFeed,x=b.getUser,E=i.graphqlAPI.fragments,S=E.seriesSummaryKeys,k=E.photoSummaryKeys,j=E.seriesSummaryFragment,C=E.feedSeriesSummaryKeys,P=function(e,t){var a={id:t.id},r=y,n={series:{}};try{var o=e.readQuery({query:r,variables:a});n=u.a.cloneDeep(o)}catch(i){d.a.info("updateQueries::getWholeSeriesUpdate readQuery failed (but that's fine)",{newData:n,seriesDelta:t})}try{n.series=h({},n.series,{},t),e.writeQuery({query:r,variables:a,data:n}),d.a.info("updateQueries::getWholeSeriesUpdate DONE")}catch(i){d.a.error("updateQueries::getWholeSeriesUpdate writeQuery failed",{newData:n,seriesDelta:t},i)}},T=function(e,t){var a={id:t.id},r=x,n={user:{}};try{var o=e.readQuery({query:r,variables:a});n=u.a.cloneDeep(o)}catch(i){d.a.info("updateQueries::getUserUpdate readQuery failed (but that's fine)",{newData:n,userDelta:t})}try{n.user=h({},n.user,{},t),e.writeQuery({query:r,variables:a,data:n}),d.a.info("updateQueries::getUserUpdate DONE",n)}catch(i){d.a.error("updateQueries::getUserUpdate writeQuery failed",{newData:n,userDelta:t},i)}},I=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={id:t.seriesId},o=y;try{var i=e.readQuery({query:o,variables:r}),l=u.a.cloneDeep(i);if(a)l.series.photos=l.series.photos.filter((function(e){return e.id!==t.id}));else{var c=l.series.photos.findIndex((function(e){return e.id===t.id}));c>-1?(l.series.photos=Object(n.a)(l.series.photos),l.series.photos[c]=t):l.series.photos=[].concat(Object(n.a)(l.series.photos),[t])}e.writeQuery({query:o,variables:r,data:l}),d.a.info("updateQueries::getWholeSeriesPhotoUpdate DONE")}catch(s){d.a.error("updateQueries::getWholeSeriesPhotoUpdate WriteQuery failed",{photo:t,remove:a},s)}};function N(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];if(a)r=e.filter((function(e){return e.id!==t.id}));else{var o=e.findIndex((function(e){return e.id===t.id}));if(!o)return e;var i=h({},e[o],{},u.a.pick(t,S),{seriesStatus:null,__typename:"SeriesSummary"});r=o>-1?e.map((function(e){return e.id===t.id?i:e})):[].concat(Object(n.a)(r),[i])}return d.a.info("updateQueries::updateSeriesSummaries HELPER",{origArr:e,seriesDelta:t,newArr:r,remove:a}),r}function A(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[];if(r)o=e.filter((function(e){return a?e.photo.id!==a.id:e.series.id===t.id}));else{var i=e.findIndex((function(e){return e._id===a.id})),l=u.a.pick(t,C);l.__typename="FeedSeriesSummary";var c=u.a.pick(a,k);c.__typename="PhotoSummary",i>-1?(o=Object(n.a)(e))[i].photo=c:o=[].concat(Object(n.a)(e),[{_id:c.id,series:l,photo:c,relation:"OWNED",__typename:"MyFeedResultItem"}])}return d.a.info("updateQueries::updateFeedList HELPER",{origArr:e,series:t,photo:a,newArr:o,remove:r}),o}var z=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={limit:100},n=w,o={allSeries:{seriesSummaries:[],nextToken:null,__typename:"PaginatedSeries"}};try{var i=e.readQuery({query:n,variables:r});o=u.a.cloneDeep(i)}catch(l){return void d.a.info("updateQueries::allSeriesUpdate readQuery failed (but that's fine)",{seriesDelta:t,remove:a,newData:o})}try{o.allSeries.seriesSummaries=N(o.allSeries.seriesSummaries,t,a),e.writeQuery({query:n,variables:r,data:o}),d.a.info("updateQueries::allSeriesUpdate DONE")}catch(l){d.a.error("updateQueries::allSeriesUpdate writeQuery failed",{seriesDelta:t,remove:a,newData:o},l)}},_=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=w,o={allSeries:{seriesSummaries:[],nextToken:null,__typename:"PaginatedSeries"}};try{var i=e.readQuery({query:n,variables:{limit:100}});o=u.a.cloneDeep(i)}catch(l){return void d.a.info("updateQueries::allSeriesPhotoUpdate:: allSeries readQuery failed (but that's fine)",{series:t,remove:r,photo:a,newData:o})}try{o.allSeries.seriesSummaries=o.allSeries.seriesSummaries.map((function(e){if(e.id!==a.seriesId)return e;var n=u.a.cloneDeep(e),o=t.photos.findIndex((function(e){return e.id===a.id}));if(r&&t)n.latest&&n.latest.id===a.id&&(n.latest=t.photos[t.photos.length-1]),n.featured&&n.featured.id===a.id&&(n.featured=t.photos[t.photos.length-1]),n.photoCount-=1;else if(-1===o){var i=u.a.pick(a,k);i.__typename="PhotoSummary",n.latest=i,n.photoCount+=1}return n})),e.writeQuery({query:n,data:o}),d.a.info("updateQueries::allSeriesPhotoUpdate DONE")}catch(l){d.a.error("updateQueries::createPhotoMutation:: allSeries read or write ERROR",{series:t,photo:a,remove:r},l)}},R=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=v,n={userSeries:{seriesSummaries:[],nextToken:null,__typename:"PaginatedSeries"}};try{var o=e.readQuery({query:r});n=u.a.cloneDeep(o)}catch(i){d.a.info("updateQueries::userSeriesUpdate readQuery failed (but that's fine)",{series:t,remove:a,newData:n})}try{n.userSeries.seriesSummaries=N(n.userSeries.seriesSummaries,t,a),e.writeQuery({query:r,data:n}),d.a.info("updateQueries::userSeriesUpdate DONE")}catch(i){d.a.error("updateQueries::userSeriesUpdate writeQuery failed",{series:t,remove:a,newData:n},i)}},D=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=O,o={myFeed:{feed:[],window:null,__typename:"PaginatedSeries"}};try{var i=e.readQuery({query:n});o=u.a.cloneDeep(i),d.a.info("updateQueries::feedUpdate got existing query",i)}catch(l){d.a.info("updateQueries::feedUpdate readQuery failed (but that's fine)",{series:t,photo:a,remove:r,newData:o})}try{o.myFeed.feed=A(o.myFeed.feed,t,a,r),e.writeQuery({query:n,data:o}),d.a.info("updateQueries::feedUpdate DONE")}catch(l){d.a.error("updateQueries::feedUpdate writeQuery failed",{series:t,photo:a,remove:r,newData:o},l)}},L=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{var o=0,i=[],l="Series:"+t,s=c()(g()),u=e.readFragment({id:l,fragment:s});d.a.info("watchUpdate:seriesWatchers readFragment",t,u,a);var p="User:"+a,f=c()(m()),h=e.readFragment({id:p,fragment:f});if(d.a.info("watchUpdate:userFragResult readFragment",t,h),u){o=u.watchers&&u.watchers>-1?u.watchers:0,(o+=r?-1:1)<0&&(o=0),i=r?h.watching.filter((function(e){return e!==t})):Object(n.a)(new Set([].concat(Object(n.a)(h.watching),[t])));var b={id:t,watchers:o};P(e,b),M(e,b),T(e,{id:a,watching:i}),z(e,b),r&&D(e,b,null,r)}}catch(y){d.a.error("watchUpdate",y)}},M=function(e,t){try{var a="SeriesSummary:"+t.id,r=e.readFragment({id:a,fragment:j,fragmentName:"seriesSummaryFragment"});d.a.info("_seriesSummaryFragmentUpdate readFragment",t.id,r),r&&e.writeFragment({id:a,fragment:j,fragmentName:"seriesSummaryFragment",data:h({},r,{},t)})}catch(n){d.a.error("_seriesSummaryFragmentUpdate failed",{seriesDelta:t},n)}}},561:function(e,t,a){e.exports=a(2006)},57:function(e,t,a){"use strict";a.r(t),a.d(t,"Actions",(function(){return r}));var r={HOME_CHANGE_STATE:"HOME_CHANGE_STATE",HOME_CHANGE_ACTIVE_SERIES:"HOME_CHANGE_ACTIVE_SERIES",HOME_STATE_BACK:"HOME_STATE_BACK",MAP_HISTORY_POP:"MAP_HISTORY_POP",MAP_HISTORY_PUSH:"MAP_HISTORY_PUSH",MAP_HISTORY_CLEAR:"MAP_HISTORY_CLEAR",UPLOADER_QUEUE:"UPLOADER_QUEUE",UPLOADER_COMPLETE:"UPLOADER_COMPLETE",UPLOADER_UPDATE_PROGRESS:"UPLOADER_UPDATE_PROGRESS",UPLOADER_SET_UPLOADING:"UPLOADER_SET_UPLOADING",UPLOADER_SET_ONLINE:"UPLOADER_SET_ONLINE",OFFLINE_VIEWPORT_SAVE:"OFFLINE_VIEWPORT_SAVE",OFFLINE_SET_STATUS:"OFFLINE_SET_STATUS",SETFLAG:"SETFLAG",RESET_ALL_STATE:"RESET_ALL_STATE"};t.default={setHomeState:function(e,t){return{type:r.HOME_CHANGE_STATE,data:{newDomain:e,params:t}}},homeStateBack:function(){return{type:r.HOME_STATE_BACK}},setActiveSeries:function(e,t){return{type:r.HOME_CHANGE_ACTIVE_SERIES,data:{activeSeries:e,initialPhoto:t}}},setFlag:function(e,t){return{type:r.SETFLAG,data:{flagName:e,flagVal:t}}},setOfflineViewport:function(e){return{type:r.OFFLINE_VIEWPORT_SAVE,data:e}},setOfflineCompleted:function(e){return{type:r.OFFLINE_SET_STATUS,data:e}},popMapHistory:function(){return{type:r.MAP_HISTORY_POP}},pushMapHistory:function(e){return{type:r.MAP_HISTORY_PUSH,data:e}},clearMapHistory:function(){return{type:r.MAP_HISTORY_CLEAR}},resetAllState:function(){return{type:r.RESET_ALL_STATE}},queueUpload:function(e){return{type:r.UPLOADER_QUEUE,data:e}},setUploaderOnline:function(e){return{type:r.UPLOADER_SET_ONLINE,data:e}},updateUploadProgress:function(e){return{type:r.UPLOADER_UPDATE_PROGRESS,data:e}}}},570:function(e,t,a){"use strict";a.r(t);var r=a(16),n=a(201),o=a(97),i=a(11);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var c={useNextVariants:!0},s={MuiDialog:{paper:{"@media (max-width:321px)":{margin:10}},paperFullWidth:{"@media (max-width:321px)":{width:"calc(100% - 20px)"}}}},u={indigo:a(223).a[500],jet:"#3a3335",rose:"#d81e5b",redorange:"#f0544f",papayawhip:"#FDF0D5",cblue:"#C6D8D3"},p={palette:{jet:{main:"#3a3335"},rose:{main:"#d81e5b"},redorange:{main:"#f0544f"},papayawhip:{main:"#FDF0D5"},cblue:{main:"#C6D8D3"},primary:{main:u.redorange},secondary:{main:u.rose},text:{primary:u.jet,secondary:Object(o.fade)(u.jet,.7)}},typography:c,overrides:s},d=Object(n.a)(p),m=Object.keys(i.d.ACCESS).reduce((function(e,t){var a=i.d.ACCESS[t],o=d.palette.getContrastText(a.theme.primary),c=d.palette.getContrastText(a.theme.secondary);return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,Object(r.a)({},t,Object(n.a)({palette:{primary:{main:a.theme.primary},secondary:{main:a.theme.secondary},text:{primary:o,secondary:c}}})))}),{}),g={palette:{primary:{main:u.indigo},secondary:{main:u.rose},text:{primary:u.jet,secondary:Object(o.fade)(u.jet,.7)}},typography:c,overrides:s},f={palette:{primary:{main:u.redorange},secondary:{main:u.rose},text:{primary:u.papayawhip,secondary:Object(o.fade)(u.papayawhip,.7)},background:{default:u.jet,paper:Object(o.darken)(u.jet,.2)}},typography:c,overrides:s};t.default={home:d,login:Object(n.a)(f),series:Object(n.a)(g),access:m}},585:function(e,t){},587:function(e,t){},607:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSeriesTags=t.default=void 0;var r;(r=a(4))&&r.__esModule;function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=function e(t,a){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"findTagByLabel",(function(e,t){return r.getTagType(e).values.find((function(e){return e.label===t}))})),i(this,"getXYTags",(function(){var e=r.getXYTagTypes().map((function(e){return e.id}));return r.tags.filter((function(t){return e.find((function(e){return e===t.typeId}))&&t.coords&&t.coords.x}))})),i(this,"getNonXYTags",(function(){var e=r.getNonXYTagTypes().map((function(e){return e.id}));return r.tags.filter((function(t){return e.indexOf(t.typeId)>-1}))})),i(this,"createNewTagObj",(function(e,t){return{label:e,typeId:t}})),i(this,"createExistingTagObj",(function(e,t){return o({},r.findTagByLabel(t,e),{typeId:t})})),i(this,"createNewXYTagObj",(function(e,t,a,r){return{label:e,typeId:t,relCoords:a,coords:{x:parseInt(a.x/r,10),y:parseInt(a.y/r,10)}}})),i(this,"createExistingXYTagObj",(function(e,t,a,n){return o({},r.findTagByLabel(t,e),{typeId:t,relCoords:a,coords:{x:parseInt(a.x/n,10),y:parseInt(a.y/n,10)}})})),i(this,"getTagType",(function(e){return r.tagConfigArr.find((function(t){return t.id===e}))})),i(this,"getTagTypeIndex",(function(e){return r.tagConfigArr.findIndex((function(t){return t.id===e}))})),i(this,"getXYTagTypes",(function(){return r.tagConfigArr.filter((function(e){return e.allowXY}))})),i(this,"getNonXYTagTypes",(function(){return r.tagConfigArr.filter((function(e){return e.allowNonXY}))})),i(this,"getRelXYTags",(function(e){return e?r.getXYTags().map((function(t){return o({},t,{color:r.getTagType(t.typeId).color,relCoords:{x:parseInt(t.coords.x*e,10),y:parseInt(t.coords.y*e,10)}})})):[]})),this.tags=a,this.tagConfigArr=t};t.default=l;t.getSeriesTags=function(e){var t={};return e&&e.photos&&e.photos.forEach((function(e){e.tags.forEach((function(e){t[e.label]=e}))})),Object.keys(t)}},608:function(e,t,a){"use strict";(function(e){var r=a(18);Object.defineProperty(t,"__esModule",{value:!0}),t.getExifPromise=void 0;var n=c(a(609)),o=a(12),i=a(368),l=c(a(4));function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a,r,n,o,i){try{var l=e[o](i),c=l.value}catch(s){return void a(s)}l.done?t(c):Promise.resolve(c).then(r,n)}var u=function(){var t,a=(t=r.mark((function t(a){var c,s,u,p,d,m,g;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=null,s=null,u=null,!(a instanceof Blob)){t.next=12;break}return t.t0=n.default,t.next=7,new Response(a).arrayBuffer();case 7:t.t1=t.sent,p=t.t0.create.call(t.t0,t.t1),c=p.parse(),t.next=13;break;case 12:try{d=a.indexOf("base64,")+"base64,".length,m=a.slice(d),g=n.default.create(e.from(m,"base64")),c=g.parse()}catch(r){l.default.info("EXIF ERROR",r)}case 13:if(c&&c.tags){try{c.tags&&c.tags.DateTimeOriginal&&String(c.tags.DateTimeOriginal)&&(s=(0,i.fixParseDate)(c.tags.DateTimeOriginal,!1))}catch(r){l.default.info("ERROR GETTING TIMESTAMP",{err:r,exif:c})}try{c.tags.GPSLatitude&&o.util.isNumeric(c.tags.GPSLatitude)&&c.tags.GPSLongitude&&o.util.isNumeric(c.tags.GPSLongitude)&&(u=[c.tags.GPSLongitude,c.tags.GPSLatitude])}catch(f){l.default.error("GPS Longitude and Latitude could not be determined")}}return t.abrupt("return",{exif:c,exifDateTime:s,exifGPS:u});case 15:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(r,n){var o=t.apply(e,a);function i(e){s(o,r,n,i,l,"next",e)}function l(e){s(o,r,n,i,l,"throw",e)}i(void 0)}))});return function(e){return a.apply(this,arguments)}}();t.getExifPromise=u}).call(this,a(40).Buffer)},617:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=a(105))&&r.__esModule?r:{default:r};function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=function e(t,a){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"getSeriesMeta",(function(){return Object.keys(r.metaConfig).filter((function(e){return"SERIES"===r.metaConfig[e].type})).reduce((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,i({},t,r.series.meta[t].default))}),{})})),i(this,"setMeta",(function(){r.series.meta=JSON.stringify(r.getSeriesMeta())})),i(this,"newSeries",(function(){return{id:"L-".concat((0,n.default)()),meta:JSON.stringify(r.getSeriesMeta()),photos:[]}})),this.metaConfig=t,this.series=a||this.newSeries()};t.default=l},618:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=a(105))&&r.__esModule?r:{default:r},o=a(12);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=function e(t,a){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"setMeta",(function(){r.photo.meta=JSON.stringify(r.getPhotoMeta())})),l(this,"getPhotoMeta",(function(){return Object.keys(r.metaConfig).filter((function(e){return"PHOTO"===r.metaConfig[e].type})).reduce((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,l({},t,r.photo.meta[t].default))}),{})})),l(this,"newPhoto",(function(){return{id:"L-".concat((0,n.default)()),uploadToken:(0,n.default)(),takenOn:o.dates.convertJSDatetoTimestamp(new Date),meta:JSON.stringify(r.getPhotoMeta()),tags:[]}})),this.metaConfig=t,this.photo=a||this.newPhoto()};t.default=c},619:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeShareUrl=t.createShareUrl=void 0;var r,n=(r=a(4))&&r.__esModule?r:{default:r};t.createShareUrl=function(e,t,a){arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!t)return null;var r={type:"series",s:t.id,p:a},n=encodeURI(JSON.stringify(r)),o="".concat(window.location.origin).concat("/photomon_v0","/?fromqr=").concat(n),i="".concat(e,"/").concat(t.id,"/").concat(a||"");return{url:o,ogShare:i}};t.decodeShareUrl=function(e){try{var t=e.indexOf("?fromqr=");if(t<0)return null;var a=e.slice(t+"?fromqr=".length);return JSON.parse(decodeURI(a))}catch(r){n.default.error(r)}return null}},620:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(a(366)),n=i(a(367)),o=i(a(4));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u=function(){function e(t,a){var i=this,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.default;l(this,e),s(this,"ownOrAny",(function(e){if(!e||!e.createdUser||!e.createdUser.id)throw new Error("No Created user found");try{return e.createdUser.id===i.userSub?"Own":"Any"}catch(t){return"Any"}})),s(this,"isOwner",(function(e){if(!e||!e.createdUser||!e.createdUser.id)throw new Error("No Created user found");try{return e.createdUser.id===i.userSub}catch(t){return!1}})),s(this,"canUser",(function(e,t,a,r){if(["series","photo"].indexOf(a)<0)throw new Error("canUser: type not supported ".concat(a));try{var n=i.ownOrAny(t),l=i.ac.can(i.role)["".concat(e).concat(n)](a),c=null;return"series"===a&&("PUBLIC"===t.access?c=i.ac.can(i.role)["".concat(e).concat(n)]("series_public"):"OPEN"===t.access&&(c=i.ac.can(i.role)["".concat(e).concat(n)]("series_open"))),r?c?!!l.attributes.find((function(e){return"*"===e||r.indexOf(e)>-1}))||!!c.attributes.find((function(e){return"*"===e||r.indexOf(e)>-1})):!!l.attributes.find((function(e){return"*"===e||r.indexOf(e)>-1})):c?l.granted||c.granted:l.granted}catch(s){return o.default.error(s),!1}})),this.userSub=t,this.role=a,this.permissionObj=c,this.ac=new r.default(c)}var t,a,i;return t=e,(a=[{key:"toString",value:function(){o.default.info("AccessHelper:",{sub:this.userSub,role:this.role})}}])&&c(t.prototype,a),i&&c(t,i),e}();t.default=u},621:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNewS3Credentials=t.getWholeSeries=t.userSearch=t.getMyFeed=t.geocode=t.getUser=t.geoSeriesIdOnly=t.geoSeries=t.tagSearch=t.seriesWithTag=t.seriesFromList=t.seriesSummaryFromList=t.keywordSearch=t.userSeries=t.pollQuery=t.allSeries=t.initQuery=void 0;var r,n=(r=a(171))&&r.__esModule?r:{default:r},o=a(240);function i(){var e=E(["\n  query s3Credentials($seriesId: ID!, $photoId: ID!, $ext: String!)  {\n    s3Credentials(seriesId: $seriesId, photoId: $photoId, ext: $ext)\n  }\n"]);return i=function(){return e},e}function l(){var e=E(["\nquery getWholeSeries($id: ID!) {\n  series(id: $id) {\n    ...seriesFragment\n    photos {\n      ...photoFragment\n    }\n  }\n}\n","\n","\n"]);return l=function(){return e},e}function c(){var e=E(["\nquery userSearch($searchStr: String!, $limit: Int) {\n  userSearch(searchStr: $searchStr, limit: $limit ){\n    ...userSummaryFragment\n  }\n}\n","\n"]);return c=function(){return e},e}function s(){var e=E(['\nquery myFeed($start: String, $end: String, $limit: Int) {\n  myFeed(start: $start, end: $end, limit: $limit) @connection(key: "myFeed"){\n    feed {\n      _id\n      series {\n        ...feedSeriesSummaryFragment\n      }\n      photo {\n        ...photoSummaryFragment\n      }\n      relation\n      __typename\n    }\n    window\n    __typename\n  }\n}\n',"\n","\n"]);return s=function(){return e},e}function u(){var e=E(["\nquery geocode($search: String!) {\n  geocoder(search: $search) {\n    relevance\n    text\n    placeName\n    bbox\n    center\n    # geoType\n    # context\n    __typename\n  }\n}\n"]);return u=function(){return e},e}function p(){var e=E(["\nquery getUser($userId: ID) {\n  user(id: $userId){\n    ...userFragment\n  }\n}\n","\n"]);return p=function(){return e},e}function d(){var e=E(['\nquery seriesInGeoBoundsIdOnly($bounds: [Float], $limit: Int, $nextToken: String) {\n  seriesInGeoBounds(bounds: $bounds, limit: $limit, nextToken: $nextToken) @connection(key: "seriesInGeoBoundsSHORT", filter: ["bounds"]){\n    seriesSummaries {\n      id\n      name\n    }\n    nextToken\n    __typename\n  }\n}\n']);return d=function(){return e},e}function m(){var e=E(['\nquery seriesInGeoBounds($bounds: [Float], $limit: Int, $nextToken: String) {\n  seriesInGeoBounds(bounds: $bounds, limit: $limit, nextToken: $nextToken) @connection(key: "seriesInGeoBounds", filter: ["bounds"]){\n    seriesSummaries {\n      ...seriesSummaryFragment\n    }\n    nextToken\n    __typename\n  }\n}\n',"\n"]);return m=function(){return e},e}function g(){var e=E(["\nquery tagSearch($limit: Int, $tag: String, $nextToken:  String) {\n  tags(limit: $limit, tag: $tag, nextToken: $nextToken ){\n    _id\n    name\n    count\n    __typename\n  }\n}\n"]);return g=function(){return e},e}function f(){var e=E(['\nquery seriesWithTag($tag: String!, $limit: Int, $nextToken: String){\n  tagSeries(tag: $tag, limit: $limit, nextToken: $nextToken)  @connection(key: "tagSeries", filter: ["tag"]){\n    seriesSummaries{\n      ...seriesSummaryFragment\n    }\n    nextToken\n    __typename\n  }\n}\n',"\n"]);return f=function(){return e},e}function h(){var e=E(["\nquery seriesFromList($seriesList: [ID]) {\n  arraySeries(seriesIds: $seriesList) {\n    ...seriesFragment\n    photos {\n      ...photoFragment\n    }\n  }\n}\n","\n","\n"]);return h=function(){return e},e}function b(){var e=E(["\nquery seriesFromList($seriesList: [ID]) {\n  arraySeries(seriesIds: $seriesList) {\n    ...seriesFragment\n  }\n}\n","\n"]);return b=function(){return e},e}function y(){var e=E(["\nquery keywordSearch($searchStr: String, $limit: Int, $nextToken: String) {\n  keywordSearch(searchStr: $searchStr, limit: $limit, nextToken: $nextToken) {\n    seriesSummaries {\n      ...seriesSummaryFragment\n    }\n    nextToken\n    __typename\n  }\n}\n","\n"]);return y=function(){return e},e}function w(){var e=E(["\nquery userSeries($createdBy: ID) {\n  userSeries(createdBy: $createdBy ) {\n    seriesSummaries {\n      ...seriesSummaryFragment\n    }\n    nextToken\n    __typename\n  }\n}\n","\n"]);return w=function(){return e},e}function v(){var e=E(['\nquery pollQuery($lastCheck: String!, $limit: Int, $nextToken: String) {\n  changedSeries(lastCheck: $lastCheck, limit: $limit, nextToken: $nextToken) @connection(key: "changedSeries"){\n    seriesSummaries {\n      ...seriesSummaryFragment\n    }\n    __typename\n  }\n}\n',"\n"]);return v=function(){return e},e}function O(){var e=E(['\nquery allSeries($limit: Int, $nextToken: String) {\n  allSeries(limit: $limit, nextToken: $nextToken) @connection(key: "allSeries"){\n    seriesSummaries {\n      ...seriesSummaryFragment\n    }\n    nextToken\n    __typename\n  }\n}\n',"\n"]);return O=function(){return e},e}function x(){var e=E(["\nquery init {\n  init\n}\n"]);return x=function(){return e},e}function E(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var S=(0,n.default)(x());t.initQuery=S;var k=(0,n.default)(O(),o.seriesSummaryFragment);t.allSeries=k;var j=(0,n.default)(v(),o.seriesSummaryFragment);t.pollQuery=j;var C=(0,n.default)(w(),o.seriesSummaryFragment);t.userSeries=C;var P=(0,n.default)(y(),o.seriesSummaryFragment);t.keywordSearch=P;var T=(0,n.default)(b(),o.seriesFragment);t.seriesSummaryFromList=T;var I=(0,n.default)(h(),o.seriesFragment,o.photoFragment);t.seriesFromList=I;var N=(0,n.default)(f(),o.seriesSummaryFragment);t.seriesWithTag=N;var A=(0,n.default)(g());t.tagSearch=A;var z=(0,n.default)(m(),o.seriesSummaryFragment);t.geoSeries=z;var _=(0,n.default)(d());t.geoSeriesIdOnly=_;var R=(0,n.default)(p(),o.userFragment);t.getUser=R;var D=(0,n.default)(u());t.geocode=D;var L=(0,n.default)(s(),o.feedSeriesSummaryFragment,o.photoSummaryFragment);t.getMyFeed=L;var M=(0,n.default)(c(),o.userSummaryFragment);t.userSearch=M;var F=(0,n.default)(l(),o.seriesFragment,o.photoFragment);t.getWholeSeries=F;var U=(0,n.default)(i());t.getNewS3Credentials=U},622:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportBug=t.unWatchSeries=t.watchSeries=t.newSeriesKeys=t.createSeries=t.newPhotoKeys=t.createPhoto=t.updatePhotoKeys=t.updatePhoto=t.updateSeriesKeys=t.updateSeries=t.deleteSeries=t.deletePhoto=void 0;var r,n=(r=a(171))&&r.__esModule?r:{default:r},o=a(240);function i(){var e=f(["\nmutation reportBug($reportJSON: String!) {\n  reportBug(reportJSON: $reportJSON)\n}\n"]);return i=function(){return e},e}function l(){var e=f(["\nmutation unWatch($seriesId: ID!) {\n  unWatchSeries(seriesId: $seriesId)\n}\n"]);return l=function(){return e},e}function c(){var e=f(["\nmutation watch($seriesId: ID!) {\n  watchSeries(seriesId: $seriesId)\n}\n"]);return c=function(){return e},e}function s(){var e=f(["\nmutation createSeries($series: NewSeriesInput!, $photo: NewPhotoInput!, $ext: String!) {\n  createSeries(series: $series, photo: $photo, ext: $ext) {\n    series {\n      ...seriesFragment\n      photos {\n        ...photoFragment\n      }\n    }\n    preAuth\n    __typename\n  }\n}\n","\n","\n"]);return s=function(){return e},e}function u(){var e=f(["\nmutation createPhoto($photo: NewPhotoInput!, $ext: String!) {\n  createPhoto(photo: $photo, ext: $ext) {\n    photo {\n      ...photoFragment\n    }\n    preAuth\n    __typename\n  }\n}\n","\n"]);return u=function(){return e},e}function p(){var e=f(["\nmutation updatePhoto($photo: UpdatePhotoInput!) {\n  updatePhoto(photo: $photo){\n    ...photoFragment\n  }\n}\n","\n"]);return p=function(){return e},e}function d(){var e=f(["\nmutation updateSeries($series: UpdateSeriesInput!) {\n  updateSeries(series: $series){\n    ...seriesFragment\n  }\n\n}\n","\n"]);return d=function(){return e},e}function m(){var e=f(["\nmutation deleteSeries($id: ID!) {\n  deleteSeries(id: $id)\n}\n"]);return m=function(){return e},e}function g(){var e=f(["\nmutation deletePhoto($seriesId: ID!, $photoId: ID!) {\n  deletePhoto(seriesId: $seriesId, photoId: $photoId)\n}\n"]);return g=function(){return e},e}function f(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var h=(0,n.default)(g());t.deletePhoto=h;var b=(0,n.default)(m());t.deleteSeries=b;var y=(0,n.default)(d(),o.seriesFragment);t.updateSeries=y;t.updateSeriesKeys=["id","access","name","note","coords","direction"];var w=(0,n.default)(p(),o.photoFragment);t.updatePhoto=w;t.updatePhotoKeys=["id","seriesId","takenOn","tags","note"];var v=(0,n.default)(u(),o.photoFragment);t.createPhoto=v;t.newPhotoKeys=["seriesId","takenOn","meta","rawData","coords","tags","note","uploadToken"];var O=(0,n.default)(s(),o.seriesFragment,o.photoFragment);t.createSeries=O;t.newSeriesKeys=["access","name","note","coords","direction","meta"];var x=(0,n.default)(c());t.watchSeries=x;var E=(0,n.default)(l());t.unWatchSeries=E;var S=(0,n.default)(i());t.reportBug=S},623:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateSeriesResponse=t.createSeriesResponse=t.updatePhotoResponse=t.createPhotoResponse=void 0;var r=a(240),n=o(a(43));o(a(4));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}t.createPhotoResponse=function(e){var t=e.meUserSummary,a=e.series,r=e.newPhoto;e.ext;return{createPhoto:{photo:{id:r.id,meta:r.meta||null,seriesId:a.id,note:r.note||null,createdOn:Date.now().toString(),createdUser:t,updatedUser:t,createdBy:t.id,updatedBy:t.id,uploadToken:r.uploadToken,updatedOn:Date.now().toString(),seriesCreatedBy:a.createdUser.id,takenOn:r.takenOn,coords:r.coords||null,tags:r.tags?r.tags.map((function(e){return l({},e,{coords:e.coords?l({},e.coords,{__typename:"ImageCoords"}):null,__typename:"Tag"})})):[],paths:{base:null,large:null,orig:null,thumb:null,medium:null,__typename:"Paths"},__typename:"Photo"},preAuth:null,__typename:"NewPhoto"}}};t.updatePhotoResponse=function(e){var t=e.meUserSummary,a=e.photo,r=e.photoDelta;return r.tags&&(r.tags=r.tags.map((function(e){return e.__typename||(e.__typename="Tag"),e.coords?e.coords.__typename="ImageCoords":e.coords=null,e}))),{updatePhoto:l({},a,{},r,{updatedUser:t,updatedBy:t.id,__typename:"Photo"})}};t.createSeriesResponse=function(e){var t=e.meUserSummary,a=e.newSeries,o=e.newPhoto,i=(e.ext,{id:o.id,meta:o.meta||null,seriesId:a.id,createdOn:Date.now().toString(),note:o.note||null,createdUser:t,updatedUser:t,createdBy:t.id,updatedBy:t.id,uploadToken:o.uploadToken,updatedOn:Date.now().toString(),seriesCreatedBy:t.id,takenOn:o.takenOn,coords:o.coords||null,tags:o.tags||[],paths:{base:null,large:null,orig:null,thumb:null,medium:null,__typename:"Paths"},__typename:"Photo"}),c=n.default.pick(i,r.photoSummaryKeys);return{createSeries:{series:{id:a.id,name:a.name,note:a.note||null,access:a.access,meta:a.meta||null,featured:l({},c,{__typename:"PhotoSummary"}),latest:l({},c,{__typename:"PhotoSummary"}),seriesStatus:null,coords:a.coords||null,direction:a.direction||null,photoCount:1,createdUser:t,updatedUser:t,createdBy:t.id,updatedBy:t.id,createdOn:Date.now().toString(),updatedOn:Date.now().toString(),watchers:0,photos:[i],__typename:"Series"},preAuth:null,__typename:"NewSeries"}}};t.updateSeriesResponse=function(e){var t=e.meUserSummary;return{updateSeries:l({},e.series,{},e.seriesDelta,{updatedUser:t,updatedBy:t.id,__typename:"Series"})}}},624:function(e,t,a){"use strict";var r;function n(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n# Check out the cheat sheet:\n# https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\n\nschema {\n  query: Query\n  mutation: Mutation\n}\n\ntype Query { \n  init: String\n  series(id: ID!): Series\n  allSeries(limit: Int, nextToken: String): PaginatedSeries\n  userSeries(createdBy: ID, limit: Int, nextToken: String): PaginatedSeries\n  contributedSeries(limit: Int, nextToken: String): PaginatedSeries\n  arraySeries(seriesIds: [ID], limit: Int, nextToken: String): [Series]\n  changedSeries(limit: Int, nextToken: String, lastCheck: String!): PaginatedSeries\n  seriesInGeoBounds(bounds: [Float], limit: Int, nextToken: String): PaginatedSeries\n  user(id: ID): User\n  s3Credentials(seriesId: ID!, photoId: ID!, ext: String!): String\n  geocoder(search: String!): [GeocodeResult]\n\n  # ES Search Queries REWRITE THESE\n\n  # This one is bad\n  userSearch(searchStr: String!, limit: Int): [UserSummary]\n  # This one isn't written yet\n  # searchUser(userStr: String, limit: Int, nextToken: String): \n  keywordSearch(searchStr: String, limit: Int, nextToken: String): PaginatedSeries\n\n  # These will be better when they are ES:\n  tags(tag: String, limit: Int, nextToken: String): [TagSummary]\n  tagSeries(tag: String, limit: Int, nextToken: String): PaginatedSeries\n  \n  # TODO: Thing\n  myFeed(start: String, end: String, limit: Int): MyFeedResult!\n}\n\n# this schema allows the following mutation:\ntype Mutation {\n  updateSeries(series: UpdateSeriesInput!): Series!\n  updatePhoto(photo: UpdatePhotoInput!): Photo!\n  createSeries(series: NewSeriesInput!, photo: NewPhotoInput!, ext: String!): NewSeries!\n  createPhoto(photo: NewPhotoInput!, ext: String!): NewPhoto!\n  deletePhoto(seriesId: ID!, photoId: ID!): ID!\n  deleteSeries(id: ID!): ID!\n  createUser(userInfo: NewUserInput!): User!\n  updateUser(userInfo: UserInput!): User!\n  \n  deleteUser(userId: ID!): ID!\n  watchSeries(seriesId: ID!): ID!\n  unWatchSeries(seriesId: ID!): ID!\n\n  reportBug(reportJSON: String!): Boolean\n}\n\ntype TagSummary {\n  _id: ID, \n  name: String!\n  count: Int!\n}\n\ntype MyFeedResult {\n  feed: [MyFeedResultItem]\n  window: [String]\n}\n\ntype MyFeedResultItem {\n    # The redundant ID is purely for caching on the client side\n  _id: ID!\n  series: FeedSeriesSummary!\n  photo: PhotoSummary!\n  relation: RelationENUM!\n}\n\ntype FeedSeriesSummary {\n  # The redundant ID is purely for caching on the client side\n  id: ID!\n  name: String\n  createdUser: UserSummary!\n  access: String!\n  updatedOn: String!\n  createdOn: String!\n  coords: [Float]\n  watchers: Int!\n  photoCount: Int\n  seriesStatus: String\n  direction: Int\n}\n\nenum RelationENUM {\n  OWNED\n  CONTRIBUTED\n  WATCHING\n}\n\ntype PaginatedTagSummary {\n  tags: [TagSummary]\n  nextToken: String\n}\n\n# Series Connection allows us to implement pagination easily\ntype PaginatedSeries {\n  seriesSummaries: [SeriesSummary]\n  nextToken: String\n}\n\n# Tags belong to Photos\ninput TagInput {\n  label: String!\n  typeId: String!\n  coords: ImageCoordsInput\n}\n\ninput ImageCoordsInput {\n  x: Int\n  y: Int\n}\n\n# New Photo is a little different because it includes the s3 authorization to upload it\ntype NewPhoto {\n  photo: Photo!\n  preAuth: String!\n}\n\n# Like NewPhoto, newSeries needs a token for the first image\ntype NewSeries {\n  series: Series!\n  preAuth: String!\n}\n\ninput UpdateSeriesInput {\n  id: ID!\n  access: String\n  name: String\n  note: String\n  coords: [Float]\n  direction: Int\n}\n\ninput NewSeriesInput {\n  access: String!\n  name: String!\n  note: String\n  coords: [Float]\n  direction: Int\n  meta: String\n}\n\n# This is a sample Dynamo Schema\ntype Series {\n  id: ID!\n  createdBy: ID!\n  createdUser: UserSummary!\n  updatedBy: ID!\n  updatedUser: UserSummary!\n  access: String!\n  seriesStatus: String\n  # dates come back as strings because graphql can't do 32-bit integers\n  createdOn: String!\n  updatedOn: String!\n  name: String!\n  watchers: Int!\n  photos: [Photo]\n  coords: [Float]\n  direction: Int\n  photoCount: Int!\n  featured: PhotoSummary # for a brief moment when creating records this can be null\n  latest: PhotoSummary # for a brief moment when creating records this can be null\n  # These is a JSON string object\n  meta: String\n  note: String\n}\n\n# This is a sample Dynamo Schema\ntype SeriesSummary {\n  id: ID!\n  name: String\n  createdUser: UserSummary!\n  access: String!\n  updatedOn: String!\n  createdOn: String!\n  coords: [Float]\n  watchers: Int!\n  featured: PhotoSummary\n  latest: PhotoSummary\n  photoCount: Int\n  seriesStatus: String\n  direction: Int\n}\n\ntype Photo {\n  id: ID!\n  createdBy: ID!\n  createdUser: UserSummary!\n  updatedBy: ID!\n  updatedUser: UserSummary!\n  createdOn: String!\n  updatedOn: String!\n  takenOn: String!\n  coords: [Float]\n  note: String\n  seriesId: ID!\n  seriesCreatedBy: ID!\n  meta: String\n  tags: [Tag]\n  paths: Paths\n  # This is a tracking marker so we know when things are updated \n  uploadToken: String \n}\n\n# Featured or latest photo in a series\ntype PhotoSummary {\n  id: ID!\n  createdUser: UserSummary!\n  takenOn: String\n  updatedOn: String\n  createdOn: String\n  seriesId: ID!\n  seriesCreatedBy: ID!\n  paths: Paths\n}\n\ninput NewPhotoInput {\n  # Series ID might not be there if this is a new series\n  seriesId: ID\n  takenOn: String!\n  meta: String\n  rawData: String\n  coords: [Float]\n  tags: [TagInput]\n  note: String\n  # This is a tracking marker so we know when things are updated \n  uploadToken: String!\n}\n\ninput UpdatePhotoInput {\n  id: ID!\n  seriesId: ID!\n  takenOn: String\n  tags: [TagInput]\n  coords: [Float]\n  note: String\n  featured: Boolean\n  # This is a tracking marker so we know when things are updated \n  uploadToken: String \n}\n\n\n# Tags belong to Photos\ntype Tag {\n  label: String!\n  typeId: String!\n  coords: ImageCoords\n}\n\ntype Paths {\n  base: String\n  thumb: String\n  medium: String\n  large: String\n  orig: String\n}\n\ntype ImageCoords {\n  x: Int\n  y: Int\n}\n\n\ntype User {\n  id: ID!\n  username: String\n  gravatar: String\n  watching: [ID]\n  gravatarProfile: String\n  meta: String\n  createdOn: String!\n  updatedOn: String!\n}\n\ntype UserSummary {\n  id: ID!\n  gravatar: String\n  gravatarProfile: String\n  username: String\n  createdOn: String!\n}\n\ninput NewUserInput {\n  id: ID!\n  username: String!\n  meta: String\n}\n\ninput UserInput {\n  id: ID!\n  watching: [ID]\n  meta: String\n}\n\n# Geocode Result\ntype GeocodeResult {\n  relevance: Float\n  text: String\n  placeName: String\n  bbox: [Float]\n  center: [Float]\n  geoType: String\n  context: String\n}\n\n"]);return n=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(0,((r=a(171))&&r.__esModule?r:{default:r}).default)(n());t.default=o},625:function(e,t,a){"use strict";a.r(t),t.default={"@global":{"body, #root":{height:"100%"},"html, body":{overflow:"hidden",position:"fixed",fallbacks:[{overflow:"hidden"}],overscrollBehavior:"contain",height:"100%",width:"100%"},".Section__container___3YYTG":{height:"100%"},":not(input):not(textarea), :not(input):not(textarea)::after, :not(input):not(textarea)::before":{W:"none",userSelect:"none",cursor:"default"},"input, button, textarea, :focus":{outline:"none"}}}},644:function(e,t,a){"use strict";a.r(t);var r=a(18),n=a.n(r),o=a(49);t.default=function(e,t){var a,r,i;return n.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(l.prev=0,!e.uploadToken){l.next=17;break}return l.prev=2,l.next=5,n.a.awrap(o.imgStore.keys());case 5:if(!(l.sent.indexOf(e.uploadToken)>-1)){l.next=13;break}return l.next=9,n.a.awrap(o.imgStore.getItem(e.uploadToken));case 9:return a=l.sent,r=window.URL||window.webkitURL,i=r.createObjectURL(a),l.abrupt("return",[i]);case 13:l.next=17;break;case 15:l.prev=15,l.t0=l.catch(2);case 17:return l.abrupt("return",t.map((function(t){return"".concat(e.paths.base).concat(e.paths[t])})));case 20:return l.prev=20,l.t1=l.catch(0),l.abrupt("return",null);case 23:case"end":return l.stop()}}),null,null,[[0,20],[2,15]])}},67:function(e,t,a){"use strict";var r=a(16),n=a(7),o=a(42),i=a(0),l=a.n(i),c=a(1),s=a.n(c),u=a(20),p=a.n(u),d=a(176),m=a(11),g=a(111),f=a(499),h=a.n(f);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var y=Object(d.a)((function(e){return{root:{height:"100%",padding:e.spacing(2),display:"flex",flexDirection:"column",overflow:"hidden",opacity:.3,textAlign:"center",color:e.palette.getContrastText(e.palette.text.primary),background:e.palette.text.primary},spacer:{flexGrow:1},icon:{width:"100%",flex:"1 1 40%",opacity:.5},primary:{textAlign:"center",width:"100%"}}})),w=function(e){var t=e.text,a=e.className,r=e.style,n=Object(o.a)(e,["text","className","style"]),i=y();return l.a.createElement("div",b({className:p()(i.root,a),style:r},n),l.a.createElement("div",{className:i.spacer}),l.a.createElement(h.a,{className:i.icon,color:"inherit"}),l.a.createElement(g.a,{className:i.primary,color:"inherit"},t||"Missing"),l.a.createElement("div",{className:i.spacer}))};w.propTypes={text:s.a.string,className:s.a.string,style:s.a.object};var v=w,O=a(2023),x=Object(d.a)((function(e){return{root:{height:"100%",padding:e.spacing(2),display:"flex",flexDirection:"column",overflow:"hidden",opacity:.3,textAlign:"center",color:e.palette.getContrastText(e.palette.text.primary),background:e.palette.text.primary},spacer:{flexGrow:1},icon:{width:"100%",flex:"1 1 40%",opacity:.5},circularProgress:{margin:"0 auto"},primary:{textAlign:"center",width:"100%"},secondary:{flex:"1 1 30%",width:"100%"}}})),E=function(e){var t=e.text,a=e.className,r=e.style,n=x();return l.a.createElement("div",{className:p()(n.root,a),style:r},l.a.createElement("div",{className:n.spacer}),l.a.createElement(O.a,{color:"inherit",className:n.circularProgress}),l.a.createElement(g.a,{className:n.primary,color:"inherit"},t||"Loading"),l.a.createElement("div",{className:n.spacer}))};E.propTypes={text:s.a.string,className:s.a.string,style:s.a.object};var S=E,k=a(4),j=a.n(k);function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var I="loading",N="broken",A="loaded",z=Object(d.a)((function(e){return{root:{position:"relative",display:"block",height:"100%",width:"100%"},img:{display:"block",height:"100%",width:"100%"},imgBroken:{display:"none"}}})),_=function(e){var t=e.className,a=e.sizePriority,r=e.dataUrl,c=e.onLoad,s=e.photo,u=e.imgRef,d=e.style,g=Object(o.a)(e,["className","sizePriority","dataUrl","onLoad","photo","imgRef","style"]),f=z(),h=Object(i.useState)(),b=Object(n.a)(h,2),y=b[0],w=b[1],O=Object(i.useState)(0),x=Object(n.a)(O,2),E=x[0],k=x[1],C=Object(i.useState)({state:I,retry:-1}),_=Object(n.a)(C,2),R=_[0],D=_[1],L=Object(i.useContext)(m.a),M=L.getPhotoUrls,F=L.online,U=Object(i.useRef)(),B=Object(i.useRef)();B.current=P({altIndex:E},R),Object(i.useEffect)((function(){return U.current=!0,function(){U.current=null}}),[]);var q=null;r?q=r:s&&s.dataUrl&&(q=s.dataUrl);var W=function(){D({state:N,retry:-1})},G=R.state===N,H=R.state===I;Object(i.useEffect)((function(){if(!s)return j.a.error("RawImage Missing photo record"),W();q||(M&&s&&s.paths&&0!==Object.keys(s.paths).length?M(s,["large","medium"]).then((function(e){!y&&U.current&&e&&e.length>0&&(w(e),D({state:I,retry:1}))})).catch((function(){U.current&&W()})):W())}),[s]);var V="";return q?V=q:y&&y[E]&&(V=y[E]),!G&&R.retry>1&&(V="".concat(V,"?retry=").concat(R.retry)),G?l.a.createElement(v,T({className:t,style:d},g)):l.a.createElement(l.a.Fragment,null,H&&l.a.createElement(S,{className:t,style:d}),!G&&l.a.createElement("img",T({ref:u,className:p()(t,f.img),alt:a[E],style:P({objectFit:"contain",display:H?"none":"block"},d),onLoad:function(){D({state:A,retry:-1}),c&&c()},onError:function(){U.current&&(q?W():F.isOnline?F.isOnline&&(y&&y.length>0&&B.current.retry>-1&&B.current.retry<3?setTimeout((function(){U.current&&D({state:I,retry:B.current.retry+1})}),1e3):W()):y&&B.current.altIndex<y.length-1?k(B.current.altIndex+1):U.current&&(k(0),W()))},src:V},g)))};_.propTypes={className:s.a.string,sizePriority:s.a.arrayOf(s.a.string),imgRef:s.a.any,dataUrl:s.a.string,onLoad:s.a.func,photo:s.a.object,style:s.a.object},_.defaultProps={sizePriority:["large","medium"]};var R=_,D=a(124);function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var M=Object(d.a)((function(e){return{root:{display:"block",position:"relative",width:"100%",height:"100%",background:"black",overflow:"hidden"},inner:{width:"100%",height:"100%",position:"absolute",top:"50%",left:"50%",transform:"translateY(-50%) translateX(-50%)"},xyTags:{position:"absolute",top:0,left:0,height:"100%",width:"100%"},img:{display:"block"},brokenImg:{display:"none"},formControl:{width:"100%"}}})),F=function(e){var t=e.photo,a=e.editXYTags,r=e.showTags,o=e.onXYTagChange,c=e.className,s=M(),u=Object(i.useRef)(),d=Object(i.useRef)(),g=Object(i.useState)(null),f=Object(n.a)(g,2),h=f[0],b=f[1],y=Object(m.i)(u),w=y.size,v=w.height,O=w.width,x=y.setResizeActive,E=Object(D.e)(t,a,h,o,x),S=E.onAddTagTrigger,k=E.XYTagChooserWrapper,C=E.relXYTags,P=E.onTagDragOver,T=E.onTagDragStop,I=E.onTagDelete,N=function(){if(d.current){var e=d.current,t=e.naturalHeight,a=e.naturalWidth;if(!(a>0&&t>0)){if(!u.current)return;j.a.info("Possible broken image");var r=u.current.getBoundingClientRect();return b({newWidth:r.width,newHeight:r.height,naturalWidth:r.width,naturalHeight:r.height,multiplier:1,broken:!0})}var n=Math.min(v/t,O/a);b({newWidth:n*a,newHeight:n*t,naturalWidth:a,naturalHeight:t,multiplier:n})}};Object(i.useLayoutEffect)(N,[O,v]);var A=Object(i.useMemo)((function(){return l.a.createElement("div",{className:s.xyTags},C.map((function(e,t){return l.a.createElement(D.d,L({key:"xytag-".concat(t),color:e.color,edit:a},{newSize:h,tag:e,onTagDragOver:P,onTagDragStop:T,onTagDelete:I}))})))}),[C,r]),z={};return h&&(z={height:h.newHeight,width:h.newWidth}),l.a.createElement("div",{className:p()(s.root,c),ref:u},l.a.createElement("div",{className:s.inner,style:{height:h?h.newHeight:1,width:h?h.newWidth:1},onClick:S},(r||a)&&h&&!h.broken&&A,l.a.createElement(R,{className:s.rawImage,sizePriority:["large","medium","thumb"],photo:t,imgRef:d,onLoad:N,style:z})),a&&l.a.createElement(k,{title:"Choose Tag"}))};F.propTypes={className:s.a.string,photo:s.a.object.isRequired,editXYTags:s.a.bool,showTags:s.a.bool,onXYTagChange:s.a.func};var U=F,B=a(18),q=a.n(B),W=a(25),G=a(2078),H=a(2079),V=a(2080),Y=a(2098),Q=a(2060),$=a(2020),X=a(193),Z=a.n(X),K=a(503),J=a.n(K),ee=a(277),te=a(78),ae=a(12);function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var oe=Object(d.a)((function(e){return{root:{},tile:{},addFab:{position:"absolute",zIndex:10,top:e.spacing(1),left:e.spacing(1),backgroundColor:"#99999988",border:"2px solid #FFFFFF99",color:"#FFFFFF"},removeFab:{"&:hover":{backgroundColor:e.palette.error.dark},position:"absolute",zIndex:10,top:e.spacing(1),left:e.spacing(1),backgroundColor:e.palette.error.main,border:e.palette.error.contrastText,color:e.palette.error.contrastText},notDeleteable:{background:e.palette.error.dark,opacity:.1},unSelectedTile:{"& img":{opacity:.7}},selectedTile:{padding:"".concat(e.spacing(2),"px!important"),"& img":{opacity:1}},img:{},snackbarContent:{backgroundColor:ee.a[700]},snackbar:{}}})),ie=function(e){var t=e.photos,a=e.columns,o=e.multiSelect,c=e.onDelete,s=e.onTileClick,u=e.allowDelete,d=Object(i.useState)(!1),g=Object(n.a)(d,2),f=g[0],h=g[1],b=oe(),y=Object(i.useContext)(m.a).getPhotoUrls,w=Object(i.useState)([]),v=Object(n.a)(w,2),O=v[0],x=v[1],E=Object(i.useState)({}),S=Object(n.a)(E,2),k=S[0],j=S[1],C=Object(i.useState)(!1),P=Object(n.a)(C,2),T=P[0],I=P[1],N=function(){h(!1),x([])},A=function(e){if(O.indexOf(e)<0)x([].concat(Object(W.a)(O),[e]));else{var t=O.filter((function(t){return t!==e}));0===t.length&&N(),x(t)}};Object(i.useEffect)((function(){t.forEach((function(e){return q.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=j,t.t1=ne,t.t2={},t.t3=k,t.t4=r.a,t.t5={},t.t6=e.id,t.next=9,q.a.awrap(y(e,["thumb","medium"]));case 9:t.t7=t.sent,t.t8=(0,t.t4)(t.t5,t.t6,t.t7),t.t9=(0,t.t1)(t.t2,t.t3,t.t8),(0,t.t0)(t.t9);case 13:case"end":return t.stop()}}))}))}),[t]);return l.a.createElement("div",null,l.a.createElement(G.a,{cols:a,cellHeight:200,className:b.root},t.map((function(e,t){var a=O.indexOf(e.id)>-1;return l.a.createElement(H.a,{key:"gridTile".concat(t,"_").concat(e.id),onClick:function(t){return function(e,t){e.preventDefault(),e.stopPropagation(),u&&f?A(t.id):s(t.id)}(t,e)},classes:{root:b.root,tile:p()(b.tile,f&&!u&&b.notDeleteable,f&&u&&!a&&b.unSelectedTile,f&&a&&b.selectedTile)}},l.a.createElement(_,{photo:e,style:{objectFit:"cover"},sizePriority:["medium","thumb","large"],className:b.img}),u&&o&&l.a.createElement($.a,{size:"small","aria-label":"Add",disableFocusRipple:!0,className:f&&a?b.removeFab:b.addFab,onClick:function(t){return function(e,t){e.preventDefault(),e.stopPropagation(),h(!0),A(t)}(t,e.id)}},f&&a?l.a.createElement(J.a,null):l.a.createElement(Z.a,null)),l.a.createElement(V.a,{title:l.a.createElement("span",null,ae.dates.formatDate(e.takenOn,"ll LT"))}))}))),l.a.createElement(Y.a,{open:f,autoHideDuration:null,ContentProps:{"aria-describedby":"snackbar-fab-message-id",className:b.snackbarContent},message:l.a.createElement("span",{id:"snackbar-fab-message-id"},O.length>=t.length?"You can't delete all the photos. delete the series instead.":"".concat(O.length," Photos selected")),action:l.a.createElement("div",null,l.a.createElement(Q.a,{color:"inherit",disabled:O.length>=t.length,size:"small",onClick:function(){return I(!0)}},"Delete"),l.a.createElement(Q.a,{color:"inherit",size:"small",onClick:function(){return N()}},"Cancel")),className:b.snackbar}),l.a.createElement(te.d,{open:T,onConfirm:function(e){I(!1),!0===e&&O.length<t.length&&c(O),N()},title:"Delete ".concat(O.length," Photos"),message:"Are you sure you want to delete these photos?"}))};ie.propTypes={photos:s.a.array.isRequired,columns:s.a.number,multiSelect:s.a.bool,allowDelete:s.a.bool,onDelete:s.a.func,onTileClick:s.a.func.isRequired},ie.defaultProps={multiSelect:!0,columns:2};var le=ie,ce=a(2101),se=Object(d.a)((function(e){return{root:{color:"white",zIndex:10,display:"flex",flexDirection:"column",position:"absolute","@media (orientation: landscape)":{height:"80%",bottom:"0%"},"@media (orientation: portrait)":{left:"0",transform:"translateY(-50%)",height:"75%",top:"50%"}},sliderLabel:{display:"block",flexGrow:1,textAlign:"center",padding:e.spacing(3,0,3,0),textShadow:"0 0 5px black, 0 0 5px black"},vertical:{padding:"0px 31px!important",width:"4px!important"},rail:{width:"4px!important",background:e.palette.primary.dark,boxShadow:"0 0 10px 5px black"},track:{width:"4px!important",background:e.palette.primary.main},thumb:{background:e.palette.primary.main,border:"1px solid ".concat(e.palette.primary.dark),marginLeft:"-13px !important",marginBottom:"-13px !important",width:30,height:30}}})),ue=function(e){var t=e.defaultValue,a=e.onChange,r=e.className,o=se(),c=Object(i.useState)(t),s=Object(n.a)(c,2),u=s[0],d=s[1],m=ae.util.debounce(a,200,!0);return l.a.createElement("div",{className:p()(o.root,r)},l.a.createElement(g.a,{className:o.sliderLabel,color:"inherit",variant:"caption"},"New"),l.a.createElement(ce.a,{classes:{vertical:o.vertical,rail:o.rail,track:o.track,thumb:o.thumb},color:"secondary",value:u,"aria-labelledby":"label",onChange:function(e,t){d(t),m(t)},orientation:"vertical"}),l.a.createElement(g.a,{className:o.sliderLabel,color:"inherit",variant:"caption"},"Reference"))};ue.propTypes={defaultValue:s.a.number,className:s.a.string,onChange:s.a.func},ue.defaultProps={defaultValue:100,onChange:function(){}};var pe=ue,de=a(2018),me=a(2095),ge=a(121),fe=a.n(ge),he=a(45),be=a(97),ye=Object(d.a)((function(e){var t=Object(be.fade)(e.palette.secondary.light,.4);return{root:{background:"rgb(150,150, 150)",height:"100%",width:"100%"},canvasWrapper:{zIndex:2,position:"absolute",height:"100%",width:"100%"},rawImage:{height:"100%",width:"100%",objectFit:"contain"},reference:{zIndex:3,position:"absolute",height:"100%",width:"100%"},libraryFab:{position:"absolute",zIndex:10,"@media (orientation: landscape)":{left:"15px",top:"15px"},"@media (orientation: portrait)":{left:"15px",top:"15px"}},slider:{"@media (orientation: landscape)":{position:"absolute",left:"0",height:"79%",top:"20%"},"@media (orientation: portrait)":{position:"absolute",left:"0",transform:"translateY(-50%)",height:"50%",top:"45%"}},snackbarContent:{background:e.palette.secondary.main,color:e.palette.secondary.contrastText,"&::before":{content:'"  "',display:"block",position:"absolute",width:"100%",height:"100%",borderRadius:"inherit",boxShadow:"0 0 0 0 ".concat(t),animation:"$fabPulse 4s",animationIterationCount:5,animationTimingFunction:"linear"}},"@keyframes fabPulse":{"0%":{boxShadow:"0 0 0 0px ".concat(t)},"90%":{boxShadow:"0 0 0 0px ".concat(t)},"100%":{boxShadow:"0 0 0 10px transparent"}},swipeDrawer:{width:"50%"},referenceTextContainer:{width:"100%",display:"flex",color:"white",background:"rgba(0,0,0,0.5)",padding:e.spacing(3),position:"absolute",zIndex:4,top:0},newText:{flexGrow:1,color:"white",textShadow:"1 1 1 black",textAlign:"right"},refText:{flexGrow:1,color:"white",textShadow:"1 1 1 black"}}})),we=function(e){var t=e.photoBlob,a=e.photos,r=e.defaultRefPhotoId,o=e.onConfirm,c=e.onCancel,s=e.onRetry,u=e.inputMethod,d=ye(),m=Object(i.useRef)(),f=r?a.find((function(e){return e.id===r})):a&&a.length>0?a[0]:null;Object(i.useLayoutEffect)((function(){if(t&&m.current){var e=(window.URL||window.webkitURL).createObjectURL(t);m.current.src=e}}),[t]);var h=Object(i.useState)(f),b=Object(n.a)(h,2),y=b[0],w=b[1],v=Object(i.useState)(!1),O=Object(n.a)(v,2),x=O[0],E=O[1],S=Object(i.useState)(70),k=Object(n.a)(S,2),j=k[0],C=k[1];return t?l.a.createElement("div",{className:d.root},l.a.createElement(de.a,null),Boolean(y)&&l.a.createElement(pe,{className:d.slider,defaultValue:j,onChange:C}),Boolean(y)&&l.a.createElement("div",{className:d.reference},l.a.createElement(R,{sizePriority:["large","medium","thumb"],style:{opacity:1-j/100},photo:y})),l.a.createElement("div",{className:d.canvasWrapper},l.a.createElement("img",{ref:m,className:d.rawImage})),l.a.createElement(Y.a,{open:!0,autoHideDuration:null,ContentProps:{"aria-describedby":"snackbar-fab-message-id",className:d.snackbarContent},message:l.a.createElement("span",{id:"snackbar-fab-message-id"},"Keep this photo?"),action:l.a.createElement("div",null,l.a.createElement(Q.a,{color:"secondary",size:"small",onClick:c},"Cancel"),Boolean(s)&&l.a.createElement(Q.a,{color:"inherit",size:"small",onClick:s},"library"===u?"Choose Another":"Retry"),l.a.createElement(Q.a,{color:"inherit",size:"small",onClick:o},"Keep")),className:d.snackbar}),a&&a.length>0&&l.a.createElement($.a,{"aria-label":"library",className:p()(d.libraryFab,d.buttonFab),classes:{disabled:d.disabledFab},onClick:function(){return E(!0)}},l.a.createElement(fe.a,{className:d.libraryIcon})),a&&l.a.createElement(me.a,{anchor:"left",open:x,classes:{paperAnchorLeft:d.swipeDrawer},onClose:function(){return E(!1)},onOpen:function(){return E(!0)}},l.a.createElement("div",{tabIndex:0,className:d.swipeDrawerContainer,role:"button",onClick:function(){return E(!1)},onKeyDown:function(){return E(!1)}},l.a.createElement(le,{multiSelect:!1,columns:1,photos:a,onTileClick:function(e){w(a.find((function(t){return t.id===e}))),E(!1)}})))):l.a.createElement(he.k,{loading:!0,noAppInfo:!0},l.a.createElement(g.a,{color:"inherit",variant:"subtitle1"},"Processing Image..."))};we.propTypes={defaultRefPhotoId:s.a.string,photoBlob:s.a.any,photos:s.a.array,inputMethod:s.a.string,onConfirm:s.a.func.isRequired,onCancel:s.a.func.isRequired,onRetry:s.a.func};var ve=we,Oe=a(264),xe=a.n(Oe),Ee=a(2082),Se=a(2069),ke=a(2070),je=a(2055),Ce=a(2081),Pe=a(2103),Te=a(95),Ie=a.n(Te),Ne=a(267),Ae=a.n(Ne),ze=a(266),_e=a.n(ze),Re=a(130),De=a.n(Re),Le=a(62),Me=a(83),Fe=a(265);function Ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Be(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ue(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function qe(){return(qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var We=Object(d.a)((function(e){return{root:{background:"black",height:"100%",overflow:"hidden",position:"relative"},inner:{}}})),Ge=function(e){var t=e.photo,a=e.showTags,r=(e.className,e.onClose),c=(e.initZoom,We()),s=Object(i.useRef)(),u=Object(i.useRef)(),p=Object(i.useState)(null),d=Object(n.a)(p,2),m=d[0],g=d[1],f=Object(i.useState)(null),h=Object(n.a)(f,2),b=h[0],y=h[1],w=m?{multiplier:m?m.scale:1,newWidth:m.scaledWidth,newHeight:m.scaledHeight}:{newWidth:0,newHeight:0,naturalWidth:0,naturalHeight:0,multiplier:1},v=Object(D.e)(t,!1,w,null,!0).relXYTags,O=Object(i.useMemo)((function(){return l.a.createElement("div",{className:c.xyTags},v.map((function(e,t){return l.a.createElement(D.d,qe({key:"xytag-".concat(t),color:e.color},{newSize:w,tag:e}))})))}),[v]),x=function(){if(u.current&&s.current){m||Ve(u.current);var e=s.current.parentElement.getBoundingClientRect(),t=e.width,a=e.height,r=u.current,n=r.naturalHeight,o=r.naturalWidth;if(o>0&&n>0){var i=Math.min(t/o,a/n),l=Math.max(1.5,o/t,n/a),c=Math.max(t/o,a/n),p=o*c,d=n*c;m&&n===m.naturalHeight&&o===m.naturalWidth||g({containerWidth:t,containerHeight:a,moving:!1,naturalWidth:o,naturalHeight:n,scaledWidth:p,scaledHeight:d,minZoom:i,maxZoom:l,x:(t-p)/2,y:(a-d)/2,pinchCenter:null,scale:c})}else g(null)}},E=function(e,t,a){return e>a?a:e<t?t:e},S=function(){if(m){m.moving;var e=Object(o.a)(m,["moving"]);if(e.pinchCenter=null,e.scale<e.minZoom)return r();e.scale=E(e.scale,e.minZoom,e.maxZoom),e.scaledWidth=e.naturalWidth*e.scale,e.scaledHeight=e.naturalHeight*e.scale,m.containerWidth-e.scaledWidth>0?e.x=(m.containerWidth-e.scaledWidth)/2:e.x=E(e.x,m.containerWidth-e.scaledWidth,0),m.containerHeight-e.scaledHeight>0?e.y=(m.containerHeight-e.scaledHeight)/2:e.y=E(e.y,m.containerHeight-e.scaledHeight,0),g(e),y(null)}},k=function(){if(m){var e=b||m,t=(e.moving,Object(o.a)(e,["moving"]));g(t),y(null)}},j=Object(i.useMemo)((function(){return l.a.createElement(R,{className:c.rawImage,sizePriority:["large","medium","thumb"],photo:t,imgRef:u,onLoad:x})}),[t]);return l.a.createElement(Fe.a,{onDoubleTap:function(){r()},onPinch:function(e){var t=e.scale,a=e.center;if(m){b||y(m);var r=b||m,n=r.pinchCenter?r.pinchCenter:a,o=r.naturalWidth*r.scale*t,i=r.naturalHeight*r.scale*t,l=(a.x-r.x)/r.scaledWidth,c=(a.y-r.y)/r.scaledHeight,s=r.x+(r.scaledWidth-o)*l,u=r.y+(r.scaledHeight-i)*c;g(Be({},r,{moving:!0,pinchCenter:n,scale:t,x:s,y:u,scaledWidth:o,scaledHeight:i}))}},onPan:function(e){var t=e.deltaX,a=e.deltaY;if(m){b||y(m);var r=b||m;g(Be({},r,{moving:!0,x:r.x+t,y:r.y+a}))}},onPinchEnd:S,onPanEnd:S,onPinchCancel:k,onPanCancel:k,options:{recognizers:{pinch:{enable:!0}}}},l.a.createElement("div",{className:c.root},l.a.createElement("div",{className:c.inner,ref:s,style:{height:m?m.scaledHeight:"100%",width:m?m.scaledWidth:"100%",marginLeft:m?m.x:0,marginTop:m?m.y:0}},a&&m&&!m.moving&&w&&!w.broken&&O,j)))};Ge.propTypes={className:s.a.string,photo:s.a.object.isRequired,showTags:s.a.bool,initZoom:s.a.number,onClose:s.a.func.isRequired};var He=Ge,Ve=function(e){["onclick","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","ondblclick","onfocus","onblur"].forEach((function(t){e[t]=function(){return!1}}))},Ye=a(47),Qe=function(e){return{root:{display:"flex",height:"100%",flexDirection:"column",overflow:"hidden"},appBar:{flexGrow:0,color:function(e){return Ye.a.access[e.seriesAccess].palette.primary.contrastText},background:function(e){return Ye.a.access[e.seriesAccess].palette.primary.main}},appBarEdit:{color:function(e){return Ye.a.access[e.seriesAccess].palette.primary.contrastText},background:function(e){return Ye.a.access[e.seriesAccess].palette.primary.main}},menuTextPadded:{marginLeft:e.spacing(2)},pulseIcon:{animation:"$editPulse linear infinite 3s"},"@keyframes editPulse":{"0%":{boxShadow:"0 0 0 0px #FFFFFF66"},"60%":{boxShadow:"0 0 0 0px #FFFFFF66"},"100%":{boxShadow:"0 0 0 10px transparent"}},grow:{flexGrow:1},photoWrapper:{height:"100%"},inner:{flex:"1 1",position:"relative"},tabMenu:{marginTop:e.spacing(7)},tipChip:{position:"absolute",zIndex:11,bottom:20,left:"50%",opacity:.6,transform:"translateX(-50%)"},mobileStepper:{background:"none"},dots:{margin:"0 auto"},dot:{border:"1px solid #FFFFFF77"},dotActive:{background:e.palette.secondary.main},activeButton:{color:e.palette.primary.main,opacity:1}}};function $e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Xe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$e(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ze=Object(d.a)(Qe),Ke={SWIPING:"SWIPING",ZOOMING:"ZOOMING",SHOW_INFO:"SHOW_INFO",EDIT_TAGS:"EDIT_TAGS"},Je=function(e){var t=e.photoId,a=e.photos,r=e.seriesAccess,o=e.onMenuBack,c=e.onUpdatePhoto,s=e.canUpdatePhotoArr,u=Ze({seriesAccess:r}),d=Object(Le.a)(),f=Object(i.useState)(t?a.findIndex((function(e){return e.id===t})):0),h=Object(n.a)(f,2),b=h[0],y=h[1],w=a[b],v=Object(i.useState)(w&&w.tags?w.tags:[]),O=Object(n.a)(v,2),x=O[0],E=O[1],S=Object(i.useState)(!1),k=Object(n.a)(S,2),C=k[0],P=k[1],T=Object(i.useState)(Ke.SWIPING),I=Object(n.a)(T,2),N=I[0],A=I[1],z=Object(i.useContext)(m.a).tagConfigArr;if(!w)return null;var _=new ae.Tags(z,x||w.tags||[]),R=s[b];j.a.info("PhotoViewTool",N,{photo:w,tagDelta:x,showTags:C,canUpdatePhotoArr:s});var D="Photo View (".concat(b+1,"/").concat(a.length,")");return N===Ke.EDIT_TAGS&&(D="Edit Tags (".concat(b+1,"/").concat(a.length,")")),l.a.createElement("div",{className:u.root},l.a.createElement(de.a,null)," ",l.a.createElement(Se.a,{position:"static",className:p()(u.appBar,N!==Ke.EDIT_TAGS?u.appBarEdit:null)},l.a.createElement(ke.a,{disableGutters:!0},l.a.createElement(je.a,{className:u.menuButton,color:"inherit","aria-label":"Menu",onClick:function(){return o()}},l.a.createElement(Ie.a,null)),l.a.createElement("div",{className:p()(u.grow)},l.a.createElement(g.a,{variant:"subtitle2",color:"inherit"},D),l.a.createElement(g.a,{variant:"subtitle2",color:"inherit"},ae.dates.formatDate(w.takenOn,"lll"))),N===Ke.EDIT_TAGS&&l.a.createElement(Q.a,{color:"inherit",onClick:function(){P(!0),E(w&&w.tags?w.tags:[]),A(Ke.SWIPING)}},"Cancel"),N===Ke.EDIT_TAGS&&l.a.createElement(Q.a,{color:"inherit",onClick:function(){P(!0),c(w,{id:w.id,tags:x}),A(Ke.SWIPING)}},"Save"),R&&C&&N!==Ke.EDIT_TAGS&&l.a.createElement(je.a,{color:"inherit",className:u.pulseIcon,onClick:function(){return A(Ke.EDIT_TAGS)}},l.a.createElement(_e.a,null)),N!==Ke.EDIT_TAGS&&l.a.createElement(je.a,{color:"inherit",className:p()(u.tagButton,C?u.activeButton:null,C?null:u.pulseIcon),onClick:function(){return P(!C)}},l.a.createElement(Ce.a,{className:u.margin,badgeContent:_.getXYTags().length,color:"primary"},l.a.createElement(De.a,{color:"inherit"}))),N!==Ke.EDIT_TAGS&&l.a.createElement(je.a,{color:"inherit",className:p()(u.infoButton,N===Ke.SHOW_INFO&&u.activeButton),onClick:function(){return A(N===Ke.SHOWINFO?Ke.SWIPING:Ke.SHOW_INFO)}},l.a.createElement(Ae.a,null)))),N===Ke.SWIPING&&l.a.createElement(Fe.a,{onDoubleTap:function(){N===Ke.SWIPING&&A(Ke.ZOOMING)},onPinch:function(e){e.scale>1.01&&N===Ke.SWIPING&&A(Ke.ZOOMING)},options:{recognizers:{pinch:{enable:!0}}}},l.a.createElement("div",{className:u.inner},l.a.createElement(xe.a,{axis:"rtl"===d.direction?"x-reverse":"x",index:b,containerStyle:{height:"100%"},style:{height:"100%"},onChangeIndex:function(e){return y(e)},enableMouseEvents:!0},a.map((function(e,t){return t===b?l.a.createElement("div",{key:"swipeshowpic-".concat(t),className:u.photoWrapper},l.a.createElement(U,{showTags:C&&t===b,photo:e})):l.a.createElement("div",{key:"swipeshowpic-".concat(t),className:u.photoWrapper},l.a.createElement(U,{photo:e}))}))),N===Ke.SWIPING&&l.a.createElement(Ee.a,{steps:a.length,position:"bottom",activeStep:b,classes:{root:u.mobileStepper,dots:u.dots,dot:u.dot,dotActive:u.dotActive}}))),N===Ke.ZOOMING&&l.a.createElement("div",{className:u.inner},l.a.createElement(He,{showTags:C,photo:w,onClose:function(){return A(Ke.SWIPING)}})),N===Ke.EDIT_TAGS&&l.a.createElement("div",{className:u.inner},l.a.createElement(U,{photo:Xe({},w,{tags:x}),showTags:!0,editXYTags:!0,onXYTagChange:function(e){return E(e)}})),N===Ke.SHOW_INFO&&l.a.createElement(Me.b,{open:!0,photo:w,canEdit:R,seriesAccess:r,onOk:function(e){c(w,Xe({id:w.id},e)),A(Ke.SWIPING)},onCancel:function(){return A(Ke.SWIPING)}}),N===Ke.EDIT_TAGS&&l.a.createElement(Pe.a,{label:"Tap to tag features...",onClick:function(){},className:u.tipChip}))};Je.propTypes={photoId:s.a.string.isRequired,photos:s.a.array.isRequired,seriesAccess:s.a.string,onMenuBack:s.a.func.isRequired,onUpdatePhoto:s.a.func.isRequired,canUpdatePhotoArr:s.a.arrayOf(s.a.bool)};var et=Je;function tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function at(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var rt=Object(d.a)(Qe),nt=function(e){var t=e.photoId,a=e.photos,r=e.seriesAccess,o=e.onMenuBack,c=e.onUpdatePhoto,s=(e.canUpdatePhotoArr,rt({seriesAccess:r})),u=a[t?a.findIndex((function(e){return e.id===t})):0],d=Object(i.useState)(u&&u.tags?u.tags:[]),m=Object(n.a)(d,2),f=m[0],h=m[1];if(!u)return null;return l.a.createElement("div",{className:s.root},l.a.createElement(de.a,null)," ",l.a.createElement(Se.a,{position:"static",className:p()(s.appBar,s.appBarEdit)},l.a.createElement(ke.a,{disableGutters:!0},l.a.createElement("div",{className:p()(s.grow,s.menuTextPadded)},l.a.createElement(g.a,{variant:"subtitle2",color:"inherit"},"Add tags to your photo"),l.a.createElement(g.a,{variant:"subtitle2",color:"inherit"},ae.dates.formatDate(u.takenOn,"lll"))),l.a.createElement(Q.a,{color:"inherit",onClick:function(){c(u,{id:u.id,tags:f}),o()}},"Next"))),l.a.createElement("div",{className:s.inner},l.a.createElement(U,{photo:at({},u,{tags:f}),showTags:!0,editXYTags:!0,onXYTagChange:function(e){return h(e)}})),l.a.createElement(Pe.a,{label:"Tap to tag features...",onClick:function(){},className:s.tipChip}))};nt.propTypes={photoId:s.a.string.isRequired,photos:s.a.array.isRequired,seriesAccess:s.a.string,onMenuBack:s.a.func.isRequired,onUpdatePhoto:s.a.func.isRequired,canUpdatePhotoArr:s.a.arrayOf(s.a.bool)};var ot=nt;a.d(t,"g",(function(){return R})),a.d(t,"b",(function(){return U})),a.d(t,"d",(function(){return le})),a.d(t,"c",(function(){return pe})),a.d(t,"e",(function(){return ve})),a.d(t,"f",(function(){return et})),a.d(t,"a",(function(){return ot}))},711:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(1),i={background:"black",height:"100%",position:"relative"},l=function(e){var t=e.children;return n.a.createElement("div",{style:i},t)};l.propTypes={children:a.n(o).a.any.isRequired},t.default=l},712:function(e,t,a){"use strict";a.r(t);var r=a(16),n=a(0),o=a.n(n),i=a(1),l=a.n(i),c=a(2018),s=a(541),u=a(176),p=a(47),d=a(11),m=a(490),g=a(345),f=a(491),h=a.n(f),b=a(4),y=a.n(b);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}y.a.enableAll(),h()(o.a);var O=Object(u.a)((function(e){return{"@global":v({},p.b["@global"],{"html, body, #root":{minHeight:"10px",minWidth:"10px",height:"100%"}}),boundBox:{border:"5px dashed #777777",margin:20}}})),x=function(e){var t=e.children,a=e.context,r=e.theme,i=e.outerTheme,l=(e.iOS,e.noTheme),u=e.boundBoxStyle,f=O(),h=Object(n.useMemo)((function(){return r||p.a.home}),[r]),b=Object(n.useMemo)((function(){return v({},m.FakeData.fakeAppContext(),{globalActions:g.fakeGlobalActions,signedIn:!0},a)}),[a]);if(l)return o.a.createElement(d.b,{value:b},t);Object(n.useLayoutEffect)((function(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, shrink-to-fit=no")}),[]),Object(n.useLayoutEffect)((function(){if(Object(d.g)()){y.a.info("Disabling Pinch on ios");var e=function(e){Math.abs(e.scale-1)>.02&&(y.a.info("touchMove",e.scale),e.preventDefault())};return document.addEventListener("touchmove",e,!1),function(){document.removeEventListener("touchmove",e,!1)}}}),[b.device]);var w=u?o.a.createElement("div",{className:f.boundBox,style:u},t):t;return o.a.createElement(d.b,{value:b},o.a.createElement(s.a,{theme:i||h},o.a.createElement(c.a,null),o.a.createElement(s.a,{theme:h},w)))};x.propTypes={children:l.a.any.isRequired,noTheme:l.a.bool,boundBoxStyle:l.a.object,theme:l.a.object,iOS:l.a.bool,outerTheme:l.a.object,context:l.a.object},t.default=x},713:function(e,t,a){"use strict";var r=a(18);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.randomLocation=t.fakePastDate=void 0;var n=a(301),o=d(a(43)),i=a(74),l=d(a(369)),c=d(a(730)),s=d(a(105)),u=a(301),p=d(a(4));function d(e){return e&&e.__esModule?e:{default:e}}function m(e,t,a,r,n,o,i){try{var l=e[o](i),c=l.value}catch(s){return void a(s)}l.done?t(c):Promise.resolve(c).then(r,n)}function g(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var w=["#418CF0","#FCB441","#E0400A","#056492","#BFBFBF","#1A3B69","#FFE382","#129CDD","#CA6B4B","#005CDB","#F3D288","#506381","#F1B9A8","#E0830A","#7893BE"],v=["OWNED","CONTRIBUTED","WATCHING"],O=function(){return l.default.utc(c.default.date.past()).format("x")};t.fakePastDate=O;t.randomLocation=function(e){var t=null;return t=e&&e.length>0?(0,n.randomArrayEl)(e):[o.default.random(-180,179,!0),o.default.random(-85,85,!0)],(0,i.transformTranslate)((0,i.point)(t),o.default.random(0,2,!0),o.default.random(0,360,!0),{units:"kilometers"}).geometry.coordinates};var x=function e(t,a,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"basicObj",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.userSummary(t.createdUser||(0,n.randomArrayEl)(i.userPool)),r=e.userSummary(t.updatedUser||a);return{id:t.id||(0,s.default)(),createdBy:a.id,updatedBy:r.id,createdUser:a,updatedUser:r,createdOn:t.createdOn||O(),updatedOn:t.updatedOn||O()}})),y(this,"getUser",(function(e){return i.userPool.find((function(t){return t.id===e}))})),y(this,"series",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.basicObj(t),r=800+o.default.random(-3,3),l=600+o.default.random(-3,3),s=t.numPhotos?(0,u.filledArray)(t.numPhotos):(0,n.randomMap)(1,10,(function(e,t){return t})),p=o.default.random(0,s.length-1),d=t.access||(0,n.randomArrayEl)(["PRIVATE","OPEN","PUBLIC"]),m=t.photos||s.map((function(e,n){return i.photo({width:r,height:l,createdUser:"OPEN"===d?null:a.createdUser,updatedUser:"OPEN"===d?null:a.updatedUser,featured:n===p,hasPaths:!1!==t.hasPaths})}));m.forEach((function(e){e.seriesId=a.id,e.seriesCreatedBy=a.createdBy}));var g=t.featured;!g&&m&&m.length>0&&(g=m?e.photoSummary((0,n.randomArrayEl)(m)):null);var f=t.featured;return!f&&m&&m.length>0&&(f=m?e.photoSummary((0,n.randomArrayEl)(m)):null),b({},a,{featured:g,latest:f,name:t.name||c.default.name.title(),objType:"SERIES",access:d,meta:JSON.stringify(t.meta||{project:"926ff265-e22b-400d-ae00-a817d69d5042",reach:"4f310e81-e1f8-45e7-9341-859e7f4e2208"}),watchers:0,note:t.nite||c.default.lorem.paragraphs(o.default.random(3,4)).replace("\n","\n\n"),coords:t.coords||[-120.333379,44.629701],direction:t.direction||(0,n.randomChance)(1,2)?o.default.random(0,359):null,photos:m,photoCount:m.length})})),y(this,"event",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.series||i.series(),r=a.photos,o=f(a,["photos"]),l=(0,n.randomArrayEl)(r);return{series:e.seriesSummary(o),photo:e.photoSummary(l),relation:(0,n.randomArrayEl)(v)}})),y(this,"photo",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i.basicObj(e),a=[e.width||800,e.height||600],r=b({},t,{takenOn:t.createdOn,objType:"PHOTO",base64:null,seriesId:e.seriesId||null,seriesCreatedBy:e.seriesCreatedBy||null,coords:e.coords||[-120.333379,44.629701],rawData:e.rawData||{a:1,b:2},note:e.note||c.default.lorem.paragraphs(o.default.random(1,4)),meta:JSON.stringify(e.meta||{user:"926ff265-e22b-400d-ae00-a817d69d5042"}),tags:e.tags||i.tags({width:a[0],height:a[1]})});return e.hasPaths&&(r.paths=i.getImagePaths.apply(i,a)),r})),y(this,"getImagePaths",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];function r(e,t){var r=a?t:o.default.random(-3,3)+t,n=a?e:o.default.random(-3,3)+e;return"".concat(n,"/").concat(r,"/nature")}return e&&t?{base:"https://placeimg.com/",thumb:r(Math.round(1*e/3),Math.round(1*t/3)),medium:r(Math.round(2*e/3),Math.round(2*t/3)),large:r(e,t),orig:r(2*e,2*t)}:{base:"https://placeimg.com/",thumb:r(200,150),medium:r(400,300),large:r(1024,768),orig:r(4e3,3e3)}})),y(this,"tags",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.appContext.tagConfigArr.reduce((function(t,a){return[].concat(g(t),g(i._getTag(a,e)))}),[])})),y(this,"_getTag",(function(t,a){var r=o.default.shuffle(g(t._values));return(0,n.randomMap)(1,r.length,(function(n,o){var i=e.tagIncludesCoords(t);return e.tag({label:r[o].label,id:r[o].id,typeId:t.id,width:i?a.width:null,height:i?a.height:null})}))})),this.userPool=t||(0,n.randomMap)(1,10,(function(){return e.user()})),this.appContext=e.fakeAppContext(a,r,this.userPool)};y(x,"fakeAppContext",(function(e,t,a){var r=(0,n.randomArrayEl)(a);return{metaConfig:e||{user:{objType:"PHOTO",label:"User",default:r,render:function(e){return"User 1: ".concat(r?r.username:"User 1")}}},currentUser:r,getPhotoUrls:x.getPhotoUrls,onAvatarClick:function(e){return p.default.info("onAvatarClick",e)},tagConfigArr:t||[x.freeBothTags,x.structureTags,x.treeTags,x.emotionTags,x.seasonTags]}})),y(x,"getPhotoUrls",function(){var e,t=(e=r.mark((function e(t,a){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.dataUrl){e.next=5;break}return e.abrupt("return",t.dataUrl);case 5:if(t.paths&&0!==t.paths.length){e.next=7;break}return e.abrupt("return",Promise.reject(new Error("No Photos Found")));case 7:return p.default.info("FAKEDATA: resolving image"),e.abrupt("return",a.map((function(e){return"".concat(t.paths.base).concat(t.paths[e])})));case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})),function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function i(e){m(o,r,n,i,l,"next",e)}function l(e){m(o,r,n,i,l,"throw",e)}i(void 0)}))});return function(e,a){return t.apply(this,arguments)}}()),y(x,"photoSummary",(function(e){return{id:e.id,createdUser:e.createdUser,takenOn:e.takenOn,updatedOn:e.updatedOn,createdOn:e.createdOn,seriesId:e.seriesId,seriesCreatedBy:e.seriesCreatedBy,paths:e.paths}})),y(x,"seriesSummary",(function(e){return{id:e.id,name:e.name,createdUser:e.createdUser,access:e.access,updatedOn:e.updatedOn,createdOn:e.createdOn,coords:e.coords,watchers:e.watchers,featured:e.featured,latest:e.latest,photoCount:e.photoCount,seriesStatus:e.seriesStatus,direction:e.direction}})),y(x,"userSummary",(function(e){return{id:e.id,gravatar:e.gravatar,gravatarProfile:e.gravatarProfile,username:e.username}})),y(x,"tag",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{label:e.label,typeId:e.typeId,coords:e.width&&e.height?{x:o.default.random(20,e.width-20),y:o.default.random(20,e.height-20)}:null}})),y(x,"tagIncludesCoords",(function(e){if(e.allowNonXY&&e.allowXY)return Math.random()>=.5;if(e.allowNonXY||e.allowXY)return!(e.allowNonXY&&!e.allowXY)&&!(e.allowNonXY||!e.allowXY);throw new Error("NOT ALLOWED allowNonX===false && allowXY === false")})),y(x,"user",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:(0,s.default)(),objType:"USER",createdOn:e.createdOn||O(),updatedOn:e.updatedOn||O(),username:e.username||"".concat(c.default.name.firstName()," ").concat(c.default.name.lastName()),gravatar:e.avatarSrc||"https://placeimg.com/".concat(o.default.random(80,100),"/").concat(o.default.random(80,100),"/people"),gravatarProfile:"https://s.gravatar.com/b65e93508e1b7eae0af790ec9c65093b.json",watching:[],meta:JSON.stringify(e.meta||{})}})),y(x,"_getSampleTags",(function(e){Promise.resolve(x._freeBothTagsValues)})),y(x,"_freeBothTagsValues",["Groovy","Elbow","Boat","Anchovy","Garden","Sunday","Green#$@324","Beaver Stuff","234Little Things","Spaceship","SAG","(  Am I Right?    )","{{{{\"'STEREO'\"}}}}}","mytag","XYTAGS","Generation","Frogs","randomTag","Januarry 2005","2018"].map((function(e,t){return{label:e,id:(0,s.default)(),count:31*t+o.default.random(1,20)}}))),y(x,"freeBothTags",{id:"freeBothType",label:"Anything Goes Tag",color:w[8],allowXY:!0,allowNonXY:!0,allowAdditions:!0,_values:x._freeBothTagsValues,getValuePromiseArr:[function(){return Promise.resolve(x._freeBothTagsValues)}]}),y(x,"treeTagValues",["Elm","Birch","Palm","Cottonwood","Oak"].map((function(e,t){return{label:e,id:(0,s.default)()}}))),y(x,"treeTags",{id:"treetypes",label:"Tree Types",color:w[1],allowXY:!0,allowNonXY:!1,allowAdditions:!0,_values:x.treeTagValues,getValuePromiseArr:[function(){return Promise.resolve(x.treeTagValues)}]}),y(x,"structureTagValues",(0,n.randomMap)(10,15,(function(e,t){return{label:"Structure-".concat(t)}}))),y(x,"structureTags",{id:"structures",label:"Structures",color:w[2],allowXY:!0,allowNonXY:!1,allowAdditions:!1,_values:x.structureTagValues,getValuePromiseArr:[function(){return Promise.resolve(x.structureTagValues)}]}),y(x,"emotionTagValues",["Indignation","Anger","Confusion","Ambivalence","Cautious"].map((function(e,t){return{label:e}}))),y(x,"emotionTags",{id:"emotions",label:"Emotions",color:w[3],allowXY:!1,allowNonXY:!0,allowAdditions:!0,_values:x.emotionTagValues,getValuePromiseArr:[function(){return Promise.resolve(x.emotionTagValues)}]}),y(x,"seasonTagValues",["Winter","Spring","Summer","Fall"].map((function(e,t){return{label:e}}))),y(x,"seasonTags",{id:"season",label:"Season",color:w[5],allowXY:!1,allowNonXY:!0,allowAdditions:!1,_values:x.seasonTagValues,getValuePromiseArr:[function(){return Promise.resolve(x.seasonTagValues)}]});var E=x;t.default=E},78:function(e,t,a){"use strict";var r=a(0),n=a.n(r),o=a(1),i=a.n(o),l=a(2057),c=a(2062),s=a(2059),u=a(2060),p=a(111),d=a(2061),m=a(176),g=Object(m.a)((function(e){return{}})),f=function(e){var t=e.title,a=e.message,r=e.onConfirm,o=e.open,i=g();return n.a.createElement(l.a,{className:i.root,disableBackdropClick:!0,open:o,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"xl","aria-labelledby":"confirmation-dialog-title"},n.a.createElement(c.a,{id:"confirmation-dialog-title"},t),n.a.createElement(s.a,null,n.a.createElement(p.a,null,a)),n.a.createElement(d.a,null,n.a.createElement(u.a,{onClick:function(){return r(!1)},color:"primary"},"No"),n.a.createElement(u.a,{onClick:function(){return r(!0)},color:"primary"},"Yes")))};f.propTypes={open:i.a.bool,title:i.a.string.isRequired,message:i.a.string.isRequired,onConfirm:i.a.func.isRequired};var h=f,b=Object(m.a)((function(e){return{}})),y=function(e){var t=e.title,a=e.message,r=e.onConfirm,o=e.open,i=b();return n.a.createElement(l.a,{className:i.root,disableBackdropClick:!0,fullWidth:!0,open:o,disableEscapeKeyDown:!0,maxWidth:"xl","aria-labelledby":"confirmation-dialog-title"},n.a.createElement(c.a,{id:"confirmation-dialog-title"},t),n.a.createElement(s.a,null,n.a.createElement(p.a,null,a)),n.a.createElement(d.a,null,n.a.createElement(u.a,{onClick:function(){return r(!1)},color:"primary"},"No"),n.a.createElement(u.a,{onClick:function(){return r(!0)},color:"secondary"},"Yes")))};y.propTypes={open:i.a.bool,title:i.a.string.isRequired,message:i.a.string.isRequired,onConfirm:i.a.func.isRequired};var w=y,v=a(108),O=Object(m.a)((function(e){return{root:{},icon:{height:50,width:"100%",margin:"0 auto",color:e.palette.error.main},title:{}}})),x=function(e){var t=e.title,a=e.message,r=e.onClose,o=e.open,i=e.icon,m=O(),g=i||v.c;return n.a.createElement(l.a,{className:m.root,fullWidth:!0,open:o,PaperProps:{style:{maxWidth:"none"}},onClose:r,maxWidth:"xl","aria-labelledby":"confirmation-dialog-title"},n.a.createElement(c.a,{id:"confirmation-dialog-title",className:m.title},t),n.a.createElement(s.a,null,n.a.createElement(g,{className:m.icon}),n.a.createElement(p.a,{component:"div"},a)),n.a.createElement(d.a,null,n.a.createElement(u.a,{onClick:r,color:"primary"},"Ok")))};x.propTypes={open:i.a.bool,title:i.a.string.isRequired,icon:i.a.any,message:i.a.any,onClose:i.a.func.isRequired};var E=x,S=a(2055),k=a(129),j=a.n(k),C=Object(m.a)((function(e){return{root:{},body:{overflow:"hidden",whiteSpace:"pre-line",paddingBottom:e.spacing(1)},title:{background:e.palette.primary.main,color:e.palette.primary.contrastText,alignSelf:"flex-start",width:"100%",margin:0,display:"flex",padding:e.spacing(2)},dlgTitle:{flexGrow:1},closeButton:{padding:0,alignSelf:"flex-start"}}})),P=function(e){var t=e.open,a=e.onClose,r=e.title,o=e.body,i=C();return n.a.createElement(l.a,{scroll:"paper",open:t,fullWidth:!0,maxWidth:"xl",onClose:a,"aria-labelledby":"simple-dialog-title"},n.a.createElement(c.a,{className:i.title,disableTypography:!0},n.a.createElement(p.a,{className:i.dlgTitle},r),n.a.createElement(S.a,{color:"inherit",className:i.closeButton,onClick:a},n.a.createElement(j.a,{color:"inherit"}))),n.a.createElement(s.a,null,n.a.createElement(p.a,{variant:"body2",className:i.body},o)))};P.propTypes={open:i.a.bool,onClose:i.a.func,title:i.a.string,body:i.a.string};var T=P,I=a(7),N=a(2099),A=Object(m.a)((function(e){return{root:{},body:{},textArea:{whiteSpace:"pre-line",padding:e.spacing(1),border:"1px solid ".concat(e.palette.grey[200]),background:e.palette.grey[100]},dlgContent:{overflow:"hidden"},title:{background:e.palette.primary.main,color:e.palette.primary.contrastText,alignSelf:"flex-start",width:"100%",margin:0,display:"flex",padding:e.spacing(2)},closeButton:{padding:0,alignSelf:"flex-start"}}})),z=function(e){var t=e.open,a=e.onOk,o=e.title,i=e.body,p=e.multiline,m=A(),g=Object(r.useState)(i||""),f=Object(I.a)(g,2),h=f[0],b=f[1];return n.a.createElement(l.a,{scroll:"paper",open:t,fullWidth:!0,maxWidth:"xl",onClose:function(){return a(h)}},n.a.createElement(c.a,{className:m.title},o),n.a.createElement(s.a,{className:m.dlgContent},n.a.createElement(N.a,{className:m.body,multiline:p,inputProps:{className:m.textArea},autoFocus:!0,fullWidth:!0,rows:6,rowsMax:6,onChange:function(e){return b(e.target.value)},defaultValue:i})),n.a.createElement(d.a,null,n.a.createElement(u.a,{onClick:function(){return a(i)}},"Cancel"),n.a.createElement("div",{style:{flexGrow:1}}),n.a.createElement(u.a,{onClick:function(){return a(h)}},"Ok")))};z.propTypes={open:i.a.bool,multiline:i.a.bool,onOk:i.a.func,title:i.a.string,body:i.a.string};var _=z;a.d(t,"d",(function(){return h})),a.d(t,"c",(function(){return w})),a.d(t,"e",(function(){return E})),a.d(t,"a",(function(){return T})),a.d(t,"b",(function(){return _}))},83:function(e,t,a){"use strict";var r=a(18),n=a.n(r),o=a(25),i=a(16),l=a(7),c=a(0),s=a.n(c),u=a(1),p=a.n(u),d=a(111),m=a(2011).default,g=a(12),f=a(67),h=a(2018),b=a(2069),y=a(2070),w=a(2055),v=a(2093),O=a(2077),x=a(95),E=a.n(x),S=a(159),k=a.n(S),j=a(509),C=a.n(j),P=a(350),T=a.n(P),I=a(511),N=a.n(I),A=a(266),z=a.n(A),_=a(222),R=a.n(_),D=a(144),L=a.n(D),M=a(510),F=a.n(M),U=a(176),B=a(196),q=a(78),W=a(45),G=a(2012).default,H=a(541),V=a(47),Y=a(20),Q=a.n(Y),$=a(2073),X=a(2068),Z=a(227),K=a(2019),J=a(2072),ee=a(2084),te=a(2026),ae=a(2017),re=a(124),ne=a(11),oe=a(4),ie=a.n(oe),le=a(42);function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var se=Object(U.a)((function(e){return{root:{},imgContainer:{},gravatarImg:{objectFit:"cover",height:"100%",width:"100%"}}})),ue=function(e){var t=e.user,a=e.loading,r=e.onAvatarClick,n=e.secondary,o=Object(le.a)(e,["user","loading","onAvatarClick","secondary"]),i=se();return a||!t?"LOADING...":s.a.createElement(K.a,ce({className:i.root,button:!!r,onClick:r},o),s.a.createElement(ee.a,{className:i.imgContainer},s.a.createElement(te.a,null,s.a.createElement("img",{alt:"profile",className:i.gravatarImg,src:t.gravatar}))),s.a.createElement(J.a,{primary:t.username,secondary:n}))};ue.propTypes={user:p.a.object,loading:p.a.bool,secondary:p.a.string,onAvatarClick:p.a.func};var pe=ue,de=s.a.createContext({});function me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?me(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):me(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var fe=Object(U.a)((function(e){return{root:{margin:e.spacing(1),backgroundColor:e.palette.background.paper,paddingBottom:60},field:{marginBottom:e.spacing(1)},list:{padding:e.spacing(1)},heading:{marginTop:e.spacing(1)},watchers:{},numPhotos:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},tagListItem:{marginTop:e.spacing(1),marginBottom:e.spacing(2)},chip:{margin:e.spacing(.5)}}})),he="NOTEVIEW",be=function(){var e=fe(),t=Object(c.useContext)(de),a=t.series,r=t.watching,n=Object(c.useContext)(ne.a),o=n.tagConfigArr,u=n.globalActions,p=Object(c.useState)(null),m=Object(l.a)(p,2),f=m[0],h=m[1],b=new g.Tags(o),y=a.photos.reduce((function(e,t){return t.tags.forEach((function(t){if(e[t.typeId])if(e[t.typeId][t.label]){var a=e[t.typeId][t.label];e[t.typeId][t.label]=ge({},a,{count:a.count+1})}else e[t.typeId][t.label]=ge({},t,{count:1});else e[t.typeId]=Object(i.a)({},t.label,ge({},t,{count:1}))})),e}),{}),w=[];try{w=a.meta?Object.keys(JSON.parse(a.meta)):[]}catch(v){ie.a.error(v)}return s.a.createElement("div",{className:e.root},s.a.createElement("div",{className:e.field},s.a.createElement(ae.a,{className:e.formLabel},"Series Name"),s.a.createElement(d.a,{variant:"body1",color:"inherit"},a.name)),a.note&&s.a.createElement(W.m,{label:"Series Note",text:a.note,onClick:function(){return h(he)}}),s.a.createElement(d.a,{className:e.heading,variant:"subtitle1"},"Series Summary"),s.a.createElement($.a,null),s.a.createElement(ve,{seriesAccess:a.access}),s.a.createElement(X.a,{className:e.list,dense:!0},a.createdUser&&s.a.createElement(pe,{user:a.createdUser,onAvatarClick:function(){return u.onAvatarClick(a.createdUser.username)},secondary:"created this series",disableGutters:!0}),s.a.createElement(K.a,{disableGutters:!0},s.a.createElement(ee.a,null,s.a.createElement(te.a,{className:e.numPhotos},a.photos.length)),s.a.createElement(J.a,{primary:a.photos.length>1?"Photos":"Photo",secondary:a.photos.length>0&&s.a.createElement("span",null,g.dates.formatDate(a.photos[0].takenOn,"LL"),s.a.createElement("span",null,"\xa0\xa0"),"to",s.a.createElement("span",null,"\xa0\xa0"),g.dates.formatDate(a.photos[a.photos.length-1].takenOn,"LL"))})),s.a.createElement(K.a,{disableGutters:!0},s.a.createElement(ee.a,null,s.a.createElement(te.a,{className:e.watchers},a.watchers||"0")),s.a.createElement(J.a,{primary:"Users Watching ".concat(r?"(including you)":"")})),s.a.createElement(K.a,{disableGutters:!0},s.a.createElement(J.a,null,s.a.createElement(ae.a,{className:e.formLabel},"Tags in use (across all photos)"),0===Object.keys(y).length&&s.a.createElement(d.a,{variant:"caption",color:"textSecondary"},"No photos in this series have tags"),Object.keys(y).map((function(t,a){return s.a.createElement("div",{key:"tagchipkey".concat(a),className:e.tagListItem},s.a.createElement(d.a,{className:e.subheading,variant:"overline"},b.getTagType(t).label),s.a.createElement($.a,null),Object.values(y[t]).length>0?Object.values(y[t]).map((function(e,r){return s.a.createElement(re.a,{key:"tagchip-".concat(a,"-").concat(e,"-").concat(r),tag:e,color:b.getTagType(t).color})})):s.a.createElement(d.a,{variant:"caption"},"No photos in this series have tags"))}))))),a.meta&&w.length>0&&Object.keys(a.meta).length>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement(ae.a,{className:e.formLabel},"Metadata"),s.a.createElement($.a,null),s.a.createElement(X.a,{className:e.list},w.map((function(e,t){return a.meta[e]?s.a.createElement(K.a,{key:"metadata".concat(t)},s.a.createElement(J.a,{primary:a.meta[e].label,secondary:a.meta[e].render(a.meta[e])})):null})))),f===he&&s.a.createElement(q.a,{open:!0,multiline:!0,onClose:function(){return h(null)},title:"Series Note",body:a.note}))};be.propTypes={};var ye=be,we=Object(U.a)((function(e){return{root:{padding:e.spacing(1,2),background:function(e){var t=e.seriesAccess;return V.a.access[t].palette.primary.main},color:function(e){var t=e.seriesAccess;return V.a.access[t].palette.primary.contrastText}}}})),ve=function(e){var t=e.seriesAccess,a=we({seriesAccess:t});return s.a.createElement(Z.a,{className:Q()(a.root)},s.a.createElement(d.a,{variant:"subtitle1"},"Series is ".concat(ne.d.ACCESS[t].label)),s.a.createElement(d.a,{variant:"caption"},ne.d.ACCESS[t].description))};ve.propTypes={seriesAccess:p.a.string};var Oe=function(e){return{root:{display:"flex",height:"100%",flexDirection:"column",overflow:"hidden"},appBar:{flexGrow:0},inner:{position:"relative",flexGrow:1,overflowY:"scroll","-webkit-overflow-scrolling":"touch"},tabMenu:{marginTop:e.spacing(7)},mapWrap:{position:"absolute",height:"100%",width:"100%",top:0,left:0},toolbarTitle:{flexGrow:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},AddFab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2),zIndex:500},grow:{flexGrow:1},gridList:{flexWrap:"nowrap",transform:"translateZ(0)"},titleBar:{display:"flex",padding:e.spacing(1)},menuButton:{},placeholderInner:{position:"relative",flexGrow:1,overflow:"hidden",textAlign:"center",display:"flex",height:"100%",flexDirection:"column"},progressWrapper:{textAlign:"center",marginBottom:e.spacing(4)},placeholderText:{opacity:.4},placeholder:{},progress:{color:e.palette.grey[300]}}},xe=Object(U.a)(Oe),Ee=function(e){var t=e.onSlideshowStart,a=e.onChange,r=e.onEditSeries,n=e.onDeletePhotos,o=e.onCameraAdd,i=e.onDeleteSeries,u=e.onLibraryAdd,p=e.onTileClick,m=e.onMenuBack,g=e.onWatch,x=e.onUnWatch,S=e.initialPhoto,j=e.onFindOnMap,P=xe(),I=Object(c.useState)(),A=Object(l.a)(I,2),_=A[0],D=A[1],M=Object(c.useState)(!1),U=Object(l.a)(M,2),Y=U[0],Q=U[1],$=Object(c.useState)(!1),X=Object(l.a)($,2),Z=X[0],K=X[1],J=Object(c.useState)(0),ee=Object(l.a)(J,2),te=ee[0],ae=ee[1],re=Object(c.useContext)(de),ne=re.series,oe=re.ac,ie=re.watching,le=re.owned,ce=Object(c.useState)(S),se=Object(l.a)(ce,2),ue=se[0],pe=se[1],me={zoom:16};ne&&ne.coords&&2===ne.coords.length&&(me.longitude=ne.coords[0],me.latitude=ne.coords[1]),Object(c.useEffect)((function(){ne.photos.length>0&&!ne.photos.find((function(e){return e.id===ue}))&&pe(ne.photos[ne.photos.length-1].id)}),[ne.photos]);var ge=ne.photos&&ne.photos.find((function(e){return e.id===ue})),fe={update:oe.canUser("update",ne,"series","*"),delete:oe.canUser("delete",ne,"series","*"),contribute:oe.canUser("update",ne,"series",["photos"])},he=Z||Y;return s.a.createElement("div",{className:P.root},s.a.createElement(h.a,null),s.a.createElement(H.a,{theme:V.a.access[ne.access]},s.a.createElement(b.a,{position:"static",className:P.appBar},s.a.createElement(y.a,{disableGutters:!0},s.a.createElement(w.a,{className:P.menuButton,color:"inherit",onClick:m,"aria-label":"Menu"},s.a.createElement(E.a,null)),s.a.createElement(d.a,{variant:"subtitle1",color:"inherit",className:P.toolbarTitle},ne.name||"Series"),s.a.createElement(w.a,{"aria-haspopup":"true",color:"inherit",onClick:function(e){return D(e.currentTarget)}},s.a.createElement(C.a,null)),s.a.createElement(H.a,{theme:V.a.series},s.a.createElement(W.d,{anchorEl:_,onClose:function(){return D(null)},menuItems:[{text:"Find on map",icon:L.a,hide:!j,action:j},{text:"Watch Series",icon:T.a,hide:!g||le||ie,action:g},{text:"Unwatch Series",icon:T.a,hide:!x||le||!ie,action:x},{text:"Share series",color:"PRIVATE"===ne.access?"textSecondary":void 0,icon:F.a,action:function(){return Q(!0)}},{text:"Start Slideshow",icon:N.a,hide:!t,action:t},{divider:!0},{text:"Edit Series",icon:z.a,hide:!r||!fe.update,action:r},{text:"Delete Series",icon:R.a,hide:!K||!fe.delete,color:"error",action:function(){return K(!0)}}]}))),s.a.createElement(v.a,{variant:"fullWidth",value:te,onChange:function(e,t){return ae(t)}},s.a.createElement(O.a,{label:"Series"}),s.a.createElement(O.a,{label:"Photos"})))),s.a.createElement("div",{className:P.inner},0===te&&s.a.createElement(s.a.Fragment,null,ne.photos&&ne.photos.length>0&&s.a.createElement(G,{photos:ne.photos,activePhotoId:ue,setActivePhotoId:pe,onImageSelect:p}),s.a.createElement(ye,{onChange:a})),ne.photos&&1===te&&s.a.createElement(f.d,{photos:ne.photos,onTileClick:p,onDelete:n,allowDelete:fe.delete})),0===te&&fe.contribute&&s.a.createElement(W.b,{className:P.AddFab,disabled:!he,onCameraClick:o,onLibraryClick:u},s.a.createElement(k.a,null)),ge&&s.a.createElement(B.b,{open:Y,onClose:function(){return Q(!1)},series:ne,photoId:ge.id}),s.a.createElement(q.d,{open:Z,onConfirm:function(e){K(!1),!0===e&&i(ne.id)},title:"Delete Series",message:"Are you sure you want to delete this series? The record and all images associated with it will be gone forever."}))};Ee.propTypes={initialPhoto:p.a.string,onSlideshowStart:p.a.func.isRequired,onChange:p.a.func.isRequired,onFindOnMap:p.a.func.isRequired,onDeletePhotos:p.a.func.isRequired,onDeleteSeries:p.a.func.isRequired,onCameraAdd:p.a.func.isRequired,onEditSeries:p.a.func.isRequired,onLibraryAdd:p.a.func.isRequired,onTileClick:p.a.func.isRequired,onMenuBack:p.a.func.isRequired,onWatch:p.a.func,onUnWatch:p.a.func};var Se=Ee,ke=a(2059),je=a(2057),Ce=a(2062),Pe=a(2061),Te=a(2060),Ie=a(2099),Ne=a(2091),Ae=a(2100),ze=a(89);function _e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_e(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var De=Object(U.a)((function(e){return{root:{},inner:{display:"flex",flexDirection:"column"},dlgTitle:{background:e.palette.primary.main,color:e.palette.primary.contrastText},access:{display:"flex",flexDirection:"column"},accessRadio:{margin:e.spacing(2,1)},grow:{flexGrow:1},field:{flexGrow:0,marginBottom:2*e.spacing(1)},slider:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"100%"},formLabel:{display:"block",marginTop:e.spacing(1),marginBottom:e.spacing(1)},mapFormLabel:{display:"block",marginTop:e.spacing(1),marginBottom:e.spacing(1)},mapInnerWrap:{flexGrow:1,height:"200px",minHeight:"200px"},mapWrapper:{flexGrow:1,display:"flex",flexDirection:"column",paddingBottom:2*e.spacing(1)},formControl:{margin:e.spacing(1),minWidth:120},chips:{display:"flex",flexWrap:"wrap"},tagWarning:{}}})),Le="mapPicker",Me="noteEdit",Fe=function(e){var t=e.series,a=e.delta,r=e.onChange,n=e.disabled,o=De(),i=Object(c.useState)(null),u=Object(l.a)(i,2),p=u[0],m=u[1],g={zoom:18};g.longitude=t.coords[0],g.latitude=t.coords[1],a.coords&&2===a.coords.length&&(g.longitude=a.coords[0],g.latitude=a.coords[1]);var f=a.access||t.access||"PRIVATE",h="string"===typeof a.name?a.name:t.name||"",b="string"===typeof a.note?a.note:t.note||"",y=!h||h.length<3;return s.a.createElement("div",null,s.a.createElement(Ie.a,{label:"Series Name ".concat(y?"(Required)":""),fullWidth:!0,disabled:n,error:y,placeholder:"New Series",className:o.field,value:h,onChange:function(e){return r(Re({},a,{name:e.target.value}))}}),s.a.createElement("div",{className:o.mapWrapper,onClick:function(){return n?{}:m(Le)}},s.a.createElement(ae.a,{className:o.mapFormLabel},"Location"),s.a.createElement("div",{className:o.mapInnerWrap},s.a.createElement(ze.c,{staticMap:!0,className:o.map,direction:a.direction||t.direction,viewport:g}))),s.a.createElement("div",{className:o.field},s.a.createElement(ae.a,null,"Series Access"),s.a.createElement("div",{className:o.access},s.a.createElement(Ne.a,{className:o.accessRadio,disabled:n,control:s.a.createElement(Ae.a,{checked:["OPEN","PUBLIC"].indexOf(f)>-1,onChange:function(e){r(Re({},a,{access:e.target.checked?"PUBLIC":"PRIVATE"}))},value:"PUBLIC"}),label:s.a.createElement("div",null,s.a.createElement(d.a,{variant:"body2",component:"div"},ne.d.ACCESS.PUBLIC.label),s.a.createElement(d.a,{variant:"caption",color:"textSecondary",component:"div"},ne.d.ACCESS.PUBLIC.description))}),s.a.createElement(Ne.a,{className:o.accessRadio,disabled:n||["PRIVATE"].indexOf(f)>-1,control:s.a.createElement(Ae.a,{checked:["OPEN"].indexOf(f)>-1,onChange:function(e){return r(Re({},a,{access:e.target.checked?"OPEN":"PUBLIC"}))},value:"OPEN"}),label:s.a.createElement("div",null,s.a.createElement(d.a,{variant:"body2",component:"div"},ne.d.ACCESS.OPEN.label),s.a.createElement(d.a,{variant:"caption",color:"textSecondary",component:"div"},ne.d.ACCESS.OPEN.description))}))),s.a.createElement(W.m,{onClick:function(){return n?{}:m(Me)},className:o.field,label:"Series Note",placeholder:"Click to edit",text:b}),!n&&p===Le&&s.a.createElement(ze.b,{open:!0,title:"Series Location & Direction",latitude:a.latitude||t.coords[1],longitude:a.longitude||t.coords[0],direction:a.direction||t.direction,onOk:function(e){r(Re({},a,{},e)),m(null)},onCancel:function(){return m(null)}}),!n&&p===Me&&s.a.createElement(q.b,{open:!0,title:"Series Note",body:b,multiline:!0,onOk:function(e){r(Re({},a,{note:e})),m(null)},onCancel:function(){return m(null)}}),s.a.createElement(d.a,{variant:"caption",color:"inherit",className:o.tagWarning},s.a.createElement("strong",null,"Changing tags:")," Tags are changed on individual photos."))};Fe.propTypes={series:p.a.object.isRequired,delta:p.a.object.isRequired,disabled:p.a.bool,onChange:p.a.func.isRequired};var Ue=Fe;function Be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var qe=Object(U.a)((function(e){return{root:{},inner:{display:"flex",flexDirection:"column"},grow:{flexGrow:1},field:{flexGrow:0,marginBottom:e.spacing(2)},slider:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"100%"},formLabel:{display:"block",marginTop:e.spacing(1),marginBottom:e.spacing(1)},mapFormLabel:{display:"block",marginTop:e.spacing(1),marginBottom:e.spacing(1)},mapInnerWrap:{flexGrow:1},mapWrapper:{flexGrow:1,display:"flex",flexDirection:"column",paddingBottom:e.spacing(2)},formControl:{margin:e.spacing(1),minWidth:120},chips:{display:"flex",flexWrap:"wrap"}}})),We=function(e){var t=e.onOk,a=e.onCancel,r=qe(),n=Object(c.useContext)(de).series,o=Object(c.useState)({}),u=Object(l.a)(o,2),p=u[0],d=u[1],m=Object(c.useState)(!1),g=Object(l.a)(m,2),f=g[0],b=g[1];return s.a.createElement(je.a,{scroll:"paper",className:r.root,fullScreen:!0,open:!0,onClose:a},s.a.createElement(h.a,null),s.a.createElement(H.a,{theme:V.a.access[p.access||n.access]},s.a.createElement(Ve,null)),s.a.createElement(ke.a,{className:r.inner},s.a.createElement(Ue,{series:n,delta:p,onChange:d})),s.a.createElement(Pe.a,null,s.a.createElement(Te.a,{disabled:f,className:r.menuButton,color:"inherit",onClick:function(){return d({})},"aria-label":"Menu"},"Reset"),s.a.createElement(Te.a,{className:r.menuButton,color:"inherit",onClick:a,"aria-label":"Menu"},"Cancel"),s.a.createElement(Te.a,{disabled:f,className:r.menuButton,onClick:function(){f||(b(!0),t(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Be(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({id:n.id},p)))},"aria-label":"Menu"},f?"Processing...":"Ok")))};We.propTypes={onOk:p.a.func.isRequired,onCancel:p.a.func.isRequired};var Ge=We,He=Object(U.a)((function(e){return{dlgTitle:{background:e.palette.primary.main,color:e.palette.primary.contrastText},grow:{flexGrow:1}}})),Ve=function(e){var t=He();return s.a.createElement(Ce.a,{disableTypography:!0,className:t.dlgTitle},s.a.createElement(d.a,{variant:"subtitle1",color:"inherit",className:t.grow},"Edit Series Details"))};function Ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Qe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ye(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $e=Object(U.a)((function(e){return{root:{height:"90%",width:"85%"},dlgTitleContainer:{display:"flex",padding:0},catTagTitle:{marginTop:e.spacing(2)},dlgTitle:{flexGrow:1,paddingTop:e.spacing(2),paddingBottom:e.spacing(1),paddingLeft:e.spacing(3)},field:{marginBottom:e.spacing(2)}}})),Xe="noteEdit",Ze="noteView",Ke="tag",Je=function(e){var t=e.canEdit,a=e.photo,r=e.delta,n=e.onChange,o=e.hideUser,i=$e(),u=Object(c.useContext)(ne.a).tagConfigArr,p=Object(c.useContext)(de).getValuePromiseArr,m=Object(c.useState)({}),f=Object(l.a)(m,2),h=f[0],b=h.activeDialog,y=h.activeDialogContext,w=f[1],v="string"===typeof r.note?r.note:a.note||"",O=Object(c.useMemo)((function(){var e=new g.Tags(u,r.tags||a.tags);return{nonXYTagTypes:e.getNonXYTagTypes(),numTags:e.getNonXYTags().length}}),[a.tags]),x=[];try{x=a.meta?Object.keys(JSON.parse(a.meta)):[]}catch(E){ie.a.error(E)}return s.a.createElement("div",null,!o&&a.createdUser&&s.a.createElement(s.a.Fragment,null,s.a.createElement(pe,{user:a.createdUser,secondary:"uploaded this photo",dense:!0,disableGutters:!0}),s.a.createElement($.a,null)),t?s.a.createElement(W.e,{className:i.field,label:"Photo taken on",value:r.takenOn||a.takenOn,onChange:function(e){return n({takenOn:e})},canEdit:t}):s.a.createElement(W.f,{className:i.field,label:"Photo taken on",value:r.takenOn||a.takenOn}),(t||a.note)&&s.a.createElement(W.m,{label:"Photo Note",className:i.field,placeholder:t?"Click to edit":"None",text:v,onClick:function(){w(t?{activeDialog:Xe}:{activeDialog:Ze})}}),(t||O.numTags>0)&&s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,{variant:"subtitle1",className:i.catTagTitle},"Category tags"),s.a.createElement($.a,null),O.nonXYTagTypes.map((function(e,n){return s.a.createElement(re.c,{key:"tagtype-".concat(n),className:i.field,label:e.label,tags:r.tags||a.tags,canEdit:t,onClick:function(){return w({activeDialog:Ke,activeDialogContext:e})},tagType:Qe({},e,{getValuePromiseArr:p})})}))),x.length>0&&Object.keys(a.meta).length>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,{className:i.heading},"Metadata"),s.a.createElement($.a,null),s.a.createElement(X.a,{className:i.list},x.map((function(e,t){return a.meta[e]?s.a.createElement(K.a,{key:"metadata".concat(t)},s.a.createElement(J.a,{primary:a.meta[e].label,secondary:a.meta[e].render(a.meta[e])})):null})))),b&&b===Xe&&s.a.createElement(q.b,{open:!0,multiline:!0,onOk:function(e){n({note:e}),w({})},title:"Edit Photo Note",body:v}),b&&b===Ze&&s.a.createElement(q.a,{open:!0,multiline:!0,onClose:function(){return w({})},title:"Photo Note",body:v}),b&&b===Ke&&s.a.createElement(re.b,{open:!0,title:"Edit Photo Tags: ".concat(y.label),onOk:function(e){w({}),n({tags:e})},onCancel:function(){return w({})},tags:r.tags||a.tags||[],tagType:Qe({},y,{getValuePromiseArr:p})}))};Je.propTypes={canEdit:p.a.bool,onChange:p.a.func.isRequired,hideUser:p.a.bool,photo:p.a.object.isRequired,delta:p.a.object.isRequired};var et=Je;function tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var at=Object(U.a)((function(e){return{root:{},formLabel:{color:e.palette.text.secondary},dlgTitleContainer:{color:e.palette.primary.contrastText,background:e.palette.primary.main},mapFormLabel:{marginTop:e.spacing(2),marginBottom:e.spacing(1),color:e.palette.text.secondary},map:{marginBottom:e.spacing(2)},mapWrapper:{marginBottom:e.spacing(2)},field:{marginBottom:e.spacing(2)}}})),rt=function(e){var t=e.photo,a=e.newSeries,r=e.actions,n=at(),o=Object(c.useState)(!1),u=Object(l.a)(o,2),p=u[0],m=u[1],g=Object(c.useState)(a||{}),f=Object(l.a)(g,2),b=f[0],y=f[1],w=Object(c.useState)(t),v=Object(l.a)(w,2),O=v[0],x=v[1],E=!a||b.name&&b.name.length>=3;return s.a.createElement("div",{className:n.root},s.a.createElement(h.a,null)," ",s.a.createElement(je.a,{fullScreen:!0,scroll:"paper",disableBackdropClick:!0,disableEscapeKeyDown:!0,onClose:r.onCancel,"aria-labelledby":"customized-dialog-title",open:!0},s.a.createElement(Ce.a,{disableTypography:!0,className:n.dlgTitleContainer},s.a.createElement(d.a,{variant:"h5",className:n.dlgTitle},a?"New Series Details":"New Photo Details")),s.a.createElement(ke.a,null,!!a&&s.a.createElement(Ue,{series:a,delta:b,disabled:p,onChange:y}),!!a&&s.a.createElement("div",null,s.a.createElement(d.a,{variant:"h5",className:n.photoTitle},"New photo details"),s.a.createElement($.a,null)),s.a.createElement(et,{photo:t,canEdit:!p,hideUser:!0,delta:O,onChange:function(e){return x(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},O,{},e))}})),s.a.createElement(Pe.a,null,!p&&s.a.createElement(Te.a,{onClick:r.onCancel,color:"primary"},"Cancel"),s.a.createElement(Te.a,{disabled:!E||p,onClick:function(){p||(m(!0),r.onSave(b,O))},color:"primary"},p?"Processing...":"Next"))))};rt.propTypes={photo:p.a.object.isRequired,newSeries:p.a.object,actions:p.a.shape({onCancel:p.a.func.isRequired,onSave:p.a.func})};var nt=rt;function ot(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function it(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ot(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var lt={CAMERA:"camera",FILEPICKER:"library",PHOTOREVIEW:"photoreview",PHOTOINFOEDIT:"photoinfoedit"},ct=function(e){var t=e.inputMethod,a=e.isNewSeries,r=e.actions,i=Object(c.useContext)(de).series,u=Object(c.useContext)(ne.a).device,p=Object(c.useRef)(),d=Object(c.useContext)(ne.a).metaConfig,m=Object(c.useState)(a?new g.Series(d).series:i),h=Object(l.a)(m,2),b=h[0],y=h[1],w=Object(c.useState)(),v=Object(l.a)(w,2),O=v[0],x=v[1],E=Object(c.useState)(null),S=Object(l.a)(E,2),k=S[0],j=S[1],C=Object(c.useState)({current:t,history:[]}),P=Object(l.a)(C,2),T=P[0],I=P[1],N=Object(ne.j)(),A=Object(ne.l)();p.current=A;var z=!a&&i&&i.photos?i.photos:[],_=function(e){ie.a.info("NEWPHOTO changeMode",T,e),I({current:e,history:[].concat(Object(o.a)(T.history),[T.current])})},R=function(e){var t,r,o,i,l,c,s,u,m,f,h;return n.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:ie.a.info("onLibraryAdd Debug GOT DATA",{isNewSeries:a}),t=e.exifObj,r=t.exif,o=t.exifDateTime,i=t.exifGPS,l=i,ie.a.info("EXIF Debug",{exif:r,exifDateTime:o,exifGPS:i}),c=o||String(Date.now()),l||(p.current&&p.current.latitude&&p.current.longitude?(s=p.current,u=s.latitude,m=s.longitude,l=[m,u]):l=[-123.1398254,49.3050394]),a&&y(it({},b,{coords:l})),f=new g.Photo(d).photo,h=it({},f,{takenOn:c,coords:l,rawData:JSON.stringify({exif:r,sensors:{orientation:N,geo:A}})}),x({captureObj:e,photoObj:h}),ie.a.info("onLibraryAdd",{_newPhoto:h,newSeries:it({},b,{coords:l})}),_(lt.PHOTOREVIEW),ie.a.info("onLibraryAdd FINISHED");case 13:case"end":return n.stop()}}))},D=null;switch(T.current){case lt.CAMERA:D=u.ios?s.a.createElement(H.a,{theme:V.a.login},s.a.createElement(W.j,{onCancel:r.onCancel,cameraPicker:!0,onLibraryAdd:R})):s.a.createElement(B.a,{photos:z,onShutter:function(e,t){var r,o,i,l,c,s,u,m,f,h;return n.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:ie.a.info("onShutter Debug GOT DATA",{isNewSeries:a}),r=e.exifObj,o=r.exif,i=r.exifGPS,l=String(Date.now()),c=[-123.1398254,49.3050394],p.current&&p.current.latitude&&p.current.longitude?(s=p.current,u=s.latitude,m=s.longitude,c=[m,u]):i&&(c=i),a&&y(it({},b,{coords:c})),f=new g.Photo(d).photo,h=it({},f,{takenOn:l,coords:c,rawData:JSON.stringify({exif:o,sensors:{orientation:N,geo:A}})}),x({captureObj:e,photoObj:h}),ie.a.info("onShutter",{_newPhoto:h,newSeries:it({},b,{coords:c})}),j(t),_(lt.PHOTOREVIEW),ie.a.info("onShutter FINISHED");case 13:case"end":return n.stop()}}))},onCancel:r.onCancel});break;case lt.FILEPICKER:D=s.a.createElement(H.a,{theme:V.a.login},s.a.createElement(W.j,{onCancel:r.onCancel,onLibraryAdd:R}));break;case lt.PHOTOREVIEW:D=s.a.createElement(f.e,{defaultRefPhotoId:k,photoBlob:O.captureObj.file,inputMethod:t,photos:z,onConfirm:function(){return _(lt.PHOTOINFOEDIT)},onCancel:r.onCancel,onRetry:function(){if(T.history.length>0){var e=Object(o.a)(T.history),t=e.pop();I({current:t,history:e})}else r.onCancel()}});break;case lt.PHOTOINFOEDIT:D=s.a.createElement(nt,{photo:O.photoObj,newSeries:a?b:null,actions:{onSave:function(e,t){return r.onCreate(e,t,O.captureObj)},onCancel:r.onCancel}});break;default:ie.a.info("NEWPHOTO: default state. you should NEVER see this",T),r.onCancel()}return D};ct.propTypes={inputMethod:p.a.oneOf(["camera","library"]),isNewSeries:p.a.bool,photos:p.a.array,actions:p.a.shape({onCreate:p.a.func.isRequired,onCancel:p.a.func.isRequired})};var st=ct,ut=Object(U.a)(Oe),pt=function(e){var t=e.onMenuBack,a=ut();return s.a.createElement("div",{className:a.root},s.a.createElement(h.a,null),s.a.createElement(b.a,{position:"static",className:a.appBar},s.a.createElement(y.a,{disableGutters:!0},s.a.createElement(w.a,{className:a.menuButton,color:"inherit",onClick:t,"aria-label":"Menu"},s.a.createElement(E.a,null)),s.a.createElement(d.a,{variant:"subtitle1",color:"inherit",className:a.toolbarTitle},"Series"))),s.a.createElement("div",{className:a.placeholderInner},s.a.createElement("div",{className:a.grow}),s.a.createElement(d.a,{className:a.placeholderText,variant:"h3"},"Series not found"),s.a.createElement("div",{className:a.grow})))};pt.propTypes={onMenuBack:p.a.func.isRequired};var dt=pt;function mt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function gt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ft={SERIES_VIEW:"series",SERIES_EDIT:"editseries",NEWPHOTO:"newphoto",NEWSERIES:"newseries",REVIEW:"review",PHOTO_VIEW:"photoviewer",PHOTO_VIEW_NEW:"newphotoviewer",SLIDESHOW:"slideshow"},ht=[ft.SERIES_VIEW,ft.PHOTO_VIEW,ft.SLIDESHOW],bt=[ft.SERIES_VIEW,ft.NEWPHOTO,ft.NEWSERIES,ft.PHOTO_REVIEW,ft.PHOTO_VIEW],yt=function(e){var t=e.modeName,a=e.series,r=e.inputMethod,i=e.currentUserId,u=e.currentUserRole,p=e.initialPhoto,h=e.loading,b=e.watching,y=e.owned,w=e.actions,v=e.getValuePromiseArr,O=Object(c.useState)(a),x=Object(l.a)(O,2),E=x[0],S=x[1],k=Object(c.useState)({current:{name:t||ft.SERIES_VIEW,pid:p,inputMethod:r},history:[]}),j=Object(l.a)(k,2),C=j[0],P=j[1],T=new g.AccessHelper(i,u);Object(c.useEffect)((function(){ie.a.debug("RepeatablePhotos::Something changed",{series:a,initialPhoto:p,inputMethodINIT:r,modeName:t,seriesContextState:E}),a&&!E||a&&E&&a.id!==E.id?(ie.a.debug("RepeatablePhotos::Something changed RESET",{modeName:t,initialPhoto:p,inputMethodINIT:r}),P({current:{name:t||ft.SERIES_VIEW,pid:p,inputMethod:r},history:[]})):C.current.pid!==p&&(ie.a.debug("RepeatablePhotos::Something changed NO RESET",{mode:C,modeName:t,initialPhoto:p}),P(gt({},C,{current:gt({},C.current,{name:t||ft.SERIES_VIEW,pid:p})}))),S(a)}),[a,p,r,t]);var I=function(e,t){w.onChangePhoto(e,gt({},t,{seriesId:E.id}))},N=function(e,t,r){var n=T.canUser("update",a,"series");null===E&&w.onClose(),!n&&ht.indexOf(e)<0?ie.a.error("ILLEGAL MODE CHANGE!!!!!",{from:C.current,to:e,canUpdate:n}):P({current:{name:e,pid:t,inputMethod:r},history:[].concat(Object(o.a)(C.history),[C.current])})},A=function(){if(C.history.length>0){var e=Object(o.a)(C.history),t=e.pop();P({current:t,history:e})}else w.onClose()},z=null;if(h)return s.a.createElement(W.l,{spin:!0,noAppInfo:!0},s.a.createElement(d.a,{color:"inherit",variant:"subtitle1"},"Loading Series..."));if(!E&&C.current.name!==ft.NEWSERIES)return s.a.createElement(dt,{onMenuBack:w.onClose});switch(C.current.name){case ft.SERIES_VIEW:z=s.a.createElement(Se,{onSlideshowStart:function(){return N(ft.SLIDESHOW)},onChange:function(){ie.a.info("onChange NOT IMPLEMENTED")},initialPhoto:p,onDeletePhotos:function(e){a.photos.filter((function(t){return e.indexOf(t.id)>-1})).forEach((function(e){return w.onDeletePhoto(e)}))},onDeleteSeries:w.onDelete,onFindOnMap:w.onFindOnMap,onCameraAdd:function(){return N(ft.NEWPHOTO,null,"camera")},onEditSeries:function(){return N(ft.SERIES_EDIT)},onLibraryAdd:function(){return N(ft.NEWPHOTO,null,"library")},onTileClick:function(e){N(ft.PHOTO_VIEW,e)},onMenuBack:w.onClose,onWatch:w.onWatch,onUnWatch:w.onUnWatch});break;case ft.SERIES_EDIT:z=s.a.createElement(Ge,{onCancel:function(){return N(ft.SERIES_VIEW)},onOk:function(e){w.onChange(a,gt({},e,{id:a.id})),N(ft.SERIES_VIEW)}});break;case ft.PHOTO_VIEW:var _=a.photos.map((function(e){return T.canUser("update",a,"series")||T.canUser("update",e,"photo")}));z=s.a.createElement(f.f,{photoId:C.current.pid,photos:a.photos,seriesAccess:a.access,onMenuBack:A,onUpdatePhoto:I,canUpdatePhotoArr:_});break;case ft.PHOTO_VIEW_NEW:z=s.a.createElement(f.a,{photoId:p,photos:a.photos,seriesAccess:a.access,onMenuBack:function(){return N(ft.SERIES_VIEW)},onUpdatePhoto:I});break;case ft.SLIDESHOW:z=s.a.createElement(m,{photos:E.photos,onCancel:A});break;case ft.NEWPHOTO:z=s.a.createElement(st,{inputMethod:C.current.inputMethod,photos:a?a.photos:null,actions:{onCreate:function(e,t,r){return n.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return ie.a.info("RepeatablePhotos: waiting for photo ID",{newSeries:e,newPhoto:t,newPhotoData:r}),i.next=3,n.a.awrap(w.onNewPhoto(t,r));case 3:S(gt({},a,{photos:[].concat(Object(o.a)(a.photos),[t])})),N(ft.PHOTO_VIEW_NEW,t.id);case 5:case"end":return i.stop()}}))},onCancel:A}});break;case ft.NEWSERIES:z=s.a.createElement(st,{inputMethod:C.current.inputMethod,isNewSeries:!0,actions:{onCreate:w.onNewSeries,onCancel:A}});break;default:ie.a.info("REPEATABLEPHOTO: default state. you should NEVER see this",E),z=null}var R={series:E,getValuePromiseArr:v,watching:b,owned:y,ac:T};return s.a.createElement(de.Provider,{value:R},z)};yt.propTypes={modeName:p.a.oneOf(bt),watching:p.a.bool,owned:p.a.bool,currentUserId:p.a.string,currentUserRole:p.a.string,inputMethod:p.a.oneOf(["camera","library"]),series:p.a.object,initialPhoto:p.a.string,loading:p.a.bool,getValuePromiseArr:p.a.arrayOf(p.a.func),actions:p.a.shape({onChange:p.a.func.isRequired,onFindOnMap:p.a.func.isRequired,onChangePhoto:p.a.func.isRequired,onDeletePhoto:p.a.func.isRequired,onNewPhoto:p.a.func.isRequired,onNewSeries:p.a.func.isRequired,onDelete:p.a.func.isRequired,onClose:p.a.func.isRequired,onWatch:p.a.func,onUnWatch:p.a.func})},yt.defaultProps={mode:ft.SERIES_VIEW};var wt=yt,vt=a(2078),Ot=a(2079),xt=a(2080),Et=a(2020),St=Object(U.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},fab:{position:"absolute",top:10,right:10,height:e.spacing(5),width:e.spacing(5)},fab2:{position:"absolute",top:10,left:10,height:e.spacing(5),width:e.spacing(5)}}})),kt=function(e){var t=e.seriesList,a=e.canEdit,r=e.tileClick,n=e.columns,o=e.cameraClick,i=e.libraryClick,l=St(),c=Object(W.o)(o,i),u=c.onDownThunk,p=c.onUpThunk,d=c.onBlock,m=c.menu;return s.a.createElement(vt.a,{cols:n||1,cellHeight:200,className:l.root},t.map((function(e,t){var n=e.photos[0];return s.a.createElement(Ot.a,{key:"gridTile".concat(t),onClick:function(){return r(e)}},n&&s.a.createElement(f.g,{sizePriority:["medium","thumb","large"],photo:n}),a&&s.a.createElement(Et.a,{onClick:d,onMouseDown:u(e),onMouseUp:p(e),onTouchStart:u(e),onTouchEnd:p(e),color:"secondary",className:l.fab},s.a.createElement(k.a,null)),m,s.a.createElement(xt.a,{title:e.name,subtitle:s.a.createElement("span",null,e.photos.length," photos ",s.a.createElement("strong",null,"Last Photo"),": ",g.dates.formatDate(e.photos[0].takenOn,"llll"))}))})))};kt.propTypes={seriesList:p.a.array.isRequired,columns:p.a.number,canEdit:p.a.bool,tileClick:p.a.func.isRequired,cameraClick:p.a.func.isRequired,libraryClick:p.a.func.isRequired};var jt=a(2023),Ct=a(2092),Pt=a(2071),Tt=Object(U.a)((function(e){return{root:{margin:0,padding:e.spacing(1)},rootSm:{margin:0,padding:e.spacing(0,0,1,0)},chipContainer:{display:"flex",width:"100%"},grow:{flexGrow:1},accessLabel:{padding:e.spacing(.5,.5)},img:{},text:{height:"115px",margin:0,padding:e.spacing(0,1),alignSelf:"flex-start",display:"flex",flexDirection:"column"},textSm:{height:"75px",margin:0,padding:e.spacing(0,1),alignSelf:"flex-start",display:"flex",flexDirection:"column"},titleText:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},createdUserText:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},dateContainer:{display:"flex",maxWidth:"400px"},dateLabel:{fontWeight:"bold",flex:"1 1 50px"},dateText:{},imgContainer:{position:"relative",flex:"0 0 115px",alignSelf:"flex-start",overflow:"hidden","&::before":{content:'" "',display:"block",paddingTop:"100%"}},imgContainerSm:{position:"relative",flex:"0 0 100px",alignSelf:"flex-start",overflow:"hidden","&::before":{content:'" "',display:"block",paddingTop:"100%"}}}})),It=function(e){var t=e.series,a=e.loading,r=e.onClick,n=e.children,o=e.showCreatedOn,i=e.showLastPhoto,l=Tt(),c=Object(Ct.a)("(max-width:375px)");if(a||!t)return s.a.createElement(At,null);var u=ne.d.ACCESS.PRIVATE.label;return u=t.access?ne.d.ACCESS[t.access].label:ne.d.ACCESS.PRIVATE.label,s.a.createElement(K.a,{className:c?l.rootSm:l.root,button:!0,component:"div",disableGutters:!0,onClick:r},s.a.createElement(Pt.a,{className:c?l.imgContainerSm:l.imgContainer},s.a.createElement(f.g,{photo:t.featured,sizePriority:["thumb","medium","large"],className:l.img,style:{objectFit:"cover",position:"absolute",width:"100%",height:"100%"}})),s.a.createElement(J.a,{className:l.text,disableTypography:!0},s.a.createElement(d.a,{variant:"body1",component:"div",className:l.titleText},t.name||a),s.a.createElement(d.a,{variant:"body2",component:"div",className:l.createdUserText},s.a.createElement("strong",null,"Created by:")," ",t.createdUser.username),t.access&&s.a.createElement(H.a,{theme:V.a.access[t.access]},s.a.createElement(d.a,{className:Q()(l.accessLabel),variant:"caption",component:"div"},"".concat(t.photoCount||0," Photos"),s.a.createElement("em",null,"(",u,")"))),s.a.createElement("div",{className:l.grow}),o&&s.a.createElement("div",{className:l.dateContainer},s.a.createElement(d.a,{variant:"caption",className:l.dateLabel},"Created:"),s.a.createElement(d.a,{variant:"caption",className:l.dateText},g.dates.formatDate(t.createdOn,c?"ll":"lll"))),i&&t.latest&&s.a.createElement("div",{className:l.dateContainer},s.a.createElement(d.a,{variant:"caption",className:l.dateLabel},"Last Photo:"),s.a.createElement(d.a,{variant:"caption",className:l.dateText},g.dates.formatDate(t.latest.takenOn,c?"ll":"lll")))),n)};It.propTypes={series:p.a.object,loading:p.a.bool,showCreatedOn:p.a.bool,showLastPhoto:p.a.bool,onClick:p.a.func,children:p.a.array};var Nt=It,At=function(){var e=Tt();return s.a.createElement(K.a,{className:e.root,button:!0,component:"div",disableGutters:!0},s.a.createElement(ee.a,null,s.a.createElement(jt.a,{color:"primary"})),s.a.createElement(J.a,null,s.a.createElement(d.a,{variant:"subtitle1"},"Loading...")))},zt=a(129),_t=a.n(zt),Rt=Object(U.a)((function(e){return{root:{},title:{background:e.palette.primary.main,color:e.palette.primary.contrastText,alignSelf:"flex-start",width:"100%",margin:0,display:"flex",padding:e.spacing(2)},dlgTitle:{flexGrow:1},closeButton:{padding:0,alignSelf:"flex-start"},list:{overflowX:"hidden",overflowY:"scroll"}}})),Dt=function(e){var t=e.title,a=e.seriesList,r=e.onSelect,n=e.onClose,o=e.open,i=Rt();return s.a.createElement(je.a,{className:i.root,fullWidth:!0,open:o,onClose:n,maxWidth:"xl","aria-labelledby":"confirmation-dialog-title"},s.a.createElement(Ce.a,{className:i.title,disableTypography:!0},s.a.createElement(d.a,{className:i.dlgTitle},t),s.a.createElement(w.a,{color:"inherit",className:i.closeButton,onClick:n},s.a.createElement(_t.a,{color:"inherit"}))),s.a.createElement(X.a,{className:i.list,dense:!0,disablePadding:!0},a.map((function(e){return s.a.createElement(Nt,{key:"series".concat(e.id),series:e,onClick:function(){return r(e.id)}})}))))};Dt.propTypes={open:p.a.bool,title:p.a.string.isRequired,seriesList:p.a.array.isRequired,onSelect:p.a.func.isRequired,onClose:p.a.func.isRequired};var Lt=Dt;function Mt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var Ft=Object(U.a)((function(e){return{root:{height:"90%",width:"85%"},dlgTitleContainer:{color:function(e){return V.a.access[e.seriesAccess].palette.primary.contrastText},background:function(e){return V.a.access[e.seriesAccess].palette.primary.main},display:"flex",padding:0},dlgTitle:{flexGrow:1,paddingTop:e.spacing(2),paddingBottom:e.spacing(1),paddingLeft:e.spacing(3)},field:{marginBottom:e.spacing(2)}}})),Ut="cancel",Bt=function(e){var t=e.canEdit,a=e.photo,r=e.seriesAccess,n=e.onCancel,o=e.onOk,u=e.open,p=Ft({seriesAccess:r}),m=Object(c.useState)(null),g=Object(l.a)(m,2),f=g[0],h=g[1],b=Object(c.useState)({}),y=Object(l.a)(b,2),v=y[0],O=y[1],x=v&&Object.keys(v).length>0;return s.a.createElement(je.a,{fullScreen:!0,onClose:function(){x?h(Ut):n()},"aria-labelledby":"customized-dialog-title",open:u},s.a.createElement(Ce.a,{disableTypography:!0,className:p.dlgTitleContainer},s.a.createElement(d.a,{variant:"h5",className:p.dlgTitle},"Photo Properties"),s.a.createElement(w.a,{onClick:n,color:"inherit"},s.a.createElement(_t.a,null))),s.a.createElement(ke.a,null,s.a.createElement(et,{photo:a,delta:v,onChange:function(e){return O(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Mt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},v,{},e))},canEdit:t})),s.a.createElement(Pe.a,null,!t&&s.a.createElement(Te.a,{onClick:n,color:"primary"},"Ok"),t&&!x&&s.a.createElement(Te.a,{onClick:n,color:"primary"},"Back"),t&&x&&s.a.createElement(s.a.Fragment,null,s.a.createElement(Te.a,{onClick:function(){return h(Ut)},color:"primary"},"Cancel"),s.a.createElement(Te.a,{onClick:function(){return O({})},color:"primary"},"Reset"),s.a.createElement(Te.a,{onClick:function(){return o(v)},color:"primary"},"Ok"))),f&&f===Ut&&s.a.createElement(q.c,{open:!0,title:"Lose unsaved changes?",message:"You will lose any changes you made to this form",onConfirm:function(e){h(null),e&&n()}}))};Bt.propTypes={canEdit:p.a.bool,onCancel:p.a.func.isRequired,onOk:p.a.func.isRequired,open:p.a.bool,seriesAccess:p.a.string,photo:p.a.object.isRequired};var qt=Bt;a.d(t,"c",(function(){return ft})),a.d(t,"d",(function(){return Nt})),a.d(t,"e",(function(){return Lt})),a.d(t,"a",(function(){return lt})),a.d(t,"b",(function(){return qt}));t.f=wt},89:function(e,t,a){"use strict";var r=a(25),n=a(42),o=a(16),i=a(7),l=a(0),c=a.n(l),s=a(1),u=a.n(s),p=a(98),d=a(2090),m=a(74),g=a(227),f=a(2023),h=a(176),b=a(541),y=a(122),w=a(270),v=a(83),O=a(100),x=a(2096),E=a(522),S=a(523),k=a(2085),j=a(2086),C=a(2087),P=a(2088),T=[{toolTip:"Sat",Icon:k.a,ActiveIcon:j.a,color:"green",style:E},{toolTip:"Topo",Icon:C.a,ActiveIcon:P.a,color:"blue",style:S}],I=Object(h.a)((function(e){return{root:{width:1,height:1,zIndex:1},svgDot:{width:20,height:20,position:"absolute",top:"50%",left:"50%",textAlign:"center",transformOrigin:"50% 50%",transform:"translateY(-50%) translateX(-50%)"},svgAccuracyDot:{position:"absolute",top:"50%",left:"50%",textAlign:"center",transformOrigin:"50% 50%",transform:"translateY(-50%) translateX(-50%)"}}})),N=function(e){e.position;var t=e.projection,a=I(),r=20*t.pixelsPerMeter[0],n=20*t.pixelsPerMeter[1];return c.a.createElement("div",{className:a.root},c.a.createElement("svg",{style:{height:r,width:n},className:a.svgAccuracyDot,version:"1.1",viewBox:"0, 0, 100, 100"},c.a.createElement("circle",{cx:"50",cy:"50",r:49,stroke:"#8888FF",fillOpacity:"0.4",strokeWidth:"1",fill:"#AAAAFF"})),c.a.createElement("svg",{className:a.svgDot,version:"1.1",viewBox:"0, 0, 10, 10"},c.a.createElement("circle",{cx:"5",cy:"5",r:"4",stroke:"#FFFFFF",strokeWidth:"1",fill:"#4444FF"})))};N.propTypes={position:u.a.object,projection:u.a.object};var A=N,z=a(2089),_=a(2097),R=a(62),D=Object(h.a)((function(e){return{root:{zIndex:10,position:"absolute"},speedDialFab:{border:"2px solid",background:e.palette.text.primary,color:e.palette.primary.contrastText,width:40,height:40},speedDialAction:{},speedDialIcon:{},speedDialLabel:{background:"black",color:"white"},actionsClosed:{display:"none"}}})),L=function(e){var t=e.controlPadding,a=e.currStyle,r=e.mapStyles,n=e.setCurrStyle,o=Object(l.useState)(!1),s=Object(i.a)(o,2),u=s[0],p=s[1],d=D(),m=Object(R.a)(),g=function(e,t){e.preventDefault(),e.stopPropagation(),p(t)};if(!r||!Array.isArray(r)||r.length<2||!r[a])return null;var f=r[a].ActiveIcon;return c.a.createElement("div",{className:d.root,style:{top:t.top?t.top:m.spacing(2),right:t.right?t.right:m.spacing(2)}},r.length>1&&c.a.createElement(z.a,{ariaLabel:"SpeedDial",className:d.speedDial,classes:{fab:d.speedDialFab,actionsClosed:d.actionsClosed},icon:c.a.createElement(f,{className:d.icon}),onClick:function(e){return g(e,!u)},onClose:function(e){return g(e,!1)},open:u,direction:"left"},r.map((function(e,t){var a=e.Icon,r=(e.ActiveIcon,e.toolTip);return c.a.createElement(_.a,{key:"stylebutton".concat(t),icon:c.a.createElement(a,{className:d.speedDialIcon}),tooltipOpen:!1,tooltipPlacement:"bottom",tooltipTitle:r,onClick:function(){n(t),p(!1)}})}))))};L.propTypes={controlPadding:u.a.object,currStyle:u.a.number,mapStyles:u.a.array,setCurrStyle:u.a.func},L.defaultProps={controlPadding:{}};var M=L,F=a(2020),U=a(525),B=a.n(U),q=Object(h.a)((function(e){return{root:{border:"1px solid",background:e.palette.grey[100],color:"black",width:40,height:40,zIndex:10,position:"absolute"}}})),W=function(e){var t=e.onClick,a=e.controlPadding,r=e.disabled,n=q(),o=Object(R.a)();return c.a.createElement(F.a,{disabled:r,style:{top:56+(a.top?a.top:o.spacing(2)),right:a.right?a.right:o.spacing(2)},"aria-label":"myLocation",className:n.root,onClick:t},c.a.createElement(B.a,null))};W.propTypes={controlPadding:u.a.object,onClick:u.a.func.isRequired,disabled:u.a.bool};var G=W,H=a(4),V=a.n(H),Y=a(11),Q=a(20),$=a.n(Q);function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var J=Object(h.a)(a(452).default),ee=function(e){var t,a=J(),r=e.showMe,o=e.children,s=e.mapStyles,u=e.controlPadding,m=e.viewport,g=e.bounds,f=e.lockToBounds,h=e.lockPan,b=e.initStyle,y=e.onViewportChange,w=e.onTransitionStart,v=e.onTransitionEnd,E=e.transitions,S=e.onMapDataEvent,k=e.stylechooser,j=Object(n.a)(e,["showMe","children","mapStyles","controlPadding","viewport","bounds","lockToBounds","lockPan","initStyle","onViewportChange","onTransitionStart","onTransitionEnd","transitions","onMapDataEvent","stylechooser"]),C=Object(l.useRef)(null),P=Object(l.useRef)(null),T=Object(l.useRef)(null),I=Object(Y.i)(C).size,N=Object(l.useState)(b),z=Object(i.a)(N,2),_=z[0],R=z[1],D=Object(l.useState)(Z({},ae,{},m)),L=Object(i.a)(D,2),F=L[0],U=L[1],B=Object(l.useState)(!1),q=Object(i.a)(B,2),W=q[0],H=q[1],Q=Object(l.useState)(null),X=Object(i.a)(Q,2),ee=X[0],te=X[1],ne=(t=Object(Y.l)()).latitude&&t.longitude?c.a.createElement(p.c,{key:"myPos",className:"myPosMarker",captureDrag:!1,latitude:t.latitude,longitude:t.longitude,style:{zIndex:1}},c.a.createElement(A,{position:t,projection:ee})):null;Object(l.useMemo)((function(){if(!(!I||I.width<10||I.height<10)){s.length<=_&&R(b);try{var e=Object(O.a)(F);te(e)}catch(t){V.a.error(t)}}}),[F.zoom,I]);var oe=function(e){var t=Z({},e);g&&f&&(t.longitude<g[0]?t.longitude=g[0]:t.longitude>g[2]&&(t.longitude=g[2]),t.latitude<g[1]?t.latitude=g[1]:t.latitude>g[3]&&(t.latitude=g[3])),h&&(t.latitude=F.latitude,t.longitude=F.longitude),W||"function"!==typeof y||y({viewport:t,size:I,projection:ee,map:P.current&&P.current.getMap()}),U(t)};return Object(l.useMemo)((function(){if(C.current&&!(!g||!I||I.width<10||I.height<10||W)){var e=Object(i.a)(g,4),t=e[0],a=e[1],r=e[2],n=e[3];try{var o=new x.a(Z({},I,{},F)).fitBounds([[t,a],[r,n]],{padding:40,offset:[0,0]}),l=o.longitude,c=o.latitude,s=o.zoom;U(Z({},F,{longitude:l,latitude:c,zoom:s}))}catch(u){V.a.warn("recalcZoomBounds",u)}}}),[I,g]),Object(l.useEffect)((function(){U(Z({},F,{},m))}),[m]),c.a.createElement("div",{className:$()(a.mapContainer,e.className),ref:C},I.height>0&&I.width>0&&c.a.createElement(p.f,K({},F,T.current||E,{ref:function(e){P.current=e},height:I.height,width:I.width,mapStyle:_<s.length?s[_].style:s[0].style,onData:S,onTransitionStart:function(){H(!0),"function"===typeof w&&w()},onTransitionEnd:function(){H(!1),T.current=null,v&&v(),"function"===typeof y&&y({viewport:F,size:I,projection:ee,map:P.current&&P.current.getMap()})},dragPan:!h,onViewportChange:oe,mapboxApiAccessToken:Y.d.mapConfig.mapBoxToken},j),o&&Array.isArray(o)?o.map((function(e,t){return e?c.a.cloneElement(re(e,F,I.height,I.width,ee),{key:"mapChild-".concat(t)}):null})):re(o,F,I.height,I.width,ee),k&&c.a.createElement(M,{controlPadding:u,currStyle:_,mapStyles:s,setCurrStyle:R}),!e.hideNavControls&&c.a.createElement(p.d,{onViewportChange:function(e){return oe(Z({},e,{},I))},showZoom:!1===!e.touchZoom&&!1===!e.scrollZoom,showCompass:!1===!e.touchRotate&&!1===!e.dragRotate}),r&&!h&&c.a.createElement(c.a.Fragment,null,ne,c.a.createElement(G,{disabled:!t||!t.latitude,controlPadding:u,onClick:function(){if(t.latitude&&t.longitude){T.current={transitionDuration:2e3,transitionInterpolator:new p.a,transitionEasing:d.a},setTimeout((function(){T.current&&(T.current=null)}),2e3),U(Z({},F,{latitude:t.latitude,longitude:t.longitude,zoom:F.zoom>10?F.zoom:12}))}}}))))};ee.propTypes={children:u.a.any,data:u.a.array,controlPadding:u.a.object,showMe:u.a.bool,className:u.a.string,touchZoom:u.a.bool,scrollZoom:u.a.bool,touchRotate:u.a.bool,dragRotate:u.a.bool,transitions:u.a.object,viewport:u.a.object,initStyle:u.a.number,stylechooser:u.a.bool,lockPan:u.a.bool,lockRotation:u.a.bool,lockZoom:u.a.bool,lockToBounds:u.a.bool,hideNavControls:u.a.bool,bounds:u.a.array,mapStyles:u.a.array,onMapDataEvent:u.a.func,onViewportChange:u.a.func,onTransitionStart:u.a.func,onTransitionEnd:u.a.func},ee.defaultProps={controlPadding:{},stylechooser:!0,initStyle:0,lockToBounds:!1,mapStyles:T};var te=ee,ae={latitude:49.3050394,longitude:-123.1398254,bearing:0,pitch:0,zoom:12};function re(e,t,a,r,n){return"function"===typeof e?e(t,a,r,n):e}var ne=a(18),oe=a.n(ne),ie=a(105),le=a.n(ie),ce=a(526),se=a.n(ce),ue=a(12);function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var me=function(e,t,a,r,n,o,c){var s=Object(l.useState)([]),u=Object(i.a)(s,2),p=u[0],d=u[1],m=Object(l.useRef)(),g=Object(l.useState)({single:[],cluster:[]}),f=Object(i.a)(g,2),h=f[0],b=f[1];Object(l.useEffect)((function(){return m.current=!0,function(){m.current=!1}}),[]);var y=Object(l.useCallback)(ue.util.debounce((function(){var e,t=arguments;return oe.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(m.current){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,oe.a.awrap(ge.apply(void 0,t));case 4:e=a.sent,d(e);case 6:case"end":return a.stop()}}))}),1e3),[]),w=Object(l.useCallback)(ue.util.debounce((function(){var e,t=arguments;return oe.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(m.current){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,oe.a.awrap(fe.apply(void 0,t));case 4:e=a.sent,b(e);case 6:case"end":return a.stop()}}))}),300),[]);return Object(l.useEffect)((function(){y(e,n,r)}),[e.length,o]),Object(l.useEffect)((function(){c||w(p,h,t,a)}),[p,a,t,o,c]),{filteredClusteredData:h}},ge=function(e,t,a){if(!e)return[];var r=se()(9,[".x",".y",".x",".y"]),o=new x.a(de({},a,{zoom:0})),i=e.map((function(e){var t=[0,0];try{t=o.project(e.coords)}catch(r){V.a.error(r)}e.longitude,e.latitude;var a=Object(n.a)(e,["longitude","latitude"]);return{x:t[0],y:t[1],photoCount:a.photoCount,zoomLevels:[],geoJSON:e.coords?Object(m.point)(e.coords,de({},a)):null}}));r.clear(),r.load(i);for(var l=function(e){var a=t/Math.sqrt(2)/Math.pow(2,e);i.forEach((function(t){if(void 0===t.zoomLevels[e]){var n=t.x,o=t.y,i=r.search({minX:n-a,minY:o-a,maxX:n+a,maxY:o+a}).filter((function(t){return void 0===t.zoomLevels[e]}));i.forEach((function(a){if(a===t){var r=1===i.length?t.geoJSON:Object(m.centroid)(Object(m.featureCollection)(i.map((function(e){return e.geoJSON}))));r.properties=de({},r.properties,{id:r.properties.id||le()(),count:i.length,reducedPhotoCount:i.reduce((function(e,t){var a=t.photoCount;return a?e+a:e}),0),points:i.map((function(e){return e.geoJSON}))}),t.zoomLevels[e]=r}else a.zoomLevels[e]=null}))}}))},c=0;c<=20;c++)l(c);return i.map((function(e){return e.zoomLevels}))};function fe(e,t,a,r){return e.filter((function(e){return!!e[r]})).reduce((function(e,t){var n=t[r],o=n.geometry.coordinates,i=n.properties.count;return(!a||a.length<4||a[0]<o[0]&&a[1]<o[1]&&a[2]>o[0]&&a[3]>o[1])&&(i>1?e.cluster.push(n):e.single.push(n)),e}),{single:[],cluster:[]})}var he=a(2019),be=a(2072),ye=a(111),we=a(2055),ve=a(2068),Oe=a(527),xe=a.n(Oe),Ee=a(528),Se=a.n(Ee),ke=a(2071),je=Object(h.a)((function(e){return{root:{},listItemText:{textAlign:"center"},iconButton:{background:e.palette.grey[200]},compoundButton:{textAlign:"center"}}})),Ce=function(e){var t=e.seriesCount,a=e.reducedPhotoCount,r=e.actions,n=je();return V.a.info("cluster selected",{seriesCount:t,reducedPhotoCount:a}),c.a.createElement(ve.a,null,c.a.createElement(he.a,{className:n.root},c.a.createElement(ke.a,null,c.a.createElement("div",{className:n.compoundButton},c.a.createElement(we.a,{onClick:r.onZoomTo,className:n.iconButton},c.a.createElement(xe.a,null)),c.a.createElement(ye.a,{variant:"caption",component:"div"},"Zoom In"))),c.a.createElement(be.a,{className:n.listItemText,onClick:r.onZoomTo,primary:"".concat(t," Photo series"),secondary:"containing ".concat(a," individual photo").concat(1===a?"":"s")}),c.a.createElement(ke.a,null,c.a.createElement("div",{className:n.compoundButton},c.a.createElement(we.a,{onClick:r.onViewList,className:n.iconButton},c.a.createElement(Se.a,null)),c.a.createElement(ye.a,{variant:"caption",component:"div"},"List")))))};Ce.propTypes={seriesCount:u.a.number.isRequired,reducedPhotoCount:u.a.number.isRequired,actions:u.a.shape({onZoomTo:u.a.func.isRequired,onViewList:u.a.func.isRequired,onClose:u.a.func.isRequired})};var Pe=Ce,Te=a(2081),Ie=a(2026),Ne=a(268),Ae=a.n(Ne),ze=Object(h.a)((function(e){return{root:{color:e.palette.primary.contrastText,width:150,position:"absolute",top:"50%",left:"50%",textAlign:"center",transformOrigin:"50% 50%",transform:"translateY(-50%) translateX(-50%)"},rootActive:{zIndex:60},icon:{},avatar:{position:"relative",margin:"0 auto",border:"2px solid ".concat(e.palette.primary.contrastText),height:40,width:40,zIndex:61,background:e.palette.primary.main,color:e.palette.primary.contrastText},avatarActive:{background:"#FFFF00",color:"black",border:"2px solid black"},badge:{zIndex:62,color:e.palette.secondary.contrastText,background:e.palette.secondary.main,transform:"scale(1) translate(30%, -30%)"},badgeActive:{color:e.palette.primary.contrastText,background:e.palette.primary.main},directionIndicator:{position:"absolute",top:20,left:"50%",zIndex:59},name:{color:"white",fontWeight:"bold",textShadow:"\n        0px 0px 4px #000000, \n        0px 0px 4px #000000 \n    ",zIndex:60,position:"relative"},nameActive:{color:"black",textShadow:"\n    0px 0px 2px #FFFFFF, \n    0px 0px 2px #FFFFFF,\n    0px 0px 4px #FFFFFF \n"}}})),_e=function(e){var t=e.name,a=e.onClick,r=e.active,n=e.photoCount,o=e.direction,i=ze();return c.a.createElement("div",{className:$()(i.root,r?i.rootActive:null)},c.a.createElement(Te.a,{classes:{badge:$()(i.badge,r?i.badgeActive:null)},badgeContent:n},c.a.createElement(Ie.a,{className:$()(i.avatar,r?i.avatarActive:null),onClick:a},c.a.createElement(Ae.a,{className:i.icon,color:"inherit"}))),o&&o>=0?c.a.createElement("div",{className:i.directionIndicator},c.a.createElement("svg",{className:i.svgArc,version:"1.1",width:"100",height:"100",viewBox:"0, 0, 100, 100",style:{transform:"translateY(-50%) translateX(-50%) rotateZ(".concat(o,"deg)")}},c.a.createElement("path",{d:"M50,0 C60.946,0.151 72.136,3.514 80.675,10.56 L50,50 L19.325,10.56 C27.938,3.461 39,0.278 50,0 z",fill:"#009DC1",fillOpacity:"0.444",strokeWidth:"1",strokeOpacity:"0.6",stroke:"#FFFFFF"}))):null,c.a.createElement(ye.a,{variant:"body1",className:$()(i.name,r?i.nameActive:null)},t))};_e.propTypes={name:u.a.string,photoCount:u.a.number,onClick:u.a.func.isRequired,direction:u.a.number,active:u.a.bool};var Re=_e,De=a(218),Le=a.n(De),Me=Object(h.a)((function(e){return{avatar:{background:e.palette.grey[900],border:"2px solid ".concat(e.palette.grey[100]),color:e.palette.grey[100]},avatarActive:{background:"#FFFF00",border:"2px solid black",color:"black",zIndex:50}}})),Fe=function(e){var t=e.seriesCount,a=e.active,r=e.onClick,n=Me();return c.a.createElement(Ie.a,{onClick:r,className:$()(n.avatar,a?n.avatarActive:null)},Le()(t).format("0,0"))};Fe.propTypes={seriesCount:u.a.number,onClick:u.a.func.isRequired,active:u.a.bool};var Ue=Fe,Be=a(47);function qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function We(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ge(){return(Ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var He=Object(h.a)((function(e){return{root:{position:"relative",height:"100%","& .myPosMarker":{zIndex:1},"& .singleMarker":{zIndex:3},"& .clusterMarker":{zIndex:2}},fab:{background:e.palette.secondary.main,color:e.palette.secondary.contrastText},topBar:{position:"absolute",zIndex:100,top:0},loadingWrapper:{position:"absolute",color:e.palette.text.primary,opacity:.5,zIndex:90,textAlign:"center",top:"50%",left:"50%",transform:"translateY(-50%) translateX(-50%)"},zoomOutFab:{margin:e.spacing(.5),padding:e.spacing(.5),border:"2px solid",borderRadius:e.spacing(1),background:e.palette.common.white,fontSize:20,position:"absolute",zIndex:80,bottom:e.spacing(2),right:e.spacing(10)},selectedPopup:{width:"90%",maxWidth:400,zIndex:100,position:"absolute",bottom:e.spacing(1),left:"50%",transformOrigin:"0% 50%",transform:"translateY(0%) translateX(-50%)"}}})),Ve={zoom:4,latitude:44.629701,longitude:-120.333379},Ye=function(e){var t=e.seriesList,a=e.initViewport,o=e.loading,s=e.initialActiveSeries,u=e.queryVersion,h=e.actions,O=Object(l.useState)({viewport:We({},Ve,{},a.viewport),bounds:a.bounds,filterBounds:null}),x=Object(i.a)(O,2),E=x[0],S=x[1],k=He(),j=Object(l.useRef)(),C=Object(l.useState)(!1),P=Object(i.a)(C,2),I=P[0],N=P[1],A=Object(l.useRef)(),z=Object(l.useState)(0),_=Object(i.a)(z,2),R=_[0],D=_[1],L=Object(l.useState)(!1),M=Object(i.a)(L,2),F=M[0],U=M[1],B=Object(l.useState)(null),q=Object(i.a)(B,2),W=q[0],G=q[1],H=Object(l.useState)(),Y=Object(i.a)(H,2),Q=Y[0],$=Y[1],X=me(t||[],E.filterBounds,R,E.viewport,80,u,I).filteredClusteredData;Object(l.useEffect)((function(){if(s&&t&&!Q)try{var e=t.find((function(e){return e.id===s}));if(e&&e.coords){var a=Object(m.buffer)(Object(m.point)(e.coords),10,{units:"meters"}),r=Object(m.bbox)(a);S(We({},E,{bounds:r}))}}catch(n){V.a.error(n)}}),[t]),Object(l.useEffect)((function(){if(s&&X.single&&!Q)try{var e=X.single.find((function(e){return e.properties.id===s}));e&&A.current&&$(e)}catch(t){V.a.error(t)}}),[X.single]);var Z=function(e){$(e),e&&1===e.properties.count?h.onSeriesMapSelect(e.properties.id):h.onSeriesMapSelect(),function(e){var t=j.current?j.current:E.viewport,a=(t.transitionDuration,t.transitionInterpolator,t.transitionInterruption,t.maxZoom,t.minZoom,t.maxPitch,t.minPitch,{viewport:Object(n.a)(t,["transitionDuration","transitionInterpolator","transitionInterruption","maxZoom","minZoom","maxPitch","minPitch"])});e?setTimeout((function(){return h.pushMapHistory(a)}),e):h.pushMapHistory(a)}()},K=function(e){try{var t=Object(m.featureCollection)(e.properties.points),a=Object(m.bbox)(t);if(a[0]===a[2]&&a[1]===a[3]){var r=Object(m.buffer)(Object(m.point)([a[0],a[1]]),10,{units:"meters"});a=Object(m.bbox)(r)}var n=.2*(a[2]-a[0]),o=.2*(a[3]-a[1]),i=[a[0]-n,a[1]-o,a[2]+n,a[3]+o];G({transitionDuration:2e3,transitionInterpolator:new p.a,transitionEasing:d.a}),S(We({},E,{bounds:i})),e.properties.count>1&&setTimeout((function(){return Z(null)}),2e3)}catch(l){V.a.error(l)}},J=function(e){Q&&Q.properties.id===e.properties.id?K(Q):(G({transitionDuration:500,transitionInterpolator:new p.b,transitionEasing:d.a}),S({viewport:{longitude:e.geometry.coordinates[0],latitude:e.geometry.coordinates[1]}})),Z(e)},ee=Object(l.useMemo)((function(){return[].concat(Object(r.a)(X.single.filter((function(e){return!I||Q&&Q.properties.id===e.properties.id})).map((function(e){return c.a.createElement(p.c,{className:"singleMarker",key:"single-".concat(e.properties.id),latitude:e.geometry.coordinates[1],longitude:e.geometry.coordinates[0],offsetLeft:0,offsetTop:-20},c.a.createElement(b.a,{theme:Be.a.access[e.properties.access]},c.a.createElement(Re,{name:e.properties.name,photoCount:e.properties.photoCount,onClick:function(){return J(e)},direction:R>10&&e.properties.direction?e.properties.direction:null,active:Q&&Q.properties.id===e.properties.id})))}))),Object(r.a)(X.cluster.filter((function(e){return!I||Q&&Q.properties.id===e.properties.id&&Q.properties.count===e.properties.count})).map((function(e){return c.a.createElement(p.c,{className:"clusterMarker",key:"cluster-".concat(e.properties.id),latitude:e.geometry.coordinates[1],longitude:e.geometry.coordinates[0],offsetLeft:-20,offsetTop:-20},c.a.createElement(Ue,{seriesCount:e.properties.count,photoCount:e.properties.reducedPhotoCount,onClick:function(){return J(e)},active:Q&&Q.properties.id===e.properties.id&&Q.properties.count===e.properties.count}))}))))}),[X,Q,I]),ae=Object(l.useMemo)((function(){return!!Q&&c.a.createElement(g.a,{className:k.selectedPopup},1===Q.properties.count?c.a.createElement(v.d,{series:Q.properties,showCreatedOn:!0,showLastPhoto:!0,onClick:function(){return h.onSeriesNavigate(Q.properties.id)}}):c.a.createElement(Pe,{seriesCount:Q.properties.count,reducedPhotoCount:Q.properties.reducedPhotoCount,actions:{onViewList:function(){return U(!0)},onClose:function(){return Z(null)},onZoomTo:function(){return K(Q)}}}))}),[Q]);return c.a.createElement("div",{className:k.root,ref:A},c.a.createElement(y.c,{isTransparent:!0},c.a.createElement(w.a,{isTransparent:!0,onClick:h.onSearchClick,defaultValue:""})),o&&c.a.createElement("div",{className:k.loadingWrapper},c.a.createElement(f.a,{size:80,thickness:7,color:"inherit"})),c.a.createElement(te,Ge({showMe:!0,viewport:E.viewport,transitions:W,mapStyles:T,controlPadding:{top:56},initStyle:T.length>1?0:1},{},{onTransitionStart:function(){N(!0)},onTransitionEnd:function(){N(!1),G(null)},bounds:E.bounds,maxZoom:20,minZoom:1,onViewportChange:function(e){var t=e.viewport,a=e.map;j.current=t;var r=Math.floor(t.zoom);if(!I&&a&&a.getBounds){var n=a.getBounds(),o=n._sw,l=o.lng,c=o.lat,s=n._ne,u=s.lng,p=s.lat,d=E.filterBounds||[l,c,u,p],m=Object(i.a)(d,4),g=m[0],f=m[1],h=m[2],b=m[3];if(r!==R||g>=l||f>=c||h<=u||b<=p)S(We({},E,{filterBounds:[l-(u-l)/2,c-(p-c)/2,u+(u-l)/2,p+(p-c)/2]}))}r!==R&&D(r)},onNativeClick:function(){Q&&Z(null)}}),ee),Q&&Q.properties.count>1&&c.a.createElement(v.e,{open:F,title:"".concat(Q.properties.count," Series"),onClose:function(){return U(!1)},onSelect:h.onSeriesNavigate,seriesList:Q.properties.points.map((function(e){return e.properties}))}),ae)};Ye.propTypes={seriesList:u.a.array,queryVersion:u.a.number,initialActiveSeries:u.a.string,initViewport:u.a.object,loading:u.a.bool,actions:u.a.shape({onSearchClick:u.a.func,onSeriesNavigate:u.a.func,onSeriesMapSelect:u.a.func,popMapHistory:u.a.func,pushMapHistory:u.a.func,clearMapHistory:u.a.func})};var Qe=Ye;function $e(){return($e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var Xe=Object(h.a)(a(452).default),Ze=function(e){var t=Xe(),a=e.className,r=e.controlPadding,o=e.viewport,s=e.children,u=e.mapStyles,d=e.onMapDataEvent,m=Object(n.a)(e,["className","controlPadding","viewport","children","mapStyles","onMapDataEvent"]),g=Object(l.useRef)(null),f=Object(l.useRef)(),h=Object(Y.i)(g,{width:100,height:50}).size,b=Object(l.useState)(0),y=Object(i.a)(b,2),w=y[0],v=y[1],x=Object(l.useState)(null),E=Object(i.a)(x,2),S=E[0],k=E[1],j=function(){if(!(!h||h.width<10||h.height<10))try{var e=Object(O.a)(o);k(e)}catch(t){V.a.warn("recalcZoomBounds",t)}};return S||j(),Object(l.useMemo)(j,[h]),c.a.createElement("div",{className:$()(t.baseStaticMap,a),ref:g,style:{height:"100%",width:"100%"}},c.a.createElement(p.e,$e({},o,{height:h.height,width:h.width,mapStyle:u[w].style,onData:d,mapboxApiAccessToken:Y.d.mapConfig.mapBoxToken},m,{ref:function(e){f.current=e}}),u&&u.length>1?c.a.createElement(M,{controlPadding:r,currStyle:w,mapStyles:u,setCurrStyle:v}):null,s&&Array.isArray(s)?s.map((function(e){return Ke(e,f,h.height,h.width,S)})):Ke(s,f,h.height,h.width,S)))};function Ke(e,t,a,r,n){return"function"===typeof e?e({},a,r,n):e}Ze.propTypes={children:u.a.any,deckelements:u.a.array,data:u.a.array,controlPadding:u.a.object,minPitch:u.a.number,maxPitch:u.a.number,pitch:u.a.number,className:u.a.string,viewport:u.a.object,bounds:u.a.array,zoomBounds:u.a.array,InnerBounds:u.a.array,mapStyles:u.a.array,latitude:u.a.number,longitude:u.a.number,zoom:u.a.number,onMapDataEvent:u.a.func},Ze.defaultProps={controlPadding:{},stylechooser:!0,initStyle:0,mapStyles:T};var Je=Ze,et=Object(h.a)((function(e){return{root:{color:e.palette.primary.main,position:"absolute",top:"50%",left:"50%",textAlign:"center",transformOrigin:"50% 50%",transform:"translateY(-50%) translateX(-50%)",zIndex:1},rootActive:{zIndex:60},svgDot:{zIndex:61,width:20,height:20,position:"absolute",top:"50%",left:"50%",textAlign:"center",transformOrigin:"50% 50%",transform:"translateY(-50%) translateX(-50%)"},dot:{stroke:e.palette.secondary.contrastText,strokeWidth:"1",fill:e.palette.secondary.main},directionIndicator:{position:"absolute",left:"50%",zIndex:59},name:{color:"white",fontWeight:"bold",textShadow:"\n        0px 0px 4px #000000, \n        0px 0px 4px #000000 \n    ",zIndex:60,position:"relative"},nameActive:{color:e.palette.secondary.dark,textShadow:"\n    0px 0px 2px #FFFFFF, \n    0px 0px 2px #FFFFFF,\n    0px 0px 4px #FFFFFF \n"}}})),tt=function(e){var t=e.direction,a=et();return c.a.createElement("div",{className:a.root},c.a.createElement("svg",{className:a.svgDot,version:"1.1",viewBox:"0, 0, 10, 10"},c.a.createElement("circle",{cx:"5",cy:"5",r:"4",className:a.dot})),t&&t>=0?c.a.createElement("div",{className:a.directionIndicator},c.a.createElement("svg",{className:a.svgArc,version:"1.1",width:"100",height:"100",viewBox:"0, 0, 100, 100",style:{transform:"translateY(-50%) translateX(-50%) rotateZ(".concat(t,"deg)")}},c.a.createElement("path",{d:"M50,0 C60.946,0.151 72.136,3.514 80.675,10.56 L50,50 L19.325,10.56 C27.938,3.461 39,0.278 50,0 z",fill:"#009DC1",fillOpacity:"0.444",strokeWidth:"0.5",strokeOpacity:"0.6",stroke:"#FFFFFF"}))):null)};tt.propTypes={direction:u.a.number};var at=tt;function rt(){return(rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var nt=function(e){var t=e.staticMap,a=e.editable,r=e.latitude,o=e.longitude,i=e.onChange,l=e.direction,s=Object(n.a)(e,["staticMap","editable","latitude","longitude","onChange","direction"]),u=t?Je:te,d=t?{}:{touchRotate:!1,dragRotate:!1,showMe:a,lockPan:!a,onViewportChange:i};return c.a.createElement(u,rt({},d,s),r&&o?c.a.createElement(p.c,{className:"singleMarker",latitude:r,longitude:o},c.a.createElement(at,{direction:l})):c.a.createElement(at,{direction:l}))};nt.propTypes={direction:u.a.number,latitude:u.a.number,longitude:u.a.number,editable:u.a.bool,staticMap:u.a.bool,onChange:u.a.func};var ot=nt,it=a(2018),lt=a(2098),ct=a(2076),st=a(2069),ut=a(95),pt=a.n(ut),dt=a(529),mt=a.n(dt),gt=a(194),ft=a.n(gt),ht=a(530),bt=a.n(ht),yt=a(531),wt=a.n(yt),vt=a(2070),Ot=a(2060),xt=Object(h.a)((function(e){return{root:{height:"100%",display:"flex",overflow:"hidden",flexDirection:"column"},rectContents:{color:e.palette.common.white,textShadow:"5px 6px 6px ".concat(e.palette.common.black),position:"absolute",padding:e.spacing(2),top:"50%",left:"50%",textAlign:"center",transform:"translateY(-50%) translateX(-50%)"},areaLabel:{position:"absolute",top:0,left:0,width:"100%",transform:"translateY(-110%)"},rectContentsDownloading:{textShadow:"none",color:e.palette.primary.contrastText},rectIcon:{position:"absolute",opacity:.4,width:"50%",height:"50%",top:"50%",left:"50%",transform:"translateY(-50%) translateX(-50%)"},tooBig:{color:e.palette.error.contrastText},tickText:{},svgRect:{position:"absolute",top:0,left:0,zIndex:-1,height:"100%",width:"100%"},svgCutout:{stroke:"none",fill:"#00000099"},svgBorder:{fill:"none",stroke:"none"},svgBorderNavigating:{stroke:"#44444499"},svgBorderLocked:{fill:"#66666666",stroke:"#44444499"},svgBorderTooBig:{opacity:.5,fill:e.palette.error.main,stroke:e.palette.error.dark},svgBorderDownloading:{opacity:.7,fill:e.palette.primary.main,stroke:"#44444499"},downloadingProgress:{},downloadingProgressCircle:{margin:e.spacing(2)},snackError:{background:e.palette.primary.main,color:e.palette.primary.contrastText},mapWrapper:{flex:"1 1",overflow:"hidden",position:"relative"}}})),Et={LOCKED:"Locked",OFFLINE:"Offline",NAVIGATING:"Navigating",ERROR:"Error",DOWNLOADING:"Downloading",CANCELED:"Canceled"},St=function(e){var t=e.initViewport,a=e.progress,r=e.toolState,n=e.actions,o=xt(),s=Object(l.useRef)(),u=Object(l.useState)(null),p=Object(i.a)(u,2),d=p[0],m=p[1],g=Object(l.useState)(null),h=Object(i.a)(g,2),b=h[0],y=h[1],w=Object(l.useState)(null),v=Object(i.a)(w,2),O=v[0],x=v[1],E=O>Y.d.home.Offline.maxMapTileArea,S=function(e){return r?$()(o[e],o["".concat(e).concat(r)],E?o["".concat(e,"TooBig")]:null):o[e]},k=Object(l.useCallback)(ue.util.debounce((function(e,t,a){if(s.current){var r=e.longitude,n=e.latitude,o=t?Math.abs(t.metersPerPixel[0]*a*t.metersPerPixel[1]*a/1e6):0,i=a/2*t.degreesPerPixel[0],l=a/2*t.degreesPerPixel[1],c=[r-i,n-l,r+i,n+l];o!==O&&x(o),c!==d&&m(c),y(e)}}),500),[]),j=null,C=function(){},P=null;switch(r){case Et.NAVIGATING:j=E?null:c.a.createElement(ct.a,{className:o.snack,"aria-describedby":"client-snackbar",message:"Place the square around the area you wish to download for later use",action:[c.a.createElement(Ot.a,{key:"action1",color:"inherit",disabled:O>Y.d.home.Offline.maxMapTileArea,onClick:function(){return n.onStartDownload(d,b)}},"Start Download")]});break;case Et.DOWNLOADING:j=c.a.createElement(ct.a,{className:o.snack,"aria-describedby":"client-snackbar",message:"Downloading...",action:[c.a.createElement(Ot.a,{key:"action1",color:"inherit",onClick:n.onCancel},"Cancel")]});break;case Et.LOCKED:j=c.a.createElement(ct.a,{className:o.snack,"aria-describedby":"client-snackbar",message:"This is the area you downloaded last",action:[c.a.createElement(Ot.a,{key:"action1",color:"secondary",onClick:n.onUnlock},"Download a new Area")]});break;case Et.OFFLINE:j=c.a.createElement(ct.a,{className:o.snack,"aria-describedby":"client-snackbar",message:"You cannot download content when you are offline."});break;case Et.CANCELED:j=c.a.createElement(ct.a,{className:o.snackError,"aria-describedby":"client-snackbar",message:"Cancelling..."}),C=n.onCancelComplete,P=2e3}var T=r===Et.NAVIGATING;return c.a.createElement("div",{className:o.root},c.a.createElement(it.a,null)," ",c.a.createElement(st.a,{position:"static",className:o.appBar},c.a.createElement(vt.a,{disableGutters:!0},c.a.createElement(we.a,{className:o.menuButton,color:"inherit",onClick:n.onMenuBack,"aria-label":"Menu"},c.a.createElement(pt.a,null)),c.a.createElement(ye.a,{variant:"subtitle1",color:"inherit",className:o.toolbarTitle},"Offline data manager"))),c.a.createElement("div",{className:o.mapWrapper,ref:s},c.a.createElement(te,{hideNavControls:!0,showMe:T,dragPan:T,dragRotate:!1,scrollZoom:T,doubleClickZoom:!1,touchZoom:T,touchRotate:!1,viewport:t},(function(e,t,i,l){var s=.6*Math.min(t,i),u={height:s,width:s},p={x:i/2-s/2,y:t/2-s/2},m=a.tileTick&&a.seriesTick&&a.seriesPhotoTick?[a.tileTick[0]+a.seriesTick[0]+a.seriesPhotoTick[0],a.tileTick[1]+a.seriesTick[1]+a.seriesPhotoTick[1]]:[0,1];return 0===m[1]&&(m[1]=1),k(e,l,s),c.a.createElement("div",{style:{height:t,width:i}},c.a.createElement("div",{className:S("rectContents"),style:u},r!==Et.DOWNLOADING&&c.a.createElement(ye.a,{className:$()(o.areaLabel,E?o.tooBig:null),color:"inherit",variant:"h5",component:"div"},Le()(O).format("0,0")," km\xb2"),r===Et.NAVIGATING&&!E&&c.a.createElement(mt.a,{className:o.rectIcon,color:"inherit",onClick:function(){return n.onStartDownload(d,b)}}),r===Et.NAVIGATING&&E?c.a.createElement("div",null,c.a.createElement(ye.a,{color:"inherit",variant:"body1",component:"div"},"> ",Y.d.home.Offline.maxMapTileArea," km\xb2"),c.a.createElement(ft.a,{className:o.rectIcon,color:"inherit"}),c.a.createElement(ye.a,{color:"inherit",variant:"body2",component:"div"},"Window too big. Try zooming in.")):null,r===Et.DOWNLOADING&&c.a.createElement("div",{className:o.downloadingProgress},c.a.createElement(ye.a,{className:"areaLabel",color:"inherit",variant:"h5"},"Downloading..."),c.a.createElement(f.a,{className:o.downloadingProgressCircle,variant:"determinate",size:.4*s,thickness:.013*s,value:Math.floor(100*m[0]/m[1]),color:"inherit"}),a.tileTick&&c.a.createElement(ye.a,{color:"inherit",variant:"body1",component:"div"},"Map Tiles: ",a.tileTick[0]," of ",a.tileTick[1]),a.seriesTick&&c.a.createElement(ye.a,{color:"inherit",variant:"body1",component:"div"},"Series: ",a.seriesTick[0]," of ",a.seriesTick[1]),a.seriesPhotoTick&&c.a.createElement(ye.a,{color:"inherit",variant:"body1",component:"div"},"Series Photos: ",a.seriesPhotoTick[0]," of ",a.seriesPhotoTick[1])),r===Et.LOCKED&&c.a.createElement("div",null,c.a.createElement(bt.a,{className:o.rectIcon,color:"inherit"})),r===Et.OFFLINE&&c.a.createElement("div",null,c.a.createElement(wt.a,{className:o.rectIcon,color:"inherit"}))),c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:{height:t,width:i}},c.a.createElement("defs",null,c.a.createElement("path",{id:"Triangle",d:"M 16,0 L -8,9 v-18 z",fill:"black",stroke:"none"})),c.a.createElement("g",{fillRule:"evenodd",className:S("svgCutout")},c.a.createElement("path",{d:"\n                            M 0 0 L ".concat(i," ",0," L ").concat(i," ").concat(t,"  L ",0," ").concat(t," Z\n                             M ").concat(p.x," ").concat(p.y," \n                             L ").concat(i-p.x," ").concat(p.y,"\n                             L ").concat(i-p.x," ").concat(t-p.y," \n                             L ").concat(p.x," ").concat(t-p.y," Z\n                             ")})),c.a.createElement("g",{fillRule:"evenodd",className:S("svgBorder")},c.a.createElement("path",{d:"\n                             M ".concat(p.x," ").concat(p.y," \n                             L ").concat(i-p.x," ").concat(p.y,"\n                             L ").concat(i-p.x," ").concat(t-p.y," \n                             L ").concat(p.x," ").concat(t-p.y," Z\n                             ")}))))})),j&&c.a.createElement(lt.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:!0,onClose:C,autoHideDuration:P},j)))};St.propTypes={toolState:u.a.oneOf(Object.values(Et)),initViewport:u.a.object,progress:u.a.shape({tileTick:u.a.array,seriesTick:u.a.array,seriesPhotoTick:u.a.array}),actions:u.a.shape({onMenuBack:u.a.func.isRequired,onStartDownload:u.a.func.isRequired,onCancel:u.a.func.isRequired,onCancelComplete:u.a.func.isRequired,onUnlock:u.a.func.isRequired})};var kt=St,jt=a(2059),Ct=a(2057),Pt=a(2061),Tt=a(2062),It=a(2017),Nt=a(2101),At=Object(h.a)((function(e){return{root:{},dlgContent:{display:"flex",flexDirection:"column",padding:0},mapWrapper:{flexGrow:1},sliderWrapper:{padding:"20px"},slider:{},sliderRoot:{},body:{overflow:"hidden",whiteSpace:"pre-line",paddingBottom:e.spacing(1)},title:{background:e.palette.primary.main,color:e.palette.primary.contrastText,margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}})),zt=function(e){var t=e.open,a=e.onOk,r=e.onCancel,n=e.title,o=e.latitude,s=e.longitude,u=e.direction,p=At(),d=Object(l.useState)({longitude:s,latitude:o}),m=Object(i.a)(d,2),g=m[0],f=g.longitude,h=g.latitude,b=m[1],y=Object(l.useState)(u),w=Object(i.a)(y,2),v=w[0],O=w[1],x=Object(l.useMemo)((function(){return{zoom:18,latitude:o,longitude:s}}),[o,s]);return c.a.createElement(Ct.a,{scroll:"paper",open:t,fullWidth:!0,fullScreen:!0,onClose:r},c.a.createElement(Tt.a,{className:p.title,disableTypography:!0},c.a.createElement(ye.a,{color:"inherit"},n)),c.a.createElement(jt.a,{className:p.dlgContent},c.a.createElement("div",{className:p.mapWrapper},c.a.createElement(ot,{editable:!0,className:p.map,direction:v>0?v:null,viewport:x,onChange:function(e){var t=e.viewport,a=t.longitude,r=t.latitude;return b({longitude:a,latitude:r})}})),c.a.createElement("div",{className:p.sliderWrapper},c.a.createElement(It.a,{className:p.mapFormLabel},"Direction ",v>-1?"":"(off)"),c.a.createElement(Nt.a,{classes:{root:p.sliderRoot},value:v||-1,min:-1,max:360,step:1,onChange:function(e,t){return O(t)}}))),c.a.createElement(Pt.a,null,c.a.createElement(Ot.a,{onClick:r},"Cancel"),c.a.createElement("div",{style:{flexGrow:1}}),c.a.createElement(Ot.a,{onClick:function(){return a({coords:[f,h],direction:v})}},"Ok")))};zt.propTypes={open:u.a.bool,latitude:u.a.number,longitude:u.a.number,direction:u.a.number,onOk:u.a.func,onCancel:u.a.func,title:u.a.string};var _t=zt;a.d(t,"a",(function(){return Qe})),a.d(t,"c",(function(){return ot})),a.d(t,"e",(function(){return kt})),a.d(t,"d",(function(){return Et})),a.d(t,"b",(function(){return _t}))}},[[561,1,2]]]);
//# sourceMappingURL=main.60b29079.chunk.js.map