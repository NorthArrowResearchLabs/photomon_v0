{"version":3,"sources":["../../client-common/dist/config.js","../../client-common/dist/share.js","../../client-common/dist/imageParser.js","../../client-common/dist/useCamera.js","../../client-common/dist/useComponentSize.js","../../client-common/dist/useFileInput.js","../../client-common/dist/useOnline.js","../../client-common/dist/useResponsive.js","../../client-common/dist/ErrorBoundary.js","../../client-common/dist/useOSDetect.js","../../client-common/dist/appContext.js","../../client-common/dist/useSensors.js","../../client-common/dist/index.js","../../icons/dist/BDA.js","../../icons/dist/AppLogoSimple.js","../../icons/dist/QRCode.js","../../icons/dist/Apple.js","../../icons/dist/index.js","../../components/navigation/dist/TopBar.js","../../components/navigation/dist/SideDrawer.js","../../components/navigation/dist/TopBarWrapper.js","../../components/navigation/dist/OfflineBar.js","../../components/navigation/dist/BottomBar.js","../../components/navigation/dist/index.js","../../components/tags/dist/TagChip.js","../../components/tags/dist/TagControl.style.js","../../components/tags/dist/TagControl.js","../../components/tags/dist/TagEdit.js","../../components/tags/dist/TagView.js","../../components/tags/dist/XYTagChip.style.js","../../components/tags/dist/XYTagChip.js","../../components/tags/dist/XYTagSelect.js","../../components/tags/dist/XYTagSelect.style.js","../../components/tags/dist/XYTagChooser.style.js","../../components/tags/dist/XYTagChooser.js","../../components/tags/dist/useXYTags.js","../../components/tags/dist/index.js","../../client-mock/dist/LoadFakeData.js","../../client-mock/dist/withContext.js","../../components/client-auth/dist/useAuthCommon.js","../../components/client-auth/dist/AuthContainer.js","../../components/client-auth/dist/auth.style.js","../../components/client-auth/dist/SignIn.js","../../components/client-auth/dist/PasswordHelper.js","../../components/client-auth/dist/SignUp.js","../../components/client-auth/dist/ConfirmSignIn.js","../../components/client-auth/dist/CheckemailMsg.js","../../components/client-auth/dist/ConfirmSignUp.js","../../components/client-auth/dist/ForgotPassword.js","../../components/client-auth/dist/Loading.js","../../components/client-auth/dist/RequireNewPassword.js","../../components/client-auth/dist/VerifyContact.js","../../client-mock/dist/index.js","../../components/client-auth/dist/auth.fixture.js","../../components/client-auth/dist/useAuthentication.js","../../components/client-auth/dist/index.js","../../components/feed/dist/MyFeed.js","../../components/feed/dist/FeedEnder.js","../../components/camera/dist/CameraTool.js","../../components/camera/dist/CameraTool.style.js","../../components/camera/dist/QRUtil.js","../../components/camera/dist/QRReader.js","../../components/camera/dist/QRDisplay.js","../../components/camera/dist/index.js","../../datastore/dist/index.js","../../components/pwainstall/dist/InstallPrompt.js","../../components/pwainstall/dist/useShowAddToHome.js","connectors/withUploadConnect.js","connectors/withSeriesConnect.js","connectors/withHomeMap.js","connectors/withSearchConnect.js","connectors/withProfileConnect.js","connectors/withFeedConnect.js","connectors/withOfflineData.js","../../components/feed/dist/index.js","../../components/profile/dist/index.js","connectors/Error.connect.js","../../components/home/dist/Home.js","../../components/home/dist/index.js","connectors/App.connect.js","serviceWorker.js","index.js","../../datastore/dist/redux/reducers/map.js","../../datastore/dist/redux/reducers/home.js","../../datastore/dist/redux/reducers/uploader.js","../../datastore/dist/redux/reducers/flags.js","../../datastore/dist/redux/reducers/offline.js","../../datastore/dist/redux/reducers/index.js","../../datastore/dist/redux/queueMiddleware.js","../../datastore/dist/redux/storeConfig.js","../../datastore/dist/redux/withReduxProvider.js","../../components/search/dist/SearchContextItem.js","../../components/search/dist/SearchContextResults.js","../../components/search/dist/SearchEnder.js","../../components/search/dist/SearchResults.js","../../components/search/dist/SearchPlaceholder.js","../../components/search/dist/Search.js","../../components/slideshow/dist/Slideshow.js","../../components/slideshow/dist/Slideshow.style.js","../../components/profile/dist/MeCard.js","../../components/profile/dist/MyProfile.js","../../components/swipeshow/dist/SwipeShow.js","../../components/swipeshow/dist/SwipeShow.style.js","../../../packages/common/dist/index.js","../../icons/dist/AppLogo.js","../../components/search/dist/SearchInput.js","../../components/feed/dist/FeedItem.js","../../components/search/dist/index.js","../../../packages/mock/dist/random.js","../../datastore/dist/s3Upload.js","../../datastore/dist/graphql/mutations/createSeries.js","../../client-mock/dist/utils.js","../../datastore/dist/graphql/useGraphQL.js","../../../packages/common/dist/accesscontrol/permissions.js","../../../packages/common/dist/dates.js","../../../packages/common/dist/util.js","../../themes/dist/jss/mapbox.css.js","../../themes/dist/jss/typeface-roboto.css.js","../../components/maps/dist/BaseMap.style.js","../../../packages/mock/dist/index.js","../../datastore/dist/graphql/offline.js","../../components/ui/dist/FindOnMapButton.js","../../components/ui/dist/AboutApp.js","../../components/ui/dist/AppSettings.js","../../components/ui/dist/AddFab.js","../../components/ui/dist/ContextMenu.js","../../components/ui/dist/LibraryFilePicker.js","../../components/ui/dist/ShortLongText.js","../../components/ui/dist/useNewImageMenu.js","../../components/ui/dist/UploadControl.js","../../components/ui/dist/DateControl.js","../../components/ui/dist/DateView.js","../../components/ui/dist/ErrorScreen.js","../../components/ui/dist/index.js","../../datastore/dist/graphql/fragments.js","../../datastore/dist/graphql/mutations/updateQueries.js","../../datastore/dist/graphql/mutations.js","../../datastore/dist/redux/actions.js","../../../packages/common/dist/Tags.js","../../../packages/common/dist/exif.js","../../../packages/common/dist/Series.js","../../../packages/common/dist/Photo.js","../../../packages/common/dist/accesscontrol/AccessHelper.js","../../components/photos/dist/BrokenImg.js","../../components/photos/dist/RawImage.js","../../components/photos/dist/Photo.js","../../components/photos/dist/Photo.style.js","../../components/photos/dist/PhotoGrid.js","../../components/photos/dist/PhotoGrid.style.js","../../components/photos/dist/PhotoFadeSlider.js","../../components/photos/dist/index.js","../../datastore/dist/graphql/mutations/createPhoto.js","../../datastore/dist/graphql/mutations/deletePhoto.js","../../datastore/dist/graphql/mutations/deleteSeries.js","../../datastore/dist/graphql/mutations/unwatch.js","../../datastore/dist/graphql/mutations/updatePhoto.js","../../datastore/dist/graphql/mutations/updateSeries.js","../../datastore/dist/graphql/mutations/watch.js","../../themes/dist/themes.js","../../themes/dist/jss/baseline.css.js","../../client-mock/dist/CosmosBlackBackground.js","../../client-mock/dist/MaterialUIWrap.js","../../../packages/mock/dist/fakedata.js","../../themes/dist/index.js","../../components/modals/dist/DeleteDialog.js","../../components/modals/dist/CancelConfirm.js","../../components/modals/dist/FeatureDisabled.js","../../components/modals/dist/BigText.js","../../components/modals/dist/BigTextEdit.js","../../components/modals/dist/index.js","../../datastore/dist/graphql/queries.js","../../components/maps/dist/mapStyles/index.js","../../components/maps/dist/markers/MyLocation.js","../../components/maps/dist/controls/StyleButtons.js","../../components/maps/dist/controls/MyLocationButton.js","../../components/maps/dist/BaseMap.js","../../components/maps/dist/lib/useClusteredData.js","../../components/maps/dist/HomeMap.style.js","../../components/maps/dist/ClusterSelected.js","../../components/maps/dist/markers/Single.js","../../components/maps/dist/markers/Cluster.js","../../components/maps/dist/HomeMap.js","../../components/maps/dist/BaseStaticMap.js","../../components/maps/dist/markers/Dot.js","../../components/maps/dist/MapDot.js","../../components/maps/dist/OfflineMap.style.js","../../components/maps/dist/OfflineMap.js","../../components/maps/dist/MapDirPicker.js","../../components/maps/dist/index.js","../../components/slideshow/dist/index.js","../../components/swipeshow/dist/index.js","../../components/photoseries/dist/UserListItem.js","../../components/photoseries/dist/contexts.js","../../components/photoseries/dist/views/SeriesInfo.js","../../components/photoseries/dist/views/SeriesInfo.style.js","../../components/photoseries/dist/SeriesView.style.js","../../components/photoseries/dist/views/SeriesView.js","../../components/photoseries/dist/views/SeriesEditInner.js","../../components/photoseries/dist/views/SeriesEditInner.style.js","../../components/photoseries/dist/views/SeriesEdit.js","../../components/photoseries/dist/views/SeriesEdit.style.js","../../components/photoseries/dist/views/PhotoInfoInner.js","../../components/photoseries/dist/views/PhotoInfo.js","../../components/photoseries/dist/views/PhotoViewTool.js","../../components/photoseries/dist/views/PhotoViewTool.style.js","../../components/photoseries/dist/views/NewPhotoInfo.js","../../components/photoseries/dist/views/NewPhotoInfo.style.js","../../components/photoseries/dist/views/PhotoReviewTool.js","../../components/photoseries/dist/views/PhotoReviewTool.style.js","../../components/photoseries/dist/views/NewPhoto.js","../../components/photoseries/dist/SeriesNotFound.js","../../components/photoseries/dist/SeriesLoading.js","../../components/photoseries/dist/PhotoSeries.js","../../components/photoseries/dist/SeriesList.js","../../components/photoseries/dist/SeriesList.style.js","../../components/photoseries/dist/SeriesListItem.js","../../components/photoseries/dist/ViewListDialog.js","../../components/photoseries/dist/index.js"],"names":["REACT_APP_BASEURL","mandatoryEnv","REACT_APP_MAPBOX_TOKEN","REACT_APP_VERSION","REACT_APP_CONTACT_EMAIL","REACT_APP_GRAPHQL","REACT_APP_AWS_REGION","REACT_APP_COGNITO_USER_POOL_ID","REACT_APP_COGNITO_CLIENT_ID","Object","keys","forEach","keyname","console","error","concat","mapConfig","mapBoxToken","endpoints","graphql","share","tagColors","version","contact","ACCESS","OPEN","label","description","color","green","PRIVATE","red","PUBLIC","blue","home","Offline","seriesImgsToCache","highestOfflineTileZoom","maxMapTileArea","AppStateTypes","FEED","MAP","SEARCH","PROFILE","SERIES","SETTINGS","QRCAPTURE","NEW_SERIES_CAMERA","NEW_SERIES_LIBRARY","OFFLINE_DOWNLOAD","SEARCH_TABS","KEYWORD","TAG","LOCATION","USER","PROJECT","MapModeTypes","FREE","federated","analytics","token","aws","Auth","region","userPoolId","userPoolWebClientId","mandatorySignIn","cookieStorage","domain","expires","secure","AWSPinpoint","appId","series","photoId","arguments","length","undefined","obj","type","s","id","p","encodedId","encodeURI","JSON","stringify","url","window","location","origin","ogShare","decodeShareUrl","search","foundIdx","indexOf","newData","slice","parse","decodeURI","err","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","source","key","getOwnPropertyDescriptors","defineProperties","defineProperty","imgLoadPromise","blob","Promise","resolve","img","Image","imageUrl","URL","webkitURL","createObjectURL","onload","log","imageHeight","height","imageWidth","width","src","_ref","mark","_callee","name","size","resultArr","ext","wrap","_context","prev","next","all","sent","getExtFromFile","abrupt","file","exif","stop","_x","this","fileBlob","Webcam","webcamElement","canvasElement","protocol","hostname","warn","navigator","mediaDevices","getUserMedia","value","_destroy","srcObject","getVideoTracks","e","_setup","_callee2","_this","_context2","reject","audio","video","facingMode","ideal","Math","max","min","then","mediaStream","onloadedmetadata","play","onplaying","catch","Error","_x2","videoWidth","videoHeight","context","getContext","drawImage","_this$_drawImage","_drawImage","data","getImageData","quality","mediaStreamTrack","imageCapture","ImageCapture","getPhotoCapabilities","takePhoto","_unused","_this2","_ref2","toBlob","onCapture","_useState","_useState2","cameraError","setCameraError","_useState3","_useState4","cameraOnline","setCameraOnline","camRef","current","document","getElementById","createElement","setup","innerWidth","innerHeight","stack","destroy","captureImage","imageParser","takeDataURLPhoto","captureRawData","capturedData","takeImageData","getSize","el","minSize","defaultSize","offsetWidth","offsetHeight","ref","resizeActiveRef","resizeActive","setResizeActive","setComponentSize","handleResize","newSize","handleResizeDebounced","debounce","ResizeObserver","resizeObserver","observe","disconnect","addEventListener","removeEventListener","onChange","preferCamera","initialClick","anyFile","inputRef","clickRef","element","style","display","accept","capture","forceClick","click","handleChange","evt","files","fileClickEl","state","setState","onLine","newDate","Date","now","isOnline","offlineSince","getState","_window","orientation","_window$screen","screen","abs","windowSize","screenSize","mediaQueries","preventDefault","stopPropagation","activeElement","tagName","toLowerCase","newState","_React$Component","ErrorBoundary","props","call","hasError","info","_this$state","FallbackUI","fallback","children","Component","propTypes","any","isIos","Boolean","test","userAgent","vendor","opera","getCameraAccess","getTracks","t0","baseObj","ios","phone","a","substr","isPhone","cameraAccess","setCameraAccess","_goFunc","t1","goFunc","AppContext","createContext","online","responsive","device","unchanging","finalValue","Provider","shape","user","signedIn","bool","isRequired","getPhotoUrls","func","metaConfig","tagConfig","array","onAvatarClick","globalActions","isrequired","accuracy","altitude","altitudeAccuracy","heading","latitude","longitude","speed","timestamp","mountedRef","watchIdRef","onEvent","event","coords","geolocation","getCurrentPosition","watchPosition","clearWatch","useDeviceOrientation","absolute","alpha","beta","gamma","deviceOrientation","setDeviceOrientation","handleDeviceOrientation","config","Fragment","d","fillRule","x","y","useStyles","makeStyles","theme","appBar","background","toolbar","alignItems","padding","spacing","backgroundColor","palette","primary","main","contrastText","borderBottom","secondary","searchIcon","opacity","marginRight","transparent","text","noCamIcon","logo","transparentLogo","transparentLogoIcon","flexGrow","qrButton","qrButtonTransparent","className","isTransparent","hideLogo","actions","classes","AppBar","elevation","position","Toolbar","disableGutters","IconButton","onClick","setDrawerOpen","onQRClickWrapped","string","isRequred","drawerInner","flexDirection","disableListItem","avatar","border","margin","gravatarImg","spacer","fullList","open","onClose","onOpen","_useContext","currentUser","SwipeableDrawer","role","onKeyDown","username","List","ListItem","root","Avatar","alt","gravatar","loginButton","ListItemText","Divider","button","onQRButtonClick","onDisabledClick","ListItemIcon","addToHomeScreen","onOfflineMenuClick","onSettingsClick","onAboutClick","signOut","forceSignIn","_extends","assign","prototype","hasOwnProperty","DIALOGS","topBarProps","dialogOpen","setDialogOpen","drawerOpen","handleQRClick","title","message","Typography","variant","component","textAlign","sinceStr","setSinceStr","timerRef","calcSinceStr","newText","formatDateAgo","clearTimer","clearInterval","setInterval","loggedText","offlineText","STATES","borderTop","container","jet","papayawhip","paper","paddingBottom","list","marginBottom","subheader","grow","addFab","bottom","left","transformOrigin","transform","zIndex","Container","maxWidth","Button","edge","setHomeState","onCameraClick","onLibraryClick","tagChips","fontSize","marginTop","deleteIcon","chipAvatar","edit","tag","onDelete","useTheme","Chip","getContrastText","tagContainer","formControl","singleValue","valueContainer","flexWrap","flex","overflow","tags","hint","onSelectChange","inputValue","action","removedValue","option","map","iv","typeId","xyCoords","tagValues","selectOptions","val","remainingTags","values","t","fieldTitle","allowAdditions","options","isFocused","components","deleteRemoves","isClearable","placeholder","isMulti","isSearchable","dlgContent","grey","dlgTitle","closeButton","alignSelf","onOk","onCancel","setValue","Dialog","scroll","fullScreen","DialogTitle","disableTypography","DialogContent","field","DialogActions","idx","xyTagChip","cursor","top","editing","reversedChip","right","chipAvatarIcon","reversedDelete","chipBucket","reversedChipBucket","onTagDragOver","onTagDragStop","onTagDelete","onNewTag","isReversed","relCoords","newWidth","stopBadness","disabled","bounds","newHeight","onDrag","onStop","noOptionsMessage","input","tc","Control","Menu","NoOptionsMessage","Option","Placeholder","ValueContainer","blurInputOnSelect","TextField","fullWidth","InputProps","inputComponent","inputProps","selectProps","innerRef","innerProps","textFieldProps","_ref3","Paper","square","_ref4","_ref5","isSelected","MenuItem","buttonRef","selected","fontWeight","_ref6","header","listItem","dlgBody","paddingLeft","paddingRight","_onClose","xyTags","allowXY","paperScrollPaper","tagType","photo","isDragging","setIsDragging","newTagDialog","setNewTagDialog","tagClass","addTag","__isNew__","createNewXYTagObj","createExistingXYTagObj","updateTagLocation","oldTag","parseInt","multiplier","onAddTagTrigger","pageX","pageY","TagChooser","getRelXYTags","LoadFakeData","delay","mockData","setData","dataRef","dirName","split","dirPath","finalPath","host","result","setTimeout","loaded","loading","mockProps","finalData","finalRender","cloneElement","node","number","ContextObj","containerRef","handleKeyPress","found","getElementsByClassName","bgSwoosh","animation","logoContainer","minHeight","inner","minWidth","ThemeProvider","login","CssBaseline","forgotPassword","switch","switchButton","borderRadius","phoneNumInner","phoneNumDropdown","warnText","fontStyle","noSignin","handleSignup","handleForgotPassword","handleInputChange","handleBeAnonymous","handleSignIn","autoFocus","textField","autoComplete","chipContainer","chip","ok","bad","pword","hasUpper","match","hasLower","hasNum","hasSpecial","enoughChars","signUpFields","signUpFieldLabels","signUpFieldPlaceholders","handleBack","countryDialCodes","defaultDialCode","selectVal","setSelectVal","setPword","pwordType","handleDialCodeChange","findIndex","f","FormControl","InputLabel","htmlFor","shrink","required","Select","dialCode","handleConfirm","checkEmailMsgIco","checkEmailMsgTxt","checkEmailMsg","onResend","Snackbar","anchorOrigin","vertical","horizontal","SnackbarContent","handleResend","handleSubmit","handleSendCode","setSent","change","requiredAttributes","placeholders","attribute","RADIO","onBack","hasEmail","hasPhone","handleSkip","handleVerify","radioVal","setRadioVal","Tabs","indicatorColor","textColor","centered","Tab","icon","defaultProps","MaterialUIWrap","default","Wrapper","noTheme","authState","google_client_id","alert","configure","defaultAuthState","authData","signUpConfig","hiddenDefaults","defaultCountryCode","displayOrder","_useState2$","setAuth","getCurrentToken","currSession","currentSession","accessToken","authScreen","onStateChange","hideDefault","isGod","signInUserSession","idToken","payload","_SignInOrig","SignIn","newProps","changeState","signIn","_SignUpOrig","SignUp","hide","includes","checkCustomSignUpFields","sortFields","getDefaultDialCode","get","signUp","_ConfirmSignInOrig","ConfirmSignIn","_this3","confirm","_ConfirmSignUpOrig","ConfirmSignUp","_this4","resend","_RequireNewPasswordOr","RequireNewPassword","challengeParam","Array","isArray","part","charAt","toUpperCase","join","_LoadingOrig","Loading","_ForgotPasswordOrig","ForgotPassword","_this5","send","submit","listContainer","vList","feedContainer","MyFeed","events","listRef","rowRenderer","content","index","isScrolling","isVisible","parent","row","wEnd","thickness","almostAtEnd","ROWHEIGHT","scrollTop","fetchMore","rowCount","rowHeight","arrayOf","onImageClick","onProfileClick","onMapClick","fetchNewest","FeedEnder","cameraErrorText","disabledFab","cameraFab","slider","cameraIcon","cancelFab","cancelIcon","swipeDrawer","libraryFab","myLocationFab","myLocationIcon","captured","reference","onShutter","defaultRefPhotoId","photos","setSlider","refImgRef","setSize","newRefPhoto","find","_useState5","_useState6","refPhoto","setRefPhoto","_useState7","_useState8","_useCamera","defaultValue","imgRef","sizePriority","autoPlay","playsInline","muted","Fab","buttonFab","libraryIcon","anchor","paperAnchorLeft","tabIndex","swipeDrawerContainer","multiSelect","columns","onTileClick","qrIcon","backupText","manualImg","tipPaper","docContainer","cameraContainer","paddingTop","cameraContainerError","snackErr","snackSuccess","snackMsg","verticalAlign","onMenuBack","capturedBlob","setCapturedBlob","setErr","code","setCode","captureFunc","scan","scannedCode","decodedUrl","menuButton","toolbarTitle","autoHideDuration","qrPaper","qrCode","maxHeight","qrCodeEl","setQRCodeEl","_createShareUrl","canShare","access","toString","svgStr","note","dangerouslySetInnerHTML","__html","Link","href","s3Upload","APOLLOSTATES","useGraphQL","queries","mutations","createPhoto","createSeries","deletePhoto","deleteSeries","unwatch","updatePhoto","updateSeries","watch","updateQueries","offline","redux","withReduxProvider","messageWrapper","boxShadow","textWrapper","buttons","onInstall","paragraph","showInstall","dismissInstall","_useDevice","deferredPrompt","setPrompt","handleBeforePrompt","installPrompt","prompt","userChoice","choiceResult","outcome","standalone","compose","connect","uploader","activeUpload","uploading","uploadOnline","dispatch","updateUploadProgress","newProgress","datastore","setUploaderOnline","bOnline","Wrapped","useContext","useEffect","newS3Creds","useMemo","NewS3Credentials","onDone","progress","getNewS3Credentials","skip","ownProps","qItem","retry","preAuth","s3Credentials","variables","seriesId","withGetNewS3Credentials","withGetSelectedQuery","getWholeSeries","activeSeries","isNewSeries","initialPhoto","onAfterSeriesDelete","queueUpload","uploadObj","doneCreatingSeries","doneCreatingPhoto","onFindOnMap","withMutation","WrappedSeries","updateSeriesMutation","updatePhotoMutation","deleteSeriesMutation","deletePhotoMutation","createSeriesMutation","createPhotoMutation","watchSeriesMutation","unWatchSeriesMutation","inputMethod","NEW_PHOTO_MODES","CAMERA","FILEPICKER","modeName","SERIES_MODES","SERIES_VIEW","NEWSERIES","sort","b","takenOn","ReactGA","category","owned","createdUser","watching","currentUserId","currentUserRole","onNewPhoto","newPhoto","newPhotoData","imgStore","setItem","uploadToken","onChangePhoto","photoDelta","onDeletePhoto","seriesDelta","onNewSeries","newSeries","onWatch","onUnWatch","POLL_INTERVAL","withAllSeries","allSeries","seriesSummaries","nextToken","updateQuery","fetchMoreResult","setSeriesProps","readyForPolling","limit","withPollQuery","pollQuery","lastCheck","seriesProps","updateIncrement","changedSeries","oldList","newSeriesSummaries","seriesStatus","polledSeries","ds","oldSeries","oldId","AllSeriesConnect","PollQueryConnect","mapDispatchToProps","onSeriesNavigate","onSeriesMapSelect","setActiveSeries","onSearchClick","tab","popMapHistory","pushMapHistory","clearMapHistory","initialActiveSeries","initViewport","pop","useState","queryVersion","setVersion","useRef","queryVersionRef","setLastCheck","allSeriesQUERY","pollSeriesQUERY","String","seriesList","TABS","withTagSearch","tagSearch","contextResults","count","ceil","searchText","withUserSearch","userSearch","createdOn","dates","searchStr","withGeoCode","geocode","geocoder","relevance","placeName","bbox","center","withTagSeries","seriesWithTag","tagSeries","searchResults","contextChoice","withUserSeries","userSeries","createdBy","withKeywordSearch","keywordSearch","defaultTab","defaultText","currentTab","setCurrentTab","setSearchText","setContextChoice","pageview","withContextQuery","withSearchQuery","ComposedSearch","jumpToMap","onResultClick","jumpToSeriesView","newContextChoice","newTab","withuserSeriesQuery","seriesQ","withMyWatchedSeriesQuery","seriesFromList","watchedSeriesQ","mySeries","watchingSeries","arraySeries","jumpToSeries","jumpToSeriesMap","withFeedQuery","getMyFeed","loadingNewest","loadingMore","gqlActions","myFeed","start","feed","end","lastCheckRef","v","jumpToUser","withGeoSearch","geoSeriesIdOnly","seriesInGeoBounds","setSeriesIds","ids","WholeSeriesConnect","urls","updatedUser","ph","paths","base","Set","GeoQuery","lastMapViewport","completedDownload","viewport","setOfflineCompleted","bVal","setOfflineViewport","OFFLINE_STATES","LOCKED","NAVIGATING","toolState","setToolState","limiterRef","setBounds","seriesIds","activeSeriesId","setActiveSeriesId","seriesPhotos","setSeriesPhotos","tileTick","setTileTick","seriesTick","setSeriesTick","seriesPhotoTick","setSeriesPhotoTick","tileTickRef","onTileTick","onSeriesPhotoTick","onSeriesTick","useCallback","num","theTick","theIds","thePhotos","addCount","schedule","makeRequest","finalState","OFFLINE","geoSeriesQuery","wholeSeriesQuery","CANCELED","dropWaitingJobs","Bottleneck","maxConcurrent","tiles","zoomRange","zoom","xtileLeft","long2tile","xtileRight","ytileTop","lat2tile","ytileBottom","getTileURL","process","getTiles","tile","newTotal","onStartDownload","DOWNLOADING","onCancelComplete","onUnlock","method","xhr","XMLHttpRequest","status","response","statusText","onerror","replace","withReportBugMutation","reportBug","mutate","reduxState","ERROR_SEND_STATES","ERROR","reportError","SENDING","reportJSON","extra","appVersion","languages","language","platform","errSubset","errObj","env","update","store","SENT","UNSENT","ErrorScreen","sendState","outerRoot","offlineBar","activeWrapper","flexShrink","uploaderContainer","Upload","upload","showBottomBar","activeProps","ActiveComponent","profile","onQRCapture","oneOf","homeConfig","initialize","withUploadConnect","UploadControl","withSeriesConnect","PhotoSeries","withHomeMap","HomeMap","withSearchConnect","Search","withProfileConnect","MyProfile","withFeedConnect","withOfflineData","OfflineMap","AppConnect","ErrorConnect","reduxProps","flags","newDomain","newParams","bufferPts","buffer","point","units","bboxFunc","mode","resetAllState","setFlag","setUseOffline","homeStateBack","reduxActions","useAuthentication","useLoggedOut","apolloClient","client","apolloDone","done","apolloState","currState","useShowAddToHome","install","retryRef","handleBackClick","history","pushState","decodedObj","queryVars","clearTimeout","forceSignInWrapped","resetApp","clear","resetStore","stateStore","staticContext","allowNonXY","getTags","appContext","cognitoUser","query","getUser","refetch","attributes","sub","Home","getItem","urlCreator","sp","isLocalhost","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","require","ReactDOM","render","fetch","contentType","headers","ready","unregister","reload","checkValidServiceWorker","mapInit","homeInit","initState","defaultFlags","iOSWarning","offlineInit","appReducer","MAP_HISTORY_CLEAR","newClearerHistory","MAP_HISTORY_POP","MAP_HISTORY_PUSH","HOME_STATE_BACK","newStateHistory","newCurrentState","HOME_CHANGE_ACTIVE_SERIES","HOME_CHANGE_STATE","params","skipSave","replaceState","newHistory","UPLOADER_QUEUE","UPLOADER_SET_ONLINE","UPLOADER_SET_UPLOADING","UPLOADER_COMPLETE","newStore","newActive","UPLOADER_UPDATE_PROGRESS","SETFLAG","flagName","flagVal","warning","OFFLINE_VIEWPORT_SAVE","OFFLINE_SET_STATUS","_getUploadState","getUploadState","newAction","kickoff","_unused2","persistConfig","storage","persistedReducer","preloadedState","queueMiddleware","persistor","BaseComponent","_storeConfig","storeConfig","chosenItem","dark","closeIcon","avatarImg","objectFit","TheIcon","ListItemAvatar","overflowX","overflowY","listSection","placeholderText","ul","cr","ctxItem","enderRef","handleScroll","offsetTop","_listRef$current","showCreatedOn","showLastPhoto","onScroll","light","PlaceholderIcon","tabs","ListWrapper","SearchInput","flexContainer","TAGS","swipeAble","slideContainer","titleBar","mobileStepper","slide","dotActive","iconButton","active","last","labelBadge","tagChip","manualBack","manualForward","transition","_useStepper","activeStep","lastStep","handleForward","paused","pause","showXYTags","setShowXYTags","refImgWrap","_useComponentSize$siz","GridListTile","transitions","create","duration","showTags","Badge","badgeContent","GridListTileBar","titlePosition","formatDate","subtitle","actionIcon","direction","MobileStepper","steps","nextButton","backButton","isFullScreen","slides","interval","setActiveStep","setPaused","setLastStep","createTimer","oldStep","destroyTimer","imgContainer","filterContainer","filterChip","seriesListItemWrap","noneFound","SORT","sortVal","setSort","sortAsc","setSortAsc","sortSetter","newSort","tabFeed","latest","firstname","asc","useFilterStyles","arrow","photoWrapper","dateCaption","tagButton","slideshowButton","dots","onImageSelect","activePhotoId","setActivePhotoId","setShowTags","singular","activePhotoIndex","activePhoto","axis","onChangeIndex","enableMouseEvents","_typeof","Symbol","iterator","constructor","exports","_Tags","_exif","getExif","_Series","_Photo","_AccessHelper","permissions","util","accessControl","_accesscontrol","_interopRequireDefault","_permissions","datesLib","_interopRequireWildcard","utilLib","_getRequireWildcardCache","WeakMap","cache","__esModule","has","newObj","hasPropertyDescriptor","desc","set","RawSVG","useSearchBarStyles","common","white","marginLeft","breakpoints","up","inputRoot","inputInput","pointerEvents","justifyContent","debounceSearchText","blur","onBlur","findOnMapButtonContainer","titleContainer","textShadow","seriesName","textOverflow","whiteSpace","EVENT_VERBS","FeedItem","cover","updatedOn","randomObjectElement","randomArrayEl","filledArray","randomMap","randomChance","randomFloat","randomInt","_random","_toConsumableArray","arr","arr2","_arrayWithoutHoles","iter","from","_iterableToArray","TypeError","_nonIterableSpread","chance","inTimes","low","high","fillval","_x3","_x4","_s3Upload","completeActiveUpload","failRetry","formData","fields","fieldkey","append","onUploadProgress","progressEvent","total","floor","post","removeItem","t2","t3","_x5","interceptors","request","use","_createSeriesMutation","_ownProps$currentUser","gravatarProfile","meUserSummary","optimisticResponse","mutationStackId","__typename","pick","createOptimisticResponse","refetchQueries","updateThunk","cb","photoResponse","meta","updatedBy","seriesCreatedBy","large","orig","thumb","medium","photoResponseSummary","featured","photoCount","watchers","actionMaker","actionArr","useConsole","reduce","acc","acStr","_len","args","_key","_len2","_key2","fakeGlobalActions","LOCAL_STORAGE_TOKEN","INITIALIZING","AUTHENTICATING","LOADING","APPLY_MUTATIONS","DONE","setClient","setDone","setCurrState","_createApolloClient","createApolloClient","newClient","jwtToken","_callee3","authLink","httpLink","_context3","_","newHeaders","authorization","uri","attempts","Infinity","retryIf","_operation","link","tokenName","addTypename","connectToDevTools","admin","nonuser","series_public","series_open","timestampToHTML5Input","utctimestamp","_moment","format","HTML5InputToTimestamp","isoStr","convertJSDatetoTimestamp","parseDate","fixParseDate","_util","isNumeric","inTimestamp","isGMT","retVal","jsDate","getTime","tzOffset","getTimezoneOffset","fromNow","utc","formatNum","precision","precstr","_numeral","clearSelection","selection","empty","getSelection","removeAllRanges","isObjectWithKeys","makeDomArray","domnode","capitalizeFirstLetter","numericArrayCompare","arr1","some","decodeUnbufferedBase64","hash","missingPadding","newhash","Buffer","encodeUnbufferedBase64","str","urlizeb64","isObject","arrToObj","keyDat","$","attr","Number","getRandomArbitraryInt","random","wait","immediate","timeout","innerArgs","callNow","chunkArray","base64toJSON","json2base64","_zlib","isNaN","parseFloat","isFinite","o","gzip","b64String","buff","gunzip","chunkSize","font","W","fallbacks","M","userSelect","touchAction","float","outline","boxSizing","speak","borderColor","backgroundImage","O","backgroundRepeat","fill","enableBackground","visibility","textDecoration","borderWidth","borderStyle","willChange","borderBottomColor","borderLeft","borderRight","borderTopColor","borderRightColor","borderLeftColor","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","fontFamily","fontDisplay","mapContainer","_fakedata","fakePastDate","randomLocation","storeName","createInstance","OFFLINEMUTATIONS","getPendingPromise","setPendingPromise","pushMutationPromise","mutation","popMutationPromise","pm","proxyUpdateForId","proxy","resp","updateHandler","__optimistic","restoreRequests","pendingMutation","placeAvatar","placeIcon","_onClick","dialogContent","iconContainer","stop1","stopColor","rose","stop2","redorange","buttonIcon","scrollText","PaperProps","focusable","viewBox","x2","y2","offset","nuclear","deleteOpen","setDeleteOpen","mapWrapper","onConfirm","confirmed","pulseCol","fab","animationIterationCount","animationTimingFunction","directionUp","actionsClosed","modalContainer","subFabContainer","subFab","subFabIcon","setOpen","down","setDown","downRef","elRef","realChildren","onDown","currentTarget","block","rootContainer","onMouseDown","onTouchStart","disableFocusRipple","disableTouchRipple","disableRipple","Modal","Zoom","in","unmountOnExit","anchorEl","menuItems","divider","Icon","primaryTypographyProps","onLibraryAdd","cameraPicker","_useFileInput","cameraWords","PlaceIcon","FormLabel","formLabel","cameraClick","libraryClick","menuEl","setMenuEl","setSeries","onDownThunk","onUpThunk","onBlock","menu","CameraPopup","onCamera","onLibrary","onMouseUp","onTouchEnd","bar","msgText","messageInner","finalProgress","LinearProgress","useWrapperStyles","displayName","rootEdit","textBody","actionButtons","_onChange","dlgOpen","setNote","stackEl","buttonText","DialogContentText","multiline","rows","rowsMax","_templateObject6","_templateObject5","_templateObject4","_templateObject3","_templateObject2","_templateObject","photoSummaryFragment","photoSummaryKeys","userSummaryFragment","seriesSummaryFragment","seriesSummaryKeys","seriesFragment","seriesKeys","photoFragment","userFragment","getWholeSeriesUpdate","qVal","readQuery","cloneDeep","writeQuery","getWholeSeriesPhotoUpdate","remove","updateSeriesSummaries","origArr","newArr","seriesIndex","newAllSeriesEntry","updateFeedList","fItem","fitem","_id","newSeriesSummary","newPhotoSummary","relation","allSeriesUpdate","allSeriesPhotoUpdate","newS","photoIndex","photoSummary","userSeriesUpdate","feedUpdate","watchUpdate","seriesFrag","readFragment","fragment","writeFragment","sid","_templateObject9","_templateObject8","_templateObject7","updateSeriesKeys","updatePhotoKeys","newPhotoKeys","newSeriesKeys","watchSeries","unWatchSeries","Actions","RESET_ALL_STATE","viewportSave","_defineProperty","configurable","writable","_default","Tags","instance","Constructor","_classCallCheck","tagLabel","getTagType","tt","xyTagLabels","getXYTagTypes","NonXYTagLabels","getNonXYTagTypes","findTagByLabel","getXYTags","group","getTagTypeIndex","_regeneratorRuntime","_exifParser","_common","_dates","exifDateTime","exifGPS","blobParser","parser","async","Blob","awrap","Response","arrayBuffer","DateTimeOriginal","GPSLatitude","GPSLongitude","_v","Series","getSeriesMeta","Photo","getPhotoMeta","_defineProperties","descriptor","AccessHelper","userSub","permissionObj","attrs","ownAny","ownOrAny","perm","ac","can","otherPerm","granted","protoProps","staticProps","circularProgress","CircularProgress","imgBroken","dataUrl","imgUrls","setImgUrls","setRetries","altImgRef","altIndex","setAltIndex","broken","setBroken","finalURL","onError","brokenImg","setNewSize","_useComponentSize","_useXYTags","_imgRef$current","naturalHeight","naturalWidth","handleNewSize","rawImage","notDeleteable","unSelectedTile","selectedTile","snackbarContent","snackbar","allowDelete","selectMode","setSelectMode","selectedItems","setSelectedItems","setUrls","deleteConfirm","setDeleteConfirm","handleCancelSelection","toggleListItem","remaining","arrId","t4","t5","t6","t7","t8","t9","GridList","cols","cellHeight","handlePhotoTap","handleAddToSelection","ContentProps","confirmation","sliderLabel","rail","track","Slider","_createPhotoMutation","newPhotoInput","_deletePhotoMutation","_deleteSeriesMutation","_unWatchSeriesMutation","_updatePhotoMutation","newUpdatePhoto","newT","_updateSeriesMutation","_watchSeriesMutation","typography","useNextVariants","overrides","MuiDialog","paperFullWidth","colors","cblue","homeTheme","accessObj","overscrollBehavior","CosmosBlackBackground","outerTheme","iOS","innerTheme","deviceOverride","contextValue","fakeAppContext","_lodash","_turf","_faker","_random2","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","EVENT_RELATIONS","date","past","latLngsAarr","transformTranslate","geometry","coordinates","FakeData","userPool","attribs","userSummary","basicAttribs","basicObj","fakeWidth","fakeHeight","photoPlaceholderArr","numPhotos","whichHighlight","hasPaths","objType","project","reach","nite","lorem","paragraphs","seriesSummary","basic","templateObj","base64","rawData","getImagePaths","strict","pool","shuffle","newItems","idt","sampleUser","freeBothTags","structureTags","treeTags","emotionTags","seasonTags","firstName","lastName","avatarSrc","_freeBothTagsValues","globalStyle","disableBackdropClick","disableEscapeKeyDown","IconComp","body","textArea","_templateObject17","_templateObject16","_templateObject15","_templateObject14","_templateObject13","_templateObject12","_templateObject11","_templateObject10","initQuery","seriesSummaryFromList","geoSeries","toolTip","SatelliteOutlined","ActiveIcon","Satellite","TerrainOutlined","Terrain","TopoMap","svgDot","svgAccuracyDot","projection","accHeight","pixelsPerMeter","accWidth","cx","cy","r","stroke","fillOpacity","strokeWidth","speedDialFab","speedDialAction","speedDialIcon","speedDialLabel","controlPadding","currStyle","mapStyles","setCurrStyle","noEventSetOpen","SpeedDial","ariaLabel","speedDial","SpeedDialAction","tooltipOpen","tooltipPlacement","tooltipTitle","myPosition","showMe","lockToBounds","lockPan","initStyle","incomingOnViewportChange","onViewportChange","incomingOnTransitionStart","onTransitionStart","incomingOnTransitionEnd","onTransitionEnd","onMapDataEvent","stylechooser","passthroughProps","mapContainerRef","mapBoxRef","innerTransitionsRef","defaultViewVals","setViewport","isTransitioning","setIsTransitioning","setProjection","geoMarker","captureDrag","_projection","_onViewportChange","viewportChange","newViewport","getMap","_bounds","minlng","minlat","maxlng","maxlat","_fitBounds","fitBounds","mapStyle","onData","dragPan","mapboxApiAccessToken","c","handleChild","hideNavControls","showZoom","touchZoom","scrollZoom","showCompass","touchRotate","dragRotate","transitionDuration","transitionInterpolator","transitionEasing","lockRotation","lockZoom","bearing","pitch","child","filterBounds","currentZoom","sizeScale","clusteredData","setClusteredData","single","cluster","filteredData","setFilteredData","updateDataDebounce","updatedData","_args","filterDataDebounce","filtered","_args2","filterData","filteredClusteredData","tree","screenCoords","properties","zoomLevels","geoJSON","load","_loop","z","radius","sqrt","pow","neighbors","minX","minY","maxX","maxY","neighbor","newGeoJSON","n","reducedPhotoCount","points","newZ","listItemText","compoundButton","seriesCount","onZoomTo","onViewList","rootActive","avatarActive","badge","badgeActive","directionIndicator","nameActive","svgArc","strokeOpacity","topBar","loadingWrapper","zoomOutFab","selectedPopup","defaultView","mapViewObj","setMapViewObj","mapViewRef","homeMapContainerRef","setCurrentZoom","showViewList","setShowViewList","_useState9","_useState10","setTransitions","_useState11","_useState12","selectedItem","setSelectedItem","updateSelectedItem","item","saveObj","transitionInterruption","maxZoom","minZoom","maxPitch","minPitch","saveMap","_onZoomTo","pts","paddedPoint","lngBuff","latBuff","buffBounds","onMarkerClick","markersRendered","offsetLeft","selectedItemRender","viewZoom","getBounds","_map$getBounds","_map$getBounds$_sw","_sw","minLng","lng","minLat","lat","_map$getBounds$_ne","_ne","maxLng","maxLat","oldMinLng","oldMinLat","oldMaxLng","oldMaxLat","onNativeClick","onSelect","mapRef","recalcProjection","baseStaticMap","deckelements","zoomBounds","InnerBounds","dot","staticMap","editable","Map","mapProps","Dot","rectContents","black","areaLabel","rectContentsDownloading","rectIcon","tooBig","tickText","svgRect","svgCutout","svgBorder","svgBorderNavigating","svgBorderLocked","svgBorderTooBig","svgBorderDownloading","downloadingProgress","downloadingProgressCircle","snackError","mapWrapperRef","viewState","area","setArea","classWithState","setGeoState","rectSide","newArea","metersPerPixel","dx","degreesPerPixel","dy","newBounds","snack","onSnackClose","snackTimeout","unlocked","doubleClickZoom","rectStyle","boxCorners","totalProgress","xmlns","sliderWrapper","sliderRoot","initLat","initLong","initDir","setCoords","setRotation","_ref2$viewport","mapFormLabel","step","SeriesContext","tagListItem","_useContext2","activeDialog","setActiveDialog","tagInst","newTags","existing","metaKeys","dense","tagKey","idtk","subheading","tabMenu","mapWrap","AddFab","gridList","placeholderInner","progressWrapper","onSlideshowStart","onEditSeries","onDeletePhotos","onCameraAdd","onDeleteSeries","contextEl","setContextEl","showQR","setShowQR","listTypeTab","setListTypeTab","canUser","delete","contribute","accessRadio","mapInnerWrap","chips","delta","nameError","FormControlLabel","control","Switch","checked","newNote","setDelta","dlgTitleContainer","catTagTitle","canEdit","hideUser","activeDialogContext","dirty","PhotoInfoInner","newDelta","appBarEdit","tipChip","activeButton","onUpdatePhoto","setActivePhoto","setMode","tagsClass","changeMode","desired","onCommitTags","infoButton","containerStyle","photoidx","setSeriesDelta","setPhotoDelta","validName","photoTitle","newAttr","onSave","referenceTextContainer","refText","onRetry","PHOTOREVIEW","PHOTOINFOEDIT","geoRef","setNewPhotoData","setNewSeries","setNewPhoto","photoRefId","setPhotoRefId","_changeMode","geo","newModeName","_data$exif","_geoRef$current","_newPhoto","sensors","refId","_data$exif2","_geoRef$current2","oldHistory","oldMode","onCreate","SERIES_EDIT","NEWPHOTO","REVIEW","PHOTO_VIEW","PHOTO_VIEW_NEW","SLIDESHOW","VIEW_ONLY_MODES","VALID_STARTMODES","PHOTO_REVIEW","inputMethodINIT","seriesContextState","setSeriesContextState","pid","onApprovePhoto","newPid","newInputMethod","canUpdate","to","lastMode","photoIdArr","fab2","tileClick","_useNewImageMenu","seriesItem","accessLabel","textSm","titleText","dateContainer","dateLabel","dateText","imgFiller","imgContainerSm","small","disablePadding"],"mappings":"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","file":"static/js/main.7137ae33.chunk.js","sourcesContent":["import { green, blue, red } from '@material-ui/core/colors';\nvar baseurl = process.env.REACT_APP_BASEURL;\nvar basename = process.env.REACT_APP_BASENAME;\nvar domain = process.env.REACT_APP_DOMAIN;\n\nif (process.env.NODE_ENV && process.env.NODE_ENV === 'development') {\n  domain = 'localhost';\n  basename = '';\n}\n\nvar mandatoryEnv = {\n  REACT_APP_MAPBOX_TOKEN: process.env.REACT_APP_MAPBOX_TOKEN,\n  REACT_APP_VERSION: process.env.REACT_APP_VERSION,\n  REACT_APP_CONTACT_EMAIL: process.env.REACT_APP_CONTACT_EMAIL,\n  REACT_APP_GRAPHQL: process.env.REACT_APP_GRAPHQL,\n  REACT_APP_AWS_REGION: process.env.REACT_APP_AWS_REGION,\n  REACT_APP_COGNITO_USER_POOL_ID: process.env.REACT_APP_COGNITO_USER_POOL_ID,\n  REACT_APP_COGNITO_CLIENT_ID: process.env.REACT_APP_COGNITO_CLIENT_ID\n};\nObject.keys(mandatoryEnv).forEach(function (keyname) {\n  if (!mandatoryEnv[keyname]) {\n    console.error(\"You must set environment variable: \".concat(keyname));\n  }\n});\nexport var mapConfig = {\n  mapBoxToken: process.env.REACT_APP_MAPBOX_TOKEN\n};\nexport var endpoints = {\n  graphql: \"\".concat(process.env.REACT_APP_GRAPHQL, \"/api\"),\n  share: \"\".concat(process.env.REACT_APP_GRAPHQL, \"/share\")\n};\nexport var tagColors = ['#418CF0', '#FCB441', '#E0400A', '#056492', '#BFBFBF', '#1A3B69', '#FFE382', '#129CDD', '#CA6B4B', '#005CDB', '#F3D288', '#506381', '#F1B9A8', '#E0830A', '#7893BE'];\nexport var version = process.env.REACT_APP_VERSION;\nexport var contact = process.env.REACT_APP_CONTACT_EMAIL;\nexport var ACCESS = {\n  OPEN: {\n    label: 'Open',\n    description: 'Anyone can see and contribute photos to this series.',\n    color: green[700]\n  },\n  PRIVATE: {\n    label: 'Private',\n    description: 'Can only be seen by you.',\n    color: red[500]\n  },\n  PUBLIC: {\n    label: 'Public',\n    description: 'Anyone can see this series. Only the owner can add photos.',\n    color: blue[500]\n  }\n};\nexport var home = {\n  Offline: {\n    seriesImgsToCache: ['thumb', 'large'],\n    highestOfflineTileZoom: 12,\n    maxMapTileArea: 25000\n  },\n  AppStateTypes: {\n    FEED: 'feed',\n    MAP: 'map',\n    SEARCH: 'search',\n    PROFILE: 'profile',\n    SERIES: 'series',\n    SETTINGS: 'settings',\n    QRCAPTURE: 'QRCapture',\n    NEW_SERIES_CAMERA: 'new_series_camera',\n    NEW_SERIES_LIBRARY: 'new_series_library',\n    OFFLINE_DOWNLOAD: 'offline_download'\n  },\n  SEARCH_TABS: {\n    KEYWORD: 'keyword',\n    TAG: 'tag',\n    LOCATION: 'location',\n    USER: 'user',\n    PROJECT: 'project'\n  },\n  MapModeTypes: {\n    FREE: 'free',\n    USER: 'user',\n    TAG: 'tag'\n  }\n};\nexport var federated = {};\nexport var analytics = {\n  token: process.env.REACT_APP_GA_TOKEN || 'UA-XXXXXXXX-XX'\n};\nexport var aws = {\n  Auth: {\n    region: process.env.REACT_APP_AWS_REGION,\n    userPoolId: process.env.REACT_APP_COGNITO_USER_POOL_ID,\n    userPoolWebClientId: process.env.REACT_APP_COGNITO_CLIENT_ID,\n    mandatorySignIn: true,\n    cookieStorage: {\n      domain: \"\".concat(domain),\n      expires: 120,\n      secure: false\n    }\n  },\n  AWSPinpoint: {\n    appId: process.env.REACT_APP_AWS_PINPOINT,\n    region: 'us-east-1',\n    mandatorySignIn: false\n  }\n};","import { endpoints } from './config';\nexport var createShareUrl = function createShareUrl(series, photoId) {\n  var noRoot = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  if (!series) return null;\n  var obj = {\n    type: 'series',\n    s: series.id,\n    p: photoId\n  };\n  var encodedId = encodeURI(JSON.stringify(obj));\n  var url = \"\".concat(window.location.origin).concat(process.env.PUBLIC_URL, \"/?fromqr=\").concat(encodedId);\n  var ogShare = \"\".concat(endpoints.share, \"/\").concat(series.id, \"/\").concat(photoId || '');\n  return {\n    url: url,\n    ogShare: ogShare\n  };\n};\nexport var decodeShareUrl = function decodeShareUrl(search) {\n  try {\n    var find = '?fromqr=';\n    var foundIdx = search.indexOf(find);\n    if (foundIdx < 0) return null;\n    var newData = search.slice(foundIdx + find.length);\n    var decodedUrl = JSON.parse(decodeURI(newData));\n    return decodedUrl;\n  } catch (err) {\n    console.error(err);\n  }\n\n  return null;\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { getExif } from '@morphoto/common';\n\nvar imgLoadPromise = function imgLoadPromise(blob) {\n  return new Promise(function (resolve) {\n    var img = new Image();\n    var urlCreator = window.URL || window.webkitURL;\n    var imageUrl = urlCreator.createObjectURL(blob);\n\n    img.onload = function () {\n      console.log('LOADED');\n      resolve({\n        imageHeight: img.height,\n        imageWidth: img.width,\n        type: blob.type\n      });\n    };\n\n    img.src = imageUrl;\n  });\n};\n\nexport default\n/*#__PURE__*/\n(function () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(blob) {\n    var type, name, size, resultArr, ext;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            type = blob.type, name = blob.name, size = blob.size;\n            _context.next = 3;\n            return Promise.all([getExif(blob), imgLoadPromise(blob)]);\n\n          case 3:\n            resultArr = _context.sent;\n            ext = getExtFromFile(blob);\n            return _context.abrupt(\"return\", _objectSpread({\n              file: blob,\n              type: type,\n              ext: ext,\n              name: name || \"capture.\".concat(ext),\n              size: size,\n              exif: resultArr[0]\n            }, resultArr[1]));\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n})();\nexport var getExtFromFile = function getExtFromFile(fileBlob) {\n  switch (fileBlob.type) {\n    case 'image/jpeg':\n      return 'jpeg';\n\n    case 'image/jpg':\n      return 'jpeg';\n\n    case 'image/png':\n      return 'png';\n\n    default:\n      return 'jpg';\n  }\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState, useEffect, useRef } from 'react';\nimport imageParser from './imageParser';\n\nvar useCamera = function useCamera(onCapture, width, height) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      cameraError = _useState2[0],\n      setCameraError = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      cameraOnline = _useState4[0],\n      setCameraOnline = _useState4[1];\n\n  var camRef = useRef();\n  useEffect(function () {\n    camRef.current = new Webcam(document.getElementById('webcam'), document.createElement('canvas'));\n    camRef.current.setup(width || window.innerWidth, height || window.innerHeight).then(function (data) {\n      setCameraOnline(true);\n    }).catch(function (e) {\n      console.error(e);\n      console.log(e.stack);\n      setCameraError(true);\n    });\n  }, [width, height]);\n  useEffect(function () {\n    if (camRef.current) {\n      camRef.current.setup(width, height).then(function (data) {\n        setCameraOnline(true);\n      }).catch(function (e) {\n        console.error(e);\n        setCameraError(true);\n      });\n    }\n  }, [width, height]);\n  useEffect(function () {\n    return function () {\n      if (camRef.current) {\n        camRef.current.destroy();\n        camRef.current = null;\n      }\n    };\n  }, []);\n\n  var captureImage = function captureImage() {\n    if (camRef.current && cameraOnline) {\n      try {\n        camRef.current.imageCapture({\n          type: 'jpeg',\n          quality: 1\n        }).then(imageParser).then(onCapture).catch(console.error);\n      } catch (err) {\n        console.error(err);\n        console.log('Your hardware is lame and doesn\\'t support ImageCapture');\n        camRef.current.takeDataURLPhoto({\n          type: 'image/jpeg',\n          quality: 1\n        }).then(imageParser).then(onCapture).catch(console.error);\n      }\n    }\n  };\n\n  var captureRawData = function captureRawData() {\n    if (camRef.current && cameraOnline) {\n      var capturedData = camRef.current.takeImageData();\n      onCapture(capturedData);\n    }\n  };\n\n  return {\n    cameraError: cameraError,\n    captureImage: captureImage,\n    cameraOnline: cameraOnline,\n    captureRawData: captureRawData\n  };\n};\n\nexport var Webcam =\n/*#__PURE__*/\nfunction () {\n  function Webcam(webcamElement, canvasElement) {\n    _classCallCheck(this, Webcam);\n\n    this.webcamElement = webcamElement;\n    this.canvasElement = canvasElement;\n\n    if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost') {\n      console.warn('getUserMedia() must be run from a secure origin: https or localhost.\\nChanging protocol to https.');\n    }\n\n    if (!navigator.mediaDevices && !navigator.getUserMedia) {\n      console.warn(\"Your browser doesn't support navigator.mediaDevices.getUserMedia and navigator.getUserMedia.\");\n    }\n  }\n\n  _createClass(Webcam, [{\n    key: \"destroy\",\n    value: function () {\n      var _destroy = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                try {\n                  this.webcamElement.srcObject.getVideoTracks()[0].stop();\n                  console.log('Releasing Camera');\n                  this.webcamElement = null;\n                  this.canvasElement = null;\n                } catch (e) {\n                  console.error(e);\n                }\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function destroy() {\n        return _destroy.apply(this, arguments);\n      }\n\n      return destroy;\n    }()\n  }, {\n    key: \"setup\",\n    value: function () {\n      var _setup = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(width, height) {\n        var _this = this;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                console.log('NEWSETUP', width, height);\n                return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  if (navigator.mediaDevices.getUserMedia !== undefined) {\n                    if (_this.webcamElement.srcObject) {\n                      _this.webcamElement.srcObject.getVideoTracks()[0].stop();\n\n                      _this.webcamElement.srcObject = null;\n                    }\n\n                    navigator.mediaDevices.getUserMedia({\n                      audio: false,\n                      video: {\n                        facingMode: 'environment',\n                        width: {\n                          ideal: Math.max(height, width)\n                        },\n                        height: {\n                          ideal: Math.min(height, width)\n                        }\n                      }\n                    }).then(function (mediaStream) {\n                      if ('srcObject' in _this.webcamElement) {\n                        _this.webcamElement.srcObject = mediaStream;\n                      } else {\n                        _this.webcamElement.src = window.URL.createObjectURL(mediaStream);\n                      }\n\n                      _this.webcamElement.onloadedmetadata = function (e) {\n                        _this.webcamElement.play();\n                      };\n\n                      _this.webcamElement.onplaying = function (e) {\n                        resolve();\n                      };\n                    }).catch(function (err) {\n                      return reject(err);\n                    });\n                  } else {\n                    reject(new Error('Error accessing camera'));\n                  }\n                }));\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function setup(_x, _x2) {\n        return _setup.apply(this, arguments);\n      }\n\n      return setup;\n    }()\n  }, {\n    key: \"_drawImage\",\n    value: function _drawImage() {\n      var imageWidth = this.webcamElement.videoWidth;\n      var imageHeight = this.webcamElement.videoHeight;\n      var context = this.canvasElement.getContext('2d');\n      this.canvasElement.width = imageWidth;\n      this.canvasElement.height = imageHeight;\n      context.drawImage(this.webcamElement, 0, 0, imageWidth, imageHeight);\n      return {\n        imageHeight: imageHeight,\n        imageWidth: imageWidth\n      };\n    }\n  }, {\n    key: \"takeImageData\",\n    value: function takeImageData() {\n      var _this$_drawImage = this._drawImage(),\n          imageHeight = _this$_drawImage.imageHeight,\n          imageWidth = _this$_drawImage.imageWidth;\n\n      var data = {\n        data: null,\n        imageHeight: imageHeight,\n        imageWidth: imageWidth\n      };\n\n      try {\n        data.data = this.canvasElement.getContext('2d').getImageData(0, 0, imageWidth, imageHeight).data;\n      } catch (e) {}\n\n      return data;\n    }\n  }, {\n    key: \"imageCapture\",\n    value: function imageCapture() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        type: 'image/jpeg',\n        quality: 1\n      },\n          type = _ref.type,\n          quality = _ref.quality;\n\n      var mediaStreamTrack = this.webcamElement.srcObject.getVideoTracks()[0];\n      var imageCapture = new ImageCapture(mediaStreamTrack);\n      imageCapture.getPhotoCapabilities();\n      return imageCapture.takePhoto().then(function (data) {\n        try {\n          mediaStreamTrack.stop();\n        } catch (_unused) {}\n\n        return data;\n      }).catch(function (error) {\n        return console.error('takePhoto() error:', error);\n      });\n    }\n  }, {\n    key: \"takeDataURLPhoto\",\n    value: function takeDataURLPhoto() {\n      var _this2 = this;\n\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        type: 'image/jpeg',\n        quality: 1\n      },\n          type = _ref2.type,\n          quality = _ref2.quality;\n\n      return new Promise(function (resolve) {\n        _this2.canvasElement.toBlob(resolve, type, quality);\n      });\n    }\n  }]);\n\n  return Webcam;\n}();\nexport default useCamera;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useCallback, useState, useLayoutEffect, useRef } from 'react';\nimport { util } from '@morphoto/common';\n\nvar getSize = function getSize(el, minSize, defaultSize) {\n  if (!el) return defaultSize || minSize || {\n    width: 0,\n    height: 0\n  };\n\n  if (minSize) {\n    return {\n      width: Math.max(minSize.width, el.offsetWidth),\n      height: Math.max(minSize.height, el.offsetHeight)\n    };\n  } else {\n    return {\n      width: el.offsetWidth,\n      height: el.offsetHeight\n    };\n  }\n};\n\nvar useComponentSize = function useComponentSize(ref, minSize, defaultSize) {\n  var resizeActiveRef = useRef();\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      resizeActive = _useState2[0],\n      setResizeActive = _useState2[1];\n\n  resizeActiveRef.current = resizeActive;\n\n  var _useState3 = useState(getSize(ref ? ref.current : null, minSize, defaultSize)),\n      _useState4 = _slicedToArray(_useState3, 2),\n      size = _useState4[0],\n      setComponentSize = _useState4[1];\n\n  var handleResize = function handleResize() {\n    if (!resizeActiveRef.current || !ref.current) return;\n    var newSize = getSize(ref.current, minSize, defaultSize);\n\n    if (newSize.height !== size.height || newSize.width !== size.width) {\n      setComponentSize(newSize);\n    }\n  };\n\n  var handleResizeDebounced = useCallback(util.debounce(handleResize, 500), []);\n  useLayoutEffect(function () {\n    if (!ref.current) return;\n    handleResize();\n\n    if (typeof ResizeObserver === 'function') {\n      var resizeObserver = new ResizeObserver(handleResizeDebounced);\n      resizeObserver.observe(ref.current);\n      return function () {\n        resizeObserver.disconnect(ref.current);\n        resizeObserver = null;\n      };\n    } else {\n      window.addEventListener('resize', handleResizeDebounced);\n      return function () {\n        window.removeEventListener('resize', handleResizeDebounced);\n      };\n    }\n  }, [ref.current]);\n  return {\n    size: size,\n    setResizeActive: setResizeActive\n  };\n};\n\nexport default useComponentSize;","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport React, { useEffect, useRef } from 'react';\nimport imageParser from './imageParser';\n\nvar useFileInput = function useFileInput() {\n  var onChange = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n  var preferCamera = arguments.length > 1 ? arguments[1] : undefined;\n  var initialClick = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var anyFile = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var inputRef = useRef();\n  var clickRef = useRef();\n  var element = React.createElement(\"input\", {\n    style: {\n      display: 'none'\n    },\n    ref: inputRef,\n    type: \"file\",\n    accept: !anyFile ? 'image/*' : null,\n    capture: preferCamera\n  });\n\n  var forceClick = function forceClick() {\n    if (inputRef.current) inputRef.current.click();\n  };\n\n  useEffect(function () {\n    var handleChange = function handleChange(evt) {\n      if (evt.target.files) {\n        var _ref = _toConsumableArray(evt.target.files),\n            file = _ref[0];\n\n        if (file) {\n          imageParser(file).then(onChange);\n        }\n\n        inputRef.current.value = null;\n      }\n    };\n\n    if (inputRef.current) {\n      inputRef.current.addEventListener('change', handleChange);\n\n      if (!clickRef.current) {\n        if (initialClick) inputRef.current.click();\n        clickRef.current = true;\n      }\n    }\n\n    return function () {\n      if (inputRef.current) {\n        inputRef.current.removeEventListener('change', handleChange);\n      }\n    };\n  }, [inputRef.current]);\n  return {\n    fileClickEl: element,\n    forceClick: forceClick,\n    inputRef: inputRef\n  };\n};\n\nexport default useFileInput;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useState, useMemo } from 'react';\n\nvar useOnline = function useOnline() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var onChange = function onChange(e) {\n    if (window.navigator.onLine) {\n      console.log('ONLINE', e);\n      if (state !== null) setState(null);\n    } else {\n      console.log('OFFLINE', e);\n      var newDate = Date.now();\n      if (state !== newDate) setState(newDate);\n    }\n  };\n\n  useEffect(function () {\n    onChange();\n    window.addEventListener('online', onChange);\n    window.addEventListener('offline', onChange);\n    return function () {\n      window.removeEventListener('online', onChange);\n      window.removeEventListener('offline', onChange);\n    };\n  }, []);\n  var retVal = useMemo(function () {\n    return {\n      isOnline: state === null,\n      offlineSince: state\n    };\n  }, [state]);\n  return retVal;\n};\n\nexport default useOnline;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useCallback, useState, useLayoutEffect } from 'react';\nimport { util } from '@morphoto/common';\nimport _ from 'lodash';\n\nvar getState = function getState() {\n  var _window = window,\n      orientation = _window.orientation,\n      innerWidth = _window.innerWidth,\n      innerHeight = _window.innerHeight,\n      _window$screen = _window.screen,\n      width = _window$screen.width,\n      height = _window$screen.height;\n  var wOrient = [90, 270, -90].indexOf(Math.abs(orientation)) !== 0 ? 'portrait' : 'landscape';\n  var windowSize = {\n    width: innerWidth,\n    height: innerHeight\n  };\n  var screenSize = {\n    width: width,\n    height: height\n  };\n  return {\n    orientation: wOrient,\n    windowSize: windowSize,\n    screenSize: screenSize\n  };\n};\n\nvar useResponsive = function useResponsive(mediaQueries) {\n  var _useState = useState(getState()),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var handleResize = function handleResize(e) {\n    if (e) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n\n    if (state && ['input', 'textarea', 'select'].indexOf(window.document.activeElement.tagName.toLowerCase()) > -1) return;\n    var newState = getState();\n    setState(newState);\n  };\n\n  var handleResizeDebounced = useCallback(util.debounce(handleResize, 500), []);\n  useLayoutEffect(function () {\n    handleResizeDebounced();\n    window.addEventListener('resize', handleResizeDebounced);\n    window.addEventListener('orientationchange', handleResize);\n    return function () {\n      window.removeEventListener('resize', handleResizeDebounced);\n      window.removeEventListener('orientationchange', handleResize);\n    };\n  }, []);\n  return state;\n};\n\nexport default useResponsive;","import _classCallCheck from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nvar ErrorBoundary =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ErrorBoundary, _React$Component);\n\n  function ErrorBoundary(props) {\n    var _this;\n\n    _classCallCheck(this, ErrorBoundary);\n\n    console.log('ErrorBoundary constructor');\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ErrorBoundary).call(this, props));\n    _this.state = {\n      hasError: false\n    };\n    return _this;\n  }\n\n  _createClass(ErrorBoundary, [{\n    key: \"componentDidCatch\",\n    value: function componentDidCatch(error, info) {\n      console.log('ErrorBoundary componentDidCatch');\n      console.error(error);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          hasError = _this$state.hasError,\n          error = _this$state.error;\n      var FallbackUI = this.props.fallback;\n\n      if (hasError) {\n        console.log('ErrorBoundary hasError');\n        return React.createElement(FallbackUI, {\n          error: error\n        });\n      }\n\n      return this.props.children;\n    }\n  }], [{\n    key: \"getDerivedStateFromError\",\n    value: function getDerivedStateFromError(error) {\n      console.log('ErrorBoundary getDerivedStateFromError');\n      console.error(error);\n      return {\n        hasError: true,\n        error: error\n      };\n    }\n  }]);\n\n  return ErrorBoundary;\n}(React.Component);\n\nErrorBoundary.propTypes = {\n  children: PropTypes.any,\n  fallback: PropTypes.any\n};\nexport default ErrorBoundary;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useEffect, useState } from 'react';\nexport var isIos = function isIos() {\n  return Boolean(/iphone|ipad|ipod/i.test(window.navigator.userAgent || navigator.vendor || window.opera || ''));\n};\nexport var isPhone = function isPhone() {\n  var a = window.navigator.userAgent || navigator.vendor || window.opera || '';\n  return /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(a.substr(0, 4));\n};\nexport var getCameraAccess =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var device;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return navigator.mediaDevices.getUserMedia({\n              audio: false,\n              video: {\n                facingMode: 'environment'\n              }\n            });\n\n          case 3:\n            device = _context.sent;\n            device.getTracks()[0].stop();\n            device = null;\n            return _context.abrupt(\"return\", true);\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](0);\n            return _context.abrupt(\"return\", false);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 9]]);\n  }));\n\n  return function getCameraAccess() {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar baseObj = {\n  ios: Boolean(isIos()),\n  phone: Boolean(isPhone())\n};\nexport var useDevice = function useDevice() {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      cameraAccess = _useState2[0],\n      setCameraAccess = _useState2[1];\n\n  useEffect(function () {\n    function goFunc() {\n      return _goFunc.apply(this, arguments);\n    }\n\n    function _goFunc() {\n      _goFunc = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.t0 = setCameraAccess;\n                _context2.next = 3;\n                return getCameraAccess();\n\n              case 3:\n                _context2.t1 = _context2.sent;\n                (0, _context2.t0)(_context2.t1);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      return _goFunc.apply(this, arguments);\n    }\n\n    goFunc();\n  }, []);\n  return _objectSpread({}, baseObj, {\n    cameraAccess: cameraAccess\n  });\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDevice } from './useOSDetect';\nimport useOnline from './useOnline';\nimport useResponsive from './useResponsive';\nexport var AppContext = React.createContext({});\nexport var AppContextProvider = function AppContextProvider(_ref) {\n  var children = _ref.children,\n      value = _ref.value;\n  var online = useOnline();\n  var responsive = useResponsive();\n  var device = useDevice();\n  var unchanging = useMemo(function () {\n    return {\n      device: _objectSpread({}, device, {}, value.device)\n    };\n  }, [value.device, device]);\n\n  var finalValue = _objectSpread({\n    responsive: responsive,\n    online: online\n  }, value, {}, unchanging);\n\n  return React.createElement(AppContext.Provider, {\n    value: finalValue\n  }, children);\n};\nAppContextProvider.propTypes = {\n  children: PropTypes.any,\n  value: PropTypes.shape({\n    user: PropTypes.object,\n    signedIn: PropTypes.bool.isRequired,\n    getPhotoUrls: PropTypes.func.isRequired,\n    device: PropTypes.object,\n    metaConfig: PropTypes.object,\n    tagConfig: PropTypes.array.isRequired,\n    onAvatarClick: PropTypes.func,\n    globalActions: PropTypes.object.isrequired\n  })\n};","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState, useEffect, useRef } from 'react';\nexport var useGeolocation = function useGeolocation() {\n  var _useState = useState({\n    accuracy: null,\n    altitude: null,\n    altitudeAccuracy: null,\n    heading: null,\n    latitude: null,\n    longitude: null,\n    speed: null,\n    timestamp: Date.now()\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var mountedRef = useRef();\n  var watchIdRef = useRef();\n  mountedRef.current = true;\n\n  var onEvent = function onEvent(event) {\n    if (mountedRef.current) {\n      setState({\n        accuracy: event.coords.accuracy,\n        altitude: event.coords.altitude,\n        altitudeAccuracy: event.coords.altitudeAccuracy,\n        heading: event.coords.heading,\n        latitude: event.coords.latitude,\n        longitude: event.coords.longitude,\n        speed: event.coords.speed,\n        timestamp: event.timestamp\n      });\n    }\n  };\n\n  useEffect(function () {\n    navigator.geolocation.getCurrentPosition(onEvent);\n    watchIdRef.current = navigator.geolocation.watchPosition(onEvent);\n    return function () {\n      mountedRef.current = false;\n      navigator.geolocation.clearWatch(watchIdRef.current);\n    };\n  }, [navigator.geolocation]);\n  return state;\n};\nexport function useDeviceOrientation() {\n  var _useState3 = useState({\n    absolute: false,\n    alpha: null,\n    beta: null,\n    gamma: null\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      deviceOrientation = _useState4[0],\n      setDeviceOrientation = _useState4[1];\n\n  function handleDeviceOrientation(event) {\n    setDeviceOrientation({\n      absolute: event.absolute,\n      alpha: event.alpha,\n      beta: event.beta,\n      gamma: event.gamma\n    });\n  }\n\n  useEffect(function () {\n    window.addEventListener('deviceorientation', handleDeviceOrientation, true);\n    return function () {\n      window.removeEventListener('deviceorientation', handleDeviceOrientation);\n    };\n  }, []);\n  return deviceOrientation;\n}","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport * as configImp from './config';\nexport var config = _objectSpread({}, configImp);\nexport { createShareUrl, decodeShareUrl } from './share';\nexport { default as useCamera } from './useCamera';\nexport { default as useComponentSize } from './useComponentSize';\nexport { default as useFileInput } from './useFileInput';\nexport { default as useOnline } from './useOnline';\nexport { default as useResponsive } from './useResponsive';\nexport { default as ErrorBoundary } from './ErrorBoundary';\nexport { playAudio } from './audio';\nexport { AppContext, AppContextProvider } from './appContext';\nexport { useGeolocation, useDeviceOrientation } from './useSensors';\nexport { useDevice, isIos, isPhone } from './useOSDetect';","import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \" M 16 8 L 16 8.938 L 14 8.938 L 14 10.938 L 16 10.938 L 16 12 L 16 14 L 16 14 L 16 15 L 14 15 L 14 17 L 16 17 L 16 17 L 16 18 L 12.969 18 L 12.969 14 L 15 14 L 15 12 L 12.969 12 L 12.969 7.969 L 12.969 7.969 L 12.969 7.969 C 12.969 7.417 12.521 6.969 11.969 6.969 C 11.417 6.969 10.969 7.417 10.969 7.969 L 10.969 12 L 9 12 L 9 14 L 10.969 14 L 10.969 18 L 8 18 L 8 17 L 10 17 L 10 15 L 8 15 L 8 15 L 8 14 L 8 14 L 8 12 L 8 10.938 L 8 10.938 L 10 10.938 L 10 8.938 L 8 8.938 L 8 8 C 8 7.448 7.552 7 7 7 C 6.448 7 6 7.448 6 8 L 6 8 L 6 8.938 L 5 8.938 L 5 10.938 L 6 10.938 L 6 12 L 4 12 L 4 8 C 4 7.448 3.552 7 3 7 C 2.448 7 2 7.448 2 8 L 2 10.4 L 2 12 L 2 14 L 2 16 L 2 17.6 C 2 18.925 3.075 20 4.4 20 L 19.6 20 C 20.925 20 22 18.925 22 17.6 L 22 16 L 22 14 L 22 12 L 22 10.4 L 22 10.4 L 22 8 C 22 7.448 21.552 7 21 7 C 20.448 7 20 7.448 20 8 L 20 12 L 18 12 L 18 10.938 L 18 10.938 L 19 10.938 L 19 8.938 L 18 8.938 L 18 8 C 18 7.448 17.552 7 17 7 C 16.448 7 16 7.448 16 8 Z  M 6 15 L 6 14 L 6 14 L 6 14 L 6 14 L 4 14 L 4 15.69 C 4 16.86 4.871 17.828 6 17.979 L 6 17 L 5 17 L 5 15 L 6 15 L 6 15 L 6 15 L 6 15 L 6 15 Z  M 18 15 L 18 14 L 18 14 L 18 14 L 20 14 L 20 15.69 C 20 16.86 19.129 17.828 18 17.979 L 18 17 L 19 17 L 19 15 L 18 15 L 18 15 L 18 15 L 18 15 L 18 15 L 18 15 L 18 15 Z \",\n  fillRule: \"evenodd\"\n})), 'BDA');","import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M16.432,6.104c-2.671,-1.06 -6.842,4.123 -6.572,5.826c-3.78,-7.611 2.788,-8.409 3.682,-10.699c0.64,1.255 5.18,2.608 2.89,4.873Z\"\n}), React.createElement(\"path\", {\n  d: \"M9.159,5.228c-2.254,1.782 0.149,7.986 1.76,8.604c-8.482,-0.532 -5.889,-6.619 -7.425,-8.538c1.407,0.073 4.848,-3.183 5.665,-0.066Z\"\n}), React.createElement(\"path\", {\n  d: \"M4.727,11.059c0.417,2.844 6.991,3.864 8.331,2.779c-4.701,7.079 -8.676,1.79 -11.106,2.161c0.766,-1.183 -0.332,-5.791 2.775,-4.94Z\"\n}), React.createElement(\"path\", {\n  d: \"M7.561,17.813c2.671,1.061 6.842,-4.122 6.572,-5.826c3.781,7.611 -2.788,8.409 -3.681,10.699c-0.641,-1.255 -5.181,-2.607 -2.891,-4.873Z\"\n}), React.createElement(\"path\", {\n  d: \"M14.828,18.736c2.254,-1.783 -0.149,-7.987 -1.76,-8.605c8.482,0.532 5.889,6.619 7.425,8.538c-1.407,-0.072 -4.849,3.183 -5.665,0.067Z\"\n}), React.createElement(\"path\", {\n  d: \"M19.26,12.904c-0.417,-2.843 -6.991,-3.864 -8.331,-2.778c4.701,-7.08 8.676,-1.791 11.106,-2.162c-0.767,1.183 0.332,5.791 -2.775,4.94Z\"\n})), 'AppLogoSimple');","import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M22,2l0,20l-20,0l0,-20l20,0Zm-2,2l-16,0l0,16l16,0l0,-16Z\"\n}), React.createElement(\"rect\", {\n  x: \"5\",\n  y: \"5\",\n  width: \"4\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"15\",\n  y: \"5\",\n  width: \"4\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"5\",\n  y: \"15\",\n  width: \"4\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"10\",\n  y: \"10\",\n  width: \"1\",\n  height: \"5\"\n}), React.createElement(\"rect\", {\n  x: \"11\",\n  y: \"10\",\n  width: \"6\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"11\",\n  y: \"12\",\n  width: \"2\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"13\",\n  y: \"7\",\n  width: \"1\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"14\",\n  y: \"9\",\n  width: \"1\",\n  height: \"1\"\n}), React.createElement(\"rect\", {\n  x: \"8\",\n  y: \"10\",\n  width: \"1\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"7\",\n  y: \"11\",\n  width: \"1\",\n  height: \"3\"\n}), React.createElement(\"rect\", {\n  x: \"9\",\n  y: \"11\",\n  width: \"1\",\n  height: \"1\"\n}), React.createElement(\"rect\", {\n  x: \"10\",\n  y: \"6\",\n  width: \"2\",\n  height: \"3\"\n}), React.createElement(\"rect\", {\n  x: \"12\",\n  y: \"7\",\n  width: \"1\",\n  height: \"1\"\n}), React.createElement(\"rect\", {\n  x: \"15\",\n  y: \"14\",\n  width: \"2\",\n  height: \"4\"\n}), React.createElement(\"rect\", {\n  x: \"14\",\n  y: \"14\",\n  width: \"1\",\n  height: \"1\"\n}), React.createElement(\"rect\", {\n  x: \"17\",\n  y: \"15\",\n  width: \"2\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"11\",\n  y: \"16\",\n  width: \"1\",\n  height: \"3\"\n}), React.createElement(\"rect\", {\n  x: \"12\",\n  y: \"15\",\n  width: \"2\",\n  height: \"2\"\n}), React.createElement(\"rect\", {\n  x: \"10\",\n  y: \"18\",\n  width: \"1\",\n  height: \"1\"\n})), 'QRCode');","import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M21.229,18.388c-0.346,0.799 -0.756,1.535 -1.23,2.211c-0.647,0.922 -1.176,1.56 -1.584,1.914c-0.632,0.582 -1.31,0.88 -2.036,0.897c-0.521,0 -1.149,-0.148 -1.88,-0.449c-0.734,-0.299 -1.408,-0.448 -2.025,-0.448c-0.646,0 -1.34,0.149 -2.081,0.448c-0.743,0.301 -1.342,0.457 -1.799,0.473c-0.696,0.03 -1.39,-0.277 -2.082,-0.921c-0.442,-0.385 -0.995,-1.046 -1.657,-1.982c-0.71,-0.999 -1.294,-2.158 -1.752,-3.48c-0.49,-1.427 -0.735,-2.809 -0.735,-4.147c0,-1.533 0.331,-2.855 0.994,-3.963c0.521,-0.89 1.215,-1.591 2.083,-2.107c0.868,-0.515 1.806,-0.778 2.816,-0.794c0.553,0 1.278,0.17 2.179,0.506c0.898,0.338 1.474,0.509 1.727,0.509c0.189,0 0.83,-0.2 1.916,-0.599c1.027,-0.369 1.894,-0.522 2.604,-0.462c1.924,0.155 3.37,0.914 4.331,2.28c-1.721,1.043 -2.572,2.503 -2.555,4.377c0.016,1.459 0.545,2.674 1.585,3.638c0.472,0.447 0.999,0.793 1.584,1.039c-0.127,0.368 -0.261,0.721 -0.403,1.06Zm-4.413,-17.366c0,1.144 -0.418,2.212 -1.251,3.2c-1.005,1.176 -2.221,1.855 -3.54,1.748c-0.017,-0.138 -0.026,-0.282 -0.026,-0.434c0,-1.098 0.478,-2.273 1.327,-3.234c0.423,-0.486 0.962,-0.891 1.616,-1.214c0.652,-0.318 1.269,-0.493 1.85,-0.523c0.016,0.152 0.024,0.305 0.024,0.457l0,0Z\"\n})), 'Apple');","export { default as BDA } from './BDA';\nexport { default as AppLogo } from './AppLogo';\nexport { default as AppLogoSimple } from './AppLogoSimple';\nexport { default as QRCode } from './QRCode';\nexport { default as Apple } from './Apple';","import React, { useContext } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport AppBar from '@material-ui/core/AppBar';\nimport IconButton from '@material-ui/core/IconButton';\nimport { QRCode as QRCodeIcon, AppLogoSimple } from '@morphoto/icons';\nimport { AppContext } from '@morphoto/client-common';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    appBar: {\n      background: 'transparent'\n    },\n    toolbar: {\n      display: 'flex',\n      alignItems: 'center',\n      width: '100%',\n      padding: theme.spacing(0, 1),\n      backgroundColor: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      borderBottom: \"2px solid \".concat(theme.palette.primary.main),\n      background: \"linear-gradient(90deg, \".concat(theme.palette.primary.main, \" 0%, \").concat(theme.palette.secondary.main, \" 100%)\")\n    },\n    searchIcon: {\n      opacity: 0.3,\n      marginRight: theme.spacing(1)\n    },\n    transparent: {\n      backgroundColor: 'transparent',\n      background: 'none',\n      color: theme.palette.text.primary,\n      borderBottom: \"2px solid transparent\"\n    },\n    noCamIcon: {\n      color: 'rgba(0, 0, 0, 0.26)'\n    },\n    logo: {\n      padding: theme.spacing(0, 0),\n      height: 40,\n      width: 40\n    },\n    transparentLogo: {\n      background: \"linear-gradient(90deg, \".concat(theme.palette.primary.main, \" 0%, \").concat(theme.palette.secondary.main, \" 100%)\"),\n      padding: theme.spacing(0.5, 0.5)\n    },\n    transparentLogoIcon: {\n      color: 'white',\n      height: 35,\n      width: 35\n    },\n    children: {\n      flexGrow: 1,\n      padding: theme.spacing(0, 1)\n    },\n    qrButton: {\n      padding: theme.spacing(0, 0)\n    },\n    qrButtonTransparent: {\n      background: 'white',\n      padding: theme.spacing(0.5, 0.5)\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar TopBar = function TopBar(_ref) {\n  var className = _ref.className,\n      children = _ref.children,\n      isTransparent = _ref.isTransparent,\n      hideLogo = _ref.hideLogo,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device;\n\n  return React.createElement(AppBar, {\n    elevation: 0,\n    position: isTransparent ? 'absolute' : 'static',\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    className: classNames(classes.toolbar, className, isTransparent ? classes.transparent : null),\n    disableGutters: true\n  }, !hideLogo && React.createElement(IconButton, {\n    className: isTransparent ? classes.transparentLogo : classes.logo,\n    color: \"inherit\",\n    onClick: function onClick() {\n      return actions.setDrawerOpen(true);\n    }\n  }, React.createElement(AppLogoSimple, {\n    className: isTransparent ? classes.transparentLogoIcon : classes.logo\n  })), React.createElement(\"div\", {\n    className: classes.children\n  }, children), React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classNames(!device.cameraAccess ? classes.noCamIcon : null, isTransparent ? classes.qrButtonTransparent : classes.qrButton),\n    \"aria-label\": \"Menu\",\n    onClick: actions.onQRClickWrapped\n  }, React.createElement(QRCodeIcon, {\n    color: \"inherit\"\n  }))));\n};\n\nTopBar.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.any,\n  isTransparent: PropTypes.bool,\n  hideLogo: PropTypes.bool,\n  actions: PropTypes.shape({\n    onQRClickWrapped: PropTypes.func,\n    setDrawerOpen: PropTypes.func.isRequred\n  })\n};\nexport default TopBar;","import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport Avatar from '@material-ui/core/Avatar';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport CloudDownload from '@material-ui/icons/CloudDownload';\nimport InfoIcon from '@material-ui/icons/Info';\nimport MobileScreenShare from '@material-ui/icons/MobileScreenShare';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport { QRCode as QRCodeIcon } from '@morphoto/icons';\nimport { AppContext } from '@morphoto/client-common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    drawerInner: {\n      width: 250,\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%'\n    },\n    disableListItem: {\n      color: 'rgba(0, 0, 0, 0.26)'\n    },\n    avatar: {\n      height: theme.spacing(7),\n      width: theme.spacing(7),\n      border: \"3px solid \".concat(theme.palette.primary.main),\n      margin: theme.spacing(0, 1)\n    },\n    gravatarImg: {\n      width: '100%'\n    },\n    spacer: {\n      flexGrow: 1\n    },\n    fullList: {\n      width: 'auto'\n    }\n  };\n});\n\nvar SideDrawer = function SideDrawer(_ref) {\n  var open = _ref.open,\n      onClose = _ref.onClose,\n      onOpen = _ref.onOpen,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device,\n      currentUser = _useContext.currentUser,\n      signedIn = _useContext.signedIn,\n      globalActions = _useContext.globalActions;\n\n  return React.createElement(SwipeableDrawer, {\n    open: open,\n    onClose: onClose,\n    onOpen: onOpen\n  }, React.createElement(\"div\", {\n    className: classes.drawerInner,\n    role: \"presentation\",\n    onClick: onClose,\n    onKeyDown: onClose\n  }, currentUser && currentUser.username && React.createElement(List, null, React.createElement(ListItem, {\n    className: classes.root,\n    onClick: function onClick() {},\n    disableGutters: true\n  }, React.createElement(Avatar, {\n    className: classes.avatar\n  }, signedIn && currentUser ? React.createElement(\"img\", {\n    alt: \"profile\",\n    className: classes.gravatarImg,\n    src: currentUser.gravatar\n  }) : React.createElement(AccountCircleIcon, {\n    color: \"inherit\",\n    className: classes.loginButton\n  }))), React.createElement(ListItem, {\n    className: classes.root,\n    onClick: function onClick() {}\n  }, React.createElement(ListItemText, {\n    primary: currentUser.username\n  }))), React.createElement(Divider, null), React.createElement(List, null, React.createElement(ListItem, {\n    className: device.cameraAccess ? classes.disableListItem : null,\n    button: true,\n    onClick: !device.cameraAccess ? device.ios ? actions.onDisabledClick : function () {} : globalActions.onQRButtonClick\n  }, React.createElement(ListItemIcon, null, React.createElement(QRCodeIcon, null)), React.createElement(ListItemText, {\n    primary: 'Scan QR Code'\n  })), globalActions.addToHomeScreen && React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.addToHomeScreen\n  }, React.createElement(ListItemIcon, null, React.createElement(MobileScreenShare, null)), React.createElement(ListItemText, {\n    primary: 'Install this app',\n    secondary: 'It works better!'\n  })), React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.onOfflineMenuClick\n  }, React.createElement(ListItemIcon, null, React.createElement(CloudDownload, null)), React.createElement(ListItemText, {\n    primary: 'Offline Download'\n  }))), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Divider, null), React.createElement(List, null, React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.onSettingsClick\n  }, React.createElement(ListItemIcon, null, React.createElement(SettingsIcon, null)), React.createElement(ListItemText, {\n    primary: 'App Settings'\n  })), React.createElement(ListItem, {\n    button: true,\n    onClick: actions.onAboutClick\n  }, React.createElement(ListItemIcon, null, React.createElement(InfoIcon, null)), React.createElement(ListItemText, {\n    primary: 'About'\n  })), signedIn ? React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.signOut\n  }, React.createElement(ListItemIcon, null, React.createElement(ExitToAppIcon, null)), React.createElement(ListItemText, {\n    primary: 'Sign Out'\n  })) : React.createElement(ListItem, {\n    button: true,\n    onClick: globalActions.forceSignIn\n  }, React.createElement(ListItemIcon, null, React.createElement(AccountCircleIcon, null)), React.createElement(ListItemText, {\n    primary: 'Sign In'\n  })))));\n};\n\nSideDrawer.propTypes = {\n  open: PropTypes.bool,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func,\n  actions: PropTypes.shape({\n    onDisabledClick: PropTypes.func,\n    onAboutClick: PropTypes.func\n  })\n};\nexport default SideDrawer;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { FeatureDisabled } from '@morphoto/modals';\nimport { AboutApp } from '@morphoto/ui';\nimport SideDrawer from './SideDrawer';\nimport TopBar from './TopBar';\nimport { AppContext, config } from '@morphoto/client-common';\nimport { Typography } from '@material-ui/core';\nvar DIALOGS = {\n  APPLE_WARNING: 'APPLE_WARNING',\n  ABOUTAPP: 'ABOUTAPP'\n};\n\nvar TopBarWrapper = function TopBarWrapper(_ref) {\n  var className = _ref.className,\n      children = _ref.children,\n      topBarProps = _objectWithoutProperties(_ref, [\"className\", \"children\"]);\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device,\n      globalActions = _useContext.globalActions;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      dialogOpen = _useState2[0],\n      setDialogOpen = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      drawerOpen = _useState4[0],\n      setDrawerOpen = _useState4[1];\n\n  var handleQRClick = device.ios ? function () {\n    return setDialogOpen(DIALOGS.APPLE_WARNING);\n  } : globalActions.onQRButtonClick;\n  return React.createElement(React.Fragment, null, React.createElement(TopBar, _extends({}, topBarProps, {\n    children: children,\n    actions: {\n      onQRClickWrapped: handleQRClick,\n      setDrawerOpen: setDrawerOpen\n    }\n  })), React.createElement(SideDrawer, {\n    open: drawerOpen,\n    onClose: function onClose() {\n      return setDrawerOpen(false);\n    },\n    onOpen: function onOpen() {\n      return setDrawerOpen(true);\n    },\n    actions: {\n      onDisabledClick: function onDisabledClick() {\n        return setDialogOpen(DIALOGS.APPLE_WARNING);\n      },\n      onAboutClick: function onAboutClick() {\n        return setDialogOpen(DIALOGS.ABOUTAPP);\n      }\n    }\n  }), device.ios && React.createElement(FeatureDisabled, {\n    open: dialogOpen === DIALOGS.APPLE_WARNING,\n    title: \"iOS Feature Disabled\",\n    message: React.createElement(Typography, {\n      variant: \"body2\",\n      component: \"div\"\n    }, React.createElement(\"p\", null, \"This feature cannot function due to a bug in iOS 12 that prevents \", React.createElement(\"strong\", null, \"direct camera access from progressive web apps\"), \".\"), React.createElement(\"p\", null, \"There is good evidence iOS 13 has things sorted. ETA from Apple is mid-September 2019.\")),\n    onClose: function onClose() {\n      return setDialogOpen(false);\n    }\n  }), React.createElement(AboutApp, {\n    open: dialogOpen === DIALOGS.ABOUTAPP,\n    onClose: function onClose() {\n      return setDialogOpen(false);\n    },\n    version: config.version\n  }));\n};\n\nTopBarWrapper.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.any\n};\nexport default TopBarWrapper;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useRef, useEffect, useState, useContext } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { dates } from '@morphoto/common';\nimport { AppContext } from '@morphoto/client-common';\nvar CHECKINTERVAL = 5000;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      background: 'black',\n      color: 'white',\n      textAlign: 'center'\n    }\n  };\n});\n\nvar OfflineBar = function OfflineBar() {\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      sinceStr = _useState2[0],\n      setSinceStr = _useState2[1];\n\n  var _useContext = useContext(AppContext),\n      online = _useContext.online,\n      signedIn = _useContext.signedIn;\n\n  var timerRef = useRef();\n\n  var calcSinceStr = function calcSinceStr() {\n    var newText = dates.formatDateAgo(online.offlineSince);\n    setSinceStr(newText);\n  };\n\n  var clearTimer = function clearTimer() {\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n      timerRef.current = null;\n    }\n  };\n\n  useEffect(function () {\n    if (online.offlineSince && !timerRef.current) {\n      calcSinceStr();\n      timerRef.current = setInterval(calcSinceStr, CHECKINTERVAL);\n    } else if (!online.offlineSince) clearTimer();\n\n    return function () {\n      clearTimer();\n    };\n  }, [online.offlineSince]);\n  var loggedText = !signedIn ? 'You are not signed in.' : '';\n  var offlineText = !online.isOnline ? \"Offline (\".concat(sinceStr, \")\") : '';\n  if (online.isOnline && signedIn) return null;\n  return React.createElement(Typography, {\n    className: classes.root,\n    variant: \"caption\",\n    component: \"div\"\n  }, loggedText, \" \", offlineText);\n};\n\nexport default OfflineBar;","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useContext } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Container from '@material-ui/core/Container';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Button from '@material-ui/core/Button';\nimport HomeIcon from '@material-ui/icons/HomeOutlined';\nimport MapIcon from '@material-ui/icons/MapOutlined';\nimport SearchIcon from '@material-ui/icons/SearchOutlined';\nimport AddIcon from '@material-ui/icons/Add';\nimport PersonOutline from '@material-ui/icons/PersonOutline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { config, AppContext } from '@morphoto/client-common';\nimport { AddFab } from '@morphoto/ui';\nimport OfflineBar from './OfflineBar';\nvar STATES = config.home.AppStateTypes;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      borderTop: \"2px solid \".concat(theme.palette.secondary.main)\n    },\n    container: {\n      padding: 0,\n      display: 'flex'\n    },\n    toolbar: {\n      color: theme.palette.jet.main,\n      backgroundColor: theme.palette.papayawhip.main\n    },\n    text: {\n      padding: theme.spacing(2, 2, 0)\n    },\n    paper: {\n      paddingBottom: 50\n    },\n    list: {\n      marginBottom: theme.spacing(2)\n    },\n    subheader: {\n      backgroundColor: theme.palette.background.paper\n    },\n    grow: {\n      flexGrow: 1\n    },\n    addFab: {\n      position: 'absolute',\n      bottom: 0,\n      left: '50%',\n      transformOrigin: '0% 100%',\n      transform: 'translateY(-25%) translateX(-50%) translateZ(0)',\n      zIndex: 200\n    },\n    spacer: {\n      width: 40,\n      flexGrow: 1\n    }\n  };\n});\n\nvar BottomBar = function BottomBar(_ref) {\n  var className = _ref.className,\n      domain = _ref.domain;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      globalActions = _useContext.globalActions,\n      signedIn = _useContext.signedIn;\n\n  return React.createElement(AppBar, {\n    position: \"static\",\n    className: classNames(classes.root, className)\n  }, React.createElement(Toolbar, {\n    className: classes.toolbar\n  }, React.createElement(Container, {\n    maxWidth: \"sm\",\n    className: classes.container\n  }, signedIn && React.createElement(Button, {\n    edge: \"start\",\n    className: classes.grow,\n    color: domain === STATES.FEED ? 'secondary' : 'inherit',\n    onClick: domain !== STATES.FEED ? function () {\n      return globalActions.setHomeState(STATES.FEED);\n    } : function () {}\n  }, React.createElement(HomeIcon, null)), React.createElement(Button, {\n    edge: \"start\",\n    className: classes.grow,\n    color: domain === STATES.MAP ? 'secondary' : 'inherit',\n    onClick: domain !== STATES.MAP ? function () {\n      return globalActions.setHomeState(STATES.MAP);\n    } : function () {}\n  }, React.createElement(MapIcon, null)), signedIn && React.createElement(AddFab, {\n    className: classes.addFab,\n    onCameraClick: globalActions.onCameraClick,\n    onLibraryClick: globalActions.onLibraryClick\n  }, React.createElement(AddIcon, null)), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    color: domain === STATES.SEARCH ? 'secondary' : 'inherit',\n    className: classes.grow,\n    onClick: domain !== STATES.SEARCH ? function () {\n      return globalActions.setHomeState(STATES.SEARCH);\n    } : function () {}\n  }, React.createElement(SearchIcon, null)), signedIn && React.createElement(Button, {\n    edge: \"end\",\n    color: domain === STATES.PROFILE ? 'secondary' : 'inherit',\n    className: classes.grow,\n    onClick: domain !== STATES.PROFILE ? function () {\n      return globalActions.setHomeState(STATES.PROFILE);\n    } : function () {}\n  }, React.createElement(PersonOutline, null)))));\n};\n\nBottomBar.propTypes = {\n  className: PropTypes.string,\n  domain: PropTypes.string,\n  signedIn: PropTypes.bool\n};\nexport default BottomBar;\nexport var BottomBarCosmosWrapper = function BottomBarCosmosWrapper(props) {\n  var classes = useWrapperStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(OfflineBar, _extends({}, props, {\n    offlineSince: Date.now() - 3600000\n  })), React.createElement(CssBaseline, null), \" \", React.createElement(Paper, {\n    className: classes.paper\n  }, React.createElement(Typography, {\n    variant: \"h5\"\n  }, \"This is a dummy component.\")), React.createElement(BottomBar, props));\n};\n\nvar wrapperStyle = function wrapperStyle(theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    paper: {\n      flexGrow: 1\n    }\n  };\n};\n\nvar useWrapperStyles = makeStyles(wrapperStyle);","export { default as TopBar } from './TopBar';\nexport { default as TopBarWrapper } from './TopBarWrapper';\nexport { default as BottomBar } from './BottomBar';\nexport { default as OfflineBar } from './OfflineBar';\nexport { default as SideDrawer } from './SideDrawer';","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Chip from '@material-ui/core/Chip';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nexport var tagChips = {\n  height: 20\n};\n\nvar style = function style(theme) {\n  return {\n    root: {\n      fontSize: '0.6em',\n      height: tagChips.height,\n      marginRight: theme.spacing(1) / 2,\n      marginTop: theme.spacing(1) / 2\n    },\n    deleteIcon: {\n      width: tagChips.height - 1,\n      height: tagChips.height - 1\n    },\n    chipAvatar: {\n      width: tagChips.height,\n      height: tagChips.height\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar TagChip = function TagChip(_ref) {\n  var edit = _ref.edit,\n      tag = _ref.tag,\n      color = _ref.color,\n      onDelete = _ref.onDelete,\n      props = _objectWithoutProperties(_ref, [\"edit\", \"tag\", \"color\", \"onDelete\"]);\n\n  var classes = useStyles();\n  var theme = useTheme();\n  return React.createElement(Chip, _extends({\n    style: {\n      background: color || null,\n      color: color ? \"\".concat(theme.palette.getContrastText(color)) : null\n    },\n    label: tag.label,\n    data: tag.id,\n    onDelete: edit ? function () {\n      return onDelete(tag);\n    } : null,\n    deleteIcon: React.createElement(CancelIcon, {\n      className: classes.deleteIcon,\n      onClick: function onClick(e) {\n        console.log('this click');\n      },\n      style: {\n        opacity: 0.5,\n        color: color ? \"\".concat(theme.palette.getContrastText(color)) : null\n      }\n    }),\n    className: classes.root\n  }, props));\n};\n\nTagChip.propTypes = {\n  color: PropTypes.string.isRequired,\n  edit: PropTypes.bool,\n  tag: PropTypes.object.isRequired,\n  onDelete: PropTypes.func\n};\nexport default TagChip;","export default (function (theme) {\n  return {\n    root: {\n      width: '100%'\n    },\n    tagContainer: {},\n    formControl: {},\n    singleValue: {\n      fontSize: 16\n    },\n    valueContainer: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      flex: 1,\n      alignItems: 'center',\n      overflow: 'hidden'\n    },\n    paper: {}\n  };\n});","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Select from 'react-select';\nimport CreatableSelect from 'react-select/lib/Creatable';\nimport TagChip from './TagChip';\nimport style from './TagControl.style';\nvar useStyles = makeStyles(style);\n\nvar TagControl = function TagControl(_ref) {\n  var tags = _ref.tags,\n      onChange = _ref.onChange,\n      hint = _ref.hint,\n      tagConfig = _ref.tagConfig,\n      className = _ref.className;\n  var classes = useStyles();\n\n  var onSelectChange = function onSelectChange(inputValue, _ref2) {\n    var action = _ref2.action,\n        removedValue = _ref2.removedValue,\n        option = _ref2.option;\n    onChange(inputValue.map(function (iv) {\n      return {\n        typeId: tagConfig.id,\n        label: iv.label,\n        xyCoords: null\n      };\n    }));\n  };\n\n  var MultiValue = function MultiValue(_ref3) {\n    var removeProps = _ref3.removeProps,\n        innerProps = _ref3.innerProps,\n        data = _ref3.data,\n        props = _objectWithoutProperties(_ref3, [\"removeProps\", \"innerProps\", \"data\"]);\n\n    return React.createElement(TagChip, {\n      tag: data,\n      onDelete: function onDelete(e) {\n        removeProps.onClick();\n      },\n      color: tagConfig.color,\n      edit: true\n    });\n  };\n\n  MultiValue.propTypes = {\n    removeProps: PropTypes.any,\n    innerProps: PropTypes.any,\n    data: PropTypes.any\n  };\n  var tagValues = tags.filter(function (tag) {\n    return tag.typeId === tagConfig.id && !tag.coords;\n  });\n  var selectOptions = tagValues.map(function (val) {\n    return {\n      label: val.label,\n      value: val.val\n    };\n  });\n  var remainingTags = tagConfig.values.filter(function (val) {\n    return tagValues.map(function (t) {\n      return t.label;\n    }).indexOf(val) === -1;\n  }).map(function (val) {\n    return {\n      label: val,\n      value: val\n    };\n  });\n  console.log('TAG DEBUG', {\n    tags: tags,\n    tagConfig: tagConfig,\n    tagValues: tagValues,\n    selectOptions: selectOptions,\n    remainingTags: remainingTags\n  });\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    variant: \"overline\",\n    className: classes.fieldTitle\n  }, tagConfig.label), !tagConfig.allowAdditions && React.createElement(Select, {\n    options: remainingTags,\n    classes: classes,\n    isFocused: true,\n    components: {},\n    deleteRemoves: true,\n    value: selectOptions,\n    isClearable: false,\n    onChange: onSelectChange,\n    placeholder: \"Select Tags\",\n    isMulti: true,\n    isSearchable: true\n  }), tagConfig.allowAdditions && React.createElement(CreatableSelect, {\n    options: remainingTags,\n    classes: classes,\n    isFocused: true,\n    deleteRemoves: true,\n    components: {},\n    value: selectOptions,\n    isClearable: false,\n    onChange: onSelectChange,\n    placeholder: \"Select Tags\",\n    isMulti: true,\n    isSearchable: true\n  }), hint && React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.hint\n  }, hint));\n};\n\nTagControl.propTypes = {\n  className: PropTypes.string,\n  hint: PropTypes.string,\n  tags: PropTypes.array,\n  onChange: PropTypes.func.isRequired,\n  tagConfig: PropTypes.object\n};\nexport default TagControl;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Typography from '@material-ui/core/Typography';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TagControl from './TagControl';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    dlgContent: {},\n    title: {\n      border: \"1px solid \".concat(theme.palette.grey[200]),\n      background: theme.palette.grey[100],\n      width: '100%',\n      margin: 0,\n      display: 'flex',\n      padding: theme.spacing(2)\n    },\n    dlgTitle: {\n      flexGrow: 1\n    },\n    closeButton: {\n      padding: 0,\n      alignSelf: 'flex-start'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar TagEdit = function TagEdit(_ref) {\n  var open = _ref.open,\n      title = _ref.title,\n      onOk = _ref.onOk,\n      onCancel = _ref.onCancel,\n      tags = _ref.tags,\n      tagConfig = _ref.tagConfig;\n  var classes = useStyles();\n\n  var _useState = useState(tags),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  return React.createElement(Dialog, {\n    className: classes.root,\n    scroll: \"paper\",\n    fullScreen: true,\n    open: open,\n    onClose: function onClose() {\n      return onOk(value);\n    }\n  }, React.createElement(DialogTitle, {\n    className: classes.title,\n    disableTypography: true\n  }, React.createElement(Typography, {\n    className: classes.dlgTitle\n  }, title), React.createElement(IconButton, {\n    className: classes.closeButton,\n    onClick: onCancel\n  }, React.createElement(CloseIcon, null))), React.createElement(DialogContent, {\n    className: classes.dlgContent\n  }, React.createElement(TagControl, {\n    className: classes.field,\n    tags: value,\n    tagConfig: tagConfig,\n    onChange: setValue\n  })), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: onCancel\n  }, \"Cancel\"), React.createElement(\"div\", {\n    style: {\n      flexGrow: 1\n    }\n  }), React.createElement(Button, {\n    onClick: function onClick() {\n      return setValue(tags);\n    }\n  }, \"Reset\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk(value);\n    }\n  }, \"Ok\")));\n};\n\nTagEdit.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string,\n  onOk: PropTypes.func,\n  onCancel: PropTypes.func,\n  tags: PropTypes.array.isRequired,\n  tagConfig: PropTypes.object.isRequired\n};\nexport default TagEdit;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TagChip from './TagChip';\nimport style from './TagControl.style';\nvar useStyles = makeStyles(style);\n\nvar TagControl = function TagControl(_ref) {\n  var tags = _ref.tags,\n      label = _ref.label,\n      tagConfig = _ref.tagConfig,\n      className = _ref.className;\n  var classes = useStyles();\n  var tagValues = tags.filter(function (tag) {\n    return tag.typeId === tagConfig.id && !tag.coords;\n  });\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    variant: \"overline\",\n    className: classes.fieldTitle\n  }, tagConfig.label), React.createElement(\"div\", {\n    className: classes.tagContainer\n  }, tagValues.map(function (tag, idx) {\n    return React.createElement(TagChip, {\n      tag: tag,\n      key: \"tagchip\".concat(idx),\n      color: tagConfig.color\n    });\n  })));\n};\n\nTagControl.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.string,\n  tags: PropTypes.array,\n  tagConfig: PropTypes.object\n};\nexport default TagControl;","var tagChips = {\n  height: 20\n};\nexport default (function (theme) {\n  return {\n    xyTagChip: {\n      cursor: 'pointer',\n      color: 'white',\n      fontSize: '0.6em',\n      background: '#444444',\n      height: tagChips.height,\n      position: 'absolute',\n      left: -tagChips.height / 2,\n      top: -tagChips.height / 2\n    },\n    editing: {},\n    reversedChip: {\n      flexDirection: 'row-reverse',\n      left: 'unset',\n      right: -tagChips.height / 2\n    },\n    deleteIcon: {\n      width: tagChips.height - 1,\n      height: tagChips.height - 1\n    },\n    chipAvatarIcon: {\n      color: 'white',\n      width: tagChips.height - 4,\n      height: tagChips.height - 4\n    },\n    chipAvatar: {\n      background: 'inherit',\n      width: tagChips.height,\n      height: tagChips.height\n    },\n    reversedDelete: {\n      margin: \"0 -\".concat(tagChips.height / 8, \"px 0 \").concat(tagChips.height / 8, \"px\")\n    },\n    chipBucket: {\n      width: 1,\n      height: 1,\n      display: 'flex',\n      flexDirection: 'row',\n      position: 'absolute'\n    },\n    reversedChipBucket: {\n      flexDirection: 'row-reverse'\n    }\n  };\n});","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Draggable from 'react-draggable';\nimport Chip from '@material-ui/core/Chip';\nimport Avatar from '@material-ui/core/Avatar';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport MyLocation from '@material-ui/icons/MyLocation';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport style from './XYTagChip.style';\nvar useStyles = makeStyles(style);\n\nvar XYTagChip = function XYTagChip(_ref) {\n  var color = _ref.color,\n      edit = _ref.edit,\n      tag = _ref.tag,\n      newSize = _ref.newSize,\n      onTagDragOver = _ref.onTagDragOver,\n      onTagDragStop = _ref.onTagDragStop,\n      onNewTag = _ref.onNewTag,\n      onTagDelete = _ref.onTagDelete,\n      props = _objectWithoutProperties(_ref, [\"color\", \"edit\", \"tag\", \"newSize\", \"onTagDragOver\", \"onTagDragStop\", \"onNewTag\", \"onTagDelete\"]);\n\n  var isReversed = tag.relCoords.x > newSize.newWidth / 2;\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var stopBadness = function stopBadness(e) {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  var handleDrag = function handleDrag(e, data) {\n    stopBadness(e);\n    onTagDragOver(data, tag);\n  };\n\n  var handleStopDrag = function handleStopDrag(e, data) {\n    stopBadness(e);\n    onTagDragStop(data, tag);\n  };\n\n  return React.createElement(Draggable, {\n    disabled: !edit,\n    bounds: {\n      left: 10,\n      top: 10,\n      right: newSize.newWidth - 10,\n      bottom: newSize.newHeight - 10\n    },\n    position: {\n      x: tag.relCoords.x,\n      y: tag.relCoords.y\n    },\n    onDrag: handleDrag,\n    onStop: handleStopDrag,\n    onClick: stopBadness\n  }, React.createElement(\"div\", {\n    className: classNames(classes.chipBucket, isReversed && classes.reversedChipBucket)\n  }, React.createElement(Chip, _extends({\n    style: {\n      background: color ? \"\".concat(color, \"!important\") : null,\n      color: color ? \"\".concat(theme.palette.getContrastText(color), \"!important\") : null\n    },\n    color: edit ? 'secondary' : 'default',\n    label: tag.label,\n    data: tag.id,\n    onClick: stopBadness,\n    onDelete: edit ? onTagDelete(tag) : null,\n    deleteIcon: edit ? React.createElement(CancelIcon, {\n      className: classNames(classes.deleteIcon, isReversed && classes.reversedDelete)\n    }) : React.createElement(\"div\", null),\n    className: classNames(classes.xyTagChip, isReversed && classes.reversedChip, edit && classes.editing)\n  }, props, {\n    avatar: React.createElement(Avatar, {\n      className: classNames(classes.chipAvatar, edit && classes.editing)\n    }, React.createElement(MyLocation, {\n      className: classNames(classes.chipAvatarIcon, edit && classes.editing)\n    }))\n  }))));\n};\n\nXYTagChip.propTypes = {\n  color: PropTypes.string,\n  edit: PropTypes.bool,\n  tag: PropTypes.object.isRequired,\n  newSize: PropTypes.object,\n  onTagDragOver: PropTypes.func,\n  onTagDragStop: PropTypes.func,\n  onNewTag: PropTypes.func,\n  onTagDelete: PropTypes.func\n};\nexport default XYTagChip;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Select from 'react-select';\nimport CreatableSelect from 'react-select/lib/Creatable';\nimport style from './XYTagSelect.style';\nvar useStyles = makeStyles(style);\n\nvar XYTagSelect = function XYTagSelect(_ref) {\n  var tagConfig = _ref.tagConfig,\n      onChange = _ref.onChange;\n  var classes = useStyles();\n  var options = tagConfig.values.map(function (tc) {\n    return {\n      label: tc.label,\n      value: tc.id\n    };\n  });\n  console.log('XYTagSelect', tagConfig);\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, !tagConfig.allowAdditions && React.createElement(Select, {\n    options: options,\n    classes: classes,\n    components: {\n      Control: Control,\n      Menu: Menu,\n      NoOptionsMessage: NoOptionsMessage,\n      Option: Option,\n      Placeholder: Placeholder,\n      ValueContainer: ValueContainer\n    },\n    value: null,\n    blurInputOnSelect: true,\n    isClearable: false,\n    onChange: onChange,\n    placeholder: tagConfig.label,\n    isSearchable: true\n  }), tagConfig.allowAdditions && React.createElement(CreatableSelect, {\n    options: options,\n    classes: classes,\n    components: {\n      Control: Control,\n      Menu: Menu,\n      NoOptionsMessage: NoOptionsMessage,\n      Option: Option,\n      Placeholder: Placeholder,\n      ValueContainer: ValueContainer\n    },\n    value: null,\n    isClearable: false,\n    blurInputOnSelect: true,\n    onChange: onChange,\n    placeholder: tagConfig.label,\n    isSearchable: true\n  }));\n};\n\nXYTagSelect.propTypes = {\n  tagConfig: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nexport default XYTagSelect;\n\nfunction Control(props) {\n  return React.createElement(TextField, _extends({\n    fullWidth: true,\n    InputProps: {\n      inputComponent: inputComponent,\n      inputProps: _objectSpread({\n        className: props.selectProps.classes.input,\n        inputRef: props.innerRef,\n        children: props.children\n      }, props.innerProps)\n    }\n  }, props.selectProps.textFieldProps));\n}\n\nvar NoOptionsMessage = function NoOptionsMessage(_ref2) {\n  var innerProps = _ref2.innerProps,\n      selectProps = _ref2.selectProps,\n      children = _ref2.children;\n  return React.createElement(Typography, _extends({\n    color: \"textSecondary\",\n    className: selectProps.classes.noOptionsMessage\n  }, innerProps), children);\n};\n\nvar Menu = function Menu(_ref3) {\n  var selectProps = _ref3.selectProps,\n      innerProps = _ref3.innerProps,\n      children = _ref3.children;\n  return React.createElement(Paper, _extends({\n    square: true,\n    className: selectProps.classes.paper\n  }, innerProps), children);\n};\n\nvar inputComponent = function inputComponent(_ref4) {\n  var inputRef = _ref4.inputRef,\n      props = _objectWithoutProperties(_ref4, [\"inputRef\"]);\n\n  return React.createElement(\"div\", _extends({\n    ref: inputRef\n  }, props));\n};\n\nvar Placeholder = function Placeholder(props) {\n  return React.createElement(Typography, _extends({\n    color: \"textSecondary\",\n    className: props.selectProps.classes.placeholder\n  }, props.innerProps), props.children);\n};\n\nvar Option = function Option(_ref5) {\n  var innerRef = _ref5.innerRef,\n      isFocused = _ref5.isFocused,\n      isSelected = _ref5.isSelected,\n      innerProps = _ref5.innerProps,\n      children = _ref5.children;\n  return React.createElement(MenuItem, _extends({\n    buttonRef: innerRef,\n    selected: isFocused,\n    component: \"div\",\n    style: {\n      fontWeight: isSelected ? 500 : 400\n    }\n  }, innerProps), children);\n};\n\nvar ValueContainer = function ValueContainer(_ref6) {\n  var selectProps = _ref6.selectProps,\n      children = _ref6.children;\n  return React.createElement(\"div\", {\n    className: selectProps.classes.valueContainer\n  }, children);\n};\n\nValueContainer.propTypes = {\n  selectProps: PropTypes.object.isRequired,\n  children: PropTypes.any\n};","export default (function (theme) {\n  return {\n    root: {\n      width: '100%'\n    },\n    noOptionsMessage: {\n      padding: \"\".concat(theme.spacing(1), \"px \").concat(theme.spacing(1) * 2, \"px\")\n    },\n    singleValue: {\n      fontSize: 16\n    },\n    placeholder: {\n      position: 'absolute',\n      left: 2,\n      fontSize: 16\n    },\n    input: {\n      display: 'flex',\n      padding: 0\n    },\n    valueContainer: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      flex: 1,\n      alignItems: 'center',\n      overflow: 'hidden'\n    },\n    paper: {\n      position: 'absolute',\n      zIndex: 100,\n      marginTop: theme.spacing(1),\n      left: 0,\n      right: 0\n    }\n  };\n});","export default (function (theme) {\n  return {\n    root: {\n      overflow: 'visible'\n    },\n    header: {\n      padding: theme.spacing(1) * 2\n    },\n    listItem: {\n      flexDirection: 'column'\n    },\n    dlgBody: {\n      paddingLeft: theme.spacing(1) * 2,\n      paddingRight: theme.spacing(1) * 2,\n      paddingBottom: theme.spacing(1) * 2\n    },\n    closeButton: {\n      position: 'absolute',\n      right: theme.spacing(1),\n      top: theme.spacing(1),\n      color: theme.palette.grey[500]\n    }\n  };\n});","import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppContext } from '@morphoto/client-common';\nimport XYTagSelect from './XYTagSelect';\nimport style from './XYTagChooser.style';\nvar useStyles = makeStyles(style);\n\nvar XYTagChooser = function XYTagChooser(_ref) {\n  var coords = _ref.coords,\n      open = _ref.open,\n      onNewTag = _ref.onNewTag,\n      _onClose = _ref.onClose;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      tagConfig = _useContext.tagConfig;\n\n  var xyTags = tagConfig.filter(function (t) {\n    return t.allowXY;\n  });\n  if (!coords) return null;\n  return React.createElement(Dialog, {\n    open: open,\n    scroll: \"paper\",\n    fullScreen: true,\n    classes: {\n      paperScrollPaper: classes.root\n    },\n    onClose: function onClose() {\n      return _onClose();\n    },\n    \"aria-labelledby\": \"simple-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"simple-dialog-title\",\n    className: classes.header\n  }, \"New Tag:\", React.createElement(IconButton, {\n    className: classes.closeButton,\n    onClick: _onClose\n  }, React.createElement(CloseIcon, null))), React.createElement(\"div\", {\n    className: classes.dlgBody\n  }, xyTags.length > 1 && React.createElement(Typography, {\n    variant: \"caption\"\n  }, \"What kind of tag would you like to create?\"), xyTags.map(function (tagType, idx) {\n    return React.createElement(\"div\", {\n      className: classes.listItem,\n      key: \"tagSelect\".concat(idx)\n    }, React.createElement(XYTagSelect, {\n      tagConfig: tagType,\n      onChange: onNewTag(coords, tagType)\n    }));\n  })));\n};\n\nXYTagChooser.propTypes = {\n  open: PropTypes.bool.isRequired,\n  coords: PropTypes.object,\n  onClose: PropTypes.func.isRequired,\n  onNewTag: PropTypes.func.isRequired\n};\nexport default XYTagChooser;","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport { AppContext } from '@morphoto/client-common';\nimport XYTagChooser from './XYTagChooser';\nimport { Tags } from '@morphoto/common';\n\nvar useXYTags = function useXYTags(photo, newSize, onChange, setResizeActive) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isDragging = _useState2[0],\n      setIsDragging = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      newTagDialog = _useState4[0],\n      setNewTagDialog = _useState4[1];\n\n  var _useContext = useContext(AppContext),\n      tagConfig = _useContext.tagConfig;\n\n  var tagClass = new Tags(tagConfig, photo.tags);\n\n  var onNewTag = function onNewTag(coords, tagType) {\n    return function (_ref) {\n      var value = _ref.value,\n          isNew = _ref.__isNew__;\n      var addTag = isNew ? tagClass.createNewXYTagObj(value, tagType.id, coords) : tagClass.createExistingXYTagObj(value, tagType.id, coords);\n      setNewTagDialog(null);\n      onChange(_objectSpread({}, photo, {\n        tags: [].concat(_toConsumableArray(photo.tags), [addTag])\n      }));\n    };\n  };\n\n  var onTagDelete = function onTagDelete(tag) {\n    return function () {\n      var tags = photo.tags.filter(function (oldTag) {\n        return oldTag.label !== tag.label;\n      });\n      onChange(_objectSpread({}, photo, {\n        tags: tags\n      }));\n    };\n  };\n\n  var onAddTagTrigger = function onAddTagTrigger(e) {\n    if (!newTagDialog) {\n      setResizeActive(false);\n      setNewTagDialog({\n        x: parseInt(e.pageX - (window.innerWidth - newSize.newWidth) / 2 * newSize.multiplier, 10),\n        y: parseInt(e.pageY - (window.innerHeight - newSize.newHeight) / 2 * newSize.multiplier, 10)\n      });\n    }\n  };\n\n  var updateTagLocation = function updateTagLocation(_ref2, tag) {\n    var x = _ref2.x,\n        y = _ref2.y;\n    var newTags = photo.tags.map(function (oldTag) {\n      if (oldTag.label !== tag.label) return oldTag;else {\n        var newX = parseInt(x / newSize.multiplier, 10);\n        var newY = parseInt(y / newSize.multiplier, 10);\n        return _objectSpread({}, oldTag, {\n          coords: {\n            x: newX,\n            y: newY\n          }\n        });\n      }\n    });\n    return newTags;\n  };\n\n  var onTagDragStop = function onTagDragStop(coords, tag) {\n    var tags = updateTagLocation(coords, tag);\n    setIsDragging(false);\n    onChange(_objectSpread({}, photo, {\n      tags: tags\n    }));\n  };\n\n  var onTagDragOver = function onTagDragOver(coords, tag) {\n    updateTagLocation(coords, tag);\n    setIsDragging(true);\n  };\n\n  var TagChooser = function TagChooser() {\n    return React.createElement(XYTagChooser, {\n      open: !isDragging && Boolean(newTagDialog),\n      coords: newTagDialog,\n      onNewTag: onNewTag,\n      onClose: function onClose() {\n        setNewTagDialog(null);\n        setResizeActive(true);\n      }\n    });\n  };\n\n  return {\n    onNewTag: onNewTag,\n    onTagDelete: onTagDelete,\n    onAddTagTrigger: onAddTagTrigger,\n    onTagDragOver: onTagDragOver,\n    onTagDragStop: onTagDragStop,\n    TagChooser: TagChooser,\n    getRelXYTags: tagClass.getRelXYTags\n  };\n};\n\nexport default useXYTags;","export { default as TagChip } from './TagChip';\nexport { default as TagControl } from './TagControl';\nexport { default as TagEdit } from './TagEdit';\nexport { default as TagView } from './TagView';\nexport { default as XYTagChip } from './XYTagChip';\nexport { default as XYTagChooser } from './XYTagChooser';\nexport { default as XYTagSelect } from './XYTagSelect';\nexport { default as useXYTags } from './useXYTags';","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState, useRef, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\n\nvar LoadFakeData = function LoadFakeData(_ref) {\n  var children = _ref.children,\n      delay = _ref.delay,\n      props = _objectWithoutProperties(_ref, [\"children\", \"delay\"]);\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      mockData = _useState2[0],\n      setData = _useState2[1];\n\n  var dataRef = useRef();\n  dataRef.current = mockData;\n  useEffect(function () {\n    var dirName = process.env.PUBLIC_URL.split('/').filter(function (d) {\n      return d.length > 0;\n    });\n    var dirPath = dirName.length === 0 ? 'data' : \"\".concat(dirName[0], \"/data\");\n    var finalPath = window.location.protocol + '//' + window.location.host + '/' + dirPath;\n    console.log('PATH', {\n      finalPath: finalPath,\n      dirName: dirName,\n      protocol: window.location.protocol,\n      host: window.location.host\n    });\n    Object.keys(props).forEach(function (key) {\n      if (dataRef.current && !dataRef.current[key]) {\n        axios(\"\".concat(finalPath, \"/\").concat(props[key])).then(function (result) {\n          if (delay) {\n            console.log('LoadFakeData::Start loading...');\n            setTimeout(function () {\n              console.log('LoadFakeData::Loading done...');\n              setData(_objectSpread({}, dataRef.current, _defineProperty({}, key, result.data)));\n            }, delay);\n          } else setData(_objectSpread({}, dataRef.current, _defineProperty({}, key, result.data)));\n        }).catch(function (err) {\n          console.error('LoadFakeData::I AM AN ERROR', err);\n        });\n      }\n    });\n  }, []);\n  var loaded = Object.keys(mockData).length;\n  var loading = Object.keys(props).length;\n\n  var context = mockData.context,\n      mockProps = _objectWithoutProperties(mockData, [\"context\"]);\n\n  var finalData = loaded !== loading ? {} : mockProps;\n  var finalRender = useMemo(function () {\n    return React.cloneElement(children, _objectSpread({}, children.props, {}, finalData));\n  }, [mockData]);\n  console.log('LoadFakeData::finalData', finalData);\n  return finalRender;\n};\n\nLoadFakeData.propTypes = {\n  children: PropTypes.node.isRequired,\n  delay: PropTypes.number\n};\nexport default LoadFakeData;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nvar withContext = function withContext(ContextObj) {\n  var Inner = function Inner(_ref) {\n    var children = _ref.children,\n        props = _objectWithoutProperties(_ref, [\"children\"]);\n\n    return React.createElement(ContextObj.Provider, {\n      value: props\n    }, children);\n  };\n\n  Inner.propTypes = {\n    children: PropTypes.any.isRequired\n  };\n};\n\nexport default withContext;","import { useRef, useEffect } from 'react';\n\nvar useAuthCommon = function useAuthCommon() {\n  var containerRef = useRef();\n\n  var handleKeyPress = function handleKeyPress(event) {\n    if (event.key === 'Enter') {\n      if (containerRef.current) {\n        try {\n          var found = containerRef.current.getElementsByClassName('enterAction');\n          if (found && found[0]) found[0].click();\n        } catch (e) {\n          console.error('useAuthCommon::handleKeyPress', e);\n        }\n      }\n    }\n  };\n\n  useEffect(function () {\n    if (containerRef.current) {\n      try {\n        document.addEventListener('keypress', handleKeyPress, false);\n      } catch (e) {\n        console.error('useAuthCommon::useEffect', e);\n      }\n\n      return function () {\n        return document.removeEventListener('keypress', handleKeyPress, false);\n      };\n    }\n  }, []);\n  return containerRef;\n};\n\nexport default useAuthCommon;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport useAuthCommon from './useAuthCommon';\nimport { AppLogo } from '@morphoto/icons';\nimport { config } from '@morphoto/client-common';\nimport { ThemeProvider } from '@material-ui/styles';\nimport themes from '@morphoto/themes';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%'\n    },\n    bgSwoosh: {\n      width: '100%',\n      height: '100%',\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: 0\n    },\n    loading: {\n      animation: '$loadingSpin 4s linear infinite, $loadingFade 6s infinite'\n    },\n    '@keyframes loadingSpin': {\n      'from': {\n        transform: 'rotate(0deg) translateY(-50%) translateX(-50%)'\n      },\n      'to': {\n        transform: 'rotate(360deg) translateY(-50%) translateX(-50%)'\n      }\n    },\n    '@keyframes loadingFade': {\n      '0%': {\n        opacity: 0.1\n      },\n      '50%': {\n        opacity: 1\n      },\n      '100%': {\n        opacity: 0.1\n      }\n    },\n    spacer: {\n      flex: '1 1 5%'\n    },\n    logoContainer: {\n      overflow: 'hidden',\n      position: 'relative',\n      flex: '1 1 40%',\n      width: '100%',\n      minHeight: 90\n    },\n    logo: {\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      transformOrigin: '0% 0%',\n      transform: 'translateY(-50%) translateX(-50%)',\n      width: '90%',\n      height: '90%'\n    },\n    inner: {\n      margin: '0 auto',\n      width: '100%',\n      height: '100%',\n      minWidth: 200,\n      maxWidth: 350,\n      display: 'flex',\n      flexDirection: 'column',\n      textAlign: 'center'\n    }\n  };\n});\n\nvar AuthContainer = function AuthContainer(_ref) {\n  var children = _ref.children,\n      loading = _ref.loading;\n  var containerRef = useAuthCommon();\n  var classes = useStyles();\n  return React.createElement(ThemeProvider, {\n    theme: themes.login\n  }, React.createElement(\"div\", {\n    ref: containerRef,\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(\"div\", {\n    className: classes.inner\n  }, React.createElement(\"div\", {\n    className: classes.logoContainer\n  }, React.createElement(AppLogo, {\n    className: classNames(classes.logo, loading ? classes.loading : null)\n  })), React.createElement(Typography, {\n    component: \"div\",\n    variant: \"h5\"\n  }, \"MorPhoto\"), React.createElement(Typography, {\n    component: \"div\",\n    variant: \"caption\"\n  }, \"Version:  \", config.version, \" \", React.createElement(\"em\", null, \"BETA\")), children, React.createElement(\"div\", {\n    className: classes.spacer\n  }))));\n};\n\nAuthContainer.propTypes = {\n  children: PropTypes.any,\n  loading: PropTypes.bool\n};\nexport default AuthContainer;","export default (function (theme) {\n  return {\n    root: {},\n    spacer: {\n      flexGrow: 1\n    },\n    forgotPassword: {\n      width: '100%',\n      textAlign: 'right'\n    },\n    switch: {},\n    switchButton: {\n      flexGrow: 1,\n      '&:last-child': {\n        borderRadius: 0\n      },\n      '&:first-child': {\n        borderRadius: 0\n      }\n    },\n    phoneNumInner: {\n      marginTop: theme.spacing(1),\n      display: 'flex'\n    },\n    phoneNumDropdown: {\n      margin: theme.spacing(1),\n      minWidth: 120\n    },\n    warnText: {\n      marginTop: theme.spacing(2),\n      fontStyle: 'italic'\n    },\n    noSignin: {\n      margin: theme.spacing(2, 0),\n      padding: theme.spacing(1),\n      textAlign: 'left',\n      border: \"1px solid #00000022\",\n      background: \"#0000000F\"\n    }\n  };\n});","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport { Typography } from '@material-ui/core';\nvar useStyles = makeStyles(style);\n\nvar SignIn = function SignIn(_ref) {\n  var loading = _ref.loading,\n      handleSignup = _ref.handleSignup,\n      federated = _ref.federated,\n      handleForgotPassword = _ref.handleForgotPassword,\n      handleInputChange = _ref.handleInputChange,\n      handleBeAnonymous = _ref.handleBeAnonymous,\n      handleSignIn = _ref.handleSignIn,\n      props = _objectWithoutProperties(_ref, [\"loading\", \"handleSignup\", \"federated\", \"handleForgotPassword\", \"handleInputChange\", \"handleBeAnonymous\", \"handleSignIn\"]);\n\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, React.createElement(TextField, {\n    id: \"username\",\n    fullWidth: true,\n    key: \"username\",\n    name: \"username\",\n    label: \"Username\",\n    autoFocus: true,\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(TextField, {\n    fullWidth: true,\n    id: \"password\",\n    label: \"Password\",\n    key: \"password\",\n    name: \"password\",\n    type: \"password\",\n    className: classes.textField,\n    autoComplete: \"current-password\",\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    component: \"button\",\n    color: \"secondary\",\n    variant: \"contained\",\n    disabled: loading,\n    onClick: handleSignup\n  }, \"New Account\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    className: \"enterAction\",\n    component: \"button\",\n    color: \"primary\",\n    variant: \"contained\",\n    disabled: loading,\n    onClick: handleSignIn\n  }, \"Sign In\")), React.createElement(Button, {\n    color: \"primary\",\n    onClick: handleForgotPassword,\n    size: \"small\"\n  }, \"Forgot Password\"), React.createElement(\"div\", {\n    className: classes.noSignin\n  }, React.createElement(Button, {\n    fullWidth: true,\n    size: \"small\",\n    variant: 'outlined',\n    onClick: handleBeAnonymous,\n    color: \"inherit\"\n  }, \"Continue without logging in\"), React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.warnText,\n    color: \"textSecondary\",\n    component: \"div\"\n  }, \"You will not be able to add content and many features will be unavailable.\")));\n};\n\nSignIn.propTypes = {\n  loading: PropTypes.bool,\n  federated: PropTypes.object,\n  handleSignup: PropTypes.func.isRequired,\n  handleForgotPassword: PropTypes.func.isRequired,\n  handleInputChange: PropTypes.func.isRequired,\n  handleBeAnonymous: PropTypes.func.isRequired,\n  handleSignIn: PropTypes.func.isRequired\n};\nexport default SignIn;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Chip from '@material-ui/core/Chip';\nimport classNames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { green } from '@material-ui/core/colors';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex'\n    },\n    chipContainer: {\n      flex: '1 1'\n    },\n    chip: {\n      height: theme.spacing(2.5)\n    },\n    label: {\n      padding: theme.spacing(0, 1, 0, 1)\n    },\n    ok: {\n      color: 'white',\n      background: green[500],\n      border: \"1px solid \".concat(green[500])\n    },\n    bad: {\n      color: theme.palette.error.main,\n      background: 'transparent',\n      border: \"1px solid \".concat(theme.palette.error.main)\n    }\n  };\n});\n\nvar PasswordHelper = function PasswordHelper(_ref) {\n  var pword = _ref.pword;\n  var classes = useStyles();\n  var hasUpper = pword ? !!pword.match(/[A-Z]/) : false;\n  var hasLower = pword ? !!pword.match(/[a-z]/) : false;\n  var hasNum = pword ? !!pword.match(/[0-9]/) : false;\n  var hasSpecial = pword ? !!pword.match(/[!@#$%^&*(),.?'\":;{}\\[\\]\\-_=+|/\\\\`~<>]/) : false;\n  var enoughChars = pword ? pword.length >= 8 : false;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(SpecialChip, {\n    ok: enoughChars,\n    label: \"8+\"\n  }), React.createElement(SpecialChip, {\n    ok: hasUpper,\n    label: \"A-Z\"\n  }), React.createElement(SpecialChip, {\n    ok: hasLower,\n    label: \"a-z\"\n  }), React.createElement(SpecialChip, {\n    ok: hasNum,\n    label: \"0-9\"\n  }), React.createElement(SpecialChip, {\n    ok: hasSpecial,\n    label: \"!@#$%^&*,.?\"\n  }));\n};\n\nPasswordHelper.propTypes = {\n  pword: PropTypes.string\n};\nexport default PasswordHelper;\n\nvar SpecialChip = function SpecialChip(_ref2) {\n  var ok = _ref2.ok,\n      props = _objectWithoutProperties(_ref2, [\"ok\"]);\n\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.chipContainer\n  }, React.createElement(Chip, _extends({\n    classes: {\n      root: classNames(classes.chip, ok ? classes.ok : classes.bad),\n      label: classes.label\n    }\n  }, props)));\n};\n\nSpecialChip.propTypes = {\n  ok: PropTypes.bool\n};","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from '@material-ui/core/Select';\nimport PasswordHelper from './PasswordHelper';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nvar useStyles = makeStyles(style);\n\nvar SignUp = function SignUp(_ref) {\n  var handleInputChange = _ref.handleInputChange,\n      signUpFields = _ref.signUpFields,\n      signUpFieldLabels = _ref.signUpFieldLabels,\n      signUpFieldPlaceholders = _ref.signUpFieldPlaceholders,\n      handleSignup = _ref.handleSignup,\n      handleBack = _ref.handleBack,\n      countryDialCodes = _ref.countryDialCodes,\n      defaultDialCode = _ref.defaultDialCode,\n      props = _objectWithoutProperties(_ref, [\"handleInputChange\", \"signUpFields\", \"signUpFieldLabels\", \"signUpFieldPlaceholders\", \"handleSignup\", \"handleBack\", \"countryDialCodes\", \"defaultDialCode\"]);\n\n  var _useState = useState(defaultDialCode),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectVal = _useState2[0],\n      setSelectVal = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      pword = _useState4[0],\n      setPword = _useState4[1];\n\n  var pwordType = function pwordType(event) {\n    setPword(event.target.value);\n    handleInputChange(event);\n  };\n\n  var classes = useStyles();\n\n  var handleDialCodeChange = function handleDialCodeChange(e) {\n    handleInputChange(e);\n    setSelectVal(e.target.value);\n  };\n\n  return React.createElement(React.Fragment, null, signUpFields.map(function (field, idx) {\n    return field.key !== 'phone_number' ? React.createElement(React.Fragment, {\n      key: field.key\n    }, React.createElement(TextField, {\n      fullWidth: true,\n      autoFocus: signUpFields.findIndex(function (f) {\n        return f.key === field.key;\n      }) === 0,\n      type: field.type,\n      name: field.key,\n      placeholder: signUpFieldPlaceholders[idx],\n      label: signUpFieldLabels[idx],\n      className: classes.textField,\n      margin: \"normal\",\n      onChange: field.key === 'password' ? pwordType : handleInputChange\n    }), field.key === 'password' && React.createElement(PasswordHelper, {\n      pword: pword\n    })) : React.createElement(FormControl, {\n      className: classes.phoneNumDropdown,\n      fullWidth: true,\n      key: \"phonenum\"\n    }, React.createElement(InputLabel, {\n      htmlFor: \"dial_code\",\n      shrink: true\n    }, signUpFieldLabels[idx], field.required ? '*' : ''), React.createElement(\"div\", {\n      className: classes.phoneNumInner\n    }, React.createElement(Select, {\n      value: selectVal,\n      onChange: handleDialCodeChange,\n      inputProps: {\n        name: 'dial_code',\n        id: 'dial_code'\n      }\n    }, countryDialCodes.map(function (dialCode) {\n      return React.createElement(\"option\", {\n        key: dialCode,\n        value: dialCode\n      }, dialCode);\n    })), React.createElement(TextField, {\n      placeholder: signUpFieldPlaceholders[idx],\n      type: \"tel\",\n      fullWidth: true,\n      id: \"phone_line_number\",\n      key: \"phone_line_number\",\n      name: \"phone_line_number\",\n      onChange: handleInputChange\n    })));\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    onClick: handleBack\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    className: \"enterAction\",\n    component: \"button\",\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: handleSignup\n  }, \"Create Account\")));\n};\n\nSignUp.propTypes = {\n  handleInputChange: PropTypes.func.isRequired,\n  signUpFields: PropTypes.array.isRequired,\n  signUpFieldLabels: PropTypes.array.isRequired,\n  signUpFieldPlaceholders: PropTypes.array.isRequired,\n  countryDialCodes: PropTypes.array.isRequired,\n  defaultDialCode: PropTypes.string.isRequired,\n  handleSignup: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired\n};\nexport default SignUp;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nvar useStyles = makeStyles(style);\n\nvar ConfirmSignIn = function ConfirmSignIn(_ref) {\n  var handleInputChange = _ref.handleInputChange,\n      handleBack = _ref.handleBack,\n      handleConfirm = _ref.handleConfirm;\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, React.createElement(TextField, {\n    id: \"mfaCode\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"MFA Code\",\n    name: \"code\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\",\n    onClick: handleBack\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    className: \"enterAction\",\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: handleConfirm\n  }, \"Confirm\")));\n};\n\nConfirmSignIn.propTypes = {\n  handleInputChange: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired,\n  handleConfirm: PropTypes.func.isRequired\n};\nexport default ConfirmSignIn;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from '@material-ui/core/Button';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport Typography from '@material-ui/core/Typography';\nimport EmailIcon from '@material-ui/icons/Email';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.main\n    },\n    checkEmailMsgIco: {\n      marginRight: theme.spacing(1)\n    },\n    checkEmailMsgTxt: {\n      textAlign: 'left',\n      flexGrow: 1\n    },\n    checkEmailMsg: {\n      display: 'flex'\n    }\n  };\n});\n\nvar CheckemailMsg = function CheckemailMsg(_ref) {\n  var onResend = _ref.onResend,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'center'\n    },\n    open: open\n  }, React.createElement(SnackbarContent, {\n    className: classes.root,\n    message: React.createElement(\"div\", {\n      className: classes.checkEmailMsg\n    }, React.createElement(EmailIcon, {\n      className: classes.checkEmailMsgIco,\n      color: \"inherit\"\n    }), React.createElement(Typography, {\n      className: classes.checkEmailMsgTxt,\n      color: \"inherit\"\n    }, \"Code Sent Check your email\")),\n    action: onResend && [React.createElement(Button, {\n      key: \"undo\",\n      color: \"secondary\",\n      size: \"small\",\n      variant: \"contained\",\n      onClick: onResend\n    }, \"Resend\")]\n  }));\n};\n\nCheckemailMsg.propTypes = {\n  onResend: PropTypes.func,\n  open: PropTypes.bool\n};\nexport default CheckemailMsg;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport CheckEmailMsg from './CheckemailMsg';\nvar useStyles = makeStyles(style);\n\nvar ConfirmSignUp = function ConfirmSignUp(_ref) {\n  var handleInputChange = _ref.handleInputChange,\n      handleBack = _ref.handleBack,\n      handleResend = _ref.handleResend,\n      handleConfirm = _ref.handleConfirm;\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, React.createElement(TextField, {\n    id: \"username\",\n    fullWidth: true,\n    autoFocus: true,\n    name: \"username\",\n    label: \"Username\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(TextField, {\n    id: \"confirmationCode\",\n    fullWidth: true,\n    name: \"code\",\n    label: \"Confirmation Code\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), React.createElement(Typography, {\n    variant: \"caption\",\n    style: {\n      textAlign: 'left'\n    }\n  }, \"If you can't find it in your inbox be sure to check your spam folder.\"), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    onClick: handleBack\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    className: \"enterAction\",\n    onClick: handleConfirm\n  }, \"Confirm\")), React.createElement(CheckEmailMsg, {\n    open: true,\n    onResend: handleResend\n  }));\n};\n\nConfirmSignUp.propTypes = {\n  handleInputChange: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired,\n  handleResend: PropTypes.func.isRequired,\n  handleConfirm: PropTypes.func.isRequired\n};\nexport default ConfirmSignUp;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Link from '@material-ui/core/Link';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport CheckEmailMsg from './CheckemailMsg';\nvar useStyles = makeStyles(style);\n\nvar ForgotPassword = function ForgotPassword(_ref) {\n  var handleSubmit = _ref.handleSubmit,\n      handleInputChange = _ref.handleInputChange,\n      handleSendCode = _ref.handleSendCode,\n      handleBack = _ref.handleBack;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      sent = _useState2[0],\n      setSent = _useState2[1];\n\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, React.createElement(Typography, null, \"Forgot Password\"), !sent && React.createElement(TextField, {\n    id: \"username\",\n    autoFocus: true,\n    fullWidth: true,\n    label: \"Username\",\n    name: \"username\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), sent && React.createElement(TextField, {\n    id: \"changecode\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"Code\",\n    name: \"code\",\n    className: classes.textField,\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), sent && React.createElement(Typography, {\n    variant: \"caption\",\n    style: {\n      textAlign: 'left'\n    }\n  }, \"If you can't find it in your inbox be sure to check your spam folder.\"), sent && React.createElement(TextField, {\n    id: \"newpassword\",\n    fullWidth: true,\n    label: \"New Password\",\n    className: classes.textField,\n    type: \"password\",\n    name: \"password\",\n    autoComplete: \"current-password\",\n    margin: \"normal\",\n    onChange: handleInputChange\n  }), !sent && React.createElement(Typography, {\n    variant: \"caption\",\n    style: {\n      textAlign: 'left'\n    }\n  }, \"Enter your username and you will be sent an email with a code to reset your password.\"), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    onClick: function onClick() {\n      sent ? setSent(false) : handleBack();\n    }\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), !sent && React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    className: \"enterAction\",\n    onClick: function onClick() {\n      setSent(true);\n      handleSendCode();\n    }\n  }, \"Send Code\"), sent && React.createElement(Button, {\n    className: \"enterAction\",\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: handleSubmit\n  }, \"Submit\")), React.createElement(CheckEmailMsg, {\n    open: sent,\n    onResend: handleSendCode\n  }));\n};\n\nForgotPassword.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n  handleInputChange: PropTypes.func.isRequired,\n  handleSendCode: PropTypes.func.isRequired,\n  handleBack: PropTypes.func.isRequired\n};\nexport default ForgotPassword;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Typography } from '@material-ui/core';\nimport AuthContainer from './AuthContainer';\n\nvar Loading = function Loading(_ref) {\n  var message = _ref.message;\n  return React.createElement(React.Fragment, null, React.createElement(Typography, {\n    variant: \"h3\"\n  }, \"Loading...\"), message && React.createElement(Typography, {\n    variant: \"overline\"\n  }, message));\n};\n\nLoading.propTypes = {\n  message: PropTypes.string\n};\nexport default Loading;\nexport var LoadingWrapped = function LoadingWrapped(props) {\n  return React.createElement(AuthContainer, {\n    loading: true\n  }, React.createElement(Loading, props));\n};","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport PasswordHelper from './PasswordHelper';\nvar useStyles = makeStyles(style);\n\nvar RequireNewPassword = function RequireNewPassword(_ref) {\n  var change = _ref.change,\n      requiredAttributes = _ref.requiredAttributes,\n      placeholders = _ref.placeholders,\n      handleInputChange = _ref.handleInputChange;\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      pword = _useState2[0],\n      setPword = _useState2[1];\n\n  var pwordType = function pwordType(event) {\n    setPword(event.target.value);\n    handleInputChange(event);\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(Typography, null, \"A new password is required\"), React.createElement(TextField, {\n    id: \"newassword\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"New Password\",\n    className: classes.textField,\n    type: \"password\",\n    autoComplete: \"new-password\",\n    margin: \"normal\",\n    onChange: pwordType\n  }), React.createElement(PasswordHelper, {\n    pword: pword\n  }), requiredAttributes.map(function (attribute, idx) {\n    return React.createElement(TextField, {\n      fullWidth: true,\n      key: attribute,\n      name: attribute,\n      className: classes.textField,\n      placeholder: placeholders[idx],\n      type: \"text\",\n      margin: \"normal\",\n      onChange: handleInputChange\n    });\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\"\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: change,\n    className: \"enterAction\"\n  }, \"Change\")));\n};\n\nRequireNewPassword.propTypes = {\n  change: PropTypes.func.isRequired,\n  handleInputChange: PropTypes.func.isRequired,\n  requiredAttributes: PropTypes.array,\n  placeholders: PropTypes.array\n};\nexport default RequireNewPassword;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport PhoneIcon from '@material-ui/icons/Phone';\nimport EmailIcon from '@material-ui/icons/Email';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './auth.style';\nimport CheckEmailMsg from './CheckemailMsg';\nvar useStyles = makeStyles(style);\nvar RADIO = {\n  EMAIL: 0,\n  PHONE: 1\n};\n\nvar VerifyContact = function VerifyContact(_ref) {\n  var onBack = _ref.onBack,\n      hasEmail = _ref.hasEmail,\n      hasPhone = _ref.hasPhone,\n      handleSkip = _ref.handleSkip,\n      handleVerify = _ref.handleVerify,\n      handleSubmit = _ref.handleSubmit,\n      handleInputChange = _ref.handleInputChange;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      sent = _useState2[0],\n      setSent = _useState2[1];\n\n  var _useState3 = useState(RADIO.EMAIL),\n      _useState4 = _slicedToArray(_useState3, 2),\n      radioVal = _useState4[0],\n      setRadioVal = _useState4[1];\n\n  var classes = useStyles();\n  return React.createElement(React.Fragment, null, !sent && React.createElement(React.Fragment, null, React.createElement(Typography, null, \"Verify your Contact\"), React.createElement(Typography, null, \"Account recovery requires verified contact information\"), React.createElement(Tabs, {\n    className: classes.switch,\n    indicatorColor: \"primary\",\n    value: radioVal,\n    onChange: function onChange(e, val) {\n      return setRadioVal(val);\n    },\n    textColor: \"primary\",\n    centered: true\n  }, React.createElement(Tab, {\n    icon: React.createElement(EmailIcon, null),\n    label: \"Email\"\n  }), React.createElement(Tab, {\n    icon: React.createElement(PhoneIcon, null),\n    label: \"Phone\"\n  })), radioVal === RADIO.EMAIL && React.createElement(TextField, {\n    id: \"email\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"Email Address\",\n    className: classes.textField,\n    onChange: handleInputChange,\n    margin: \"normal\"\n  }), radioVal === RADIO.PHONE && React.createElement(TextField, {\n    id: \"phonenum\",\n    fullWidth: true,\n    autoFocus: true,\n    label: \"Phone Number\",\n    className: classes.textField,\n    onChange: handleInputChange,\n    margin: \"normal\"\n  })), sent && React.createElement(TextField, {\n    fullWidth: true,\n    label: \"Code\",\n    className: classes.textField,\n    placeholder: \"Code\",\n    key: \"code\",\n    name: \"code\",\n    autoComplete: \"off\",\n    onChange: handleInputChange,\n    margin: \"normal\"\n  }), sent && React.createElement(TextField, {\n    id: \"newpassword\",\n    fullWidth: true,\n    label: \"New Password\",\n    className: classes.textField,\n    type: \"password\",\n    autoComplete: \"current-password\",\n    margin: \"normal\"\n  }), React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"outlined\",\n    onClick: function onClick() {\n      sent ? setSent(false) : onBack();\n    }\n  }, \"Back\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    className: \"enterAction\",\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: function onClick() {\n      return setSent(true);\n    }\n  }, \"Send Code\")), React.createElement(CheckEmailMsg, {\n    open: sent,\n    onResend: function onResend() {\n      return setSent(true);\n    }\n  }));\n};\n\nVerifyContact.defaultProps = {\n  hasEmail: true\n};\nVerifyContact.propTypes = {\n  onBack: PropTypes.func,\n  hasEmail: PropTypes.bool,\n  hasPhone: PropTypes.bool,\n  handleInputChange: PropTypes.func.isRequired,\n  handleSkip: PropTypes.func.isRequired,\n  handleVerify: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired\n};\nexport default VerifyContact;","export var utils = require('./utils');\nexport var CosmosBlackBackground = require('./CosmosBlackBackground').default;\nexport var MaterialUIWrap = require('./MaterialUIWrap').default;\nexport var LoadFakeData = require('./LoadFakeData').default;\nexport var withContext = require('./withContext').default;","import React from 'react';\nimport AuthContainer from './AuthContainer';\nimport SignIn from './SignIn';\nimport SignUp from './SignUp';\nimport ConfirmSignIn from './ConfirmSignIn';\nimport ConfirmSignUp from './ConfirmSignUp';\nimport ForgotPassword from './ForgotPassword';\nimport Loading, { LoadingWrapped } from './Loading';\nimport RequireNewPassword from './RequireNewPassword';\nimport VerifyContact from './VerifyContact';\nimport { MaterialUIWrap } from '@morphoto/client-mock';\n\nvar wrap = function wrap(Wrapper, props) {\n  return function () {\n    return React.createElement(MaterialUIWrap, {\n      noTheme: true\n    }, React.createElement(AuthContainer, null, Wrapper && React.createElement(Wrapper, props)));\n  };\n};\n\nexport default {\n  'Auth: container': wrap(),\n  'Auth: signIn': wrap(SignIn, {\n    authState: 'signIn',\n    loading: false,\n    federated: {\n      google_client_id: 'garbage'\n    },\n    handleBeAnonymous: function handleBeAnonymous() {\n      return alert('handleBeAnonymous');\n    },\n    handleForgotPassword: function handleForgotPassword() {\n      return alert('Forgot Password');\n    },\n    handleSignup: function handleSignup() {\n      return alert('Goto Signup');\n    },\n    handleInputChange: function handleInputChange() {\n      return console.log('inputchange');\n    },\n    handleSignIn: function handleSignIn() {\n      return alert('Sign In');\n    }\n  }),\n  'Auth: signUp': wrap(SignUp, {\n    handleInputChange: function handleInputChange() {\n      return console.log('inputchange');\n    },\n    signUpFields: [{\n      key: 'keyA',\n      type: 'text',\n      required: true\n    }, {\n      key: 'keyB',\n      type: 'number'\n    }, {\n      key: 'phone_number'\n    }],\n    signUpFieldLabels: ['Label for Text Field A', 'Label for Number Field B', 'Label for Phonenum Field C'],\n    signUpFieldPlaceholders: ['Placeholder for Field A', 'Placeholder for Field B', 'Placeholder for Field C'],\n    handleSignup: function handleSignup() {\n      return alert('Sign Up');\n    },\n    handleBack: function handleBack() {\n      return alert('Back');\n    },\n    countryDialCodes: ['+1', '+999'],\n    defaultDialCode: '+1'\n  }),\n  'Auth: confirmSignIn': wrap(ConfirmSignIn, {\n    handleInputChange: function handleInputChange(data) {\n      return console.log('handleInputChange', data);\n    },\n    handleBack: function handleBack(data) {\n      return console.log('handleBack', data);\n    },\n    handleConfirm: function handleConfirm(data) {\n      return console.log('handleConfirm', data);\n    }\n  }),\n  'Auth: confirmSignUp': wrap(ConfirmSignUp, {\n    handleInputChange: function handleInputChange(data) {\n      return console.log('handleInputChange', data);\n    },\n    handleBack: function handleBack(data) {\n      return console.log('handleBack', data);\n    },\n    handleResend: function handleResend(data) {\n      return console.log('handleResend', data);\n    },\n    handleConfirm: function handleConfirm(data) {\n      return console.log('handleConfirm', data);\n    }\n  }),\n  'Auth: ForgotPassword': wrap(ForgotPassword, {\n    handleSubmit: function handleSubmit(data) {\n      return console.log('handleSubmit', data);\n    },\n    handleInputChange: function handleInputChange(data) {\n      return console.log('handleInputChange', data);\n    },\n    handleSendCode: function handleSendCode(data) {\n      return console.log('handleSendCode', data);\n    },\n    handleBack: function handleBack(data) {\n      return console.log('handleBack', data);\n    }\n  }),\n  'Auth: RequireNewPassword': wrap(RequireNewPassword, {\n    change: function change() {\n      return alert('change');\n    },\n    handleInputChange: function handleInputChange() {\n      return console.log('handleInputChange');\n    },\n    requiredAttributes: ['attribA'],\n    placeholders: ['placeholder for attribA']\n  }),\n  'Auth: Loading': wrap(Loading, {}),\n  'Auth: LoadingWrapped': React.createElement(MaterialUIWrap, {\n    noTheme: true\n  }, React.createElement(LoadingWrapped, {\n    message: \"Something is happening...\"\n  })),\n  'Auth: VerifyContact': wrap(VerifyContact, {\n    hasEmail: true,\n    hasPhone: true\n  })\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport Auth from '@aws-amplify/auth';\nimport { I18n } from '@aws-amplify/core';\nimport countryDialCodes from 'aws-amplify-react/lib/Auth/common/country-dial-codes';\nimport { Authenticator, SignIn as SignInOrig, SignUp as SignUpOrig, ConfirmSignIn as ConfirmSignInOrig, ConfirmSignUp as ConfirmSignUpOrig, RequireNewPassword as RequireNewPasswordOrig, Loading as LoadingOrig, VerifyContact as VerifyContactOrig, ForgotPassword as ForgotPasswordOrig } from 'aws-amplify-react';\nimport CompSignIn from './SignIn';\nimport AuthContainer from './AuthContainer';\nimport CompConfirmSignIn from './ConfirmSignIn';\nimport CompRequireNewPassword from './RequireNewPassword';\nimport CompSignUp from './SignUp';\nimport CompLoading from './Loading';\nimport CompConfirmSignUp from './ConfirmSignUp';\nimport CompForgotPassword from './ForgotPassword';\nimport { config } from '@morphoto/client-common';\nAuth.configure(config.aws);\nvar defaultAuthState = {\n  authState: 'init',\n  authData: {},\n  signedIn: null\n};\nvar signUpConfig = {\n  header: 'My Customized Sign Up',\n  hiddenDefaults: ['username', 'email', 'phone_number', 'password'],\n  defaultCountryCode: '1',\n  signUpFields: [{\n    label: 'My user name',\n    key: 'username',\n    required: true,\n    displayOrder: 1,\n    type: 'string'\n  }, {\n    label: 'Password',\n    key: 'password',\n    required: true,\n    displayOrder: 3,\n    type: 'password'\n  }, {\n    label: 'Email',\n    key: 'email',\n    required: true,\n    displayOrder: 2,\n    type: 'string'\n  }]\n};\n\nvar useAuthentication = function useAuthentication() {\n  var _useState = useState(defaultAuthState),\n      _useState2 = _slicedToArray(_useState, 2),\n      _useState2$ = _useState2[0],\n      authState = _useState2$.authState,\n      authData = _useState2$.authData,\n      signedIn = _useState2$.signedIn,\n      setAuth = _useState2[1];\n\n  var handleAuthStateChange = function handleAuthStateChange(state, data) {\n    setAuth({\n      authState: state,\n      authData: data,\n      signedIn: !state || state.length === 0 ? null : state === 'signedIn' ? true : signedIn\n    });\n  };\n\n  var getCurrentToken =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var currSession;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return Auth.currentSession();\n\n            case 2:\n              currSession = _context.sent;\n              console.log('here', currSession.accessToken);\n              return _context.abrupt(\"return\", currSession && currSession.accessToken ? currSession.accessToken : null);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getCurrentToken() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var signOut = function signOut() {\n    return Auth.signOut().then(function (data) {\n      return console.log(data);\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  };\n\n  var beAnonymous = function beAnonymous() {\n    setAuth({\n      authState: authState,\n      authData: authData,\n      signedIn: false\n    });\n  };\n\n  var authScreen = signedIn ? null : React.createElement(AuthContainer, null, React.createElement(Authenticator, {\n    onStateChange: handleAuthStateChange,\n    hideDefault: true,\n    signUpConfig: signUpConfig\n  }, React.createElement(SignIn, {\n    handleBeAnonymous: beAnonymous\n  }), React.createElement(Loading, {\n    message: \"Logging in\"\n  }), React.createElement(RequireNewPassword, null), React.createElement(ConfirmSignIn, null), React.createElement(ConfirmSignUp, null), React.createElement(VerifyContactOrig, null), React.createElement(ForgotPassword, null), React.createElement(SignUp, {\n    signUpConfig: signUpConfig\n  })));\n  var isGod = false;\n\n  try {\n    isGod = authData.signInUserSession.idToken.payload['cognito:groups'].indexOf('GodUsers') > -1;\n  } catch (e) {}\n\n  return {\n    authState: authState,\n    authData: authData,\n    isGod: isGod,\n    signOut: signOut,\n    getCurrentToken: getCurrentToken,\n    forceSignIn: function forceSignIn() {\n      return setAuth(defaultAuthState);\n    },\n    signedIn: signedIn,\n    authScreen: authScreen\n  };\n};\n\nexport default useAuthentication;\n\nvar SignIn =\n/*#__PURE__*/\nfunction (_SignInOrig) {\n  _inherits(SignIn, _SignInOrig);\n\n  function SignIn() {\n    _classCallCheck(this, SignIn);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SignIn).apply(this, arguments));\n  }\n\n  _createClass(SignIn, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this = this;\n\n      var loading = this.state.loading;\n\n      var newProps = _objectSpread({}, this.props, {\n        loading: loading,\n        handleForgotPassword: function handleForgotPassword() {\n          return _this.changeState('forgotPassword');\n        },\n        handleSignup: function handleSignup() {\n          return _this.changeState('signUp');\n        },\n        handleInputChange: this.handleInputChange,\n        handleSignIn: this.signIn\n      });\n\n      return React.createElement(CompSignIn, newProps);\n    }\n  }]);\n\n  return SignIn;\n}(SignInOrig);\n\nvar SignUp =\n/*#__PURE__*/\nfunction (_SignUpOrig) {\n  _inherits(SignUp, _SignUpOrig);\n\n  function SignUp() {\n    _classCallCheck(this, SignUp);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SignUp).apply(this, arguments));\n  }\n\n  _createClass(SignUp, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this2 = this;\n\n      var hide = this.props.hide;\n\n      if (hide && hide.includes(SignUp)) {\n        return null;\n      }\n\n      if (this.checkCustomSignUpFields()) {\n        this.signUpFields = this.props.signUpConfig.signUpFields;\n      }\n\n      this.sortFields();\n\n      var newProps = _objectSpread({}, this.props, {\n        countryDialCodes: countryDialCodes,\n        defaultDialCode: this.getDefaultDialCode(),\n        handleInputChange: this.handleInputChange,\n        signUpFields: this.signUpFields,\n        signUpFieldLabels: this.signUpFields.map(function (field) {\n          return I18n.get(field.label);\n        }),\n        signUpFieldPlaceholders: this.signUpFields.map(function (field) {\n          return I18n.get(field.placeholder);\n        }),\n        handleSignup: this.signUp,\n        handleBack: function handleBack() {\n          return _this2.changeState('signIn');\n        }\n      });\n\n      return React.createElement(CompSignUp, newProps);\n    }\n  }]);\n\n  return SignUp;\n}(SignUpOrig);\n\nvar ConfirmSignIn =\n/*#__PURE__*/\nfunction (_ConfirmSignInOrig) {\n  _inherits(ConfirmSignIn, _ConfirmSignInOrig);\n\n  function ConfirmSignIn() {\n    _classCallCheck(this, ConfirmSignIn);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ConfirmSignIn).apply(this, arguments));\n  }\n\n  _createClass(ConfirmSignIn, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this3 = this;\n\n      var newProps = _objectSpread({}, this.props, {\n        handleBack: function handleBack() {\n          return _this3.changeState('signIn');\n        },\n        handleInputChange: this.handleInputChange,\n        handleConfirm: this.confirm\n      });\n\n      return React.createElement(CompConfirmSignIn, newProps);\n    }\n  }]);\n\n  return ConfirmSignIn;\n}(ConfirmSignInOrig);\n\nvar ConfirmSignUp =\n/*#__PURE__*/\nfunction (_ConfirmSignUpOrig) {\n  _inherits(ConfirmSignUp, _ConfirmSignUpOrig);\n\n  function ConfirmSignUp() {\n    _classCallCheck(this, ConfirmSignUp);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ConfirmSignUp).apply(this, arguments));\n  }\n\n  _createClass(ConfirmSignUp, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this4 = this;\n\n      var newProps = _objectSpread({}, this.props, {\n        handleBack: function handleBack() {\n          return _this4.changeState('signIn');\n        },\n        handleInputChange: this.handleInputChange,\n        handleConfirm: this.confirm,\n        handleResend: this.resend\n      });\n\n      return React.createElement(CompConfirmSignUp, newProps);\n    }\n  }]);\n\n  return ConfirmSignUp;\n}(ConfirmSignUpOrig);\n\nvar RequireNewPassword =\n/*#__PURE__*/\nfunction (_RequireNewPasswordOr) {\n  _inherits(RequireNewPassword, _RequireNewPasswordOr);\n\n  function RequireNewPassword() {\n    _classCallCheck(this, RequireNewPassword);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(RequireNewPassword).apply(this, arguments));\n  }\n\n  _createClass(RequireNewPassword, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var user = this.props.authData;\n      var requiredAttributes = user.challengeParam.requiredAttributes;\n      var placeholders = Array.isArray(requiredAttributes) ? requiredAttributes.map(function (attribute) {\n        return I18n.get(convertToPlaceholder(attribute));\n      }) : [];\n\n      var newProps = _objectSpread({}, this.props, {\n        handleInputChange: this.handleInputChange,\n        requiredAttributes: requiredAttributes,\n        placeholders: placeholders,\n        change: this.change\n      });\n\n      return React.createElement(CompRequireNewPassword, newProps);\n    }\n  }]);\n\n  return RequireNewPassword;\n}(RequireNewPasswordOrig);\n\nvar Loading =\n/*#__PURE__*/\nfunction (_LoadingOrig) {\n  _inherits(Loading, _LoadingOrig);\n\n  function Loading() {\n    _classCallCheck(this, Loading);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Loading).apply(this, arguments));\n  }\n\n  _createClass(Loading, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      return React.createElement(CompLoading, this.props);\n    }\n  }]);\n\n  return Loading;\n}(LoadingOrig);\n\nvar ForgotPassword =\n/*#__PURE__*/\nfunction (_ForgotPasswordOrig) {\n  _inherits(ForgotPassword, _ForgotPasswordOrig);\n\n  function ForgotPassword() {\n    _classCallCheck(this, ForgotPassword);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ForgotPassword).apply(this, arguments));\n  }\n\n  _createClass(ForgotPassword, [{\n    key: \"showComponent\",\n    value: function showComponent() {\n      var _this5 = this;\n\n      var newProps = _objectSpread({}, this.props, {\n        handleBack: function handleBack() {\n          return _this5.changeState('signIn');\n        },\n        handleInputChange: this.handleInputChange,\n        handleConfirm: this.confirm,\n        handleResend: this.send,\n        handleSubmit: this.submit,\n        handleSendCode: this.send\n      });\n\n      return React.createElement(CompForgotPassword, newProps);\n    }\n  }]);\n\n  return ForgotPassword;\n}(ForgotPasswordOrig);\n\nfunction convertToPlaceholder(str) {\n  return str.split('_').map(function (part) {\n    return part.charAt(0).toUpperCase() + part.substr(1).toLowerCase();\n  }).join(' ');\n}","export { default as fixtures } from './auth.fixture';\nexport { default as AuthContainer } from './AuthContainer';\nexport { default as Loading, LoadingWrapped } from './Loading';\nexport { default as SignIn } from './SignIn';\nexport { default as useAuthentication } from './useAuthentication';","import React, { useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport { List } from 'react-virtualized';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { CircularProgress } from '@material-ui/core';\nimport { useComponentSize, AppContext } from '@morphoto/client-common';\nimport { TopBarWrapper } from '@morphoto/navigation';\nimport FeedEnder from './FeedEnder';\nimport FeedItem from './FeedItem';\nvar ROWHEIGHT = 300;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%'\n    },\n    container: {\n      padding: 0,\n      display: 'flex',\n      flexDirection: 'column',\n      flexGrow: 1\n    },\n    listContainer: {\n      flexGrow: 1,\n      overflow: 'hidden'\n    },\n    vList: {\n      height: '100%',\n      width: '100%'\n    },\n    feedContainer: {\n      flexGrow: 1,\n      transform: 'translateZ(0)'\n    },\n    grow: {\n      flexGrow: 1\n    }\n  };\n});\n\nvar MyFeed = function MyFeed(_ref) {\n  var events = _ref.events,\n      loading = _ref.loading,\n      actions = _ref.actions,\n      window = _ref.window;\n  var classes = useStyles();\n  var listRef = useRef();\n\n  var _useComponentSize = useComponentSize(listRef),\n      size = _useComponentSize.size;\n\n  var _useContext = useContext(AppContext),\n      online = _useContext.online;\n\n  var rowRenderer = function rowRenderer(_ref2) {\n    var index = _ref2.index,\n        isScrolling = _ref2.isScrolling,\n        isVisible = _ref2.isVisible,\n        key = _ref2.key,\n        parent = _ref2.parent,\n        style = _ref2.style;\n    var row = events[index];\n    var content;\n\n    if (index < events.length && row) {\n      content = React.createElement(FeedItem, {\n        event: events[index],\n        actions: actions\n      });\n    } else if (index === events.length) {\n      var wEnd = window && window[0] === 0;\n      content = React.createElement(FeedEnder, {\n        icon: React.createElement(CircularProgress, {\n          size: 30,\n          thickness: 2,\n          color: \"inherit\"\n        }),\n        text: \"Loading...\"\n      });\n      var almostAtEnd = ROWHEIGHT * 4 + parent.state.scrollTop > style.top;\n\n      if (!online.isOnline) {\n        content = React.createElement(FeedEnder, {\n          icon: React.createElement(ErrorIcon, null),\n          text: \"Cannot Refresh Offline\"\n        });\n      } else if (wEnd) {\n        content = React.createElement(FeedEnder, {\n          text: \"End of feed\"\n        });\n      } else if (!loading && almostAtEnd) {\n        actions.fetchMore();\n      }\n    }\n\n    return React.createElement(\"div\", {\n      className: classes.row,\n      key: key,\n      style: style\n    }, content);\n  };\n\n  rowRenderer.propTypes = {\n    index: PropTypes.any,\n    key: PropTypes.any,\n    style: PropTypes.any,\n    isScrolling: PropTypes.any,\n    isVisible: PropTypes.any,\n    parent: PropTypes.any\n  };\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(TopBarWrapper, null, React.createElement(Typography, {\n    className: classes.grow\n  }, \"Home Feed\")), React.createElement(Container, {\n    className: classes.container,\n    maxWidth: \"sm\"\n  }, React.createElement(\"div\", {\n    className: classes.listContainer,\n    ref: listRef\n  }, React.createElement(List, {\n    height: size.height,\n    width: size.width,\n    className: classes.vList,\n    rowCount: events.length + 1,\n    rowHeight: ROWHEIGHT,\n    rowRenderer: rowRenderer\n  }))));\n};\n\nMyFeed.propTypes = {\n  events: PropTypes.array.isRequired,\n  loading: PropTypes.bool,\n  window: PropTypes.arrayOf(PropTypes.number),\n  actions: PropTypes.shape({\n    onImageClick: PropTypes.func.isRequired,\n    onProfileClick: PropTypes.func.isRequired,\n    onMapClick: PropTypes.func.isRequired,\n    fetchNewest: PropTypes.func.isRequired,\n    fetchMore: PropTypes.func.isRequired\n  })\n};\nexport default MyFeed;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      alignItems: 'center'\n    },\n    grow: {\n      flexGrow: 1\n    },\n    text: {\n      textAlign: 'center',\n      fontStyle: 'italic',\n      padding: theme.spacing(2, 1)\n    }\n  };\n});\n\nvar FeedEnder = function FeedEnder(_ref) {\n  var style = _ref.style,\n      icon = _ref.icon,\n      text = _ref.text;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"div\", {\n    className: classes.grow\n  }), icon, React.createElement(Typography, {\n    className: classes.text,\n    variant: \"subtitle1\",\n    color: \"textSecondary\",\n    component: \"div\",\n    style: style\n  }, text), React.createElement(\"div\", {\n    className: classes.grow\n  }));\n};\n\nFeedEnder.propTypes = {\n  style: PropTypes.object,\n  icon: PropTypes.any,\n  text: PropTypes.string\n};\nexport default FeedEnder;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useLayoutEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Fab from '@material-ui/core/Fab';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport CameraIcon from '@material-ui/icons/Camera';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { RawImage, PhotoGrid, PhotoFadeSlider } from '@morphoto/photos';\nimport { useCamera } from '@morphoto/client-common';\nimport style from './CameraTool.style';\nvar useStyles = makeStyles(style);\n\nvar CameraTool = function CameraTool(_ref) {\n  var onCancel = _ref.onCancel,\n      onShutter = _ref.onShutter,\n      defaultRefPhotoId = _ref.defaultRefPhotoId,\n      photos = _ref.photos;\n  var classes = useStyles();\n\n  var _useState = useState(50),\n      _useState2 = _slicedToArray(_useState, 2),\n      slider = _useState2[0],\n      setSlider = _useState2[1];\n\n  var refImgRef = useRef();\n\n  var _useState3 = useState([window.innerWidth, window.innerHeight]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      size = _useState4[0],\n      setSize = _useState4[1];\n\n  var newRefPhoto = defaultRefPhotoId ? photos.find(function (p) {\n    return p.id === defaultRefPhotoId;\n  }) : photos && photos.length > 0 ? photos[0] : null;\n\n  var _useState5 = useState(newRefPhoto),\n      _useState6 = _slicedToArray(_useState5, 2),\n      refPhoto = _useState6[0],\n      setRefPhoto = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      drawerOpen = _useState8[0],\n      setDrawerOpen = _useState8[1];\n\n  var _useCamera = useCamera(function (data) {\n    return onShutter(data, refPhoto ? refPhoto.id : null);\n  }, size[0], size[1]),\n      cameraError = _useCamera.cameraError,\n      captureImage = _useCamera.captureImage,\n      cameraOnline = _useCamera.cameraOnline;\n\n  var handleTileClick = function handleTileClick(id) {\n    setRefPhoto(photos.find(function (p) {\n      return p.id === id;\n    }));\n    setDrawerOpen(false);\n  };\n\n  var handleResize = function handleResize() {\n    console.log('RESIZE', [window.innerWidth, window.innerHeight]);\n    setSize([window.innerWidth, window.innerHeight]);\n  };\n\n  useLayoutEffect(function () {\n    handleResize();\n    window.addEventListener('resize', handleResize);\n    return function () {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), !cameraError && Boolean(refPhoto) && React.createElement(PhotoFadeSlider, {\n    className: classes.slider,\n    defaultValue: slider,\n    onChange: setSlider\n  }), cameraError && React.createElement(\"div\", {\n    className: classes.cameraErrorText\n  }, React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\"\n  }, \"No Camera Access\"), React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"inherit\"\n  }, \"Please enabled access in your settings.\")), Boolean(refPhoto) && React.createElement(\"div\", {\n    className: classes.reference\n  }, React.createElement(RawImage, {\n    imgRef: refImgRef,\n    sizePriority: ['large', 'medium', 'thumb'],\n    style: {\n      opacity: slider / 100\n    },\n    photo: refPhoto\n  })), !cameraError && React.createElement(\"video\", {\n    autoPlay: true,\n    playsInline: true,\n    muted: true,\n    id: \"webcam\",\n    width: window.innerWidth,\n    height: window.innerHeight,\n    className: classes.video\n  }), React.createElement(Fab, {\n    color: \"primary\",\n    \"aria-label\": \"Take Photo\",\n    classes: {\n      disabled: classes.disabledFab\n    },\n    disabled: cameraError || !cameraOnline,\n    className: classNames(classes.cameraFab, classes.buttonFab),\n    onClick: captureImage\n  }, React.createElement(CameraIcon, {\n    className: classes.cameraIcon\n  })), React.createElement(Fab, {\n    color: \"secondary\",\n    \"aria-label\": \"cancel\",\n    onClick: onCancel,\n    classes: {\n      disabled: classes.disabledFab\n    },\n    className: classNames(classes.cancelFab, classes.buttonFab)\n  }, React.createElement(CancelIcon, {\n    className: classes.cancelIcon\n  })), photos && React.createElement(Fab, {\n    \"aria-label\": \"library\",\n    className: classNames(classes.libraryFab, classes.buttonFab),\n    classes: {\n      disabled: classes.disabledFab\n    },\n    disabled: !photos || photos.length === 0,\n    onClick: function onClick() {\n      return setDrawerOpen(true);\n    }\n  }, React.createElement(PhotoLibraryIcon, {\n    className: classes.libraryIcon\n  })), photos && React.createElement(SwipeableDrawer, {\n    anchor: \"left\",\n    open: drawerOpen,\n    classes: {\n      paperAnchorLeft: classes.swipeDrawer\n    },\n    onClose: function onClose() {\n      return setDrawerOpen(false);\n    },\n    onOpen: function onOpen() {\n      return setDrawerOpen(true);\n    }\n  }, React.createElement(\"div\", {\n    tabIndex: 0,\n    className: classes.swipeDrawerContainer,\n    role: \"button\",\n    onClick: function onClick() {\n      return setDrawerOpen(false);\n    },\n    onKeyDown: function onKeyDown() {\n      return setDrawerOpen(false);\n    }\n  }, React.createElement(PhotoGrid, {\n    multiSelect: false,\n    columns: 1,\n    photos: photos,\n    onTileClick: handleTileClick\n  }))));\n};\n\nCameraTool.propTypes = {\n  defaultRefPhotoId: PropTypes.string,\n  onCancel: PropTypes.func.isRequired,\n  onShutter: PropTypes.func.isRequired,\n  photos: PropTypes.array\n};\nexport default CameraTool;","export default (function (theme) {\n  return {\n    root: {\n      background: 'black',\n      height: '100%',\n      width: '100%'\n    },\n    cameraErrorText: {\n      color: 'white',\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      width: '90%',\n      transform: 'translateY(-50%) translateX(-50%)',\n      textAlign: 'center'\n    },\n    disabledFab: {\n      color: '#AAAAA!important',\n      background: '#DDDDDD!important',\n      opacity: 0.2\n    },\n    cameraFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        right: '20px',\n        top: '50%',\n        transform: 'translateY(-50%)',\n        height: '25vh',\n        width: '25vh'\n      },\n      '@media (orientation: portrait)': {\n        bottom: '20px',\n        left: '50%',\n        transform: 'translateX(-50%)',\n        height: '25vw',\n        width: '25vw'\n      }\n    },\n    slider: {\n      '@media (orientation: landscape)': {\n        position: 'absolute',\n        left: '0',\n        height: '79%',\n        top: '20%'\n      },\n      '@media (orientation: portrait)': {\n        position: 'absolute',\n        left: '0',\n        transform: 'translateY(-50%)',\n        height: '50%',\n        top: '45%'\n      }\n    },\n    cameraIcon: {\n      height: '100%',\n      width: '100%'\n    },\n    cancelFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        right: '15px',\n        top: '15px',\n        height: '15vh',\n        width: '15vh'\n      },\n      '@media (orientation: portrait)': {\n        right: '15px',\n        bottom: '15px',\n        height: '15vw',\n        width: '15vw'\n      }\n    },\n    cancelIcon: {\n      height: '100%',\n      width: '100%'\n    },\n    swipeDrawer: {\n      width: '50%'\n    },\n    libraryFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        left: '15px',\n        top: '15px',\n        height: '15vh',\n        width: '15vh'\n      },\n      '@media (orientation: portrait)': {\n        left: '15px',\n        top: '15px',\n        height: '15vw',\n        width: '15vw'\n      }\n    },\n    myLocationFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        right: '15px',\n        bottom: '15px',\n        height: '15vh',\n        width: '15vh'\n      },\n      '@media (orientation: portrait)': {\n        left: '15px',\n        bottom: '15px',\n        height: '15vw',\n        width: '15vw'\n      }\n    },\n    myLocationIcon: {\n      height: '80%',\n      width: '80%'\n    },\n    captured: {},\n    reference: {\n      position: 'absolute',\n      zIndex: 2,\n      top: 0,\n      left: 0,\n      height: '100%',\n      width: '100%'\n    },\n    video: {\n      position: 'absolute',\n      zIndex: 1,\n      top: 0,\n      left: 0,\n      height: '100%',\n      width: '100%'\n    }\n  };\n});","import jsQR from 'jsqr';\nexport var jsQRFromBlob = function jsQRFromBlob(_ref) {\n  var data = _ref.data,\n      imageHeight = _ref.imageHeight,\n      imageWidth = _ref.imageWidth;\n  return new Promise(function (resolve, reject) {\n    try {\n      var qrCode = jsQR(data, imageWidth, imageHeight);\n      resolve(qrCode);\n    } catch (e) {\n      reject(e);\n    }\n  });\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { green, red } from '@material-ui/core/colors';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport Paper from '@material-ui/core/Paper';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { QRCode as QRcodeIcon } from '@morphoto/icons';\nimport { jsQRFromBlob } from './QRUtil';\nimport { util } from '@morphoto/common';\nimport { useCamera } from '@morphoto/client-common';\nvar CAMERAWIDTH = 400;\nvar CAMERAHEIGHT = 400;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      height: '100%',\n      flexDirection: 'column'\n    },\n    qrIcon: {\n      border: '5px solid red',\n      padding: theme.spacing(2),\n      position: 'absolute',\n      color: 'white',\n      opacity: 0.4,\n      zIndex: 2,\n      width: '70%',\n      height: '70%',\n      top: '50%',\n      left: '50%',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    backupText: {\n      position: 'absolute',\n      color: 'white',\n      textAlign: 'center',\n      zIndex: 2,\n      width: '70%',\n      height: '70%',\n      top: '50%',\n      left: '50%',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    manualImg: {\n      position: 'absolute',\n      zIndex: 1\n    },\n    appBar: {},\n    inner: {\n      padding: theme.spacing(2),\n      height: '100%',\n      flexGrow: 1,\n      overflow: 'hidden'\n    },\n    tipPaper: {\n      padding: theme.spacing(2),\n      margin: theme.spacing(2)\n    },\n    docContainer: {\n      flexGrow: 1,\n      padding: theme.spacing(2)\n    },\n    cameraContainer: {\n      width: '80%',\n      margin: '0 auto',\n      position: 'relative',\n      '&::before': {\n        content: ' ',\n        display: 'block',\n        paddingTop: '100%'\n      }\n    },\n    cameraContainerError: {\n      background: 'black'\n    },\n    snackErr: {\n      background: red[500],\n      color: 'white'\n    },\n    snackSuccess: {\n      background: green[500],\n      color: 'white'\n    },\n    snackMsg: {},\n    video: {\n      height: '100%',\n      width: '100%',\n      verticalAlign: 'top'\n    }\n  };\n});\n\nvar QRReader = function QRReader(_ref) {\n  var onMenuBack = _ref.onMenuBack,\n      onCapture = _ref.onCapture,\n      isIos = _ref.isIos;\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      capturedBlob = _useState2[0],\n      setCapturedBlob = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      err = _useState4[0],\n      setErr = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      code = _useState6[0],\n      setCode = _useState6[1];\n\n  var _useCamera = useCamera(setCapturedBlob, CAMERAWIDTH, CAMERAHEIGHT),\n      cameraError = _useCamera.cameraError,\n      captureRawData = _useCamera.captureRawData,\n      cameraOnline = _useCamera.cameraOnline;\n\n  var captureFunc = useCallback(util.debounce(captureRawData, 100), [cameraOnline, cameraError]);\n  useEffect(function () {\n    var scan =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var scannedCode, find, foundIdx, newData, decodedUrl;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                scannedCode = null;\n                _context.prev = 1;\n                _context.next = 4;\n                return jsQRFromBlob(capturedBlob);\n\n              case 4:\n                scannedCode = _context.sent;\n                _context.next = 10;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](1);\n                console.error(_context.t0);\n\n              case 10:\n                _context.prev = 10;\n\n                if (!(cameraError && !scannedCode)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                throw new Error('Captured Image does not have a QR code');\n\n              case 13:\n                if (!scannedCode) {\n                  _context.next = 24;\n                  break;\n                }\n\n                find = '?fromqr=';\n                foundIdx = scannedCode.data.indexOf(find) + find.length;\n                newData = scannedCode.data.slice(foundIdx);\n                decodedUrl = JSON.parse(decodeURI(newData));\n                console.log('decodedUrl', decodedUrl);\n\n                if (!(!decodedUrl.type || !decodedUrl.s)) {\n                  _context.next = 21;\n                  break;\n                }\n\n                throw new Error('Type or SeriesID missing from QR Code');\n\n              case 21:\n                setCode(decodedUrl);\n                setErr(null);\n                console.log('QRCODE', scannedCode);\n\n              case 24:\n                _context.next = 30;\n                break;\n\n              case 26:\n                _context.prev = 26;\n                _context.t1 = _context[\"catch\"](10);\n                setErr('Not a valid QR Code');\n                console.error(_context.t1);\n\n              case 30:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 7], [10, 26]]);\n      }));\n\n      return function scan() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    if (cameraOnline && !cameraError && !err && !code) {\n      if (!capturedBlob || !capturedBlob.data) captureFunc();else {\n        scan();\n        captureFunc();\n      }\n    }\n  }, [cameraOnline, capturedBlob, err, code]);\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Capture QR Code\"))), React.createElement(\"div\", {\n    className: classes.inner\n  }, React.createElement(Paper, {\n    className: classNames(classes.cameraContainer, cameraError ? classes.cameraContainerError : null)\n  }, React.createElement(QRcodeIcon, {\n    className: classes.qrIcon\n  }), React.createElement(\"video\", {\n    autoPlay: true,\n    playsInline: true,\n    muted: true,\n    id: \"webcam\",\n    className: classes.video\n  })), React.createElement(Paper, {\n    className: classes.tipPaper\n  }, React.createElement(Typography, null, \"TIP: You can find the QR code for a series in the SHARE tab of that series\"))), React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: !!err,\n    autoHideDuration: 2000,\n    onClose: function onClose() {\n      setErr(null);\n      setCapturedBlob(null);\n    }\n  }, React.createElement(SnackbarContent, {\n    className: classes.snackErr,\n    message: React.createElement(\"span\", {\n      className: classes.snackMsg\n    }, err)\n  })), !isIos && React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: cameraError\n  }, React.createElement(SnackbarContent, {\n    className: classes.snackErr,\n    message: React.createElement(\"span\", {\n      className: classes.snackMsg\n    }, \"Camera Error. Check your device's permissions\")\n  })), React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: !!code,\n    autoHideDuration: 500,\n    onClose: function onClose() {\n      return onCapture(code.type, code.s, code.p);\n    }\n  }, React.createElement(SnackbarContent, {\n    className: classes.snackSuccess,\n    message: React.createElement(\"span\", {\n      className: classes.snackMsg\n    }, \"Valid QR Code found!\")\n  })));\n};\n\nQRReader.propTypes = {\n  onMenuBack: PropTypes.func.isRequired,\n  isIos: PropTypes.bool.isRequired,\n  onCapture: PropTypes.func.isRequired\n};\nexport default QRReader;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Paper, Link } from '@material-ui/core';\nimport QRCode from 'qrcode';\nimport { createShareUrl } from '@morphoto/client-common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    qrPaper: {\n      textAlign: 'center',\n      padding: theme.spacing(0, 2)\n    },\n    qrCode: {\n      width: '100%',\n      minHeight: 300,\n      maxHeight: 400\n    }\n  };\n});\n\nvar QRDisplay = function QRDisplay(_ref) {\n  var onClose = _ref.onClose,\n      open = _ref.open,\n      series = _ref.series,\n      photoId = _ref.photoId;\n  var classes = useStyles();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      qrCodeEl = _useState2[0],\n      setQRCodeEl = _useState2[1];\n\n  var _createShareUrl = createShareUrl(series, photoId),\n      url = _createShareUrl.url,\n      ogShare = _createShareUrl.ogShare;\n\n  var canShare = ['OPEN', 'PUBLIC'].indexOf(series.access) > -1;\n  useLayoutEffect(function () {\n    QRCode.toString(url, function (err, svgStr) {\n      if (err) console.error(err);else setQRCodeEl(svgStr);\n    });\n  }, [series]);\n  useLayoutEffect(function () {\n    if (navigator.share && open && canShare) {\n      var text = 'MorPhoto Series';\n      if (series.note) text = series.note.length > 100 ? series.note.slice(100) + '...' : series.note;\n      navigator.share({\n        title: series.name,\n        text: text,\n        url: ogShare\n      }).then(function () {\n        return console.log('Successful share');\n      }).catch(function (error) {\n        return console.log('Error sharing', error);\n      });\n    }\n  }, [open]);\n  return React.createElement(Dialog, {\n    open: open,\n    fullWidth: true,\n    onClose: onClose,\n    className: classes.root\n  }, React.createElement(DialogTitle, {\n    className: classes.title\n  }, series.name), React.createElement(Paper, {\n    className: classes.qrPaper\n  }, canShare ? React.createElement(\"svg\", {\n    className: classes.qrCode,\n    dangerouslySetInnerHTML: {\n      __html: qrCodeEl\n    }\n  }) : React.createElement(Typography, {\n    variant: \"\",\n    color: \"error\"\n  }, \"You cannot share a private series.\"), canShare && React.createElement(Link, {\n    href: url\n  }, \"Share Link\"), series.coords && React.createElement(Typography, {\n    component: \"div\",\n    className: classes.coords,\n    variant: \"overline\"\n  }, \"coords: [ \", series.coords[0], \", \", series.coords[1], \" ]\")));\n};\n\nQRDisplay.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  open: PropTypes.bool,\n  series: PropTypes.object.isRequired,\n  photoId: PropTypes.string\n};\nexport default QRDisplay;","export { default as CameraTool } from './CameraTool';\nexport { default as QRReader } from './QRReader';\nexport { default as QRDisplay } from './QRDisplay';","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nexport default {\n  s3Upload: require('./s3Upload').default,\n  graphql: {\n    APOLLOSTATES: require('./graphql/useGraphQL').APOLLOSTATES,\n    useGraphQL: require('./graphql/useGraphQL').default,\n    queries: require('./graphql/queries'),\n    mutations: _objectSpread({}, require('./graphql/mutations'), {\n      createPhoto: require('./graphql/mutations/createPhoto').default,\n      createSeries: require('./graphql/mutations/createSeries').default,\n      deletePhoto: require('./graphql/mutations/deletePhoto').default,\n      deleteSeries: require('./graphql/mutations/deleteSeries').default,\n      unwatch: require('./graphql/mutations/unwatch').default,\n      updatePhoto: require('./graphql/mutations/updatePhoto').default,\n      updateSeries: require('./graphql/mutations/updateSeries').default,\n      watch: require('./graphql/mutations/watch').default,\n      updateQueries: require('./graphql/mutations/updateQueries')\n    }),\n    offline: require('./graphql/offline')\n  },\n  redux: {\n    withReduxProvider: require('./redux/withReduxProvider').default,\n    actions: require('./redux/actions').default\n  }\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport { AppLogo } from '@morphoto/icons';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    content: {},\n    messageWrapper: {\n      display: 'flex'\n    },\n    logo: {\n      height: 50,\n      width: 50\n    },\n    paper: {\n      background: theme.palette.text.primary,\n      color: theme.palette.primary.contrastText,\n      border: \"2px solid \".concat(theme.palette.primary.contrastText),\n      boxShadow: \"0 0 0 0 \".concat(theme.palette.primary.main),\n      animation: '$installPulse 2s infinite',\n      padding: theme.spacing(2, 3),\n      width: '100%'\n    },\n    '@keyframes installPulse': {\n      '0%': {\n        boxShadow: \"0 0 0 0px \".concat(theme.palette.primary.main)\n      },\n      '50%': {\n        boxShadow: \"0 0 0 0px \".concat(theme.palette.primary.main)\n      },\n      '100%': {\n        boxShadow: \"0 0 0 20px transparent\"\n      }\n    },\n    textWrapper: {\n      flexGrow: 1,\n      paddingLeft: theme.spacing(1)\n    },\n    buttons: {\n      display: 'flex'\n    },\n    spacer: {\n      flexGrow: 1\n    }\n  };\n});\n\nvar InstallPrompt = function InstallPrompt(_ref) {\n  var open = _ref.open,\n      onClose = _ref.onClose,\n      onInstall = _ref.onInstall;\n  var classes = useStyles();\n  return React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: open,\n    onClose: onClose\n  }, React.createElement(Paper, {\n    className: classes.paper,\n    elevation: 24\n  }, React.createElement(\"div\", {\n    id: \"client-snackbar\",\n    className: classes.messageWrapper\n  }, React.createElement(AppLogo, {\n    className: classes.logo\n  }), React.createElement(\"div\", {\n    className: classes.textWrapper\n  }, React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"inherit\"\n  }, \"Install MorPhoto\"), React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"inherit\",\n    paragraph: true\n  }, \"This app can be installed and used on your device natively and offline if you would like.\"), React.createElement(\"div\", {\n    className: classes.buttons\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    variant: \"contained\",\n    onClick: onClose\n  }, \"No thanks\"), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    onClick: onInstall\n  }, \"Install\"))))));\n};\n\nInstallPrompt.propTypes = {\n  open: PropTypes.bool,\n  actions: PropTypes.shape({\n    onClose: PropTypes.func.isRequired,\n    onInstall: PropTypes.func.isRequired\n  })\n};\nexport default InstallPrompt;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useEffect, useState, useMemo } from 'react';\nimport { useDevice } from '@morphoto/client-common';\nimport InstallPrompt from './InstallPrompt';\n\nvar isInStandaloneMode = function isInStandaloneMode() {\n  return 'standalone' in window.navigator && window.navigator.standalone;\n};\n\nvar useShowAddToHome = function useShowAddToHome(showInstall, dismissInstall) {\n  var _useDevice = useDevice(),\n      ios = _useDevice.ios,\n      phone = _useDevice.phone;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      deferredPrompt = _useState2[0],\n      setPrompt = _useState2[1];\n\n  var handleBeforePrompt = function handleBeforePrompt(e) {\n    e.preventDefault();\n    setPrompt(e);\n  };\n\n  var installPrompt = useMemo(function () {\n    if (!showInstall || !deferredPrompt) return null;\n    return React.createElement(InstallPrompt, {\n      open: true,\n      onClose: dismissInstall,\n      onInstall: addToHomeScreen\n    });\n  }, [showInstall, deferredPrompt]);\n  useEffect(function () {\n    if (ios && !isInStandaloneMode()) {\n      console.log('I AM on IOS and I am NOT in standalone mode.');\n    }\n\n    window.addEventListener('beforeinstallprompt', handleBeforePrompt);\n    return function () {\n      window.removeEventListener('beforeinstallprompt', handleBeforePrompt);\n    };\n  }, []);\n\n  function addToHomeScreen() {\n    deferredPrompt.prompt();\n    deferredPrompt.userChoice.then(function (choiceResult) {\n      if (choiceResult.outcome === 'accepted') {\n        console.log('User accepted the A2HS prompt');\n        dismissInstall();\n      } else {\n        console.log('User dismissed the A2HS prompt');\n        dismissInstall();\n      }\n\n      setPrompt(null);\n    });\n  }\n\n  return {\n    installPrompt: installPrompt,\n    addToHomeScreen: installPrompt ? addToHomeScreen : null\n  };\n};\n\nexport default useShowAddToHome;","import React, { useMemo, useContext, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { graphql, compose } from 'react-apollo'\nimport datastore from '@morphoto/datastore'\nimport { AppContext } from '@morphoto/client-common'\n\nconst withUploadConnect = Wrapped => {\n  const Inner = ({ activeUpload, uploading, uploadOnline, updateUploadProgress, setUploaderOnline }) => {\n    const { online: { isOnline } } = useContext(AppContext)\n    // console.log('withUploadConnect::: RENDER', { isOnline, uploadOnline })\n\n    useEffect(() => {\n      // console.log('withUploadConnect:::', { uploadOnline, isOnline })\n      if (uploadOnline !== isOnline) setUploaderOnline(isOnline)\n    }, [isOnline, setUploaderOnline, uploadOnline])\n\n    // This lurker waits for the s3 credentials to expire then it goes to get new ones.\n    const newS3Creds = useMemo(() => <NewS3Credentials onDone={updateUploadProgress} activeUpload={activeUpload} />,\n      [updateUploadProgress, activeUpload])\n\n    if (!activeUpload || !uploading) return newS3Creds\n    return (\n      <React.Fragment>\n        {newS3Creds}\n        <Wrapped text={'Uploading image'} progress={activeUpload.progress || 0} />\n      </React.Fragment>\n    )\n  }\n  Inner.propTypes = {\n  // All from redux\n    activeUpload: PropTypes.object,\n    uploading: PropTypes.bool,\n    uploadOnline: PropTypes.bool,\n    updateUploadProgress: PropTypes.func.isRequired,\n    setUploaderOnline: PropTypes.func.isRequired\n  }\n  return Inner\n}\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { activeUpload, uploading, online: uploadOnline } = state.uploader\n  return { activeUpload, uploading, uploadOnline }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  updateUploadProgress: (newProgress) => {\n    dispatch(datastore.redux.actions.updateUploadProgress(newProgress))\n  },\n  setUploaderOnline: (bOnline) => {\n    dispatch(datastore.redux.actions.setUploaderOnline(bOnline))\n  }\n})\n\nexport default compose(\n  connect(mapStateToProps, mapDispatchToProps),\n  withUploadConnect\n)\n\n/**\n * Here's the graphql HOC that gets an individual series\n */\nconst withGetNewS3Credentials = graphql(datastore.graphql.queries.getNewS3Credentials, {\n  skip: ({ online, activeUpload }) => !online || !activeUpload || (activeUpload.expires > Date.now()),\n  props: ({ data, ownProps }) => {\n    if (data.error) console.error(data.error)\n    console.log('withGetNewS3Credentials:: ', { data })\n\n    // If we get backa  valid auth code then create a new queue object\n    // and send it back\n    if (!data.loading) {\n      ownProps.onDone({\n        ...ownProps.qItem,\n        retry: ownProps.qItem.retry + 1,\n        preAuth: JSON.parse(data.s3Credentials)\n      })\n    }\n    return {\n      data\n    }\n  },\n  options: ({ qItem }) => ({\n    variables: { seriesId: qItem.seriesId, photoId: qItem.id, ext: qItem.ext }\n  })\n})\nconst NewS3Credentials = withGetNewS3Credentials(() => null)\n","import React, { useContext, useMemo, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { graphql, compose } from 'react-apollo'\nimport { connect } from 'react-redux'\nimport ReactGA from 'react-ga'\n\nimport { NEW_PHOTO_MODES, SERIES_MODES } from '@morphoto/photoseries'\nimport { config, AppContext } from '@morphoto/client-common'\nimport datastore from '@morphoto/datastore'\n\nconst STATES = config.home.AppStateTypes\n\nconst withSeriesConnect = WrappedSeries => {\n  const InnerSeries = ({\n    series, loading, domain, activeSeries, initialPhoto,\n    onAfterSeriesDelete, queueUpload,\n    updateSeriesMutation, updatePhotoMutation,\n    deleteSeriesMutation, deletePhotoMutation,\n    createSeriesMutation, createPhotoMutation,\n    watchSeriesMutation, unWatchSeriesMutation,\n    onFindOnMap\n  }) => {\n    const { role, currentUser, signedIn, globalActions } = useContext(AppContext)\n\n    const inputMethod = domain === STATES.NEW_SERIES_CAMERA\n      ? NEW_PHOTO_MODES.CAMERA\n      : NEW_PHOTO_MODES.FILEPICKER\n\n    // console.log('SeriesConnect', { series, loading, currentState, activeSeries, role, currentUser })\n    let modeName = SERIES_MODES.SERIES_VIEW\n    if (domain !== STATES.SERIES) modeName = SERIES_MODES.NEWSERIES\n\n    // A little mutation here.\n    useMemo(() => {\n      if (series && series.photos) {\n        series.photos.sort((a, b) => parseInt(a.takenOn, 10) - parseInt(b.takenOn, 10))\n      }\n    }, [series])\n\n    useEffect(() => {\n      if (series && series.id) {\n        ReactGA.event({\n          category: `Series`,\n          action: 'View',\n          label: series.id\n        })\n      }\n    }, [series])\n\n    let owned = false\n    try {\n      owned = currentUser.id === series.createdUser.id\n    }\n    catch (e) {}\n\n    return (\n      <WrappedSeries\n        modeName={modeName}\n        inputMethod={inputMethod}\n\n        owned={owned}\n        watching={signedIn && currentUser && currentUser.watching && currentUser.watching.indexOf(activeSeries) > -1}\n\n        // Everything we need to determine access\n        currentUserId={signedIn ? currentUser.id : null}\n        currentUserRole={role}\n        loading={loading}\n        series={series}\n        initialPhoto={initialPhoto}\n\n        actions={{\n          // Now some functions to handle actions we might take\n          onNewPhoto: async (newPhoto, newPhotoData) => {\n            console.log('onNewPhoto::', { series, newPhoto, newPhotoData })\n            // Write this blob to the imgStore so we can use it later\n            console.log('SET ITEM', newPhotoData)\n            await datastore.graphql.offline.imgStore.setItem(newPhoto.uploadToken, newPhotoData.file)\n            return createPhotoMutation(series, newPhoto, newPhotoData.ext)\n              .then(({ data }) => {\n                // Now we can add this photo to the upload queue\n                const photo = data.createPhoto.photo\n                if (data.createPhoto.preAuth) {\n                  const preAuth = JSON.parse(data.createPhoto.preAuth)\n\n                  queueUpload({\n                    id: photo.id,\n                    uploadToken: photo.uploadToken,\n                    seriesId: photo.seriesId,\n                    expires: Date.now() + (3300 * 1000),\n                    preAuth,\n                    ext: newPhotoData.ext,\n                    retry: 0\n                  })\n                }\n              })\n              .catch(err => {\n                console.log('onNewPhoto:: Graphql Error', err.stack)\n                console.error(err)\n              })\n          },\n\n          onChangePhoto: (photo, photoDelta) => updatePhotoMutation(series, photo, photoDelta)\n            .catch(err => {\n              console.log('onChangePhoto:: Graphql Error', err.stack)\n              console.error(err)\n            }),\n\n          onDeletePhoto: (photo) => deletePhotoMutation(photo.id)\n            .then((...data) => {\n              console.log('onDeletePhoto:: photo deleted', data)\n            })\n            .catch(err => {\n              console.log('onDeletePhoto:: Graphql Error', err.stack)\n              console.error(err)\n            }),\n\n          onChange: (series, seriesDelta) => updateSeriesMutation(series, seriesDelta)\n            .catch(err => {\n              console.log('onChange:: Graphql Error', err.stack)\n              console.error(err)\n            }),\n\n          onNewSeries: async (newSeries, newPhoto, newPhotoData) => {\n            console.log('Series.connect:: onNewSeries starting', { newSeries, newPhoto, newPhotoData })\n            console.log('SET ITEM', newPhotoData)\n            await datastore.graphql.offline.imgStore.setItem(newPhoto.uploadToken, newPhotoData.file)\n            return createSeriesMutation(newSeries, newPhoto, newPhotoData.ext)\n              .then(async ({ data }) => {\n                console.log('Series.connect::', data)\n                if (data.createSeries.preAuth) {\n                  // Now we can add this photo to the upload queue\n                  const photo = data.createSeries.series.photos[0]\n                  const preAuth = JSON.parse(data.createSeries.preAuth)\n\n                  queueUpload({\n                    id: photo.id,\n                    uploadToken: photo.uploadToken,\n                    seriesId: photo.seriesId,\n                    expires: Date.now() + (3300 * 1000),\n                    preAuth,\n                    ext: newPhotoData.ext,\n                    retry: 0\n                  })\n                }\n              })\n              .catch(err => {\n                console.log('onNewSeries:: Graphql Error', err.stack)\n                console.error(err)\n              })\n          },\n          onDelete: () => {\n            onAfterSeriesDelete() // UI Stuff, just bring us back to the feed\n            return deleteSeriesMutation()\n              .catch(err => {\n                console.log('onDelete:: Graphql Error', err.stack)\n                console.error(err)\n              })\n          },\n          onClose: globalActions.onMenuBack,\n          onFindOnMap: onFindOnMap,\n          onWatch: signedIn ? watchSeriesMutation : null,\n          onUnWatch: signedIn ? unWatchSeriesMutation : null\n        }}\n\n      />\n    )\n  }\n  InnerSeries.propTypes = {\n    domain: PropTypes.string,\n    activeSeries: PropTypes.string,\n    initialPhoto: PropTypes.string,\n\n    // From Redux\n    onAfterSeriesDelete: PropTypes.func,\n    queueUpload: PropTypes.func,\n\n    // Data from apollo\n    series: PropTypes.object,\n\n    // Functions From Apollo\n    loading: PropTypes.bool,\n\n    updateSeriesMutation: PropTypes.func,\n    updatePhotoMutation: PropTypes.func,\n    deleteSeriesMutation: PropTypes.func,\n    deletePhotoMutation: PropTypes.func,\n    createSeriesMutation: PropTypes.func,\n    createPhotoMutation: PropTypes.func,\n    watchSeriesMutation: PropTypes.func,\n    unWatchSeriesMutation: PropTypes.func,\n    onFindOnMap: PropTypes.func\n  }\n  return InnerSeries\n}\n\n/**\n * Here's the graphql HOC that gets an individual series\n */\nconst withGetSelectedQuery = graphql(datastore.graphql.queries.getWholeSeries, {\n  props: ({ data }) => {\n    if (data.error) console.error(data.error)\n    // console.log('getWholeSeries:: ', { data })\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      console.log('getWholeSeries:: error', { data, e })\n      console.error(e)\n    }\n    return {\n      data,\n      loading: data.loading,\n      series\n    }\n  },\n  skip: ({ activeSeries, isNewSeries }) => !activeSeries || isNewSeries,\n  options: ({ activeSeries }) => ({\n    variables: {\n      id: activeSeries\n    }\n  })\n})\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { current: { activeSeries, initialPhoto, domain } } = state.home\n  return { activeSeries, initialPhoto, domain, ...props }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  onAfterSeriesDelete: () => {\n    console.log('onAfterSeriesDelete')\n    dispatch(datastore.redux.actions.setHomeState(STATES.FEED, { activeSeries: null }))\n  },\n  queueUpload: (uploadObj) => {\n    dispatch(datastore.redux.actions.queueUpload(uploadObj))\n  },\n  // activeSeries is an id\n  doneCreatingSeries: (activeSeries) => {\n    console.log('doneCreatingSeries', activeSeries)\n    dispatch(datastore.redux.actions.setHomeState(STATES.SERIES, { activeSeries }))\n  },\n  // We need to swap out the L-dfgsdfgsdfg id on photos\n  doneCreatingPhoto: (initialPhoto) => {\n    console.log('doneCreatingPhoto', initialPhoto)\n    dispatch(datastore.redux.actions.setHomeState(STATES.SERIES, { initialPhoto }))\n  },\n  onFindOnMap: () => {\n    dispatch(datastore.redux.actions.setHomeState(STATES.MAP))\n  }\n})\n\n/**\n * Compose all our queries together. This is a bit of a mess but kind of necessary for now\n */\nexport default compose(\n  // connect first so that we can retrieve our seriesId\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  withGetSelectedQuery,\n  datastore.graphql.mutations.createSeries.withMutation,\n  datastore.graphql.mutations.createPhoto.withMutation,\n  datastore.graphql.mutations.updateSeries.withMutation,\n  datastore.graphql.mutations.updatePhoto.withMutation,\n  datastore.graphql.mutations.deleteSeries.withMutation,\n  datastore.graphql.mutations.deletePhoto.withMutation,\n  datastore.graphql.mutations.watch.withMutation,\n  datastore.graphql.mutations.unwatch.withMutation,\n  withSeriesConnect\n)\n","import React, { useEffect, useState, useRef, useMemo } from 'react'\nimport PropTypes from 'prop-types'\n\nimport { connect } from 'react-redux'\nimport { graphql, compose } from 'react-apollo'\n\nimport datastore from '@morphoto/datastore'\nimport { config } from '@morphoto/client-common'\n\nconst POLL_INTERVAL = 20 // (seconds)\n\n/**\n * The outer component handles the lastCheck variable which, when changed will\n * cause the poll event\n */\nconst withHomeMap = Wrapped => {\n  const InnerHomeMap = ({\n    onSeriesNavigate,\n    onSeriesMapSelect,\n    onSearchClick,\n    popMapHistory,\n    pushMapHistory,\n    clearMapHistory,\n    initialActiveSeries,\n    initViewport\n  }) => {\n    const [seriesProps, setSeriesProps] = useState()\n    const [queryVersion, setVersion] = useState(0)\n    const timerRef = useRef()\n    const queryVersionRef = useRef()\n    const [lastCheck, setLastCheck] = useState(0)\n    queryVersionRef.current = queryVersion\n\n    // These are expensive queries so we render them memoized to prevent erroneous re-renders\n    const allSeriesQUERY = useMemo(() => <AllSeriesConnect setSeriesProps={setSeriesProps} />, [])\n    const pollSeriesQUERY = useMemo(\n      () => <PollQueryConnect lastCheck={lastCheck} seriesProps={seriesProps} updateIncrement={() => setVersion(queryVersionRef.current + 1)} />,\n      [lastCheck, seriesProps]\n    )\n    // console.log('withPollQuery (PARENT)', { lastCheck, seriesProps })\n    // Initiate the polling process. We simply update the timestamp every N seconds\n    useEffect(() => {\n      if (!seriesProps) return\n      function ping () {\n        if (timerRef.current) setLastCheck(String(Date.now() - POLL_INTERVAL * 1000))\n      }\n      if (!timerRef.current && seriesProps.readyForPolling) timerRef.current = setInterval(ping, POLL_INTERVAL * 1000)\n      return () => {\n        if (timerRef.current) {\n          console.log('clear poll timer')\n          clearInterval(timerRef.current)\n          timerRef.current = null\n        }\n      }\n    }, [seriesProps])\n    // console.log('withHomeMap', { seriesProps, queryVersion })\n\n    return (\n      <React.Fragment>\n        {allSeriesQUERY}\n        {pollSeriesQUERY}\n        <Wrapped\n          initialActiveSeries={initialActiveSeries}\n          initViewport={initViewport}\n          actions={{\n            onSeriesNavigate,\n            onSeriesMapSelect,\n            onSearchClick,\n            popMapHistory,\n            pushMapHistory,\n            clearMapHistory\n          }}\n          queryVersion={queryVersion}\n          seriesList={seriesProps && seriesProps.allSeries ? seriesProps.allSeries.seriesSummaries : []}\n          loading={!seriesProps || seriesProps.loading}\n        />\n      </React.Fragment>\n    )\n  }\n  InnerHomeMap.propTypes = {\n    onSeriesNavigate: PropTypes.func.isRequired,\n    onSeriesMapSelect: PropTypes.func.isRequired,\n    onSearchClick: PropTypes.func.isRequired,\n    popMapHistory: PropTypes.func.isRequired,\n    pushMapHistory: PropTypes.func.isRequired,\n    clearMapHistory: PropTypes.func.isRequired,\n    initialActiveSeries: PropTypes.string,\n    initViewport: PropTypes.object\n  }\n  // InnerHomeMap.whyDidYouRender = true\n  return InnerHomeMap\n}\n\nconst withAllSeries = graphql(datastore.graphql.queries.allSeries, {\n  props: ({ data, ownProps }) => {\n    // console.log('withAllSeries', { data, ownProps })\n    // If there's more data to load we should go get another batch\n    if (!data.loading && !data.error && data.allSeries && data.allSeries.seriesSummaries.length > 0 && data.allSeries.nextToken) {\n      data.fetchMore({\n        variables: { ...data.variables, nextToken: data.allSeries.nextToken },\n        // How do we mush the new query with the old one\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return {\n            allSeries: {\n              ...fetchMoreResult.allSeries,\n              seriesSummaries: [ ...prev.allSeries.seriesSummaries, ...fetchMoreResult.allSeries.seriesSummaries ]\n            }\n          }\n        }\n      })\n    }\n    else if (data.loading || data.error) {\n      ownProps.setSeriesProps(data)\n    }\n    else {\n      // console.log('withAllSeries polling done')\n      ownProps.setSeriesProps({ ...data, readyForPolling: true })\n    }\n    return null\n  },\n  options: {\n    variables: { limit: 100 }\n  }\n})\n\n/**\n * Here's the graphql HOC that gets an individual series\n */\nconst withPollQuery = graphql(datastore.graphql.queries.pollQuery, {\n  skip: ({ lastCheck, online }) => !lastCheck || !online,\n  props: ({ data, ownProps: { seriesProps, updateIncrement } }) => {\n    if (data.error) {\n      console.log('POLL FAIL', data.error, data)\n      console.error(data.error)\n    }\n    else {\n      // console.log('withPollQuery', { data, seriesProps, updateIncrement })\n    }\n    if (!data.loading && data.changedSeries && data.changedSeries.seriesSummaries) {\n      // console.log('POLLING', { data, seriesProps })\n      const newData = data.changedSeries.seriesSummaries\n      const oldList = seriesProps.allSeries.seriesSummaries\n\n      // If the polling has begun and we have some good polling data back then\n      // Process it and decide if we need to incorporate it\n      if (data.changedSeries) {\n        let newSeriesSummaries = seriesProps.allSeries.seriesSummaries\n        newData.forEach(({ seriesStatus, ...polledSeries }) => {\n          if (seriesStatus === 'deleted') {\n            console.log('Polling found a series to delete: ', polledSeries.id)\n            newSeriesSummaries = oldList.filter(s => s.id !== polledSeries.id)\n          }\n          else {\n            const idx = oldList.findIndex(ds => ds.id === polledSeries.id)\n            if (idx >= 0) {\n              console.log('Polling found a series to Update: ', polledSeries.id)\n              newSeriesSummaries = oldList.map((oldSeries, oldId) => oldId === idx ? polledSeries : oldSeries)\n            }\n            else {\n              console.log('Polling found a series to add: ', polledSeries.id)\n              newSeriesSummaries = [...oldList, polledSeries]\n            }\n          }\n          seriesProps.updateQuery((data, options) => {\n            try {\n              const newData = { ...data }\n              newData.allSeries.seriesSummaries = newSeriesSummaries\n              updateIncrement()\n              return data\n            }\n            catch (e) {\n              console.error(e)\n              return data\n            }\n          })\n        })\n      }\n    }\n    return null\n  },\n  options: ({ lastCheck }) => ({\n    variables: {\n      limit: 100,\n      lastCheck\n    }\n  })\n})\n\n// We're using graphql() HOC because it's convenient but it doesn't need to render anything\nconst AllSeriesConnect = withAllSeries(() => null)\nconst PollQueryConnect = withPollQuery(() => null)\n\n// The only part of the state the main view caes about is teh window\nconst mapStateToProps = (state, props) => {\n  const { current: { activeSeries } } = state.home\n  const initViewport = state.map.slice(-1).pop()\n  return { initialActiveSeries: activeSeries, initViewport, ...props }\n}\n\nconst STATES = config.home.AppStateTypes\n\n// There are a few presentational actions the main window can use\nconst mapDispatchToProps = {\n  onSeriesNavigate: activeSeries => datastore.redux.actions.setHomeState(STATES.SERIES, { activeSeries }),\n  onSeriesMapSelect: datastore.redux.actions.setActiveSeries,\n  onSearchClick: () => datastore.redux.actions.setHomeState(STATES.SEARCH, { search: { tab: config.home.SEARCH_TABS.LOCATION, text: '' } }),\n  popMapHistory: datastore.redux.actions.popMapHistory,\n  pushMapHistory: datastore.redux.actions.pushMapHistory,\n  clearMapHistory: datastore.redux.actions.clearMapHistory\n}\n\nexport default compose(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  withHomeMap\n)\n","import React, { useState, useMemo, useContext, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { graphql, compose } from 'react-apollo'\nimport ReactGA from 'react-ga'\n\nimport { connect } from 'react-redux'\n\nimport { config, AppContext } from '@morphoto/client-common'\nimport datastore from '@morphoto/datastore'\n\nimport { dates } from '@morphoto/common'\n\nconst TABS = config.home.SEARCH_TABS\n\nconst withSearchConnect = Wrapped => {\n  const Inner = ({ defaultTab, defaultText, fetchMore }) => {\n    // console.log('withSearchConnect', { Wrapped, defaultTab, defaultText, fetchMore })\n    const [currentTab, setCurrentTab] = useState(defaultTab || TABS.TAG)\n    const { globalActions } = useContext(AppContext)\n    // We separate these because one of them needs to be immediate and the\n    const [searchText, setSearchText] = useState(defaultText || '')\n    const [contextChoice, setContextChoice] = useState(null)\n\n    useEffect(() => {\n      ReactGA.pageview('search')\n    }, [])\n\n    useEffect(() => {\n      if (contextChoice || searchText.length > 3) {\n        ReactGA.event({\n          category: `Search:${currentTab}`,\n          action: contextChoice ? 'Search Context Select' : 'Search Text Change',\n          label: contextChoice ? contextChoice.name : searchText\n        })\n      }\n    }, [searchText, currentTab, contextChoice])\n\n    const handleTabChange = (newTab) => {\n      setContextChoice(null)\n      setCurrentTab(newTab)\n    }\n    const handleContextChoiceChange = (newContextChoice) => {\n      setContextChoice(newContextChoice)\n    }\n    const handleSearchTextChange = (text) => {\n      setSearchText(text)\n      setContextChoice(null)\n    }\n\n    let withContextQuery = null\n    let withSearchQuery = null\n\n    switch (currentTab) {\n      case TABS.KEYWORD:\n        withContextQuery = (Wrapped) => Wrapped\n        withSearchQuery = withKeywordSearch\n        break\n      case TABS.TAG:\n        withContextQuery = withTagSearch\n        withSearchQuery = withTagSeries\n        break\n      case TABS.LOCATION:\n        withContextQuery = withGeoCode\n        // withSearchQuery = withGeoSearch\n        break\n      case TABS.USER:\n        withContextQuery = withUserSearch\n        withSearchQuery = withUserSeries\n        break\n      default:\n        break\n    }\n\n    const ComposedSearch = useMemo(() => withSearchQuery\n      ? compose(\n        withContextQuery,\n        withSearchQuery\n      )(Wrapped)\n      : withContextQuery(Wrapped), [withContextQuery, withSearchQuery])\n\n    return <ComposedSearch {...{ currentTab, searchText, contextChoice }}\n      actions={{\n        onMapClick: globalActions.jumpToMap,\n        onResultClick: globalActions.jumpToSeriesView,\n        setContextChoice: handleContextChoiceChange,\n        fetchMore: fetchMore,\n        setCurrentTab: handleTabChange,\n        setSearchText: handleSearchTextChange\n      }}\n    />\n  }\n  Inner.propTypes = {\n    searchResults: PropTypes.array,\n    contextResults: PropTypes.array,\n    defaultTab: PropTypes.any,\n    defaultText: PropTypes.string,\n    loading: PropTypes.bool,\n    fetchMore: PropTypes.func\n  }\n  return Inner\n}\n/*****************************************************************\n *  PART 1: SEARCH QUERIES\n *****************************************************************/\n\n/**\n * Here's the graphql HOC that gets an individual series\n */\nconst withTagSearch = graphql(datastore.graphql.queries.tagSearch, {\n  props: ({ data }) => {\n    if (data.error) console.error(data.error)\n    // console.log('withTagSearch', data)\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      console.error(data)\n      console.error(e)\n    }\n    const contextResults = data.tags ? data.tags.map(({ name, count }) => ({\n      name,\n      description: `~ ${count < 10 ? count : Math.ceil(count / 10) * 10} Photo series tagged`\n    })) : []\n\n    return {\n      contextResults,\n      loading: data.loading,\n      series\n    }\n  },\n  // skip: ({ searchText }) => !searchText || searchText.length < 3,\n  options: ({ searchText }) => ({\n    variables: {\n      tag: !searchText || searchText.length < 3 ? '' : searchText,\n      limit: 10\n    }\n  })\n})\n\nconst withUserSearch = graphql(datastore.graphql.queries.userSearch, {\n  props: ({ data }) => {\n    if (data.error) console.error(data.error)\n    // console.log('withUserSearch', data)\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      console.error(data)\n      console.error(e)\n    }\n\n    const contextResults = data.userSearch ? data.userSearch.map(({ username, gravatar, createdOn, id }) => ({\n      name: username,\n      id,\n      description: `Joined ${dates.formatDateAgo(createdOn)}`,\n      gravatar\n    })) : []\n\n    return {\n      contextResults,\n      loading: data.loading,\n      series\n    }\n  },\n  skip: ({ searchText }) => !searchText || searchText.length < 3,\n  options: ({ searchText }) => ({\n    variables: {\n      searchStr: searchText,\n      limit: 10\n    }\n  })\n})\n\nconst withGeoCode = graphql(datastore.graphql.queries.geocode, {\n  props: ({ data }) => {\n    if (data.error) console.error(data.error)\n    // console.log('withGeoCode', data)\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      console.error(data)\n      console.error(e)\n    }\n\n    const contextResults = data.geocoder ? data.geocoder.map(({ relevance, text, placeName, bbox, center }) => ({\n      name: text,\n      description: placeName,\n      bbox,\n      center,\n      relevance\n    })) : []\n\n    return {\n      contextResults,\n      loading: data.loading,\n      series\n    }\n  },\n  skip: ({ searchText }) => !searchText || searchText.length < 3,\n  options: ({ searchText }) => ({\n    variables: {\n      search: searchText\n      // limit: 10\n    }\n  })\n})\n\n/*****************************************************************\n * PART 2: SERIES SEARCH QUERIES\n *****************************************************************/\n\nconst withTagSeries = graphql(datastore.graphql.queries.seriesWithTag, {\n  props: ({ data }) => {\n    if (data.error) console.error(data.error)\n    // console.log('withTagSeries', data)\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      console.error(data)\n      console.error(e)\n    }\n\n    // A second Thunk function designed to get more elements in the feed history\n    const fetchMore = data.loading || !data.tagSeries || !data.tagSeries.nextToken ? null : () => {\n      console.log('fetchMore', data)\n      data.fetchMore({\n        variables: { ...data.variables, nextToken: data.tagSeries.nextToken },\n        // How do we mush the new query with the old one\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return {\n            tagSeries: {\n              ...fetchMoreResult.tagSeries,\n              seriesSummaries: [ ...prev.tagSeries.seriesSummaries, ...fetchMoreResult.tagSeries.seriesSummaries ]\n                .filter(s => s.seriesStatus !== 'deleted')\n            }\n          }\n        }\n      })\n    }\n\n    const searchResults = data.tagSeries && data.tagSeries.seriesSummaries\n      ? data.tagSeries.seriesSummaries\n      : []\n\n    return {\n      searchResults,\n      fetchMore,\n      loading: data.loading,\n      series\n    }\n  },\n  skip: ({ contextChoice }) => !contextChoice,\n  options: ({ contextChoice }) => ({\n    variables: {\n      tag: contextChoice.name,\n      limit: 10\n    }\n  })\n})\n\nconst withUserSeries = graphql(datastore.graphql.queries.userSeries, {\n  props: ({ data }) => {\n    if (data.error) console.error(data.error)\n    // console.log('withUserSeries', data)\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      console.error(data)\n      console.error(e)\n    }\n\n    // A second Thunk function designed to get more elements in the feed history\n    const fetchMore = data.loading || !data.userSeries || !data.userSeries.nextToken ? null : () => {\n      console.log('fetchMore', data)\n      data.fetchMore({\n        variables: { ...data.variables, nextToken: data.userSeries.nextToken },\n        // How do we mush the new query with the old one\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return {\n            userSeries: {\n              ...fetchMoreResult.userSeries,\n              seriesSummaries: [ ...prev.userSeries.seriesSummaries, ...fetchMoreResult.userSeries.seriesSummaries ]\n                .filter(s => s.seriesStatus !== 'deleted')\n            }\n          }\n        }\n      })\n    }\n\n    const searchResults = data.userSeries && data.userSeries.seriesSummaries\n      ? data.userSeries.seriesSummaries\n      : []\n\n    return {\n      searchResults,\n      fetchMore,\n      loading: data.loading,\n      series\n    }\n  },\n  skip: ({ contextChoice }) => !contextChoice,\n  options: ({ contextChoice }) => ({\n    variables: {\n      createdBy: contextChoice.id,\n      limit: 10\n    }\n  })\n})\n\nconst withKeywordSearch = graphql(datastore.graphql.queries.keywordSearch, {\n  props: ({ data }) => {\n    if (data.error) console.error(data.error)\n    // console.log('withUserSeries', data)\n    let series = null\n    try {\n      if (!data.loading && !data.error) series = data.series\n    }\n    catch (e) {\n      console.error(data)\n      console.error(e)\n    }\n\n    // A second Thunk function designed to get more elements in the feed history\n    const fetchMore = data.loading || !data.keywordSearch || !data.keywordSearch.nextToken ? null : () => {\n      console.log('fetchMore', data)\n      data.fetchMore({\n        variables: { ...data.variables, nextToken: data.keywordSearch.nextToken },\n        // How do we mush the new query with the old one\n        updateQuery: (prev, { fetchMoreResult }) => {\n          return {\n            keywordSearch: {\n              ...fetchMoreResult.keywordSearch,\n              seriesSummaries: [ ...prev.keywordSearch.seriesSummaries, ...fetchMoreResult.keywordSearch.seriesSummaries ]\n                .filter(s => s.seriesStatus !== 'deleted')\n            }\n          }\n        }\n      })\n    }\n\n    const searchResults = data.keywordSearch && data.keywordSearch.seriesSummaries\n      ? data.keywordSearch.seriesSummaries\n      : []\n\n    return {\n      searchResults,\n      fetchMore,\n      loading: data.loading,\n      series\n    }\n  },\n  skip: ({ searchText }) => !searchText || searchText.length < 3,\n  options: ({ searchText }) => ({\n    variables: {\n      searchStr: searchText,\n      limit: 10\n    }\n  })\n})\n\n// const withGeoSearch = graphql(geoSeries, {\n//   props: ({ data }) => {\n//     if (data.error) console.error(data.error)\n//     // console.log('HERE', data)\n//     let series = null\n//     try {\n//       if (!data.loading && !data.error) series = data.series\n//     }\n//     catch (e) {\n//       console.error(data)\n//       console.error(e)\n//     }\n//     return {\n//       data,\n//       loading: data.loading,\n//       series\n//     }\n//   },\n//   skip: ({ contextChoice }) => !contextChoice,\n//   options: ({ contextChoice }) => ({\n//     variables: {\n//       bounds: contextChoice.bbox\n//       // limit: 10\n//       // nextToken\n//     }\n//   })\n// })\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { current: { search, activeSeries } } = state.home\n  return {\n    defaultTab: search ? search.tab : null,\n    defaultText: search ? search.text : null,\n    activeSeries\n  }\n}\n\nexport default compose(\n  connect(\n    mapStateToProps\n  ),\n  withSearchConnect\n)\n","import React, { useContext, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport ReactGA from 'react-ga'\n\nimport { graphql, compose } from 'react-apollo'\n// import { print } from 'graphql/language/printer'\n\nimport { AppContext } from '@morphoto/client-common'\nimport datastore from '@morphoto/datastore'\n\nconst withProfileConnect = Wrapped => {\n  const Inner = ({ data }) => {\n    const { seriesQ, watchedSeriesQ } = data\n    const { currentUser, globalActions } = useContext(AppContext)\n\n    const mySeries = seriesQ && seriesQ.userSeries && seriesQ.userSeries.seriesSummaries\n      ? seriesQ.userSeries.seriesSummaries.filter(s => s.seriesStatus !== 'deleted') || []\n      : []\n    const watchingSeries = watchedSeriesQ && watchedSeriesQ.arraySeries ? watchedSeriesQ.arraySeries : []\n    // console.log('ProfileConnect', { mySeries, watchedSeriesQ, watchingSeries })\n\n    const loading = Boolean(\n      (seriesQ && seriesQ.loading) ||\n    (watchedSeriesQ && watchedSeriesQ.loading)\n    )\n\n    useEffect(() => {\n      ReactGA.pageview('profile')\n    }, [])\n\n    return <Wrapped user={currentUser} {...{\n      loading,\n      mySeries,\n      watchingSeries,\n      actions: {\n        jumpToSeries: globalActions.jumpToSeriesView,\n        jumpToMap: globalActions.jumpToSeriesMap\n      }\n    }} />\n  }\n\n  Inner.propTypes = {\n    data: PropTypes.object, // from graphql\n    jumpToSeries: PropTypes.func, // from redux\n    jumpToMap: PropTypes.func // from redux\n  }\n  return Inner\n}\n\nconst withuserSeriesQuery = graphql(datastore.graphql.queries.userSeries, {\n  props: ({ data, ownProps }) => {\n    // print(datastore.graphql.queries.userSeries)\n    // console.log('ProfileConnect withuserSeriesQuery', { data, ownProps })\n    return { data: { ...ownProps.data, seriesQ: data } }\n  }\n})\n\nconst withMyWatchedSeriesQuery = graphql(datastore.graphql.queries.seriesFromList, {\n  props: ({ data, ownProps }) => {\n    // console.log('ProfileConnect withMyWatchedSeriesQuery', datastore.graphql.queries.seriesFromList, { data, ownProps })\n    return { data: { ...ownProps.data, watchedSeriesQ: data } }\n  },\n  skip: ({ data, user }) => {\n    try {\n      return user.watching.length < 1\n    }\n    catch (e) {\n      return true\n    }\n  },\n  options: ({ data, user }) => {\n    return {\n      variables: { seriesList: user.watching }\n    }\n  }\n})\n\nexport default compose(\n  withuserSeriesQuery,\n  // withMyPhotosQuery,\n  withMyWatchedSeriesQuery,\n  withProfileConnect\n)\n","import React, { useRef, useState, useEffect, useContext } from 'react'\nimport PropTypes from 'prop-types'\nimport { graphql, compose } from 'react-apollo'\nimport { AppContext } from '@morphoto/client-common'\nimport ReactGA from 'react-ga'\n\nimport datastore from '@morphoto/datastore'\n\nconst POLL_INTERVAL = 20 // (seconds)\nconst FEED_LIMIT = 5 // (items to load)\n\nconst withFeedConnect = Wrapped => {\n  const Component = ({ data, loading, loadingNewest, loadingMore, gqlActions }) => {\n    const timerRef = useRef()\n    const lastCheckRef = useRef()\n    const [lastCheck, setLastCheck] = useState(null)\n    const { online, globalActions } = useContext(AppContext)\n    lastCheckRef.current = lastCheck\n\n    // Initiate the polling process. We simply update the timestamp every N seconds\n    useEffect(() => {\n      function ping () {\n        if (timerRef.current) {\n          // console.log('FeedConnect timerRef.current', timerRef.current, POLL_INTERVAL)\n          if (online.isOnline) gqlActions.fetchNewest()\n          setLastCheck(String(Date.now() - POLL_INTERVAL * 1000))\n        }\n      }\n      if (!timerRef.current) timerRef.current = setInterval(ping, POLL_INTERVAL * 1000)\n      return () => {\n        if (timerRef.current) {\n          // console.log('FeedConnect clear poll timer')\n          clearInterval(timerRef.current)\n          timerRef.current = null\n        }\n      }\n    }, [gqlActions, online.isOnline])\n\n    useEffect(() => {\n      ReactGA.pageview('feed')\n    }, [])\n\n    const events = data.myFeed ? data.myFeed.feed.filter(s => s.seriesStatus !== 'deleted') || [] : []\n    const window = data.myFeed ? data.myFeed.window.map(v => parseInt(v, 10)) || [null, null] : [null, null]\n\n    return (\n      <Wrapped {...{ events, loading, window }}\n        actions={{\n          onImageClick: globalActions.jumpToSeriesView,\n          onProfileClick: globalActions.jumpToUser,\n          onMapClick: globalActions.jumpToSeriesMap,\n          fetchMore: gqlActions.fetchMore,\n          fetchNewest: gqlActions.fetchNewest\n        }}\n      />\n    )\n  }\n  Component.propTypes = {\n    data: PropTypes.object, // from graphql\n    loading: PropTypes.bool, // from graphql\n    loadingNewest: PropTypes.bool, // from graphql\n    loadingMore: PropTypes.bool, // from graphql\n    gqlActions: PropTypes.shape({\n      fetchMore: PropTypes.func,\n      fetchNewest: PropTypes.func\n    })\n  }\n  return Component\n}\nconst withFeedQuery = graphql(datastore.graphql.queries.getMyFeed, {\n  props: ({ data }) => {\n    if (data.error) console.error(data.error)\n\n    // TODO: Not sure this will propagate correctly. Test it.\n    let loadingNewest = false\n    let loadingMore = false\n\n    // console.log('withFeedQuery', data)\n\n    // One Thunk function designed for getting everything since the last check\n    const fetchNewest = () => {\n      loadingNewest = true\n      // console.log('fetchNewest', data)\n      if (data.myFeed && !data.loading) {\n        // console.log('DEBUG fetchNewest1', { ...data.variables, start: data.myFeed.window[1] })\n        data.fetchMore({\n          variables: { ...data.variables, start: data.myFeed.window[1] },\n          // How do we mush the new query with the old one\n          updateQuery: (prev, { fetchMoreResult }) => {\n            // console.log('DEBUG fetchNewest2', { prev, fetchMoreResult })\n            loadingNewest = false\n            return {\n              myFeed: {\n                ...fetchMoreResult.myFeed,\n                // put the newest stuff first\n                feed: [ ...fetchMoreResult.myFeed.feed, ...prev.myFeed.feed ],\n                window: [prev.myFeed.window[0], fetchMoreResult.myFeed.window[1]]\n              }\n            }\n          }\n        })\n      }\n    }\n\n    // A second Thunk function designed to get more elements in the feed history\n    const fetchMore = () => {\n      loadingMore = true\n      // console.log('fetchMore', data)\n      if (data.myFeed) {\n        data.fetchMore({\n          variables: { ...data.variables, end: data.myFeed.window[0] },\n          // How do we mush the new query with the old one\n          updateQuery: (prev, { fetchMoreResult }) => {\n            loadingMore = false\n            return {\n              myFeed: {\n                ...fetchMoreResult.myFeed,\n                feed: [ ...prev.myFeed.feed, ...fetchMoreResult.myFeed.feed ],\n                window: [fetchMoreResult.myFeed.window[0], prev.myFeed.window[1]]\n              }\n            }\n          }\n        })\n      }\n    }\n\n    return {\n      data,\n      loading: data.loading,\n      loadingMore,\n      loadingNewest,\n      gqlActions: {\n        fetchNewest, // This is the poll we do every n seconds\n        fetchMore // This is when we scroll to the bottom of the list\n      }\n    }\n  },\n  // skip: ({ activeSeries, isNewSeries }) => !activeSeries || isNewSeries,\n  options: ({ activeSeries }) => ({\n    variables: {\n      limit: FEED_LIMIT\n    }\n  })\n})\n\nexport default compose(\n  withFeedQuery,\n  withFeedConnect\n)\n","import React, { useState, useContext, useMemo, useRef, useEffect, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport Bottleneck from 'bottleneck'\nimport { graphql, compose } from 'react-apollo'\n\nimport { long2tile, lat2tile } from 'geotilehash'\n\nimport { config, AppContext } from '@morphoto/client-common'\nimport datastore from '@morphoto/datastore'\nimport { OFFLINE_STATES } from '@morphoto/maps'\n\nconst withOfflineData = Wrapped => {\n  const Inner = ({\n    lastMapViewport, completedDownload, viewport, setOfflineCompleted, setOfflineViewport\n  }) => {\n    const [toolState, setToolState] = useState(viewport && completedDownload ? OFFLINE_STATES.LOCKED : OFFLINE_STATES.NAVIGATING)\n    const limiterRef = useRef()\n    const { online, globalActions } = useContext(AppContext)\n\n    // Setting the bounds is what kicks off the whole process\n    const [bounds, setBounds] = useState(null)\n    // Series ids only get set when the geoQuery finishes\n    const [seriesIds, setSeriesIds] = useState(null)\n    // This is the current Series object we are putting through the query\n    const [activeSeriesId, setActiveSeriesId] = useState(null)\n    const [seriesPhotos, setSeriesPhotos] = useState([])\n\n    const [tileTick, setTileTick] = useState([0, 0])\n    const [seriesTick, setSeriesTick] = useState([0, 0])\n    const [seriesPhotoTick, setSeriesPhotoTick] = useState([0, 0])\n\n    // We're dealing in asynchronous so we need a ref to make sure we're usign the current values\n    const tileTickRef = useRef()\n    tileTickRef.current = { tileTick, seriesTick, seriesPhotoTick, seriesIds, seriesPhotos }\n\n    const onTileTick = () => setTileTick([tileTickRef.current.tileTick[0] + 1, tileTickRef.current.tileTick[1]])\n    const onTileAdd = (num) => setTileTick([tileTickRef.current.tileTick[0], tileTickRef.current.tileTick[1] + num])\n    const onSeriesPhotoTick = () => {\n      setSeriesPhotoTick([tileTickRef.current.seriesPhotoTick[0] + 1, tileTickRef.current.seriesPhotoTick[1]])\n    }\n    const onSeriesPhotoAdd = (num) => setSeriesPhotoTick([tileTickRef.current.seriesPhotoTick[0], tileTickRef.current.seriesPhotoTick[1] + num])\n\n    const onSeriesTick = useCallback((urls) => {\n      const theTick = tileTickRef.current.seriesTick\n      const theIds = tileTickRef.current.seriesIds.ids\n      const thePhotos = tileTickRef.current.seriesPhotos\n      if (urls) {\n        let addCount = 0\n        urls.forEach(url => {\n          if (thePhotos.indexOf(url) === -1) {\n            addCount++\n            setSeriesPhotos([...thePhotos, url])\n            limiterRef.current.schedule(() => makeRequest('GET', url))\n              .then(onSeriesPhotoTick)\n            // Maybe we should do something different on errors (but what?)\n              .catch(onSeriesPhotoTick)\n          }\n        })\n        onSeriesPhotoAdd(addCount)\n      }\n      // now kick off the next series\n      if (theTick && theIds[theTick[0]]) {\n        setActiveSeriesId(theIds[theTick[0] + 1])\n        setSeriesTick([theTick[0] + 1, theTick[1]])\n      }\n      else {\n      // We are done the series\n      }\n    }, [])\n\n    const finalState = useMemo(() => online.isOnline ? toolState : OFFLINE_STATES.OFFLINE, [online.isOnline, toolState])\n\n    const geoSeriesQuery = useMemo(() => <GeoQuery bounds={bounds} setSeriesIds={setSeriesIds} />, [bounds])\n    const wholeSeriesQuery = useMemo(() => <WholeSeriesConnect id={activeSeriesId} onDone={onSeriesTick} />, [activeSeriesId, onSeriesTick])\n\n    const onStart = (bounds, viewport) => {\n      setToolState(OFFLINE_STATES.DOWNLOADING)\n      setBounds(bounds)\n      setOfflineViewport(viewport)\n    }\n\n    const onDone = useCallback(() => {\n      setToolState(OFFLINE_STATES.LOCKED)\n      setOfflineCompleted(true)\n    }, [setOfflineCompleted])\n\n    const onCancel = () => {\n      setToolState(OFFLINE_STATES.CANCELED)\n      setBounds(null)\n      setSeriesIds(null)\n      setTileTick([0, 0])\n      setSeriesTick([0, 0])\n      setSeriesPhotoTick([0, 0])\n      setSeriesPhotos([])\n      limiterRef.current.stop({ dropWaitingJobs: true })\n      limiterRef.current = null\n      limiterRef.current = new Bottleneck({ maxConcurrent: 5 })\n    }\n\n    // Initialize the bottleNeck\n    useEffect(() => {\n      limiterRef.current = new Bottleneck({ maxConcurrent: 5 })\n    }, [])\n\n    // This is a little taxing so we keep it async\n    useEffect(() => {\n      if (bounds) {\n        const tiles = getTiles(bounds, [0, config.home.Offline.highestOfflineTileZoom])\n        const length = tiles.length\n        if (length === 0) return\n        onTileAdd(length)\n        tiles.forEach(tile => {\n          limiterRef.current.schedule(() => makeRequest('GET', tile))\n            .then(onTileTick)\n          // Maybe we should do something different on errors (but what?)\n            .catch(onTileTick)\n        })\n      }\n    }, [bounds])\n\n    // If we see series then kick off that cascade\n    useEffect(() => {\n    // console.log('OfflineMap:: kicking off the series loading', { seriesTick, seriesIds })\n      if (seriesIds && seriesIds.ids) {\n      // Kick off the series loading\n        if (seriesIds.ids.length > 0) setActiveSeriesId(seriesIds.ids[0])\n        setSeriesTick([0, seriesIds.ids.length])\n        setSeriesPhotoTick([0, 0])\n      }\n    }, [seriesIds])\n\n    useEffect(() => {\n      const newTotal = [tileTick[0] + seriesTick[0] + seriesPhotoTick[0], tileTick[1] + seriesTick[1] + seriesPhotoTick[1]]\n      if (newTotal[1] > 0 && newTotal[0] === newTotal[1]) onDone()\n    }, [tileTick, seriesTick, seriesPhotoTick, onDone])\n\n    return (\n      <React.Fragment>\n        {wholeSeriesQuery}\n        {geoSeriesQuery}\n        <Wrapped\n          initViewport={viewport || lastMapViewport}\n          progress={{ tileTick, seriesTick, seriesPhotoTick }}\n          toolState={finalState}\n          actions={{\n            onMenuBack: () => {\n              onCancel()\n              globalActions.onMenuBack()\n            },\n            onStartDownload: onStart,\n            onCancel: onCancel,\n            onCancelComplete: () => {\n              setToolState(OFFLINE_STATES.NAVIGATING)\n            },\n            onUnlock: () => {\n              setToolState(OFFLINE_STATES.NAVIGATING)\n              setOfflineCompleted(false)\n            }\n          }}\n        />\n      </React.Fragment>\n    )\n  }\n  Inner.propTypes = {\n  // All from redux\n    lastMapViewport: PropTypes.object,\n    completedDownload: PropTypes.bool,\n    viewport: PropTypes.object,\n    setOfflineCompleted: PropTypes.func.isRequired,\n    setOfflineViewport: PropTypes.func.isRequired\n  }\n  return Inner\n}\n\nconst withGeoSearch = graphql(datastore.graphql.queries.geoSeriesIdOnly, {\n  props: ({ data, ownProps }) => {\n    if (data.error) console.error(data.error)\n    console.log('OfflineMap::withGeoSearch:: ', { data, ownProps })\n    try {\n      // Fetch until we have everything\n      if (!data.loading && !data.error && data.seriesInGeoBounds && data.seriesInGeoBounds.seriesSummaries.length > 0 && data.seriesInGeoBounds.nextToken) {\n        ownProps.setSeriesIds({ ids: [], loading: true })\n        // console.log('OfflineMap::withGeoSearch::fetchMore', { ...data.variables, nextToken: data.seriesInGeoBounds.nextToken })\n        data.fetchMore({\n          variables: { ...data.variables, nextToken: data.seriesInGeoBounds.nextToken },\n          // How do we mush the new query with the old one\n          updateQuery: (prev, { fetchMoreResult }) => {\n            // console.log('OfflineMap::withGeoSearch::updateQuery', { prev, fetchMoreResult })\n            return {\n              seriesInGeoBounds: {\n                ...fetchMoreResult.seriesInGeoBounds,\n                seriesSummaries: [ ...prev.seriesInGeoBounds.seriesSummaries, ...fetchMoreResult.seriesInGeoBounds.seriesSummaries ]\n              }\n            }\n          }\n        })\n      }\n      else if (data.loading || data.error) {\n        // console.log('OfflineMap::withGeoSearch::loading or errir')\n        ownProps.setSeriesIds({ ids: [], loading: true })\n      }\n      else {\n        console.log('OfflineMap::withGeoSearch::DONE')\n        if (data && data.seriesInGeoBounds) {\n          ownProps.setSeriesIds({ ids: data.seriesInGeoBounds.seriesSummaries.map(s => s.id), loading: false })\n        }\n      }\n    }\n    catch (e) {\n      console.error(data)\n      console.error(e)\n    }\n    return {\n      data,\n      loading: data.loading\n    }\n  },\n  skip: ({ bounds }) => !bounds,\n  options: ({ bounds }) => ({\n    variables: {\n      bounds,\n      limit: 100\n      // nextToken\n    }\n  })\n})\n\n/**\n * Here's the graphql HOC that gets an individual series\n */\nconst withGetSelectedQuery = graphql(datastore.graphql.queries.getWholeSeries, {\n  skip: ({ id }) => !id,\n  props: ({ data, ownProps }) => {\n    if (data.error) console.error(data.error)\n    // console.log('OfflineMap::withGetSelectedQuery:: ', { data })\n    let series = null\n    try {\n      if (!data.loading && !data.error) {\n        series = data.series\n        // console.log('OfflineMap::withGetSelectedQuery::series', series)\n        const urls = []\n        urls.push(series.createdUser.gravatar)\n        urls.push(series.updatedUser.gravatar)\n        series.photos.forEach(ph => {\n          urls.push(ph.createdUser.gravatar)\n          urls.push(ph.updatedUser.gravatar)\n          // Skip medium for size sake\n          config.home.Offline.seriesImgsToCache\n            .map(size => urls.push(`${ph.paths.base}${ph.paths[size]}`))\n        })\n        // Remove duplicates and send it back\n        ownProps.onDone([...new Set(urls)])\n      }\n    }\n    catch (e) {\n      console.log('OfflineMap::withGetSelectedQuery:: error', { data, e })\n      console.error(e)\n    }\n    return {\n      data,\n      loading: data.loading,\n      series\n    }\n  },\n  options: ({ id }) => ({\n    variables: {\n      id\n    }\n  })\n})\n// We're using graphql() HOC because it's convenient but it doesn't need to render anything\nconst WholeSeriesConnect = withGetSelectedQuery(() => null)\nconst GeoQuery = withGeoSearch(() => null)\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const lastMapViewport = state.map.slice(-1).pop()\n  const { completedDownload, viewport } = state.offline\n  return { lastMapViewport, completedDownload, viewport }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  setOfflineCompleted: (bVal) => {\n    dispatch(datastore.redux.actions.setOfflineCompleted(bVal))\n  },\n  setOfflineViewport: (viewport) => {\n    dispatch(datastore.redux.actions.setOfflineViewport(viewport))\n  }\n})\n\nexport default compose(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  withOfflineData\n)\n\n/**\n * Promisify our XMLHttpRequests\n * @param {*} method\n * @param {*} url\n */\nfunction makeRequest (method, url) {\n  return new Promise((resolve, reject) => {\n    var xhr = new XMLHttpRequest()\n    xhr.open(method, url)\n    xhr.onload = () => {\n      if (xhr.status >= 200 && xhr.status < 300) resolve(xhr.response)\n      else reject(new Error(xhr.statusText))\n    }\n    xhr.onerror = () => {\n      reject(new Error(xhr.statusText))\n    }\n    xhr.send()\n  })\n}\n\nexport const getTileURL = (url, zoom, x, y) => {\n  const newUrl = url + `?access_token=${process.env.REACT_APP_MAPBOX_TOKEN}`\n  return newUrl.replace('{z}/{x}/{y}', `${zoom}/${x}/${y}`)\n}\n\n/**\n * Loop over all the tiles and zoom levels and build\n * us an array of URLs\n * @param {*} bounds\n * @param {*} right\n */\nexport function getTiles (bounds, zoomRange) {\n  const tiles = []\n\n  for (let zoom = zoomRange[0]; zoom <= zoomRange[1]; zoom++) {\n    const xtileLeft = long2tile(bounds[0], zoom)\n    const xtileRight = long2tile(bounds[2], zoom)\n\n    const ytileTop = lat2tile(bounds[1], zoom)\n    const ytileBottom = lat2tile(bounds[3], zoom)\n\n    for (let x = xtileLeft; x <= xtileRight; x++) {\n      for (let y = ytileTop; y <= ytileBottom; y++) {\n        // Push both tiles\n        tiles.push(getTileURL(process.env.REACT_APP_TILEURL_SAT, zoom, x, y))\n        tiles.push(getTileURL(process.env.REACT_APP_TILEURL_TOPO, zoom, x, y))\n      }\n    }\n  }\n  return tiles\n  // console.log('Starting Coords', { tiles, top, left, bottom, right })\n}\n","export default require('./MyFeed').default;\nexport { default as FeedItem } from './FeedItem';\nexport { default as FeedEnder } from './FeedEnder';","export default require('./MyProfile').default;","import React, { useState } from 'react'\n// import PropTypes from 'prop-types'\nimport { graphql } from 'react-apollo'\nimport { connect } from 'react-redux'\n\nimport { ErrorScreen, ERROR_SEND_STATES } from '@morphoto/ui'\n// import { config } from '@morphoto/client-common'\n\nimport datastore from '@morphoto/datastore'\n\nconst ErrorConnect = (props) => {\n  const [state, setState] = useState(ERROR_SEND_STATES.UNSENT)\n  const Wrapped = withReportBugMutation(ErrorScreen)\n  return <Wrapped {...props} setState={setState} sendState={state} />\n}\n\nconst withReportBugMutation = graphql(datastore.graphql.mutations.reportBug, {\n  props: ({ mutate, ownProps: { reduxState, error, setState } }) => {\n    console.log('withReportBugMutation props', { mutate, reduxState, error })\n    if (mutate.error) setState(ERROR_SEND_STATES.ERROR)\n    return {\n      reportError: (note) => {\n        setState(ERROR_SEND_STATES.SENDING)\n        let reportJSON = ''\n        // attempt to get some userAgent info\n        let extra = {}\n        try {\n          const { userAgent, appVersion, languages, language, platform, onLine } = window.navigator\n          extra = {\n            userAgent,\n            appVersion,\n            languages,\n            language,\n            platform,\n            onLine,\n            window: {\n              innerHeight: window.innerHeight,\n              innerWidth: window.innerWidth\n            }\n          }\n        }\n        catch (e) {\n          console.error(e)\n        }\n        let errSubset = {}\n        try {\n          errSubset = {\n            message: error.message,\n            stack: error.stack\n          }\n        }\n        catch (e) {\n          console.error(e)\n        }\n\n        const errObj = { note, reduxState, error: errSubset, env: process.env, ...extra }\n        console.log('withReportBugMutation StartingError', errObj)\n        try {\n          reportJSON = JSON.stringify(errObj)\n        }\n        catch (e) {\n          reportJSON = error.toString()\n        }\n        console.log('withReportBugMutation got through it', reportJSON)\n        return mutate({\n          variables: { reportJSON },\n          update: (store, { data }) => {\n            console.log('withReportBugMutation update', data)\n            setState(ERROR_SEND_STATES.SENT)\n          }\n        })\n      }\n    }\n  }\n})\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { map, home, uploader, ...other } = state\n  const newMap = map.slice(-5) // only the last 5 map states come through\n\n  return {\n    reduxState: {\n      ...other,\n      map: newMap,\n      home\n    }\n  }\n}\n\nexport default connect(\n  mapStateToProps\n)(ErrorConnect)\n","import React, { useContext, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { AppSettings } from '@morphoto/ui';\nimport { BottomBar, OfflineBar } from '@morphoto/navigation';\nimport { QRReader } from '@morphoto/camera';\nimport { AppContext, config } from '@morphoto/client-common';\nimport themes from '@morphoto/themes';\nvar STATES = config.home.AppStateTypes;\nvar useStyles = makeStyles(function (theme) {\n  return {\n    outerRoot: {\n      height: '100%',\n      overflow: 'hidden'\n    },\n    root: {\n      height: '100%',\n      overflow: 'hidden',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    offlineBar: {\n      flex: '0 0'\n    },\n    activeWrapper: {\n      overflow: 'hidden',\n      flexGrow: 1,\n      flexShrink: 1,\n      height: '100%'\n    },\n    uploaderContainer: {\n      zIndex: 100,\n      flex: '0 0'\n    }\n  };\n});\n\nvar Home = function Home(_ref) {\n  var components = _ref.components,\n      domain = _ref.domain;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      signedIn = _useContext.signedIn,\n      responsive = _useContext.responsive,\n      globalActions = _useContext.globalActions,\n      device = _useContext.device,\n      currentUser = _useContext.currentUser,\n      installPrompt = _useContext.installPrompt;\n\n  var Upload = components.upload;\n  useEffect(function () {\n    if (!signedIn && [STATES.MAP, STATES.SEARCH, STATES.SERIES, STATES.QRCAPTURE, STATES.SETTINGS, STATES.OFFLINE_DOWNLOAD].indexOf(domain) < 0) globalActions.setHomeState(STATES.MAP);\n  }, [domain, globalActions.setHomeState, signedIn]);\n  var showBottomBar = true;\n  var activeProps = {};\n  var ActiveComponent = components.feed;\n  var theme = themes.home;\n\n  switch (domain) {\n    case STATES.FEED:\n      ActiveComponent = components.feed;\n      break;\n\n    case STATES.MAP:\n      ActiveComponent = components.map;\n      break;\n\n    case STATES.PROFILE:\n      ActiveComponent = components.profile;\n      break;\n\n    case STATES.SEARCH:\n      ActiveComponent = components.search;\n      break;\n\n    case STATES.SERIES:\n      theme = themes.series;\n      ActiveComponent = components.series;\n      activeProps = {\n        currentUser: currentUser\n      };\n      showBottomBar = false;\n      break;\n\n    case STATES.NEW_SERIES_CAMERA:\n      theme = themes.series;\n      ActiveComponent = components.series;\n      activeProps = {\n        currentUser: currentUser\n      };\n      showBottomBar = false;\n      break;\n\n    case STATES.OFFLINE_DOWNLOAD:\n      ActiveComponent = components.offline;\n      showBottomBar = false;\n      break;\n\n    case STATES.NEW_SERIES_LIBRARY:\n      theme = themes.series;\n      ActiveComponent = components.series;\n      activeProps = {\n        currentUser: currentUser\n      };\n      showBottomBar = false;\n      break;\n\n    case STATES.QRCAPTURE:\n      ActiveComponent = QRReader;\n      showBottomBar = false;\n      activeProps = {\n        onCapture: globalActions.onQRCapture,\n        onMenuBack: globalActions.onMenuBack,\n        isIos: device.ios\n      };\n      break;\n\n    case STATES.SETTINGS:\n      ActiveComponent = AppSettings;\n      showBottomBar = false;\n      activeProps = {\n        onMenuBack: globalActions.onMenuBack\n      };\n      break;\n\n    default:\n      break;\n  }\n\n  return React.createElement(ThemeProvider, {\n    theme: themes.home\n  }, React.createElement(\"div\", {\n    className: classes.outerRoot\n  }, React.createElement(\"div\", {\n    className: classes.root,\n    style: {\n      width: responsive.windowSize.width,\n      height: responsive.windowSize.height\n    }\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(OfflineBar, {\n    className: classes.offlineBar\n  }), React.createElement(\"div\", {\n    className: classes.activeWrapper\n  }, React.createElement(ThemeProvider, {\n    theme: theme\n  }, React.createElement(ActiveComponent, activeProps))), showBottomBar && React.createElement(BottomBar, {\n    domain: domain\n  }), React.createElement(Upload, {\n    className: classes.uploaderContainer\n  }), installPrompt)));\n};\n\nHome.propTypes = {\n  domain: PropTypes.oneOf(STATES),\n  components: PropTypes.shape({\n    upload: PropTypes.any.isRequired,\n    series: PropTypes.any.isRequired,\n    map: PropTypes.any.isRequired,\n    search: PropTypes.any.isRequired,\n    profile: PropTypes.any.isRequired,\n    feed: PropTypes.any.isRequired,\n    offline: PropTypes.any.isRequired\n  })\n};\nexport default Home;","import Home from './Home';\nexport default Home;","import React, { useEffect, useRef, useMemo, useCallback } from 'react'\nimport PropTypes from 'prop-types'\nimport { point, bbox as bboxFunc, buffer } from '@turf/turf'\nimport { Query, ApolloProvider, compose } from 'react-apollo'\nimport { connect } from 'react-redux'\n\n// import Analytics from '@aws-amplify/analytics'\nimport ReactGA from 'react-ga'\n\nimport datastore from '@morphoto/datastore'\nimport { useAuthentication, LoadingWrapped as Loading } from '@morphoto/client-auth'\nimport { useShowAddToHome } from '@morphoto/pwainstall'\nimport { AppContextProvider, decodeShareUrl, ErrorBoundary, config } from '@morphoto/client-common'\n\nimport withUploadConnect from './withUploadConnect'\nimport withSeriesConnect from './withSeriesConnect'\nimport withHomeMap from './withHomeMap'\nimport withSearchConnect from './withSearchConnect'\nimport withProfileConnect from './withProfileConnect'\nimport withFeedConnect from './withFeedConnect'\nimport withOfflineData from './withOfflineData'\n\nimport MyFeed from '@morphoto/feed'\nimport { UploadControl } from '@morphoto/ui'\nimport Search from '@morphoto/search'\nimport MyProfile from '@morphoto/profile'\nimport { HomeMap, OfflineMap } from '@morphoto/maps'\nimport PhotoSeries from '@morphoto/photoseries'\n\nimport ErrorConnect from './Error.connect'\n// import { IntlWrapper } from '../translations'\nimport Home from '@morphoto/home'\n\nconst { home: homeConfig, tagColors } = config\n\n// Analytics.configure(config.aws)\n// Analytics.record('some-event-name')\n\n// Set up our google analytics\nconst gac = {}\nif (process.env.NODE_ENV !== 'production') {\n  gac.debug = false\n  gac.gaOptions = {\n    cookieDomain: 'none',\n    siteSpeedSampleRate: 100\n  }\n}\n// console.log('ReactGA.initialize', gac)\nReactGA.initialize(config.analytics.token, gac)\n\nconst components = {\n  upload: withUploadConnect(UploadControl),\n  series: withSeriesConnect(PhotoSeries),\n  map: withHomeMap(HomeMap),\n  search: withSearchConnect(Search),\n  profile: withProfileConnect(MyProfile),\n  feed: withFeedConnect(MyFeed),\n  offline: withOfflineData(OfflineMap)\n}\n\n/**\n * HOC for AppContext and ApolloProvider\n */\nexport const withApolloAuthProvider = Wrapped => {\n  const AuthProvider = ({ reduxProps, ...reduxActions }) => {\n    const flags = reduxProps.flags\n    // console.log('withApolloAuthProvider', props)\n    const { isGod, signedIn, authData, signOut, authScreen, forceSignIn } = useAuthentication(flags.useLoggedOut, reduxActions.setUseOffline)\n    const { client: apolloClient, done: apolloDone, currState: apolloState } = datastore.graphql.useGraphQL()\n\n    // This triggers all the PWA Goodness\n    const { installPrompt, addToHomeScreen } = useShowAddToHome(flags.install, reduxActions.dismissInstall)\n\n    // A little tracking goodness\n    useEffect(() => {\n      ReactGA.pageview('initial render')\n    }, [])\n\n    // If the user hasn't decided to be anonymous or sign in yet show them the login screen\n    // console.log('Rendering AppConnect', { flags, responsive, props, signedIn, isGod, authData })\n    useEffect(() => {\n      if (signedIn === true && flags.useLoggedOut) reduxActions.setUseOffline(false)\n      else if (signedIn === false && !flags.useLoggedOut) reduxActions.setUseOffline(true)\n    }, [flags.useLoggedOut, reduxActions, signedIn])\n\n    const retryRef = useRef()\n\n    // We need to hijack the browser's history object so that hitting the back button on android\n    // doesn't close the window\n    useEffect(() => {\n      function handleBackClick () {\n        window.history.pushState({}, '')\n        reduxActions.onMenuBack()\n      }\n      window.addEventListener('popstate', handleBackClick)\n      return () => window.removeEventListener('popstate', handleBackClick)\n    }, [reduxActions])\n\n    // One time only query param parse so we can redirect them to a shared url if necessary\n    useEffect(() => {\n      try {\n        const decodedObj = decodeShareUrl(window.location.search)\n        if (decodedObj && decodedObj.type && decodedObj.s) {\n          const { type, s, p } = decodedObj\n          console.log('REDIRECTING', { type, s, p })\n          ReactGA.event({\n            category: 'user',\n            action: 'share',\n            label: window.location.search\n          })\n          switch (type) {\n            case 'series':\n              const queryVars = { activeSeries: s, initialPhoto: p }\n              if (!signedIn) reduxActions.setUseOffline(true)\n              reduxActions.setHomeState(homeConfig.AppStateTypes.SERIES, queryVars)\n              break\n            default:\n              break\n          }\n        // TODO : I think this breaks the maifest file\n        // window.history.replaceState({}, 'MorPhoto', '/')\n        }\n      }\n      catch (e) {\n        console.log('HERE IS AN ERROR', e)\n        console.error(e)\n      }\n\n      //  clean up our retry ref\n      if (retryRef.current) {\n        clearTimeout(retryRef.current)\n        retryRef.current = null\n      }\n    }, [reduxActions, signedIn])\n\n    const forceSignInWrapped = useCallback(() => {\n      // Analytics.record('FORCE_SIGNIN')\n      ReactGA.event({\n        category: 'User',\n        action: 'FORCE_SIGNIN'\n      })\n      reduxActions.setUseOffline(false)\n      forceSignIn()\n    }, [reduxActions, forceSignIn])\n\n    const resetApp = useCallback(() => {\n      // Analytics.record('RESET_APP')\n      console.log('APP RESET STARTING')\n      ReactGA.event({\n        category: 'User',\n        action: 'RESET_APP'\n      })\n      datastore.graphql.offline.imgStore.clear()\n      apolloClient.resetStore()\n      datastore.graphql.offline.stateStore.clear()\n      reduxActions.resetAllState()\n      signOut()\n      console.log('APP RESET FINISHED')\n    }, [apolloClient, signOut, reduxActions])\n\n    const staticContext = useMemo(() => ({\n      metaConfig: {},\n      tagConfig: [\n        {\n          id: 'freeBothType',\n          label: '',\n          color: tagColors[0],\n          allowXY: true,\n          allowNonXY: true,\n          allowAdditions: true,\n          values: getTags()\n        }\n      ]\n    }), [])\n\n    // These are the things the rest of the app needs to find:\n    const appContext = {\n      getPhotoUrls,\n      signedIn: Boolean(signedIn),\n      role: !signedIn\n        ? 'nonuser'\n        : isGod\n          ? 'admin'\n          : 'user',\n      installPrompt,\n      cognitoUser: authData, // TODO: Need this supported by a graphql query\n      globalActions: {\n        ...reduxActions,\n        addToHomeScreen,\n        signOut,\n        forceSignIn: forceSignInWrapped,\n        resetApp\n      },\n      ...staticContext\n    }\n\n    /**\n     * NO HOOKS BELOW HERE\n     *\n     *\n     *\n     */\n\n    if (!apolloDone) return <Loading message={datastore.graphql.APOLLOSTATES[apolloState]} />\n\n    if (signedIn === null && !flags.useLoggedOut) {\n      ReactGA.event({\n        category: 'User',\n        action: 'LOGIN_PROMPT'\n      })\n      return authScreen\n    }\n\n    return (\n    // We wrap the outside in an error handler\n      <ApolloProvider client={apolloClient}>\n        <Query query={datastore.graphql.queries.getUser} skip={!signedIn}>\n          {({ loading, error, data, refetch }) => {\n            if (loading) return <Loading message='UserData' />\n            if (error) {\n              console.error(error)\n            }\n            // If there's no record for this user in the DB there's nothing left to do\n            if (signedIn && (!data || !data.user)) {\n              console.log('NO USER DATA YET', { loading, error, data })\n              if (!retryRef.current) {\n                retryRef.current = setTimeout(() => {\n                  console.log('Retrying user query')\n                  refetch()\n                }, 5000)\n              }\n              return (\n                <Loading message='UserData' />\n              )\n            }\n            // If we've changed users then wipe the old user's stuff\n            else if (signedIn && authData.attributes.sub !== data.user.id) {\n              console.log('USER CHANGE')\n              datastore.graphql.offline.imgStore.clear()\n              apolloClient.resetStore()\n              datastore.graphql.offline.stateStore.clear()\n              reduxActions.resetAllState()\n            }\n            else if (signedIn) appContext.currentUser = data.user\n            return (\n              <AppContextProvider value={appContext}>\n                <Wrapped domain={reduxProps.domain} components={components} />\n              </AppContextProvider>\n            )\n          }}\n        </Query>\n      </ApolloProvider>\n    )\n  }\n  AuthProvider.propTypes = {\n    reduxProps: PropTypes.object,\n    reduxActions: PropTypes.object\n  }\n  return AuthProvider\n}\n\n/**\n * Map our redux state and functions\n */\nconst mapStateToProps = (state, props) => {\n  const { domain } = state.home.current\n  return {\n    reduxProps: {\n      domain,\n      flags: state.flags\n    }\n  }\n}\n\nconst mapDispatchToProps = dispatch => ({\n  setHomeState: (newDomain, newParams) => {\n    dispatch(datastore.redux.actions.setHomeState(newDomain, newParams))\n  },\n  onCameraClick: () => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.NEW_SERIES_CAMERA, { activeSeries: null }))\n  },\n  onLibraryClick: () => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.NEW_SERIES_LIBRARY, { activeSeries: null }))\n  },\n  onOfflineMenuClick: () => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.OFFLINE_DOWNLOAD))\n  },\n  onSettingsClick: () => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SETTINGS))\n  },\n  jumpToSeriesView: (seriesId, photoId) => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SERIES, { activeSeries: seriesId, initialPhoto: photoId }))\n  },\n  jumpToUser: (username) => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SEARCH, { search: { tab: config.home.SEARCH_TABS.USER, text: username } }))\n  },\n  jumpToMap: ({ bbox, center }) => {\n    let bounds = bbox\n    if (!bounds && center) {\n      const bufferPts = buffer(point(center), 500, { units: 'meters' })\n      bounds = bboxFunc(bufferPts)\n    }\n\n    if (bounds) {\n      dispatch(datastore.redux.actions.pushMapHistory({\n        mode: config.home.MapModeTypes.FREE,\n        bounds: bounds\n      }))\n      dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.MAP, { activeSeries: null, initialPhoto: null }))\n    }\n  },\n  jumpToSeriesMap: (seriesId, photoId) => {\n    dispatch(datastore.redux.actions.pushMapHistory({\n      mode: config.home.MapModeTypes.FREE\n    }))\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.MAP, { activeSeries: seriesId, initialPhoto: photoId }))\n  },\n  resetAllState: () => {\n    dispatch(datastore.redux.actions.resetAllState())\n  },\n  dismissInstall: () => {\n    dispatch(datastore.redux.actions.setFlag('install', false))\n  },\n  setUseOffline: (bVal) => {\n    dispatch(datastore.redux.actions.setFlag('useLoggedOut', bVal))\n  },\n  onQRButtonClick: () => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.QRCAPTURE))\n  },\n  onMenuBack: () => {\n    dispatch(datastore.redux.actions.homeStateBack())\n  },\n  onAvatarClick: (username) => {\n    dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SEARCH, {\n      search: { tab: homeConfig.SEARCH_TABS.USER, text: username }\n    }))\n  },\n  onQRCapture: (type, activeSeries, initialPhoto) => {\n    switch (type) {\n      case 'series':\n        dispatch(datastore.redux.actions.setHomeState(homeConfig.AppStateTypes.SERIES, { activeSeries, initialPhoto }))\n        break\n      default:\n        break\n    }\n  }\n})\n\nconst withErrorBoundary = (Wrapped) => (props) => (\n  <ErrorBoundary fallback={ErrorConnect}>\n    <Wrapped {...props} />\n  </ErrorBoundary>\n)\n\n// const withContext = Wrapped => {\n//   const InnerContext = ({ appContext }) => (\n//       <IntlWrapper>\n//         <Wrapped />\n//       </IntlWrapper>\n//   )\n//   InnerContext.propTypes = {\n//     appContext: PropTypes.object\n//   }\n//   InnerContext.whyDidYouRender = true\n//   return InnerContext\n// }\n\n/**\n * Nearly everything we do depends on who you are as a user so we commit this to state\n */\n\n// The order we compose things here matters a lot\nconst AppConnect = compose(\n  // ORDER IS CRITICAL HERE\n  withErrorBoundary,\n  datastore.redux.withReduxProvider,\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  ),\n  withApolloAuthProvider\n  // withContext\n)(Home)\n\nexport default AppConnect\n\n// Series config is the object that series needs to know how to process things outside itself (like lookup urls etc.)\nconst getTags = (series) => {\n  const tags = {}\n  if (series && series.photos) {\n    series.photos.forEach(ph => {\n      ph.tags.forEach(tag => {\n        tags[tag.label] = tag\n      })\n    })\n  }\n  return Object.keys(tags)\n}\n\nconst getPhotoUrls = async (photo, sizePriority) => {\n  try {\n    // Fist see if we have anything in the indexdb\n    if (photo.uploadToken) {\n      try {\n        const dbKeys = await datastore.graphql.offline.imgStore.keys()\n        if (dbKeys.indexOf(photo.uploadToken) > -1) {\n          const blob = await datastore.graphql.offline.imgStore.getItem(photo.uploadToken)\n          // console.log('getPhotoUrls:: Found DB Entry. using data.file', blob data)\n          const urlCreator = window.URL || window.webkitURL\n          const imageUrl = urlCreator.createObjectURL(blob)\n          return [imageUrl]\n        }\n      }\n      // If anything in the retrieval fails just fall back\n      catch {}\n    }\n    // now we return the remote URLS if we can\n    return sizePriority.map(sp => `${photo.paths.base}${photo.paths[sp]}`)\n  }\n  catch (e) {\n    return null\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          )\n        })\n      }\n      else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            }\n            else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      }\n      else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport AppConnect from './connectors/App.connect'\nimport * as serviceWorker from './serviceWorker'\n\n// Here's our global overrides css\nimport '@morphoto/themes/baseline.css'\nimport 'mapbox-gl/dist/mapbox-gl.css'\n// This is the font we need\nrequire('typeface-roboto')\n\nif (process.env.NODE_ENV !== 'production') {\n  const whyDidYouRender = require('@welldone-software/why-did-you-render')\n  whyDidYouRender(React)\n}\n\nReactDOM.render(<AppConnect />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register()\n\n// On android this will trick the back button into not closing the app\nwindow.addEventListener('load', () => {\n  window.history.pushState({}, '')\n})\n\n// This is our image worker to offline cache maptiles AND series photos\nif (navigator.serviceWorker) navigator.serviceWorker.register('imgCacheWorker.js')\n","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { Actions } from '../actions';\nimport { config } from '@morphoto/client-common';\nvar mapInit = [{\n  mode: config.home.MapModeTypes.FREE,\n  viewport: {\n    latitude: 36.80191008366581,\n    longitude: -111.63999999999784,\n    zoom: 11\n  }\n}];\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : mapInit;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var type = action.type,\n      data = action.data;\n\n  switch (type) {\n    case Actions.MAP_HISTORY_CLEAR:\n      var newClearerHistory = state.length > 0 ? [[state.length - 1]] : [];\n      return newClearerHistory;\n\n    case Actions.MAP_HISTORY_POP:\n      return state.slice(0, -1);\n\n    case Actions.MAP_HISTORY_PUSH:\n      return [].concat(_toConsumableArray(state), [data]).slice(-10);\n\n    default:\n      return state;\n  }\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from '../actions';\nimport { config } from '@morphoto/client-common';\nvar homeInit = {\n  history: [],\n  current: {\n    domain: config.home.AppStateTypes.FEED\n  }\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : homeInit;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var type = action.type,\n      data = action.data;\n  var history = state.history,\n      current = state.current;\n\n  switch (type) {\n    case Actions.HOME_STATE_BACK:\n      var newStateHistory = _toConsumableArray(history);\n\n      var newCurrentState = newStateHistory.length > 0 ? newStateHistory.pop() : homeInit.current;\n      return _objectSpread({}, state, {\n        current: newCurrentState,\n        history: newStateHistory\n      });\n\n    case Actions.HOME_CHANGE_ACTIVE_SERIES:\n      var activeSeries = data.activeSeries,\n          initialPhoto = data.initialPhoto;\n      return _objectSpread({}, state, {\n        history: history,\n        current: _objectSpread({}, current, {\n          activeSeries: activeSeries || null,\n          initialPhoto: activeSeries && initialPhoto ? initialPhoto : null\n        })\n      });\n\n    case Actions.HOME_CHANGE_STATE:\n      var newDomain = data.newDomain,\n          params = data.params;\n      var newParams = params || {};\n      var skipSave = [config.home.AppStateTypes.QRCAPTURE, config.home.AppStateTypes.SETTINGS, config.home.AppStateTypes.OFFLINE_DOWNLOAD, config.home.AppStateTypes.NEW_SERIES_CAMERA, config.home.AppStateTypes.NEW_SERIES_LIBRARY].indexOf(current.domain) > -1;\n      var replaceState = current.domain === newDomain;\n      var newHistory = !skipSave && !replaceState ? [].concat(_toConsumableArray(history), [current]).slice(-10) : history;\n      return _objectSpread({}, state, {\n        history: newHistory,\n        current: _objectSpread({}, current, {\n          domain: newDomain\n        }, newParams)\n      });\n\n    default:\n      return state;\n  }\n});","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from '../actions';\nexport var initState = {\n  store: [],\n  online: false,\n  uploading: false,\n  activeUpload: null\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var type = action.type,\n      data = action.data;\n  var store = state.store,\n      activeUpload = state.activeUpload,\n      uploading = state.uploading;\n\n  switch (type) {\n    case Actions.UPLOADER_QUEUE:\n      if (!activeUpload) {\n        return _objectSpread({}, state, {\n          activeUpload: data\n        });\n      } else {\n        return _objectSpread({}, state, {\n          store: [].concat(_toConsumableArray(store), [data])\n        });\n      }\n\n    case Actions.UPLOADER_SET_ONLINE:\n      return _objectSpread({}, state, {\n        online: data\n      });\n\n    case Actions.UPLOADER_SET_UPLOADING:\n      if (uploading !== data) {\n        return _objectSpread({}, state, {\n          uploading: data\n        });\n      } else {\n        return state;\n      }\n\n    case Actions.UPLOADER_COMPLETE:\n      if (store.length === 0) {\n        return _objectSpread({}, state, {\n          activeUpload: null,\n          uploading: false\n        });\n      } else {\n        var newStore = _toConsumableArray(store);\n\n        var newActive = newStore.pop();\n        return _objectSpread({}, state, {\n          store: newStore,\n          activeUpload: newActive,\n          uploading: false\n        });\n      }\n\n    case Actions.UPLOADER_UPDATE_PROGRESS:\n      return _objectSpread({}, state, {\n        activeUpload: _objectSpread({}, activeUpload, {}, data)\n      });\n\n    default:\n      return state;\n  }\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from '../actions';\nimport { isIos } from '@morphoto/client-common';\nvar defaultFlags = {\n  iOSWarning: isIos(),\n  install: true,\n  useLoggedOut: false\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultFlags;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  if (!action) return state;\n  var type = action.type,\n      data = action.data;\n\n  switch (type) {\n    case Actions.SETFLAG:\n      var flagName = data.flagName,\n          flagVal = data.flagVal;\n\n      if (Boolean(flagVal) !== flagVal) {\n        console.warning(\"flag: '\".concat(flagName, \"' must be a boolean\"));\n        return state;\n      }\n\n      return _objectSpread({}, state, _defineProperty({}, flagName, flagVal));\n\n    default:\n      return state;\n  }\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from '../actions';\nvar offlineInit = {\n  completedDownload: false,\n  viewport: null\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : offlineInit;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  if (!action) return state;\n  var type = action.type,\n      data = action.data;\n\n  switch (type) {\n    case Actions.OFFLINE_VIEWPORT_SAVE:\n      return _objectSpread({}, state, {\n        viewport: data\n      });\n\n    case Actions.OFFLINE_SET_STATUS:\n      return _objectSpread({}, state, {\n        completedDownload: data\n      });\n\n    default:\n      return state;\n  }\n});","import { combineReducers } from 'redux';\nimport map from './map';\nimport home from './home';\nimport uploader from './uploader';\nimport flags from './flags';\nimport offline from './offline';\nvar appReducer = combineReducers({\n  map: map,\n  home: home,\n  uploader: uploader,\n  flags: flags,\n  offline: offline\n});\n\nvar rootReducer = function rootReducer(state, action) {\n  if (action.type === 'RESET_ALL_STATE') {\n    state = undefined;\n  }\n\n  return appReducer(state, action);\n};\n\nexport default rootReducer;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Actions } from './actions';\nimport { initState } from './reducers/uploader';\nimport s3Upload from '../s3Upload';\nexport default (function (_ref) {\n  var getState = _ref.getState,\n      dispatch = _ref.dispatch;\n  return function (next) {\n    return function (action) {\n      var _getUploadState = getUploadState(getState),\n          online = _getUploadState.online,\n          uploading = _getUploadState.uploading,\n          activeUpload = _getUploadState.activeUpload;\n\n      if (action.type.indexOf('persist/REHYDRATE') === 0) {\n        try {\n          var newAction = _objectSpread({}, action);\n\n          action.payload.uploader.uploading = false;\n          return next(newAction);\n        } catch (_unused) {\n          return next(action);\n        }\n      }\n\n      function kickoff(uploadObj) {\n        var updateUploadProgress = function updateUploadProgress(newProgress) {\n          console.log('MIDDLEWARE Update', newProgress);\n          dispatch({\n            type: Actions.UPLOADER_UPDATE_PROGRESS,\n            data: newProgress\n          });\n        };\n\n        var completeActiveUpload = function completeActiveUpload() {\n          dispatch({\n            type: Actions.UPLOADER_COMPLETE\n          });\n        };\n\n        var failRetry = function failRetry() {\n          var newState = getUploadState(getState);\n\n          if (newState.activeUpload) {\n            dispatch({\n              type: Actions.UPLOADER_COMPLETE\n            });\n            updateUploadProgress({\n              progress: 0,\n              retry: newState.activeUpload.retry > -1 ? newState.activeUpload.retry + 1 : 1\n            });\n          }\n        };\n\n        dispatch({\n          type: Actions.UPLOADER_SET_UPLOADING,\n          data: true\n        });\n        s3Upload(uploadObj, updateUploadProgress, completeActiveUpload, failRetry);\n      }\n\n      if (online && !uploading && action.type !== Actions.UPLOADER_SET_UPLOADING) {\n        if (activeUpload && Date.now() < activeUpload.expires) {\n          kickoff(activeUpload);\n        } else if (action.type === Actions.UPLOADER_QUEUE && !activeUpload) {\n          kickoff(action.data);\n        }\n      }\n\n      return next(action);\n    };\n  };\n});\n\nfunction getUploadState(getState) {\n  try {\n    var currState = getState();\n    var uploadState = currState['uploader'];\n    return uploadState || initState;\n  } catch (_unused2) {\n    return initState;\n  }\n}","import { createStore, applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './reducers';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport { stateStore } from '../graphql/offline';\nimport queueMiddleware from './queueMiddleware';\nvar persistConfig = {\n  key: 'root',\n  storage: stateStore\n};\nvar persistedReducer = persistReducer(persistConfig, rootReducer);\n\nvar configureStoreDev = function configureStoreDev(preloadedState) {\n  var _require = require('redux-devtools-extension'),\n      devToolsEnhancer = _require.devToolsEnhancer;\n\n  var _require2 = require('redux-logger'),\n      createLogger = _require2.createLogger;\n\n  var store = createStore(persistedReducer, preloadedState, compose(applyMiddleware(thunk, queueMiddleware, createLogger()), devToolsEnhancer()));\n\n  if (module.hot) {\n    module.hot.accept('./reducers', function () {\n      store.replaceReducer(rootReducer);\n    });\n  }\n\n  return store;\n};\n\nvar configureStoreProd = function configureStoreProd(preloadedState) {\n  var store = createStore(persistedReducer, preloadedState, compose(applyMiddleware(thunk, queueMiddleware)));\n  return store;\n};\n\nexport default (function () {\n  var store = process.env.NODE_ENV === 'production' ? configureStoreProd() : configureStoreDev();\n  return {\n    store: store,\n    persistor: persistStore(store)\n  };\n});","import React from 'react';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport { Provider } from 'react-redux';\nimport storeConfig from './storeConfig';\nimport { LoadingWrapped as Loading } from '@morphoto/client-auth';\n\nvar withReduxProvider = function withReduxProvider(BaseComponent) {\n  return function (props) {\n    var _storeConfig = storeConfig(),\n        store = _storeConfig.store,\n        persistor = _storeConfig.persistor;\n\n    return React.createElement(Provider, {\n      store: store\n    }, React.createElement(PersistGate, {\n      loading: React.createElement(Loading, null),\n      persistor: persistor\n    }, React.createElement(BaseComponent, props)));\n  };\n};\n\nexport default withReduxProvider;","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport IconButton from '@material-ui/core/IconButton';\nimport Avatar from '@material-ui/core/Avatar';\nimport PlaceIcon from '@material-ui/icons/Place';\nimport PersonIcon from '@material-ui/icons/Person';\nimport LabelIcon from '@material-ui/icons/Label';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Typography } from '@material-ui/core';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      minHeight: 60\n    },\n    chosenItem: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.dark\n    },\n    avatar: {\n      background: theme.palette.primary.main\n    },\n    closeIcon: {\n      color: theme.palette.primary.contrastText,\n      paddingRight: 0\n    },\n    avatarImg: {\n      height: '100%',\n      width: '100%',\n      objectFit: 'cover'\n    }\n  };\n});\n\nvar SearchContextItem = function SearchContextItem(_ref) {\n  var className = _ref.className,\n      variant = _ref.variant,\n      name = _ref.name,\n      description = _ref.description,\n      gravatar = _ref.gravatar,\n      onClick = _ref.onClick,\n      onCancel = _ref.onCancel;\n  var classes = useStyles();\n  var TheIcon = PlaceIcon;\n\n  var getAvatar = function getAvatar(src) {\n    return function () {\n      return React.createElement(Avatar, {\n        className: classes.avatar\n      }, React.createElement(\"img\", {\n        className: classes.avatarImg,\n        alt: \"profile\",\n        src: src\n      }));\n    };\n  };\n\n  switch (variant) {\n    case 'tag':\n      TheIcon = LabelIcon;\n      break;\n\n    case 'location':\n      TheIcon = PlaceIcon;\n      break;\n\n    case 'user':\n      TheIcon = gravatar ? getAvatar(gravatar) : PersonIcon;\n      break;\n\n    default:\n      break;\n  }\n\n  return React.createElement(ListItem, {\n    className: classNames(className, classes.root, onCancel ? classes.chosenItem : null),\n    button: !!onClick,\n    onClick: onClick\n  }, React.createElement(ListItemAvatar, null, React.createElement(Avatar, {\n    className: classes.avatar\n  }, React.createElement(TheIcon, {\n    color: \"inherit\"\n  }))), React.createElement(ListItemText, {\n    disableTypography: true\n  }, React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"inherit\"\n  }, name), React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"inherit\"\n  }, description)), onCancel && React.createElement(ListItemIcon, null, React.createElement(IconButton, {\n    onClick: onCancel,\n    className: classes.closeIcon\n  }, React.createElement(CancelIcon, {\n    color: \"inherit\"\n  }))));\n};\n\nSearchContextItem.propTypes = {\n  variant: PropTypes.oneOf(['tag', 'location', 'user']),\n  onClick: PropTypes.func,\n  gravatar: PropTypes.string,\n  className: PropTypes.string,\n  name: PropTypes.string.isRequired,\n  description: PropTypes.string,\n  onCancel: PropTypes.func\n};\nexport default SearchContextItem;\nexport var SearchContexItemCosmos = function SearchContexItemCosmos() {\n  return React.createElement(List, null, React.createElement(SearchContextItem, {\n    variant: \"tag\",\n    name: \"SomeTag\",\n    description: \"Some description of what I am\"\n  }), React.createElement(SearchContextItem, {\n    variant: \"location\",\n    name: \"Some Location\",\n    description: \"Some description of what I am\"\n  }), React.createElement(SearchContextItem, {\n    variant: \"user\",\n    name: \"User McUserSon\",\n    description: \"Some description of what I am\"\n  }));\n};","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport SearchContextItem from './SearchContextItem';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      backgroundColor: theme.palette.background.paper,\n      position: 'relative',\n      overflowX: 'hidden',\n      overflowY: 'scroll',\n      flexGrow: 1\n    },\n    listSection: {\n      backgroundColor: 'inherit'\n    },\n    placeholderText: {\n      textAlign: 'center',\n      padding: theme.spacing(3, 1),\n      color: theme.palette.grey[400]\n    },\n    ul: {\n      backgroundColor: 'inherit',\n      padding: 0\n    }\n  };\n});\n\nvar SearchContextResults = function SearchContextResults(_ref) {\n  var variant = _ref.variant,\n      loading = _ref.loading,\n      contextResults = _ref.contextResults,\n      setContextChoice = _ref.setContextChoice;\n  var classes = useStyles();\n\n  if (loading) {\n    return React.createElement(Typography, {\n      className: classes.placeholderText,\n      variant: \"h3\"\n    }, \"Searching...\");\n  } else if (!contextResults || contextResults.length === 0) {\n    return React.createElement(Typography, {\n      className: classes.placeholderText,\n      variant: \"h4\"\n    }, \"No \", variant, \" results\");\n  }\n\n  return React.createElement(List, {\n    className: classes.root\n  }, contextResults.map(function (cr, idx) {\n    return React.createElement(SearchContextItem, _extends({\n      key: \"scr-\".concat(idx),\n      variant: variant,\n      onClick: function onClick() {\n        return setContextChoice(cr);\n      }\n    }, cr));\n  }));\n};\n\nSearchContextResults.propTypes = {\n  variant: PropTypes.oneOf(['keyword', 'tag', 'location', 'user']),\n  loading: PropTypes.bool,\n  contextResults: PropTypes.array.isRequired,\n  setContextChoice: PropTypes.func.isRequired\n};\nexport default SearchContextResults;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      textAlign: 'center',\n      fontStyle: 'italic',\n      padding: theme.spacing(2, 1)\n    }\n  };\n});\n\nvar SearchEnder = function SearchEnder(_ref) {\n  var style = _ref.style,\n      icon = _ref.icon,\n      text = _ref.text;\n  var classes = useStyles();\n  return React.createElement(Typography, {\n    className: classes.root,\n    variant: \"subtitle1\",\n    color: \"textSecondary\",\n    component: \"div\",\n    style: style\n  }, icon, text);\n};\n\nSearchEnder.propTypes = {\n  style: PropTypes.object,\n  icon: PropTypes.any,\n  text: PropTypes.string\n};\nexport default SearchEnder;","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport SearchContextItem from './SearchContextItem';\nimport SearchEnder from './SearchEnder';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { SeriesListItem } from '@morphoto/photoseries';\nimport { util } from '@morphoto/common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      flexGrow: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden'\n    },\n    ctxItem: {\n      flexGrow: 0\n    },\n    list: {\n      flexGrow: 1,\n      backgroundColor: theme.palette.background.paper,\n      position: 'relative',\n      overflowX: 'hidden',\n      overflowY: 'scroll'\n    },\n    placeholderText: {\n      textAlign: 'center',\n      padding: theme.spacing(3, 1),\n      color: theme.palette.grey[400]\n    },\n    listSection: {\n      backgroundColor: 'inherit'\n    },\n    ul: {\n      backgroundColor: 'inherit',\n      padding: 0\n    }\n  };\n});\n\nvar SearchResults = function SearchResults(_ref) {\n  var variant = _ref.variant,\n      loading = _ref.loading,\n      seriesList = _ref.seriesList,\n      contextChoice = _ref.contextChoice,\n      onCancel = _ref.onCancel,\n      onResultClick = _ref.onResultClick,\n      fetchMore = _ref.fetchMore;\n  var classes = useStyles();\n  var listRef = useRef();\n  var enderRef = useRef();\n  var handleScroll = util.debounce(function () {\n    if (!loading && fetchMore && enderRef.current && listRef.current) {\n      var offsetTop = enderRef.current.offsetTop;\n      var _listRef$current = listRef.current,\n          scrollTop = _listRef$current.scrollTop,\n          offsetHeight = _listRef$current.offsetHeight;\n      var scrollBottom = offsetHeight + scrollTop;\n\n      if (offsetTop < scrollBottom * 2) {\n        console.log('SCROLL', {\n          offsetHeight: offsetHeight,\n          scrollTop: scrollTop,\n          offsetTop: offsetTop\n        });\n        fetchMore();\n      }\n    }\n  }, 500);\n  useEffect(handleScroll, [seriesList]);\n  var content = null;\n\n  if (loading) {\n    content = React.createElement(Typography, {\n      className: classes.placeholderText,\n      variant: \"h3\"\n    }, \"Searching...\");\n  } else if (seriesList && seriesList.length > 0) {\n    content = seriesList.map(function (series, idx) {\n      return React.createElement(SeriesListItem, {\n        key: \"series-\".concat(idx),\n        series: series,\n        onClick: function onClick() {\n          return onResultClick(series.id);\n        },\n        showCreatedOn: true,\n        showLastPhoto: true\n      });\n    });\n    content.push(React.createElement(\"div\", {\n      key: \"ender\",\n      ref: enderRef\n    }, React.createElement(SearchEnder, {\n      text: fetchMore ? 'Loading...' : 'No More Results'\n    })));\n  } else {\n    content = React.createElement(Typography, {\n      className: classes.placeholderText,\n      variant: \"h4\"\n    }, \"No series found\");\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, contextChoice && React.createElement(SearchContextItem, _extends({\n    className: classes.ctxItem\n  }, contextChoice, {\n    variant: variant,\n    onCancel: onCancel\n  })), React.createElement(List, {\n    className: classes.list,\n    subheader: React.createElement(\"li\", null),\n    onScroll: handleScroll,\n    innerRef: listRef\n  }, content));\n};\n\nSearchResults.propTypes = {\n  variant: PropTypes.oneOf(['keyword', 'tag', 'location', 'user']),\n  seriesList: PropTypes.array.isRequired,\n  loading: PropTypes.bool,\n  contextChoice: PropTypes.object,\n  onResultClick: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  fetchMore: PropTypes.func\n};\nexport default SearchResults;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      flexGrow: 1,\n      padding: '10%',\n      display: 'flex',\n      flexDirection: 'column',\n      opacity: 0.3,\n      textAlign: 'center'\n    },\n    icon: {\n      width: '100%',\n      flex: '1 1 40%',\n      color: theme.palette.primary.light,\n      opacity: 0.5\n    },\n    primary: {\n      flex: '1 1 30%',\n      width: '100%'\n    },\n    secondary: {\n      flex: '1 1 30%',\n      width: '100%'\n    }\n  };\n});\n\nvar SearchPlaceholder = function SearchPlaceholder(_ref) {\n  var icon = _ref.icon,\n      primary = _ref.primary,\n      secondary = _ref.secondary;\n  var classes = useStyles();\n  var PlaceholderIcon = icon;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(PlaceholderIcon, {\n    className: classes.icon\n  }), primary && React.createElement(Typography, {\n    className: classes.primary,\n    variant: \"h3\"\n  }, primary), secondary && React.createElement(Typography, {\n    className: classes.secondary,\n    variant: \"h4\"\n  }, secondary));\n};\n\nSearchPlaceholder.propTypes = {\n  icon: PropTypes.object,\n  primary: PropTypes.string,\n  secondary: PropTypes.string\n};\nexport default SearchPlaceholder;","import React, { useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Container from '@material-ui/core/Container';\nimport PortableWifiOffIcon from '@material-ui/icons/PortableWifiOff';\nimport LabelIcon from '@material-ui/icons/Label';\nimport SearchIcon from '@material-ui/icons/Search';\nimport PlaceIcon from '@material-ui/icons/Place';\nimport PersonIcon from '@material-ui/icons/Person';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SearchContextResults from './SearchContextResults';\nimport SearchResults from './SearchResults';\nimport SearchPlaceholder from './SearchPlaceholder';\nimport SearchInput from './SearchInput';\nimport { TopBarWrapper } from '@morphoto/navigation';\nimport { config, AppContext } from '@morphoto/client-common';\nvar TABS = config.home.SEARCH_TABS;\n\nvar style = function style(theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      overflow: 'hidden',\n      flexDirection: 'column'\n    },\n    container: {\n      display: 'flex',\n      overflow: 'hidden',\n      flexDirection: 'column',\n      padding: 0,\n      flexGrow: 1\n    },\n    tabs: {},\n    ListWrapper: {\n      flexGrow: 1,\n      overflow: 'hidden',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    tab: {\n      flexGrow: 1\n    },\n    grow: {\n      flexGrow: 1\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar Search = function Search(_ref) {\n  var currentTab = _ref.currentTab,\n      defaultText = _ref.defaultText,\n      searchText = _ref.searchText,\n      contextResults = _ref.contextResults,\n      searchResults = _ref.searchResults,\n      contextChoice = _ref.contextChoice,\n      loading = _ref.loading,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      online = _useContext.online;\n\n  useEffect(function () {\n    if (contextResults && !searchResults && contextResults.length === 1) {\n      actions.setContextChoice(contextResults[0]);\n    }\n  }, [contextResults]);\n  var placeholder = {};\n\n  switch (currentTab) {\n    case TABS.KEYWORD:\n      placeholder = {\n        primary: 'Keyword search',\n        secondary: 'example: \\'beaver...\\'',\n        icon: SearchIcon\n      };\n      break;\n\n    case TABS.TAG:\n      placeholder = {\n        primary: 'Tag search',\n        secondary: 'example: \\'beaver...\\'',\n        icon: LabelIcon\n      };\n      break;\n\n    case TABS.USER:\n      placeholder = {\n        primary: 'User search',\n        secondary: 'example: \\'SuperGreg123...\\'',\n        icon: PersonIcon\n      };\n      break;\n\n    case TABS.LOCATION:\n      placeholder = {\n        primary: 'Location Search',\n        secondary: 'example: \\'Vancouver...\\'',\n        icon: PlaceIcon\n      };\n      break;\n\n    default:\n      break;\n  }\n\n  var content = null;\n\n  if (!online.isOnline) {\n    content = React.createElement(SearchPlaceholder, {\n      primary: \"Search Disabled\",\n      secondary: \"(Offline)\",\n      icon: PortableWifiOffIcon\n    });\n  } else if ((contextChoice || currentTab === TABS.KEYWORD) && searchResults) {\n    content = React.createElement(SearchResults, {\n      variant: currentTab,\n      loading: loading,\n      onResultClick: actions.onResultClick,\n      fetchMore: actions.fetchMore,\n      seriesList: searchResults,\n      contextChoice: contextChoice,\n      onCancel: function onCancel() {\n        return actions.setContextChoice(null);\n      }\n    });\n  } else if (contextResults) {\n    content = React.createElement(SearchContextResults, {\n      loading: loading,\n      variant: currentTab,\n      contextResults: contextResults,\n      setContextChoice: currentTab === TABS.LOCATION ? actions.onMapClick : actions.setContextChoice\n    });\n  } else if (defaultText.length > 0) {\n    content = React.createElement(Typography, null, \"Searching for \", \"'\".concat(searchText, \"'\") || '...');\n  } else {\n    content = React.createElement(SearchPlaceholder, placeholder);\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(TopBarWrapper, null, React.createElement(SearchInput, {\n    disabled: !online.isOnline,\n    onChange: actions.setSearchText,\n    defaultValue: searchText\n  })), React.createElement(Container, {\n    className: classes.container,\n    maxWidth: \"sm\"\n  }, online.isOnline && React.createElement(Tabs, {\n    value: currentTab,\n    disabled: !online.isOnline,\n    onChange: function onChange(e, val) {\n      return actions.setCurrentTab(val);\n    },\n    indicatorColor: \"primary\",\n    classes: {\n      flexContainer: classes.tabs\n    },\n    centered: true\n  }, React.createElement(Tab, {\n    className: classes.tab,\n    value: TABS.TAG,\n    label: \"Tags\"\n  }), React.createElement(Tab, {\n    className: classes.tab,\n    value: TABS.KEYWORD,\n    label: \"Keywords\"\n  }), React.createElement(Tab, {\n    className: classes.tab,\n    value: TABS.LOCATION,\n    label: \"Places\"\n  }), React.createElement(Tab, {\n    className: classes.tab,\n    value: TABS.USER,\n    label: \"Users\"\n  })), React.createElement(\"div\", {\n    className: classes.ListWrapper\n  }, content)));\n};\n\nSearch.propTypes = {\n  loading: PropTypes.bool,\n  currentTab: PropTypes.string.isRequired,\n  contextChoice: PropTypes.object,\n  defaultText: PropTypes.string.isRequired,\n  searchText: PropTypes.string.isRequired,\n  contextResults: PropTypes.array,\n  searchResults: PropTypes.array,\n  actions: PropTypes.shape({\n    setCurrentTab: PropTypes.func.isRequired,\n    setSearchText: PropTypes.func.isRequired,\n    setContextChoice: PropTypes.func.isRequired,\n    fetchMore: PropTypes.func,\n    onMapClick: PropTypes.func.isRequired,\n    onResultClick: PropTypes.func.isRequired\n  })\n};\nSearch.defaultProps = {\n  currentTab: TABS.TAGS,\n  defaultText: ''\n};\nexport default Search;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Badge from '@material-ui/core/Badge';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport MobileStepper from '@material-ui/core/MobileStepper';\nimport Button from '@material-ui/core/Button';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport LabelIcon from '@material-ui/icons/Label';\nimport PauseIcon from '@material-ui/icons/PauseCircleFilled';\nimport PlayIcon from '@material-ui/icons/PlayCircleFilled';\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { Photo } from '@morphoto/photos';\nimport { dates } from '@morphoto/common';\nimport { useComponentSize } from '@morphoto/client-common';\nimport style from './Slideshow.style';\nvar useStyles = makeStyles(style);\n\nvar Slideshow = function Slideshow(_ref) {\n  var onCancel = _ref.onCancel,\n      photos = _ref.photos,\n      transition = _ref.transition;\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var _useStepper = useStepper(photos.length, transition),\n      activeStep = _useStepper.activeStep,\n      lastStep = _useStepper.lastStep,\n      handleForward = _useStepper.handleForward,\n      handleBack = _useStepper.handleBack,\n      paused = _useStepper.paused,\n      pause = _useStepper.pause,\n      play = _useStepper.play;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showXYTags = _useState2[0],\n      setShowXYTags = _useState2[1];\n\n  var refImgWrap = useRef(null);\n\n  var _useComponentSize = useComponentSize(refImgWrap),\n      _useComponentSize$siz = _useComponentSize.size,\n      height = _useComponentSize$siz.height,\n      width = _useComponentSize$siz.width;\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(\"div\", {\n    ref: refImgWrap,\n    className: classes.slideContainer\n  }, photos.map(function (slide, idx) {\n    return React.createElement(GridListTile, {\n      key: \"slide-\".concat(idx),\n      className: classNames(classes.slide, activeStep === idx && classes.active, lastStep === idx && classes.last),\n      onClick: function onClick() {\n        return setShowXYTags(!showXYTags);\n      },\n      style: {\n        height: height,\n        width: width,\n        transition: theme.transitions.create(['opacity'], {\n          duration: 1 / 4 * transition\n        })\n      }\n    }, React.createElement(Photo, {\n      photo: slide,\n      className: classes.photo,\n      showTags: showXYTags\n    }), React.createElement(Typography, {\n      className: classes.labelBadge\n    }, \"Tags: \", showXYTags ? 'On ' : 'Off ', React.createElement(Badge, {\n      color: \"secondary\",\n      badgeContent: photos[activeStep].tags.filter(function (tag) {\n        return tag.coords;\n      }).length\n    }, React.createElement(LabelIcon, {\n      color: \"inherit\"\n    }))), React.createElement(GridListTileBar, {\n      className: classes.titleBar,\n      titlePosition: \"top\",\n      title: React.createElement(Typography, {\n        color: \"inherit\",\n        variant: \"caption\"\n      }, React.createElement(IconButton, {\n        className: classes.iconButton,\n        onClick: function onClick(e) {\n          return onCancel();\n        }\n      }, React.createElement(ArrowBackIcon, null)), dates.formatDate(slide.takenOn)),\n      subtitle: React.createElement(\"em\", null, paused ? 'Paused' : '    '),\n      actionIcon: paused ? React.createElement(IconButton, {\n        className: classes.iconButton,\n        onClick: function onClick(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          play();\n        }\n      }, React.createElement(PlayIcon, null)) : React.createElement(IconButton, {\n        className: classes.iconButton,\n        onClick: function onClick(e) {\n          e.preventDefault();\n          e.stopPropagation();\n          pause();\n        }\n      }, React.createElement(PauseIcon, null))\n    }));\n  }), React.createElement(IconButton, {\n    size: \"small\",\n    className: classes.manualBack,\n    onClick: handleBack,\n    color: \"inherit\"\n  }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowRight, null) : React.createElement(KeyboardArrowLeft, null)), React.createElement(IconButton, {\n    size: \"small\",\n    className: classes.manualForward,\n    onClick: handleForward,\n    color: \"inherit\"\n  }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowLeft, null) : React.createElement(KeyboardArrowRight, null))), React.createElement(MobileStepper, {\n    steps: photos.length,\n    position: \"static\",\n    activeStep: activeStep,\n    classes: {\n      root: classes.mobileStepper,\n      dotActive: classes.dotActive\n    },\n    nextButton: React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: handleForward,\n      disabled: activeStep === photos.length - 1\n    }, \"Next\", theme.direction === 'rtl' ? React.createElement(KeyboardArrowLeft, null) : React.createElement(KeyboardArrowRight, null)),\n    backButton: React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: handleBack,\n      disabled: activeStep === 0\n    }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowRight, null) : React.createElement(KeyboardArrowLeft, null), \"Back\")\n  }));\n};\n\nSlideshow.propTypes = {\n  isFullScreen: PropTypes.bool,\n  photos: PropTypes.array.isRequired,\n  transition: PropTypes.number,\n  onCancel: PropTypes.func.isRequired\n};\nSlideshow.defaultProps = {\n  transition: 5000,\n  isFullScreen: false,\n  slides: []\n};\nexport default Slideshow;\n\nvar useStepper = function useStepper(num, interval) {\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      activeStep = _useState4[0],\n      setActiveStep = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      paused = _useState6[0],\n      setPaused = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      lastStep = _useState8[0],\n      setLastStep = _useState8[1];\n\n  var timerRef = useRef();\n\n  var handleForward = function handleForward() {\n    setLastStep(activeStep);\n    if (activeStep + 1 >= num) setActiveStep(0);else setActiveStep(activeStep + 1);\n\n    if (!paused) {\n      destroyTimer();\n      createTimer();\n    }\n  };\n\n  var handleBack = function handleBack() {\n    setLastStep(activeStep);\n    if (activeStep - 1 < 0) setActiveStep(num - 1);else setActiveStep(activeStep - 1);\n\n    if (!paused) {\n      destroyTimer();\n      createTimer();\n    }\n  };\n\n  var pause = function pause() {\n    destroyTimer();\n    setPaused(true);\n  };\n\n  var play = function play() {\n    setPaused(false);\n    destroyTimer();\n    createTimer();\n  };\n\n  var createTimer = function createTimer() {\n    timerRef.current = window.setInterval(function () {\n      return setActiveStep(function (oldStep) {\n        setLastStep(oldStep);\n        return oldStep + 1 >= num ? 0 : oldStep + 1;\n      });\n    }, interval);\n  };\n\n  var destroyTimer = function destroyTimer() {\n    if (timerRef.current) window.clearInterval(timerRef.current);\n  };\n\n  useEffect(function () {\n    createTimer();\n    return function () {\n      destroyTimer();\n    };\n  }, []);\n  return {\n    activeStep: activeStep,\n    lastStep: lastStep,\n    handleForward: handleForward,\n    handleBack: handleBack,\n    setActiveStep: setActiveStep,\n    paused: paused,\n    pause: pause,\n    play: play\n  };\n};","export default (function (theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    swipeAble: {\n      height: '100%'\n    },\n    slideContainer: {\n      flexGrow: 1\n    },\n    titleBar: {\n      padding: theme.spacing(0, 1),\n      height: '35px!important'\n    },\n    mobileStepper: {\n      flexGrow: 0,\n      background: theme.palette.grey[800],\n      color: theme.palette.getContrastText(theme.palette.grey[800])\n    },\n    slide: {\n      top: 0,\n      zIndex: 0,\n      opacity: 0,\n      position: 'absolute',\n      display: 'block',\n      overflow: 'hidden',\n      width: '100%',\n      height: '100%',\n      minHeight: 300\n    },\n    dotActive: {\n      background: 'white'\n    },\n    iconButton: {\n      color: 'white'\n    },\n    active: {\n      zIndex: 5,\n      opacity: 1\n    },\n    last: {\n      opacity: 1,\n      zIndex: 4\n    },\n    tagContainer: {},\n    labelBadge: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      right: theme.spacing(2),\n      bottom: theme.spacing(1),\n      opacity: 0.8\n    },\n    tagChip: {\n      marginRight: theme.spacing(1),\n      fontSize: 10,\n      height: theme.spacing(2),\n      padding: theme.spacing(0.5)\n    },\n    xyTagChip: {\n      position: 'absolute',\n      fontSize: theme.spacing(1),\n      height: theme.spacing(2)\n    },\n    manualBack: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      transform: 'translateY(-50%)',\n      left: 0,\n      top: '50%'\n    },\n    manualForward: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      transform: 'translateY(-50%)',\n      right: 0,\n      top: '50%'\n    }\n  };\n});","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { dates } from '@morphoto/common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    imgContainer: {\n      flex: '0 0 100px',\n      margin: theme.spacing(1, 1, 0, 2)\n    },\n    gravatarImg: {\n      verticalAlign: 'top'\n    }\n  };\n});\n\nvar MeCard = function MeCard(_ref) {\n  var user = _ref.user,\n      loading = _ref.loading,\n      onAvatarClick = _ref.onAvatarClick;\n  var classes = useStyles();\n  if (loading || !user) return 'LOADING...';\n  return React.createElement(ListItem, {\n    className: classes.root,\n    onClick: onAvatarClick,\n    disableGutters: true\n  }, React.createElement(ListItemIcon, {\n    className: classes.imgContainer\n  }, React.createElement(\"img\", {\n    alt: \"profile\",\n    className: classes.gravatarImg,\n    src: user.gravatar\n  })), React.createElement(ListItemText, {\n    primary: user.username,\n    secondary: \"Member since: \".concat(dates.formatDate(user.createdOn, 'LL'))\n  }));\n};\n\nMeCard.propTypes = {\n  user: PropTypes.object,\n  loading: PropTypes.bool,\n  onAvatarClick: PropTypes.func\n};\nexport default MeCard;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Divider from '@material-ui/core/Divider';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport { SeriesListItem } from '@morphoto/photoseries';\nimport { TopBarWrapper } from '@morphoto/navigation';\nimport MeCard from './MeCard';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      background: theme.palette.background.paper,\n      height: '100%'\n    },\n    filterContainer: {\n      color: theme.palette.primary.secondary,\n      background: theme.palette.background.default,\n      textAlign: 'center',\n      padding: theme.spacing(1, 1)\n    },\n    container: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%',\n      padding: 0\n    },\n    filterChip: {},\n    seriesListItemWrap: {\n      margin: theme.spacing(1, 0.5)\n    },\n    seriesList: {\n      overflowX: 'hidden',\n      overflowY: 'scroll'\n    },\n    tabs: {},\n    noneFound: {\n      color: theme.palette.text.secondary,\n      textAlign: 'center',\n      padding: theme.spacing(2)\n    }\n  };\n});\nvar SORT = {\n  ACTIVITY: 'Last Photo',\n  CREATED: 'Created',\n  NAME: 'Name'\n};\n\nvar MyProfile = function MyProfile(_ref) {\n  var mySeries = _ref.mySeries,\n      user = _ref.user,\n      watchingSeries = _ref.watchingSeries,\n      loading = _ref.loading,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentTab = _useState2[0],\n      setCurrentTab = _useState2[1];\n\n  var _useState3 = useState(SORT.ACTIVITY),\n      _useState4 = _slicedToArray(_useState3, 2),\n      sortVal = _useState4[0],\n      setSort = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      sortAsc = _useState6[0],\n      setSortAsc = _useState6[1];\n\n  var sortSetter = function sortSetter(newSort) {\n    if (newSort === sortVal) setSortAsc(!sortAsc);else setSort(newSort);\n  };\n\n  var tabFeed = currentTab === 0 ? mySeries : watchingSeries;\n  if (!tabFeed) tabFeed = [];\n\n  switch (sortVal) {\n    case SORT.ACTIVITY:\n      if (sortAsc) tabFeed.sort(function (a, b) {\n        return a.latest.takenOn - b.latest.takenOn;\n      });else tabFeed.sort(function (a, b) {\n        return b.latest.takenOn - a.latest.takenOn;\n      });\n      break;\n\n    case SORT.CREATED:\n      if (sortAsc) tabFeed.sort(function (a, b) {\n        return a.createdOn - b.createdOn;\n      });else tabFeed.sort(function (a, b) {\n        return b.createdOn - a.createdOn;\n      });\n      break;\n\n    case SORT.NAME:\n      if (sortAsc) {\n        tabFeed.sort(function (a, b) {\n          if (a.name < b.name) {\n            return -1;\n          }\n\n          if (a.name > b.firstname) {\n            return 1;\n          }\n\n          return 0;\n        });\n      } else {\n        tabFeed.sort(function (a, b) {\n          if (b.name < a.name) {\n            return -1;\n          }\n\n          if (b.name > a.name) {\n            return 1;\n          }\n\n          return 0;\n        });\n      }\n\n      break;\n\n    default:\n      break;\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(TopBarWrapper, null, React.createElement(Typography, null, \"My Profile\")), React.createElement(Container, {\n    className: classes.container,\n    maxWidth: \"sm\"\n  }, React.createElement(MeCard, {\n    user: user\n  }), React.createElement(Tabs, {\n    value: currentTab,\n    onChange: function onChange(e, val) {\n      return setCurrentTab(val);\n    },\n    indicatorColor: \"primary\",\n    centered: true,\n    classes: {\n      flexContainer: classes.tabs\n    }\n  }, React.createElement(Tab, {\n    className: classes.tab,\n    value: 0,\n    label: \"My Series\"\n  }), React.createElement(Tab, {\n    className: classes.tab,\n    value: 1,\n    label: \"Watching\"\n  })), React.createElement(Divider, null), React.createElement(\"div\", {\n    className: classes.filterContainer\n  }, React.createElement(FilterSortItem, {\n    asc: sortAsc,\n    active: sortVal === SORT.NAME,\n    onClick: function onClick() {\n      return sortSetter(SORT.NAME);\n    },\n    label: SORT.NAME\n  }), \"|\", React.createElement(FilterSortItem, {\n    asc: sortAsc,\n    active: sortVal === SORT.ACTIVITY,\n    onClick: function onClick() {\n      return sortSetter(SORT.ACTIVITY);\n    },\n    label: SORT.ACTIVITY\n  }), \"|\", React.createElement(FilterSortItem, {\n    asc: sortAsc,\n    active: sortVal === SORT.CREATED,\n    onClick: function onClick() {\n      return sortSetter(SORT.CREATED);\n    },\n    label: SORT.CREATED\n  })), React.createElement(Divider, null), React.createElement(\"div\", {\n    className: classes.seriesList\n  }, !loading && (!tabFeed || tabFeed.length === 0) && React.createElement(Typography, {\n    className: classes.noneFound,\n    component: \"div\"\n  }, \"No Series Found\"), loading && React.createElement(Typography, {\n    className: classes.noneFound,\n    component: \"div\"\n  }, \"Loading...\"), tabFeed.map(function (series, idx) {\n    return React.createElement(SeriesListItem, {\n      key: \"seriesListItem\".concat(idx),\n      series: series,\n      showCreatedOn: true,\n      showLastPhoto: true,\n      onClick: function onClick() {\n        return actions.jumpToSeries(series.id);\n      }\n    });\n  }))));\n};\n\nMyProfile.propTypes = {\n  loading: PropTypes.bool,\n  user: PropTypes.object.isRequired,\n  mySeries: PropTypes.array.isRequired,\n  watchingSeries: PropTypes.array.isRequired,\n  actions: PropTypes.shape({\n    jumpToSeries: PropTypes.func.isRequired,\n    jumpToMap: PropTypes.func.isRequired\n  })\n};\nexport default MyProfile;\nvar useFilterStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      margin: theme.spacing(0, 1, 0, 1)\n    }\n  };\n});\n\nvar FilterSortItem = function FilterSortItem(_ref2) {\n  var active = _ref2.active,\n      asc = _ref2.asc,\n      onClick = _ref2.onClick,\n      label = _ref2.label;\n  var classes = useFilterStyles();\n  var arrow = asc === true ? '▲' : '▼';\n  return React.createElement(Button, {\n    size: \"small\",\n    className: classes.root,\n    onClick: onClick,\n    color: active ? 'secondary' : 'inherit'\n  }, label, React.createElement(\"span\", {\n    style: {\n      opacity: active ? 1 : 0\n    }\n  }, arrow));\n};\n\nFilterSortItem.propTypes = {\n  active: PropTypes.bool,\n  asc: PropTypes.bool,\n  onClick: PropTypes.func.isRequired,\n  label: PropTypes.string.isRequired\n};","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport SwipeableViews from 'react-swipeable-views';\nimport MobileStepper from '@material-ui/core/MobileStepper';\nimport IconButton from '@material-ui/core/IconButton';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport Badge from '@material-ui/core/Badge';\nimport LabelIcon from '@material-ui/icons/Label';\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\nimport { Photo } from '@morphoto/photos';\nimport { dates } from '@morphoto/common';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport style from './SwipeShow.style';\nvar useStyles = makeStyles(style);\n\nvar SwipeShow = function SwipeShow(_ref) {\n  var photos = _ref.photos,\n      onImageSelect = _ref.onImageSelect,\n      activePhotoId = _ref.activePhotoId,\n      setActivePhotoId = _ref.setActivePhotoId;\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showTags = _useState2[0],\n      setShowTags = _useState2[1];\n\n  var singular = photos.length < 2;\n  var activePhotoIndex = photos.findIndex(function (p) {\n    return p.id === activePhotoId;\n  });\n  if (!(activePhotoIndex > 0)) activePhotoIndex = 0;\n  var activePhoto = activePhotoIndex && photos[activePhotoIndex];\n\n  var handleForward = function handleForward() {\n    return setActivePhotoId(activePhotoIndex >= photos.length - 1 ? photos[0].id : photos[activePhotoIndex + 1].id);\n  };\n\n  var handleBack = function handleBack() {\n    return setActivePhotoId(activePhotoIndex <= 0 ? photos[photos.length - 1].id : photos[activePhotoIndex - 1].id);\n  };\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"div\", {\n    className: classes.inner\n  }, React.createElement(SwipeableViews, {\n    axis: theme.direction === 'rtl' ? 'x-reverse' : 'x',\n    index: activePhotoIndex,\n    onChangeIndex: function onChangeIndex(val) {\n      return setActivePhotoId(photos[val] ? photos[val].id : photos[0].id);\n    },\n    enableMouseEvents: true\n  }, photos.map(function (photo, idx) {\n    return React.createElement(\"div\", {\n      className: classes.photoWrapper,\n      key: \"swipeshowpic-\".concat(idx),\n      onClick: function onClick() {\n        return activePhoto.id && onImageSelect(activePhoto.id);\n      }\n    }, React.createElement(Photo, {\n      photo: photo,\n      className: classes.photo,\n      showTags: showTags\n    }));\n  })), React.createElement(IconButton, {\n    size: \"small\",\n    className: classes.manualBack,\n    onClick: handleBack,\n    color: \"inherit\",\n    disabled: activePhoto === 0\n  }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowRight, null) : React.createElement(KeyboardArrowLeft, null)), React.createElement(IconButton, {\n    size: \"small\",\n    className: classes.manualForward,\n    onClick: handleForward,\n    color: \"inherit\",\n    disabled: activePhoto === photos.length - 1\n  }, theme.direction === 'rtl' ? React.createElement(KeyboardArrowLeft, null) : React.createElement(KeyboardArrowRight, null)), React.createElement(GridListTileBar, {\n    title: singular ? 'Photo' : \"Photo (\".concat(activePhotoIndex + 1, \"/\").concat(photos.length, \")\"),\n    subtitle: activePhoto.takenOn && React.createElement(\"span\", null, dates.formatDate(activePhoto.takenOn)),\n    actionIcon: React.createElement(React.Fragment, null, React.createElement(IconButton, {\n      className: classes.tagButton,\n      onClick: function onClick() {\n        return setShowTags(!showTags);\n      }\n    }, React.createElement(Badge, {\n      color: showTags ? 'primary' : 'secondary',\n      badgeContent: activePhoto.tags ? activePhoto.tags.filter(function (tag) {\n        return tag.coords;\n      }).length : null\n    }, React.createElement(LabelIcon, null))))\n  })), !singular && React.createElement(MobileStepper, {\n    steps: photos.length,\n    position: \"static\",\n    activeStep: activePhotoIndex,\n    classes: {\n      root: classes.mobileStepper,\n      dots: classes.dots\n    }\n  }));\n};\n\nSwipeShow.propTypes = {\n  photos: PropTypes.array,\n  transition: PropTypes.number,\n  activePhotoId: PropTypes.string,\n  setActivePhotoId: PropTypes.func.isRequired,\n  onImageSelect: PropTypes.func.isRequired\n};\nSwipeShow.defaultProps = {\n  activePhoto: 0,\n  transition: 5000,\n  isFullScreen: false,\n  slides: []\n};\nexport default SwipeShow;","export default (function (theme) {\n  return {\n    root: {\n      position: 'relative'\n    },\n    inner: {\n      position: 'relative'\n    },\n    photoWrapper: {\n      minHeight: 250,\n      height: 250\n    },\n    dateCaption: {\n      padding: theme.spacing(1),\n      background: theme.palette.primary.dark,\n      color: theme.palette.primary.contrastText,\n      textAlign: 'center'\n    },\n    mobileStepper: {},\n    manualBack: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      transform: 'translateY(-50%)',\n      left: 0,\n      top: '50%'\n    },\n    manualForward: {\n      color: 'white',\n      zIndex: 10,\n      position: 'absolute',\n      transform: 'translateY(-50%)',\n      right: 0,\n      top: '50%'\n    },\n    tagButton: {\n      color: 'rgba(255, 255, 255, 0.54)'\n    },\n    slideshowButton: {\n      color: 'rgba(255, 255, 255, 0.54)'\n    },\n    dots: {\n      margin: '0 auto'\n    }\n  };\n});","\"use strict\";\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Tags\", {\n  enumerable: true,\n  get: function get() {\n    return _Tags[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"getExif\", {\n  enumerable: true,\n  get: function get() {\n    return _exif.getExif;\n  }\n});\nObject.defineProperty(exports, \"Series\", {\n  enumerable: true,\n  get: function get() {\n    return _Series[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"Photo\", {\n  enumerable: true,\n  get: function get() {\n    return _Photo[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"AccessHelper\", {\n  enumerable: true,\n  get: function get() {\n    return _AccessHelper[\"default\"];\n  }\n});\nexports.permissions = exports.util = exports.dates = exports.accessControl = void 0;\n\nvar _accesscontrol = _interopRequireDefault(require(\"accesscontrol\"));\n\nvar _permissions = _interopRequireDefault(require(\"./accesscontrol/permissions\"));\n\nvar datesLib = _interopRequireWildcard(require(\"./dates\"));\n\nvar utilLib = _interopRequireWildcard(require(\"./util\"));\n\nvar _Tags = _interopRequireDefault(require(\"./Tags\"));\n\nvar _exif = require(\"./exif\");\n\nvar _Series = _interopRequireDefault(require(\"./Series\"));\n\nvar _Photo = _interopRequireDefault(require(\"./Photo\"));\n\nvar _AccessHelper = _interopRequireDefault(require(\"./accesscontrol/AccessHelper\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar accessControl = new _accesscontrol[\"default\"](_permissions[\"default\"]);\nexports.accessControl = accessControl;\nvar dates = datesLib;\nexports.dates = dates;\nvar util = utilLib;\nexports.util = util;\nvar permissions = _permissions[\"default\"];\nexports.permissions = permissions;","import React from 'react';\nimport createSvgIcon from '@material-ui/icons/utils/createSvgIcon';\nexport var RawSVG = React.createElement(React.Fragment, null, React.createElement(\"path\", {\n  d: \"M13.685,2.797c-0.44,1.273 0.852,3.525 -1.082,4.966c-1.247,0.93 -2.133,2.247 -2.743,4.167c-3.78,-7.611 2.788,-8.409 3.682,-10.699c0.64,1.255 5.18,2.608 2.89,4.873c1.28,-2.034 -2.359,-1.862 -2.747,-3.307Z\"\n}), React.createElement(\"path\", {\n  d: \"M4.921,5.953c0.883,1.017 3.479,1.024 3.76,3.42c0.181,1.545 0.879,2.971 2.238,4.459c-8.482,-0.532 -5.889,-6.619 -7.425,-8.538c1.407,0.073 4.848,-3.183 5.665,-0.066c-1.121,-2.126 -2.792,1.111 -4.238,0.725Z\"\n}), React.createElement(\"path\", {\n  d: \"M3.236,15.092c1.323,-0.256 2.627,-2.5 4.842,-1.546c1.428,0.615 3.013,0.724 4.98,0.292c-4.701,7.079 -8.676,1.79 -11.106,2.161c0.766,-1.183 -0.332,-5.791 2.775,-4.94c-2.402,-0.091 -0.433,2.974 -1.491,4.033Z\"\n}), React.createElement(\"path\", {\n  d: \"M10.309,21.121c0.439,-1.274 -0.852,-3.525 1.081,-4.967c1.247,-0.929 2.133,-2.246 2.743,-4.167c3.781,7.611 -2.788,8.409 -3.681,10.699c-0.641,-1.255 -5.181,-2.607 -2.891,-4.873c-1.28,2.034 2.359,1.863 2.748,3.308Z\"\n}), React.createElement(\"path\", {\n  d: \"M19.066,18.01c-0.883,-1.017 -3.479,-1.024 -3.76,-3.42c-0.182,-1.544 -0.88,-2.971 -2.238,-4.459c8.482,0.532 5.889,6.619 7.425,8.538c-1.407,-0.072 -4.849,3.183 -5.665,0.067c1.121,2.125 2.792,-1.112 4.238,-0.726Z\"\n}), React.createElement(\"path\", {\n  d: \"M20.751,8.871c-1.323,0.256 -2.627,2.501 -4.842,1.546c-1.429,-0.615 -3.013,-0.723 -4.98,-0.291c4.701,-7.08 8.676,-1.791 11.106,-2.162c-0.767,1.183 0.332,5.791 -2.775,4.94c2.401,0.092 0.433,-2.974 1.491,-4.033Z\"\n}));\nexport default createSvgIcon(RawSVG, 'AppLogo');","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport React, { useRef, useLayoutEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport InputBase from '@material-ui/core/InputBase';\nimport SearchIcon from '@material-ui/icons/Search';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { util } from '@morphoto/common';\nvar useSearchBarStyles = makeStyles(function (theme) {\n  return {\n    root: _defineProperty({\n      position: 'relative',\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: fade(theme.palette.common.white, 0.3),\n      '&:hover': {\n        backgroundColor: fade(theme.palette.common.white, 0.5)\n      },\n      marginRight: theme.spacing(2),\n      marginLeft: 0,\n      width: '100%'\n    }, theme.breakpoints.up('sm'), {\n      marginLeft: theme.spacing(3),\n      width: 'auto'\n    }),\n    transparent: {\n      backgroundColor: fade(theme.palette.common.white, 0.7),\n      '&:hover': {\n        backgroundColor: fade(theme.palette.common.white, 0.9)\n      }\n    },\n    inputRoot: {\n      color: 'inherit',\n      width: '100%'\n    },\n    inputInput: _defineProperty({\n      padding: theme.spacing(1, 1, 1, 4),\n      transition: theme.transitions.create('width'),\n      width: '100%'\n    }, theme.breakpoints.up('md'), {\n      width: 200\n    }),\n    searchIcon: {\n      width: theme.spacing(4),\n      height: '100%',\n      position: 'absolute',\n      pointerEvents: 'none',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    }\n  };\n});\nexport var SearchInput = function SearchInput(_ref) {\n  var autoFocus = _ref.autoFocus,\n      disabled = _ref.disabled,\n      onChange = _ref.onChange,\n      onClick = _ref.onClick,\n      defaultValue = _ref.defaultValue,\n      isTransparent = _ref.isTransparent;\n  var inputRef = useRef();\n  var classes = useSearchBarStyles();\n  var debounceSearchText = useCallback(util.debounce(onChange, 500), [onChange]);\n  useLayoutEffect(function () {\n    if (inputRef.current && !autoFocus) {\n      console.log('Setting blur');\n      inputRef.current.blur();\n    }\n  }, [autoFocus]);\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, isTransparent ? classes.transparent : null),\n    onClick: onClick\n  }, React.createElement(\"div\", {\n    className: classes.searchIcon\n  }, React.createElement(SearchIcon, null)), React.createElement(InputBase, {\n    autoFocus: !disabled && autoFocus,\n    inputProps: {\n      onBlur: function onBlur() {}\n    },\n    onChange: function onChange(e) {\n      debounceSearchText(e.target.value);\n    },\n    placeholder: \"Search\\u2026\",\n    disabled: disabled,\n    defaultValue: defaultValue,\n    inputRef: inputRef,\n    classes: {\n      root: classes.inputRoot,\n      input: classes.inputInput\n    }\n  }));\n};\nSearchInput.propTypes = {\n  autoFocus: PropTypes.bool,\n  isTransparent: PropTypes.bool,\n  disabled: PropTypes.bool,\n  onChange: PropTypes.func,\n  defaultValue: PropTypes.string,\n  onClick: PropTypes.func\n};\nexport default SearchInput;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { FindOnMapButton } from '@morphoto/ui';\nimport { RawImage } from '@morphoto/photos';\nimport { Avatar } from '@material-ui/core';\nimport { dates } from '@morphoto/common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      padding: theme.spacing(0)\n    },\n    imgContainer: {\n      overflow: 'hidden',\n      height: '100%',\n      position: 'relative',\n      borderRadius: 0\n    },\n    findOnMapButtonContainer: {\n      position: 'absolute',\n      opacity: 0.8,\n      bottom: theme.spacing(1),\n      right: theme.spacing(1)\n    },\n    titleContainer: {\n      borderTop: '2px solid #FFFFFF99',\n      background: '#444444AA',\n      textShadow: '1px 1px 10px black',\n      color: 'white',\n      position: 'absolute',\n      alignItems: 'center',\n      display: 'flex',\n      top: 0,\n      width: '100%',\n      paddingRight: theme.spacing(1)\n    },\n    avatar: {\n      border: '1px solid white',\n      margin: theme.spacing(0, 1)\n    },\n    title: {\n      flex: '1 1 50%',\n      overflow: 'hidden'\n    },\n    seriesName: {\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden'\n    },\n    img: {},\n    gravatarImg: {\n      width: '100%'\n    }\n  };\n});\nvar EVENT_VERBS = {\n  DELETE: 'Deleted',\n  ADD: 'Added'\n};\n\nvar FeedItem = function FeedItem(_ref) {\n  var event = _ref.event,\n      actions = _ref.actions;\n  var series = event.series,\n      photo = event.photo;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(Paper, {\n    className: classes.imgContainer\n  }, React.createElement(RawImage, {\n    photo: photo,\n    sizePriority: ['medium', 'large', 'thumb'],\n    cover: true,\n    className: classes.img,\n    onClick: function onClick() {\n      return actions.onImageClick(series.id, photo.id);\n    }\n  }), React.createElement(\"div\", {\n    className: classes.titleContainer\n  }, React.createElement(Avatar, {\n    onClick: function onClick() {\n      return actions.onProfileClick(photo.createdUser.username);\n    },\n    className: classes.avatar\n  }, React.createElement(\"img\", {\n    alt: \"profile\",\n    className: classes.gravatarImg,\n    src: photo.createdUser.gravatar\n  })), React.createElement(\"div\", {\n    className: classes.title\n  }, React.createElement(Typography, {\n    className: classes.seriesName,\n    variant: \"body1\",\n    color: \"inherit\"\n  }, series.name), React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"inherit\"\n  }, photo.createdUser.username, \" \", EVENT_VERBS.ADD, \" a photo\"), React.createElement(Typography, {\n    variant: \"caption\",\n    color: \"inherit\"\n  }, dates.formatDate(photo.updatedOn))), React.createElement(FindOnMapButton, {\n    onClick: function onClick() {\n      return actions.onMapClick(series.id, photo.id);\n    }\n  }))));\n};\n\nFeedItem.propTypes = {\n  event: PropTypes.object.isRequired,\n  actions: PropTypes.shape({\n    onImageClick: PropTypes.func.isRequired,\n    onProfileClick: PropTypes.func.isRequired,\n    onMapClick: PropTypes.func.isRequired\n  })\n};\nexport default FeedItem;\nexport var FeedItemCosmos = function FeedItemCosmos(props) {\n  return React.createElement(\"div\", null, React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props), React.createElement(FeedItem, props));\n};\nFeedItemCosmos.propTypes = {\n  event: PropTypes.object.isRequired\n};","export default require('./Search').default;\nexport { default as SearchInput } from './SearchInput';","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.randomObjectElement = exports.randomArrayEl = exports.filledArray = exports.randomMap = exports.randomChance = exports.randomFloat = exports.randomInt = void 0;\n\nvar _random = _interopRequireDefault(require(\"lodash/random\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nvar randomInt = function randomInt(min, max) {\n  return (0, _random[\"default\"])(min, max);\n};\n\nexports.randomInt = randomInt;\n\nvar randomFloat = function randomFloat(min, max) {\n  return (0, _random[\"default\"])(min, max, true);\n};\n\nexports.randomFloat = randomFloat;\n\nvar randomChance = function randomChance(chance, inTimes) {\n  return (0, _random[\"default\"])(0, inTimes) <= chance;\n};\n\nexports.randomChance = randomChance;\n\nvar randomMap = function randomMap(low, high, func) {\n  return filledArray((0, _random[\"default\"])(low, high), null).map(func);\n};\n\nexports.randomMap = randomMap;\n\nvar filledArray = function filledArray(num) {\n  var fillval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  return _toConsumableArray(Array(num).keys()).map(function () {\n    return fillval;\n  });\n};\n\nexports.filledArray = filledArray;\n\nvar randomArrayEl = function randomArrayEl(arr) {\n  return !arr || arr.length === 0 ? null : arr[(0, _random[\"default\"])(0, arr.length - 1)];\n};\n\nexports.randomArrayEl = randomArrayEl;\n\nvar randomObjectElement = function randomObjectElement(obj) {\n  var key = randomArrayEl(Object.keys(obj));\n  return [key, obj[key]];\n};\n\nexports.randomObjectElement = randomObjectElement;","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from 'axios';\nimport FormData from 'form-data';\nimport { imgStore } from './graphql/offline';\naxios.interceptors.request.use(function (request) {\n  console.log('AXIOS:::: Starting Request', request);\n  return request;\n}, function (err) {\n  console.log('AXIOS:::: Starting Request ERROR', err);\n  return Promise.reject(err);\n});\naxios.interceptors.response.use(function (response) {\n  console.log('AXIOS:::: Response', response);\n  return response;\n}, function (err) {\n  console.log('AXIOS:::: Starting Response ERROR', err);\n  return Promise.reject(err);\n});\nexport default function s3Upload(_x, _x2, _x3, _x4) {\n  return _s3Upload.apply(this, arguments);\n}\n\nfunction _s3Upload() {\n  _s3Upload = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(activeUpload, updateUploadProgress, completeActiveUpload, failRetry) {\n    var formData, file, onUploadProgress, config;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            console.log('s3Upload::STARTING', {\n              activeUpload: activeUpload\n            });\n            formData = new FormData();\n            Object.keys(activeUpload.preAuth.fields).forEach(function (fieldkey) {\n              formData.append(fieldkey, activeUpload.preAuth.fields[fieldkey]);\n            });\n            _context2.next = 5;\n            return imgStore.getItem(activeUpload.uploadToken);\n\n          case 5:\n            file = _context2.sent;\n            formData.append('file', file);\n\n            onUploadProgress = function onUploadProgress(progressEvent) {\n              console.log('s3Upload::PROGRESSEVENT', progressEvent);\n              var loaded = progressEvent.loaded,\n                  total = progressEvent.total;\n              updateUploadProgress({\n                progress: Math.floor(100 * loaded / total)\n              });\n            };\n\n            config = {\n              headers: {\n                'Content-Type': 'multipart/form-data'\n              },\n              onUploadProgress: onUploadProgress\n            };\n            _context2.next = 11;\n            return axios.post(activeUpload.preAuth.url, formData, config).then(\n            /*#__PURE__*/\n            function () {\n              var _ref = _asyncToGenerator(\n              /*#__PURE__*/\n              _regeneratorRuntime.mark(function _callee(result) {\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.t0 = console;\n                        _context.next = 3;\n                        return imgStore.keys();\n\n                      case 3:\n                        _context.t1 = _context.sent;\n\n                        _context.t0.log.call(_context.t0, 's3Upload:: upload done. cleaning up imgStore', _context.t1);\n\n                        _context.next = 7;\n                        return imgStore.removeItem(activeUpload.uploadToken);\n\n                      case 7:\n                        _context.t2 = console;\n                        _context.next = 10;\n                        return imgStore.keys();\n\n                      case 10:\n                        _context.t3 = _context.sent;\n\n                        _context.t2.log.call(_context.t2, 's3Upload:: Cleaned up img store', _context.t3);\n\n                        completeActiveUpload();\n\n                      case 13:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n\n              return function (_x5) {\n                return _ref.apply(this, arguments);\n              };\n            }()).catch(function (err) {\n              console.error('s3Upload::ERROR');\n              console.error(err);\n              failRetry();\n            });\n\n          case 11:\n            console.log('s3Upload::COMPLETE');\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _s3Upload.apply(this, arguments);\n}","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { graphql } from 'react-apollo';\nimport { getWholeSeriesUpdate, allSeriesUpdate, feedUpdate, userSeriesUpdate } from './updateQueries';\nimport { createSeries, newSeriesKeys, newPhotoKeys } from '../mutations';\nimport { photoSummaryKeys } from '../fragments';\nimport { pushMutationPromise, popMutationPromise } from '../offline';\nimport { allSeries, userSeries, getMyFeed } from '../queries';\nimport _ from 'lodash';\nexport var withMutation = graphql(createSeries, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      createSeriesMutation: function () {\n        var _createSeriesMutation = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(newSeries, newPhoto, ext) {\n          var _ownProps$currentUser, id, gravatar, gravatarProfile, username, meUserSummary, variables, optimisticResponse, mutationStackId;\n\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _ownProps$currentUser = ownProps.currentUser, id = _ownProps$currentUser.id, gravatar = _ownProps$currentUser.gravatar, gravatarProfile = _ownProps$currentUser.gravatarProfile, username = _ownProps$currentUser.username;\n                  meUserSummary = {\n                    id: id,\n                    gravatar: gravatar,\n                    gravatarProfile: gravatarProfile,\n                    username: username,\n                    __typename: 'UserSummary'\n                  };\n                  if (!newSeries.access) newSeries.access = 'PRIVATE';\n                  variables = {\n                    series: _.pick(newSeries, newSeriesKeys),\n                    photo: _.pick(newPhoto, newPhotoKeys),\n                    ext: ext\n                  };\n                  optimisticResponse = createOptimisticResponse({\n                    meUserSummary: meUserSummary,\n                    newSeries: newSeries,\n                    newPhoto: newPhoto,\n                    ext: ext\n                  });\n                  _context.next = 7;\n                  return pushMutationPromise({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse\n                  }, createSeries);\n\n                case 7:\n                  mutationStackId = _context.sent;\n                  console.log('createSeriesMutation:: start', {\n                    newSeries: newSeries,\n                    newPhoto: newPhoto,\n                    variables: variables,\n                    optimisticResponse: optimisticResponse,\n                    ext: ext\n                  });\n                  return _context.abrupt(\"return\", mutate({\n                    variables: variables,\n                    refetchQueries: [{\n                      query: allSeries,\n                      variables: {\n                        limit: 100\n                      }\n                    }, {\n                      query: userSeries\n                    }, {\n                      query: getMyFeed\n                    }],\n                    optimisticResponse: optimisticResponse,\n                    update: updateThunk({}, ownProps.doneCreatingSeries)\n                  }).then(function (data) {\n                    console.log('createSeriesMutation:: done', data);\n                    popMutationPromise(mutationStackId);\n                    return data;\n                  }));\n\n                case 10:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function createSeriesMutation(_x, _x2, _x3) {\n          return _createSeriesMutation.apply(this, arguments);\n        }\n\n        return createSeriesMutation;\n      }()\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    console.log('createSeriesMutation::updateThunk', {\n      data: data\n    });\n    getWholeSeriesUpdate(store, data.createSeries.series);\n    userSeriesUpdate(store, data.createSeries.series);\n    allSeriesUpdate(store, data.createSeries.series);\n    feedUpdate(store, data.createSeries.series, data.createSeries.series.photos[0]);\n    if (cb) cb(data.createSeries.series.id);\n  };\n};\n\nvar createOptimisticResponse = function createOptimisticResponse(_ref3) {\n  var meUserSummary = _ref3.meUserSummary,\n      newSeries = _ref3.newSeries,\n      newPhoto = _ref3.newPhoto,\n      ext = _ref3.ext;\n  var photoResponse = {\n    id: newPhoto.id,\n    meta: newPhoto.meta || null,\n    seriesId: newSeries.id,\n    createdOn: Date.now().toString(),\n    note: newPhoto.note || null,\n    createdUser: meUserSummary,\n    updatedUser: meUserSummary,\n    createdBy: meUserSummary.id,\n    updatedBy: meUserSummary.id,\n    uploadToken: newPhoto.uploadToken,\n    updatedOn: Date.now().toString(),\n    seriesCreatedBy: meUserSummary.id,\n    takenOn: newPhoto.takenOn,\n    coords: newPhoto.coords || null,\n    tags: newPhoto.tags || [],\n    paths: {\n      base: null,\n      large: null,\n      orig: null,\n      thumb: null,\n      medium: null,\n      __typename: 'Paths'\n    },\n    __typename: 'Photo'\n  };\n\n  var photoResponseSummary = _.pick(photoResponse, photoSummaryKeys);\n\n  return {\n    createSeries: {\n      series: {\n        id: newSeries.id,\n        name: newSeries.name,\n        note: newSeries.note || '',\n        access: newSeries.access,\n        meta: newSeries.meta || null,\n        featured: _objectSpread({}, photoResponseSummary, {\n          __typename: 'PhotoSummary'\n        }),\n        latest: _objectSpread({}, photoResponseSummary, {\n          __typename: 'PhotoSummary'\n        }),\n        seriesStatus: null,\n        coords: newSeries.coords || null,\n        direction: newSeries.direction || null,\n        photoCount: 1,\n        createdUser: meUserSummary,\n        updatedUser: meUserSummary,\n        createdBy: meUserSummary.id,\n        updatedBy: meUserSummary.id,\n        createdOn: Date.now().toString(),\n        updatedOn: Date.now().toString(),\n        watchers: 0,\n        photos: [photoResponse],\n        __typename: 'Series'\n      },\n      preAuth: null,\n      __typename: 'NewSeries'\n    }\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nexport var actionMaker = function actionMaker(actionArr, useConsole) {\n  return actionArr.reduce(function (acc, acStr) {\n    return _objectSpread({}, acc, _defineProperty({}, acStr, useConsole ? function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return console.log(acStr, args);\n    } : function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return alert(\"\".concat(acStr, \"::\") + JSON.stringify(args, null, 2));\n    }));\n  }, {});\n};\nexport var fakeGlobalActions = _objectSpread({}, actionMaker(['onQRButtonClick']), {}, actionMaker(['signOut', 'forceSignIn', 'addToHomeScreen', 'setHomeState', 'onCameraClick', 'onLibraryClick', 'onOfflineMenuClick', 'onSettingsClick', 'resetAllState', 'resetApp', 'dismissInstall', 'setUseOffline', 'onQRButtonClick', 'onMenuBack', 'onAvatarClick', 'onQRCapture'], true));","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect } from 'react';\nimport { createHttpLink } from 'apollo-link-http';\nimport { setContext } from 'apollo-link-context';\nimport { RetryLink } from 'apollo-link-retry';\nimport { config } from '@morphoto/client-common';\nimport Auth from '@aws-amplify/auth';\nimport { ApolloLink } from 'apollo-link';\nimport { stateStore, restoreRequests } from './offline';\nimport { InMemoryCache, ApolloClient } from 'apollo-boost';\nimport { persistCache } from 'apollo-cache-persist';\nvar endpoints = config.endpoints;\nvar LOCAL_STORAGE_TOKEN = 'apollo-token';\nexport var APOLLOSTATES = {\n  INITIALIZING: 'Initializing',\n  AUTHENTICATING: 'Authenticating',\n  LOADING: 'Loading State',\n  APPLY_MUTATIONS: 'Applying history',\n  ERROR: 'ERROR!',\n  DONE: 'DONE'\n};\n\nfunction useGraphQL() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      client = _useState2[0],\n      setClient = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      done = _useState4[0],\n      setDone = _useState4[1];\n\n  var _useState5 = useState(APOLLOSTATES.INITIALIZING),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currState = _useState6[0],\n      setCurrState = _useState6[1];\n\n  useEffect(function () {\n    createApolloClient(function (newClient, newState) {\n      setClient(newClient);\n      setDone((client || newClient) && newState === APOLLOSTATES.DONE);\n      setCurrState(newState);\n    });\n  }, []);\n  return {\n    client: client,\n    done: done,\n    currState: currState\n  };\n}\n\nexport default useGraphQL;\n\nvar getCurrentToken =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var currSession;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return Auth.currentSession();\n\n          case 3:\n            currSession = _context.sent;\n            return _context.abrupt(\"return\", currSession.accessToken.jwtToken);\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            return _context.abrupt(\"return\", null);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 7]]);\n  }));\n\n  return function getCurrentToken() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nfunction createApolloClient(_x) {\n  return _createApolloClient.apply(this, arguments);\n}\n\nfunction _createApolloClient() {\n  _createApolloClient = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(onChange) {\n    var cache, authLink, httpLink, retry, apolloClient;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            cache = new InMemoryCache({});\n            _context3.prev = 1;\n            onChange(null, APOLLOSTATES.LOADING);\n            _context3.next = 5;\n            return persistCache({\n              cache: cache,\n              storage: stateStore\n            });\n\n          case 5:\n            _context3.next = 12;\n            break;\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](1);\n            console.error('Error restoring Apollo cache', _context3.t0);\n            onChange(null, APOLLOSTATES.ERROR);\n            return _context3.abrupt(\"return\");\n\n          case 12:\n            authLink = setContext(\n            /*#__PURE__*/\n            function () {\n              var _ref3 = _asyncToGenerator(\n              /*#__PURE__*/\n              _regeneratorRuntime.mark(function _callee2(_, _ref2) {\n                var headers, token, newHeaders;\n                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        headers = _ref2.headers;\n                        _context2.next = 3;\n                        return getCurrentToken();\n\n                      case 3:\n                        token = _context2.sent;\n                        newHeaders = _objectSpread({}, headers, {\n                          authorization: token ? \"Bearer \".concat(token) : ''\n                        });\n\n                        if (token && process.env.NODE_ENV === 'development' && process.env.REACT_APP_FAKE_USER) {\n                          newHeaders.auth_user = process.env.REACT_APP_FAKE_USER;\n                        }\n\n                        return _context2.abrupt(\"return\", {\n                          headers: newHeaders\n                        });\n\n                      case 7:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2);\n              }));\n\n              return function (_x2, _x3) {\n                return _ref3.apply(this, arguments);\n              };\n            }());\n            httpLink = createHttpLink({\n              uri: endpoints.graphql\n            });\n            retry = new RetryLink({\n              attempts: {\n                max: Infinity,\n                retryIf: function retryIf(error, _operation) {\n                  console.log('GRAPHQL ERRORS', {\n                    error: error,\n                    _operation: _operation\n                  });\n                  return true;\n                }\n              }\n            });\n            apolloClient = new ApolloClient({\n              link: ApolloLink.from([retry, authLink, httpLink]),\n              tokenName: LOCAL_STORAGE_TOKEN,\n              addTypename: true,\n              cache: cache,\n              connectToDevTools: process.env.NODE_ENV === 'development'\n            });\n            onChange(null, APOLLOSTATES.APPLY_MUTATIONS);\n            _context3.next = 19;\n            return restoreRequests(apolloClient);\n\n          case 19:\n            onChange(apolloClient, APOLLOSTATES.DONE);\n\n          case 20:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[1, 7]]);\n  }));\n  return _createApolloClient.apply(this, arguments);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _default = {\n  admin: {\n    series: {\n      'create:own': ['*'],\n      'read:any': ['*'],\n      'update:any': ['*'],\n      'delete:any': ['*']\n    },\n    photo: {\n      'create:any': ['*'],\n      'read:any': ['*'],\n      'update:any': ['*'],\n      'delete:any': ['*']\n    }\n  },\n  nonuser: {\n    photo: {\n      'read:any': ['*'],\n      'update:any': ['*'],\n      'delete:any': ['*']\n    },\n    series_public: {\n      'read:any': ['*']\n    },\n    series_open: {\n      'read:any': ['*']\n    }\n  },\n  user: {\n    series: {\n      'create:own': ['*'],\n      'read:own': ['*'],\n      'update:own': ['*'],\n      'delete:own': ['*']\n    },\n    series_public: {\n      'read:any': ['*']\n    },\n    series_open: {\n      'read:any': ['*'],\n      'update:any': ['photos']\n    },\n    photo: {\n      'read:any': ['*'],\n      'create:own': ['*'],\n      'update:own': ['*'],\n      'delete:own': ['*']\n    }\n  }\n};\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.timestampToHTML5Input = timestampToHTML5Input;\nexports.HTML5InputToTimestamp = HTML5InputToTimestamp;\nexports.convertJSDatetoTimestamp = exports.parseDate = exports.formatDateAgo = exports.fixParseDate = exports.formatDate = void 0;\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _util = require(\"./util\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar formatDate = function formatDate(utctimestamp) {\n  var format = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'LLLL';\n  if (utctimestamp && !(0, _util.isNumeric)(utctimestamp)) console.error('formatDate: utctimestamp must be numeric');\n  var val = utctimestamp || Date.now();\n  return (0, _moment[\"default\"])(val, 'x').format(format);\n};\n\nexports.formatDate = formatDate;\nvar EARLY_DATE = 344505600000;\n\nvar fixParseDate = function fixParseDate(inTimestamp) {\n  var isGMT = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var retVal = null;\n\n  if (inTimestamp !== null && inTimestamp !== undefined) {\n    try {\n      var jsDate = new Date(inTimestamp);\n      retVal = jsDate.getTime();\n\n      if ((0, _util.isNumeric)(inTimestamp) && (!retVal || retVal < EARLY_DATE)) {\n        retVal = parseInt(inTimestamp, 10);\n        if (retVal > 0) retVal = retVal * 1000;\n\n        if (!isGMT) {\n          var tzOffset = jsDate.getTimezoneOffset();\n          retVal = retVal + tzOffset * 60 * 1000;\n        }\n\n        console.log(\"fixParseDate: Fixing datetime: \".concat(inTimestamp, \" => \").concat(retVal));\n      }\n\n      retVal = String(retVal);\n    } catch (e) {\n      console.error('fixParseDate: Error parsing datetime:' + inTimestamp);\n    }\n  }\n\n  return retVal;\n};\n\nexports.fixParseDate = fixParseDate;\n\nvar formatDateAgo = function formatDateAgo(utctimestamp) {\n  var val = utctimestamp || Date.now();\n  return (0, _moment[\"default\"])(val, 'x').fromNow();\n};\n\nexports.formatDateAgo = formatDateAgo;\n\nvar parseDate = function parseDate(utctimestamp) {\n  return (0, _moment[\"default\"])(utctimestamp, 'x');\n};\n\nexports.parseDate = parseDate;\n\nvar convertJSDatetoTimestamp = function convertJSDatetoTimestamp(jsDate) {\n  return _moment[\"default\"].utc(jsDate).format('x');\n};\n\nexports.convertJSDatetoTimestamp = convertJSDatetoTimestamp;\n\nfunction timestampToHTML5Input(utctimestamp) {\n  return (0, _moment[\"default\"])(utctimestamp, 'x').format('YYYY-MM-DDTkk:mm');\n}\n\nfunction HTML5InputToTimestamp(isoStr) {\n  return (0, _moment[\"default\"])(new Date(isoStr), 'YYYY-MM-DDTkk:mm').format('x');\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.formatNum = formatNum;\nexports.clearSelection = clearSelection;\nexports.isObjectWithKeys = isObjectWithKeys;\nexports.makeDomArray = makeDomArray;\nexports.capitalizeFirstLetter = capitalizeFirstLetter;\nexports.numericArrayCompare = numericArrayCompare;\nexports.decodeUnbufferedBase64 = decodeUnbufferedBase64;\nexports.encodeUnbufferedBase64 = encodeUnbufferedBase64;\nexports.isObject = isObject;\nexports.arrToObj = arrToObj;\nexports.getRandomArbitraryInt = getRandomArbitraryInt;\nexports.debounce = debounce;\nexports.chunkArray = exports.base64toJSON = exports.json2base64 = exports.urlizeb64 = exports.isNumeric = void 0;\n\nvar _numeral = _interopRequireDefault(require(\"numeral\"));\n\nvar _zlib = _interopRequireDefault(require(\"zlib\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar isNumeric = function isNumeric(num) {\n  try {\n    return !isNaN(parseFloat(num)) && isFinite(num);\n  } catch (e) {\n    return false;\n  }\n};\n\nexports.isNumeric = isNumeric;\n\nvar urlizeb64 = function urlizeb64(x) {\n  return x.replace('+', '-').replace('/', '_').replace(/=+$/, '');\n};\n\nexports.urlizeb64 = urlizeb64;\n\nfunction formatNum(num, precision) {\n  try {\n    var precstr = precision > 0 ? '.' + Array(precision + 1).join('0') : '';\n    var newprec = isNumeric(num) ? (0, _numeral[\"default\"])(num).format(\"0,0\".concat(precstr)) : num;\n    return newprec.replace(/(\\.(0{0,1}[1-9]*))0+$/, '$1');\n  } catch (e) {\n    return num;\n  }\n}\n\nfunction clearSelection() {\n  if (document.selection && document.selection.empty) {\n    document.selection.empty();\n  } else if (window.getSelection) {\n    var sel = window.getSelection();\n    sel.removeAllRanges();\n  }\n}\n\nfunction isObjectWithKeys(obj) {\n  return _typeof(obj) === 'object' && obj !== null && Object.keys(obj).length > 0;\n}\n\nfunction makeDomArray(domnode) {\n  if (!domnode) return [];\n  var keys = Object.keys(domnode);\n  if (keys.length > 1 || keys.length === 0) throw Error('Expected nester domnode structure.');\n  if (!domnode) return [];\n  if (!domnode[keys[0]]) return [];\n  return Array.isArray(domnode[keys[0]]) ? domnode[keys[0]] : [domnode[keys[0]]];\n}\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nfunction numericArrayCompare(arr1, arr2) {\n  if (!Array.isArray(arr1) || !Array.isArray(arr2)) return false;\n  if (arr1.length !== arr2.length) return false;\n  return !arr1.some(function (el, idx) {\n    return el !== arr2[idx];\n  });\n}\n\nfunction decodeUnbufferedBase64(hash) {\n  var missingPadding = hash.length % 4;\n\n  if (missingPadding !== 0) {\n    var newhash = hash + Array(4 - missingPadding).join('=');\n    return Buffer.from(newhash, 'base64').toString();\n  } else {\n    return Buffer.from(hash, 'base64').toString();\n  }\n}\n\nfunction encodeUnbufferedBase64(str) {\n  return urlizeb64(Buffer.from(str).toString('base64'));\n}\n\nfunction isObject(o) {\n  return o instanceof Object && o.constructor === Object;\n}\n\nfunction arrToObj(data) {\n  for (var key in data) {\n    if (data.hasOwnProperty(key)) {\n      var keyDat = data[key];\n\n      if (keyDat._) {\n        keyDat.val = keyDat._;\n        delete keyDat._;\n      }\n\n      if (keyDat.$) {\n        keyDat.attr = keyDat.$;\n        delete keyDat.$;\n      }\n\n      if (_typeof(keyDat) === 'object') {\n        data[key] = arrToObj(keyDat);\n\n        if (Array.isArray(keyDat) && keyDat.length === 1 && typeof keyDat[0] === 'string') {\n          if (isNumeric(keyDat[0])) data[key] = Number(keyDat[0]);else data[key] = keyDat[0].replace(/\\\\/g, '/');\n        } else if (Array.isArray(keyDat) && keyDat.length === 1 && isObject(keyDat[0]) && Object.keys(keyDat[0]).length === 1) {\n          data[key] = keyDat[0][Object.keys(keyDat[0])[0]];\n        }\n\n        if (_typeof(data[key]) && data[key].length === 0) {\n          delete data[key];\n        }\n\n        if (typeof data[key] === 'string' && isNumeric(data[key])) data[key] = Number(data[key]);\n      }\n    }\n  }\n\n  return data;\n}\n\nvar json2base64 = function json2base64(text) {\n  return new Promise(function (resolve, reject) {\n    _zlib[\"default\"].gzip(JSON.stringify(text), function (err, data) {\n      if (err) reject(err);else resolve(data.toString('base64'));\n    });\n  });\n};\n\nexports.json2base64 = json2base64;\n\nvar base64toJSON = function base64toJSON(b64String) {\n  var buff = Buffer.from(b64String, 'base64');\n  return new Promise(function (resolve, reject) {\n    _zlib[\"default\"].gunzip(buff, function (err, data) {\n      if (err) reject(err);else resolve(JSON.parse(data.toString()));\n    });\n  });\n};\n\nexports.base64toJSON = base64toJSON;\n\nvar chunkArray = function chunkArray(arr, chunkSize) {\n  var result = [];\n\n  for (var i = 0; i < arr.length; i += chunkSize) {\n    result.push(arr.slice(i, i + chunkSize));\n  }\n\n  return result;\n};\n\nexports.chunkArray = chunkArray;\n\nfunction getRandomArbitraryInt(min, max) {\n  return parseInt(Math.random() * (max - min) + min, 10);\n}\n\nfunction debounce(func, wait, immediate) {\n  var _this = this;\n\n  var timeout = null;\n  return function () {\n    for (var _len = arguments.length, innerArgs = new Array(_len), _key = 0; _key < _len; _key++) {\n      innerArgs[_key] = arguments[_key];\n    }\n\n    var context = _this;\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      timeout = null;\n\n      if (!immediate) {\n        func.apply(context, innerArgs);\n      }\n    }, wait);\n\n    if (callNow) {\n      func.apply(context, innerArgs);\n    }\n  };\n}\n\n;","export default {\n  '@global': {\n    '.mapboxgl-map': {\n      font: '12px/20px \\'Helvetica Neue\\', Arial, Helvetica, sans-serif',\n      overflow: 'hidden',\n      position: 'relative',\n      W: 'rgba(0, 0, 0, 0)'\n    },\n    '.mapboxgl-map:-webkit-full-screen': {\n      width: '100%',\n      height: '100%'\n    },\n    '.mapboxgl-canary': {\n      backgroundColor: 'salmon'\n    },\n    '.mapboxgl-canvas-container.mapboxgl-interactive, .mapboxgl-ctrl-group > button.mapboxgl-ctrl-compass': {\n      cursor: 'grab',\n      fallbacks: [{\n        M: 'none'\n      }, {\n        cursor: '-moz-grab'\n      }, {\n        cursor: '-webkit-grab'\n      }],\n      M: 'none',\n      W: 'none',\n      userSelect: 'none'\n    },\n    '.mapboxgl-canvas-container.mapboxgl-interactive:active, .mapboxgl-ctrl-group > button.mapboxgl-ctrl-compass:active': {\n      cursor: 'grabbing',\n      fallbacks: [{\n        cursor: '-moz-grabbing'\n      }, {\n        cursor: '-webkit-grabbing'\n      }]\n    },\n    '.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate, .mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas': {\n      touchAction: 'pan-x pan-y'\n    },\n    '.mapboxgl-canvas-container.mapboxgl-touch-drag-pan, .mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas': {\n      touchAction: 'pinch-zoom'\n    },\n    '.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan, .mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas': {\n      touchAction: 'none'\n    },\n    '.mapboxgl-ctrl-top-left, .mapboxgl-ctrl-top-right, .mapboxgl-ctrl-bottom-left, .mapboxgl-ctrl-bottom-right': {\n      position: 'absolute',\n      pointerEvents: 'none',\n      zIndex: '2'\n    },\n    '.mapboxgl-ctrl-top-left': {\n      top: '0',\n      left: '0'\n    },\n    '.mapboxgl-ctrl-top-right': {\n      top: '0',\n      right: '0'\n    },\n    '.mapboxgl-ctrl-bottom-left': {\n      bottom: '0',\n      left: '0'\n    },\n    '.mapboxgl-ctrl-bottom-right': {\n      right: '0',\n      bottom: '0'\n    },\n    '.mapboxgl-ctrl': {\n      clear: 'both',\n      pointerEvents: 'auto',\n      transform: 'translate(0, 0)'\n    },\n    '.mapboxgl-ctrl-top-left .mapboxgl-ctrl': {\n      margin: '10px 0 0 10px',\n      float: 'left'\n    },\n    '.mapboxgl-ctrl-top-right .mapboxgl-ctrl': {\n      margin: '10px 10px 0 0',\n      float: 'right'\n    },\n    '.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl': {\n      margin: '0 0 10px 10px',\n      float: 'left'\n    },\n    '.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl': {\n      margin: '0 10px 10px 0',\n      float: 'right'\n    },\n    '.mapboxgl-ctrl-group': {\n      borderRadius: 4,\n      overflow: 'hidden',\n      background: '#fff'\n    },\n    '.mapboxgl-ctrl-group:not(:empty)': {\n      M: '0 0 2px rgba(0, 0, 0, 0.1)',\n      W: '0 0 2px rgba(0, 0, 0, 0.1)',\n      boxShadow: '0 0 0 2px rgba(0, 0, 0, 0.1)'\n    },\n    '.mapboxgl-ctrl-group > button': {\n      width: 30,\n      height: 30,\n      display: 'block',\n      padding: '0',\n      outline: 'none',\n      border: '0',\n      boxSizing: 'border-box',\n      backgroundColor: 'transparent',\n      cursor: 'pointer'\n    },\n    '.mapboxgl-ctrl-group > button + button': {\n      borderTop: '1px solid #ddd'\n    },\n    '.mapboxgl-ctrl > button::-moz-focus-inner': {\n      border: '0',\n      padding: '0'\n    },\n    '.mapboxgl-ctrl > button:hover': {\n      backgroundColor: 'rgba(0, 0, 0, 0.05)'\n    },\n    '.mapboxgl-ctrl-icon, .mapboxgl-ctrl-icon > .mapboxgl-ctrl-compass-arrow': {\n      speak: 'none',\n      W: 'antialiased',\n      M: 'grayscale'\n    },\n    '.mapboxgl-ctrl-icon': {\n      padding: 5\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-icon-disabled': {\n      opacity: '0.25',\n      borderColor: '#373737'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-out': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath style=\\'fill:%23333333;\\' d=\\'m 7,9 c -0.554,0 -1,0.446 -1,1 0,0.554 0.446,1 1,1 l 6,0 c 0.554,0 1,-0.446 1,-1 0,-0.554 -0.446,-1 -1,-1 z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-zoom-in': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath style=\\'fill:%23333333;\\' d=\\'M 10 6 C 9.446 6 9 6.4459904 9 7 L 9 9 L 7 9 C 6.446 9 6 9.446 6 10 C 6 10.554 6.446 11 7 11 L 9 11 L 9 13 C 9 13.55401 9.446 14 10 14 C 10.554 14 11 13.55401 11 13 L 11 11 L 13 11 C 13.554 11 14 10.554 14 10 C 14 9.446 13.554 9 13 9 L 11 9 L 11 7 C 11 6.4459904 10.554 6 10 6 z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%23333\\'%3E %3Cpath d=\\'M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate:disabled': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%23aaa\\'%3E %3Cpath d=\\'M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%2333b5e5\\'%3E %3Cpath d=\\'M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%23e58978\\'%3E %3Cpath d=\\'M10 4C9 4 9 5 9 5L9 5.1A5 5 0 0 0 5.1 9L5 9C5 9 4 9 4 10 4 11 5 11 5 11L5.1 11A5 5 0 0 0 9 14.9L9 15C9 15 9 16 10 16 11 16 11 15 11 15L11 14.9A5 5 0 0 0 14.9 11L15 11C15 11 16 11 16 10 16 9 15 9 15 9L14.9 9A5 5 0 0 0 11 5.1L11 5C11 5 11 4 10 4zM10 6.5A3.5 3.5 0 0 1 13.5 10 3.5 3.5 0 0 1 10 13.5 3.5 3.5 0 0 1 6.5 10 3.5 3.5 0 0 1 10 6.5zM10 8.3A1.8 1.8 0 0 0 8.3 10 1.8 1.8 0 0 0 10 11.8 1.8 1.8 0 0 0 11.8 10 1.8 1.8 0 0 0 10 8.3z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%2333b5e5\\'%3E %3Cpath d=\\'M 10,4 C 9,4 9,5 9,5 L 9,5.1 C 7.0357113,5.5006048 5.5006048,7.0357113 5.1,9 L 5,9 c 0,0 -1,0 -1,1 0,1 1,1 1,1 l 0.1,0 c 0.4006048,1.964289 1.9357113,3.499395 3.9,3.9 L 9,15 c 0,0 0,1 1,1 1,0 1,-1 1,-1 l 0,-0.1 c 1.964289,-0.400605 3.499395,-1.935711 3.9,-3.9 l 0.1,0 c 0,0 1,0 1,-1 C 16,9 15,9 15,9 L 14.9,9 C 14.499395,7.0357113 12.964289,5.5006048 11,5.1 L 11,5 c 0,0 0,-1 -1,-1 z m 0,2.5 c 1.932997,0 3.5,1.5670034 3.5,3.5 0,1.932997 -1.567003,3.5 -3.5,3.5 C 8.0670034,13.5 6.5,11.932997 6.5,10 6.5,8.0670034 8.0670034,6.5 10,6.5 Z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\' fill=\\'%23e54e33\\'%3E %3Cpath d=\\'M 10,4 C 9,4 9,5 9,5 L 9,5.1 C 7.0357113,5.5006048 5.5006048,7.0357113 5.1,9 L 5,9 c 0,0 -1,0 -1,1 0,1 1,1 1,1 l 0.1,0 c 0.4006048,1.964289 1.9357113,3.499395 3.9,3.9 L 9,15 c 0,0 0,1 1,1 1,0 1,-1 1,-1 l 0,-0.1 c 1.964289,-0.400605 3.499395,-1.935711 3.9,-3.9 l 0.1,0 c 0,0 1,0 1,-1 C 16,9 15,9 15,9 L 14.9,9 C 14.499395,7.0357113 12.964289,5.5006048 11,5.1 L 11,5 c 0,0 0,-1 -1,-1 z m 0,2.5 c 1.932997,0 3.5,1.5670034 3.5,3.5 0,1.932997 -1.567003,3.5 -3.5,3.5 C 8.0670034,13.5 6.5,11.932997 6.5,10 6.5,8.0670034 8.0670034,6.5 10,6.5 Z\\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting': {\n      W: 'mapboxgl-spin 2s infinite linear',\n      M: 'mapboxgl-spin 2s infinite linear',\n      O: 'mapboxgl-spin 2s infinite linear',\n      fallbacks: [{\n        M: 'mapboxgl-spin 2s infinite linear'\n      }],\n      animation: 'mapboxgl-spin 2s infinite linear'\n    },\n    '@keyframes mapboxgl-spin': {\n      '0%': {\n        W: 'rotate(0deg)',\n        M: 'rotate(0deg)',\n        O: 'rotate(0deg)',\n        transform: 'rotate(0deg)'\n      },\n      '100%': {\n        W: 'rotate(360deg)',\n        M: 'rotate(360deg)',\n        O: 'rotate(360deg)',\n        transform: 'rotate(360deg)'\n      }\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-fullscreen': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath d=\\'M 5 4 C 4.5 4 4 4.5 4 5 L 4 6 L 4 9 L 4.5 9 L 5.7773438 7.296875 C 6.7771319 8.0602131 7.835765 8.9565728 8.890625 10 C 7.8257121 11.0633 6.7761791 11.951675 5.78125 12.707031 L 4.5 11 L 4 11 L 4 15 C 4 15.5 4.5 16 5 16 L 9 16 L 9 15.5 L 7.2734375 14.205078 C 8.0428931 13.187886 8.9395441 12.133481 9.9609375 11.068359 C 11.042371 12.14699 11.942093 13.2112 12.707031 14.21875 L 11 15.5 L 11 16 L 14 16 L 15 16 C 15.5 16 16 15.5 16 15 L 16 14 L 16 11 L 15.5 11 L 14.205078 12.726562 C 13.177985 11.949617 12.112718 11.043577 11.037109 10.009766 C 12.151856 8.981061 13.224345 8.0798624 14.228516 7.3046875 L 15.5 9 L 16 9 L 16 5 C 16 4.5 15.5 4 15 4 L 11 4 L 11 4.5 L 12.703125 5.7773438 C 11.932647 6.7864834 11.026693 7.8554712 9.9707031 8.9199219 C 8.9584739 7.8204943 8.0698767 6.7627188 7.3046875 5.7714844 L 9 4.5 L 9 4 L 6 4 L 5 4 z \\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-shrink': {\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath style=\\'fill:%23000000;\\' d=\\'M 4.2421875 3.4921875 A 0.750075 0.750075 0 0 0 3.71875 4.78125 L 5.9648438 7.0273438 L 4 8.5 L 4 9 L 8 9 C 8.500001 8.9999988 9 8.4999992 9 8 L 9 4 L 8.5 4 L 7.0175781 5.9550781 L 4.78125 3.71875 A 0.750075 0.750075 0 0 0 4.2421875 3.4921875 z M 15.734375 3.4921875 A 0.750075 0.750075 0 0 0 15.21875 3.71875 L 12.984375 5.953125 L 11.5 4 L 11 4 L 11 8 C 11 8.4999992 11.499999 8.9999988 12 9 L 16 9 L 16 8.5 L 14.035156 7.0273438 L 16.28125 4.78125 A 0.750075 0.750075 0 0 0 15.734375 3.4921875 z M 4 11 L 4 11.5 L 5.9648438 12.972656 L 3.71875 15.21875 A 0.75130096 0.75130096 0 1 0 4.78125 16.28125 L 7.0273438 14.035156 L 8.5 16 L 9 16 L 9 12 C 9 11.500001 8.500001 11.000001 8 11 L 4 11 z M 12 11 C 11.499999 11.000001 11 11.500001 11 12 L 11 16 L 11.5 16 L 12.972656 14.035156 L 15.21875 16.28125 A 0.75130096 0.75130096 0 1 0 16.28125 15.21875 L 14.035156 12.972656 L 16 11.5 L 16 11 L 12 11 z \\'/%3E %3C/svg%3E\")'\n    },\n    '.mapboxgl-ctrl-icon.mapboxgl-ctrl-compass > .mapboxgl-ctrl-compass-arrow': {\n      width: 20,\n      height: 20,\n      margin: 5,\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpolygon fill=\\'%23333333\\' points=\\'6,9 10,1 14,9\\'/%3E %3Cpolygon fill=\\'%23CCCCCC\\' points=\\'6,11 10,19 14,11 \\'/%3E %3C/svg%3E\")',\n      backgroundRepeat: 'no-repeat',\n      display: 'inline-block'\n    },\n    'a.mapboxgl-ctrl-logo': {\n      width: 85,\n      height: 21,\n      margin: '0 0 -3px -3px',\n      display: 'block',\n      backgroundRepeat: 'no-repeat',\n      cursor: 'pointer',\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3C?xml version=\\'1.0\\' encoding=\\'utf-8\\'?%3E%3Csvg version=\\'1.1\\' id=\\'Layer_1\\' xmlns=\\'http://www.w3.org/2000/svg\\' xmlns:xlink=\\'http://www.w3.org/1999/xlink\\' x=\\'0px\\' y=\\'0px\\' viewBox=\\'0 0 84.49 21\\' style=\\'enable-background:new 0 0 84.49 21;\\' xml:space=\\'preserve\\'%3E%3Cg%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M83.25,14.26c0,0.12-0.09,0.21-0.21,0.21h-1.61c-0.13,0-0.24-0.06-0.3-0.17l-1.44-2.39l-1.44,2.39 c-0.06,0.11-0.18,0.17-0.3,0.17h-1.61c-0.04,0-0.08-0.01-0.12-0.03c-0.09-0.06-0.13-0.19-0.06-0.28l0,0l2.43-3.68L76.2,6.84 c-0.02-0.03-0.03-0.07-0.03-0.12c0-0.12,0.09-0.21,0.21-0.21h1.61c0.13,0,0.24,0.06,0.3,0.17l1.41,2.36l1.4-2.35 c0.06-0.11,0.18-0.17,0.3-0.17H83c0.04,0,0.08,0.01,0.12,0.03c0.09,0.06,0.13,0.19,0.06,0.28l0,0l-2.37,3.63l2.43,3.67 C83.24,14.18,83.25,14.22,83.25,14.26z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M66.24,9.59c-0.39-1.88-1.96-3.28-3.84-3.28c-1.03,0-2.03,0.42-2.73,1.18V3.51c0-0.13-0.1-0.23-0.23-0.23h-1.4 c-0.13,0-0.23,0.11-0.23,0.23v10.72c0,0.13,0.1,0.23,0.23,0.23h1.4c0.13,0,0.23-0.11,0.23-0.23V13.5c0.71,0.75,1.7,1.18,2.73,1.18 c1.88,0,3.45-1.41,3.84-3.29C66.37,10.79,66.37,10.18,66.24,9.59L66.24,9.59z M62.08,13c-1.32,0-2.39-1.11-2.41-2.48v-0.06 c0.02-1.38,1.09-2.48,2.41-2.48s2.42,1.12,2.42,2.51S63.41,13,62.08,13z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M71.67,6.32c-1.98-0.01-3.72,1.35-4.16,3.29c-0.13,0.59-0.13,1.19,0,1.77c0.44,1.94,2.17,3.32,4.17,3.3 c2.35,0,4.26-1.87,4.26-4.19S74.04,6.32,71.67,6.32z M71.65,13.01c-1.33,0-2.42-1.12-2.42-2.51s1.08-2.52,2.42-2.52 c1.33,0,2.42,1.12,2.42,2.51S72.99,13,71.65,13.01L71.65,13.01z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M62.08,7.98c-1.32,0-2.39,1.11-2.41,2.48v0.06C59.68,11.9,60.75,13,62.08,13s2.42-1.12,2.42-2.51 S63.41,7.98,62.08,7.98z M62.08,11.76c-0.63,0-1.14-0.56-1.17-1.25v-0.04c0.01-0.69,0.54-1.25,1.17-1.25 c0.63,0,1.17,0.57,1.17,1.27C63.24,11.2,62.73,11.76,62.08,11.76z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M71.65,7.98c-1.33,0-2.42,1.12-2.42,2.51S70.32,13,71.65,13s2.42-1.12,2.42-2.51S72.99,7.98,71.65,7.98z M71.65,11.76c-0.64,0-1.17-0.57-1.17-1.27c0-0.7,0.53-1.26,1.17-1.26s1.17,0.57,1.17,1.27C72.82,11.21,72.29,11.76,71.65,11.76z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M45.74,6.53h-1.4c-0.13,0-0.23,0.11-0.23,0.23v0.73c-0.71-0.75-1.7-1.18-2.73-1.18 c-2.17,0-3.94,1.87-3.94,4.19s1.77,4.19,3.94,4.19c1.04,0,2.03-0.43,2.73-1.19v0.73c0,0.13,0.1,0.23,0.23,0.23h1.4 c0.13,0,0.23-0.11,0.23-0.23V6.74c0-0.12-0.09-0.22-0.22-0.22C45.75,6.53,45.75,6.53,45.74,6.53z M44.12,10.53 C44.11,11.9,43.03,13,41.71,13s-2.42-1.12-2.42-2.51s1.08-2.52,2.4-2.52c1.33,0,2.39,1.11,2.41,2.48L44.12,10.53z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M41.71,7.98c-1.33,0-2.42,1.12-2.42,2.51S40.37,13,41.71,13s2.39-1.11,2.41-2.48v-0.06 C44.1,9.09,43.03,7.98,41.71,7.98z M40.55,10.49c0-0.7,0.52-1.27,1.17-1.27c0.64,0,1.14,0.56,1.17,1.25v0.04 c-0.01,0.68-0.53,1.24-1.17,1.24C41.08,11.75,40.55,11.19,40.55,10.49z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M52.41,6.32c-1.03,0-2.03,0.42-2.73,1.18V6.75c0-0.13-0.1-0.23-0.23-0.23h-1.4c-0.13,0-0.23,0.11-0.23,0.23 v10.72c0,0.13,0.1,0.23,0.23,0.23h1.4c0.13,0,0.23-0.1,0.23-0.23V13.5c0.71,0.75,1.7,1.18,2.74,1.18c2.17,0,3.94-1.87,3.94-4.19 S54.58,6.32,52.41,6.32z M52.08,13.01c-1.32,0-2.39-1.11-2.42-2.48v-0.07c0.02-1.38,1.09-2.49,2.4-2.49c1.32,0,2.41,1.12,2.41,2.51 S53.4,13,52.08,13.01L52.08,13.01z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M52.08,7.98c-1.32,0-2.39,1.11-2.42,2.48v0.06c0.03,1.38,1.1,2.48,2.42,2.48s2.41-1.12,2.41-2.51 S53.4,7.98,52.08,7.98z M52.08,11.76c-0.63,0-1.14-0.56-1.17-1.25v-0.04c0.01-0.69,0.54-1.25,1.17-1.25c0.63,0,1.17,0.58,1.17,1.27 S52.72,11.76,52.08,11.76z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M36.08,14.24c0,0.13-0.1,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68c0-0.98-0.74-1.71-1.62-1.71 c-0.8,0-1.46,0.7-1.59,1.62l0.01,4.66c0,0.13-0.11,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68 c0-0.98-0.74-1.71-1.62-1.71c-0.85,0-1.54,0.79-1.6,1.8v4.48c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V6.74 c0.01-0.13,0.1-0.22,0.23-0.22h1.4c0.13,0,0.22,0.11,0.23,0.22V7.4c0.5-0.68,1.3-1.09,2.16-1.1h0.03c1.09,0,2.09,0.6,2.6,1.55 c0.45-0.95,1.4-1.55,2.44-1.56c1.62,0,2.93,1.25,2.9,2.78L36.08,14.24z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M84.34,13.59l-0.07-0.13l-1.96-2.99l1.94-2.95c0.44-0.67,0.26-1.56-0.41-2.02c-0.02,0-0.03,0-0.04-0.01 c-0.23-0.15-0.5-0.22-0.78-0.22h-1.61c-0.56,0-1.08,0.29-1.37,0.78L79.72,6.6l-0.34-0.56C79.09,5.56,78.57,5.27,78,5.27h-1.6 c-0.6,0-1.13,0.37-1.35,0.92c-2.19-1.66-5.28-1.47-7.26,0.45c-0.35,0.34-0.65,0.72-0.89,1.14c-0.9-1.62-2.58-2.72-4.5-2.72 c-0.5,0-1.01,0.07-1.48,0.23V3.51c0-0.82-0.66-1.48-1.47-1.48h-1.4c-0.81,0-1.47,0.66-1.47,1.47v3.75 c-0.95-1.36-2.5-2.18-4.17-2.19c-0.74,0-1.46,0.16-2.12,0.47c-0.24-0.17-0.54-0.26-0.84-0.26h-1.4c-0.45,0-0.87,0.21-1.15,0.56 c-0.02-0.03-0.04-0.05-0.07-0.08c-0.28-0.3-0.68-0.47-1.09-0.47h-1.39c-0.3,0-0.6,0.09-0.84,0.26c-0.67-0.3-1.39-0.46-2.12-0.46 c-1.83,0-3.43,1-4.37,2.5c-0.2-0.46-0.48-0.89-0.83-1.25c-0.8-0.81-1.89-1.25-3.02-1.25h-0.01c-0.89,0.01-1.75,0.33-2.46,0.88 c-0.74-0.57-1.64-0.88-2.57-0.88H28.1c-0.29,0-0.58,0.03-0.86,0.11c-0.28,0.06-0.56,0.16-0.82,0.28c-0.21-0.12-0.45-0.18-0.7-0.18 h-1.4c-0.82,0-1.47,0.66-1.47,1.47v7.5c0,0.82,0.66,1.47,1.47,1.47h1.4c0.82,0,1.48-0.66,1.48-1.48l0,0V9.79 c0.03-0.36,0.23-0.59,0.36-0.59c0.18,0,0.38,0.18,0.38,0.47v4.57c0,0.82,0.66,1.47,1.47,1.47h1.41c0.82,0,1.47-0.66,1.47-1.47 l-0.01-4.57c0.06-0.32,0.25-0.47,0.35-0.47c0.18,0,0.38,0.18,0.38,0.47v4.57c0,0.82,0.66,1.47,1.47,1.47h1.41 c0.82,0,1.47-0.66,1.47-1.47v-0.38c0.96,1.29,2.46,2.06,4.06,2.06c0.74,0,1.46-0.16,2.12-0.47c0.24,0.17,0.54,0.26,0.84,0.26h1.39 c0.3,0,0.6-0.09,0.84-0.26v2.01c0,0.82,0.66,1.47,1.47,1.47h1.4c0.82,0,1.47-0.66,1.47-1.47v-1.77c0.48,0.15,0.99,0.23,1.49,0.22 c1.7,0,3.22-0.87,4.17-2.2v0.52c0,0.82,0.66,1.47,1.47,1.47h1.4c0.3,0,0.6-0.09,0.84-0.26c0.66,0.31,1.39,0.47,2.12,0.47 c1.92,0,3.6-1.1,4.49-2.73c1.54,2.65,4.95,3.53,7.58,1.98c0.18-0.11,0.36-0.22,0.53-0.36c0.22,0.55,0.76,0.91,1.35,0.9H78 c0.56,0,1.08-0.29,1.37-0.78l0.37-0.61l0.37,0.61c0.29,0.48,0.81,0.78,1.38,0.78h1.6c0.81,0,1.46-0.66,1.45-1.46 C84.49,14.02,84.44,13.8,84.34,13.59L84.34,13.59z M35.86,14.47h-1.41c-0.13,0-0.23-0.11-0.23-0.23V9.68 c0-0.98-0.74-1.71-1.62-1.71c-0.8,0-1.46,0.7-1.59,1.62l0.01,4.66c0,0.13-0.1,0.23-0.23,0.23h-1.41c-0.13,0-0.23-0.11-0.23-0.23 V9.68c0-0.98-0.74-1.71-1.62-1.71c-0.85,0-1.54,0.79-1.6,1.8v4.48c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23 V6.74c0.01-0.13,0.11-0.22,0.23-0.22h1.4c0.13,0,0.22,0.11,0.23,0.22V7.4c0.5-0.68,1.3-1.09,2.16-1.1h0.03 c1.09,0,2.09,0.6,2.6,1.55c0.45-0.95,1.4-1.55,2.44-1.56c1.62,0,2.93,1.25,2.9,2.78l0.01,5.16C36.09,14.36,35.98,14.46,35.86,14.47 L35.86,14.47z M45.97,14.24c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V13.5c-0.7,0.76-1.69,1.18-2.72,1.18 c-2.17,0-3.94-1.87-3.94-4.19s1.77-4.19,3.94-4.19c1.03,0,2.02,0.43,2.73,1.18V6.74c0-0.13,0.1-0.23,0.23-0.23h1.4 c0.12-0.01,0.22,0.08,0.23,0.21c0,0.01,0,0.01,0,0.02v7.51h-0.01V14.24z M52.41,14.67c-1.03,0-2.02-0.43-2.73-1.18v3.97 c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.1-0.23-0.23V6.75c0-0.13,0.1-0.22,0.23-0.22h1.4c0.13,0,0.23,0.11,0.23,0.23v0.73 c0.71-0.76,1.7-1.18,2.73-1.18c2.17,0,3.94,1.86,3.94,4.18S54.58,14.67,52.41,14.67z M66.24,11.39c-0.39,1.87-1.96,3.29-3.84,3.29 c-1.03,0-2.02-0.43-2.73-1.18v0.73c0,0.13-0.1,0.23-0.23,0.23h-1.4c-0.13,0-0.23-0.11-0.23-0.23V3.51c0-0.13,0.1-0.23,0.23-0.23 h1.4c0.13,0,0.23,0.11,0.23,0.23v3.97c0.71-0.75,1.7-1.18,2.73-1.17c1.88,0,3.45,1.4,3.84,3.28C66.37,10.19,66.37,10.8,66.24,11.39 L66.24,11.39L66.24,11.39z M71.67,14.68c-2,0.01-3.73-1.35-4.17-3.3c-0.13-0.59-0.13-1.19,0-1.77c0.44-1.94,2.17-3.31,4.17-3.3 c2.36,0,4.26,1.87,4.26,4.19S74.03,14.68,71.67,14.68L71.67,14.68z M83.04,14.47h-1.61c-0.13,0-0.24-0.06-0.3-0.17l-1.44-2.39 l-1.44,2.39c-0.06,0.11-0.18,0.17-0.3,0.17h-1.61c-0.04,0-0.08-0.01-0.12-0.03c-0.09-0.06-0.13-0.19-0.06-0.28l0,0l2.43-3.68 L76.2,6.84c-0.02-0.03-0.03-0.07-0.03-0.12c0-0.12,0.09-0.21,0.21-0.21h1.61c0.13,0,0.24,0.06,0.3,0.17l1.41,2.36l1.41-2.36 c0.06-0.11,0.18-0.17,0.3-0.17h1.61c0.04,0,0.08,0.01,0.12,0.03c0.09,0.06,0.13,0.19,0.06,0.28l0,0l-2.38,3.64l2.43,3.67 c0.02,0.03,0.03,0.07,0.03,0.12C83.25,14.38,83.16,14.47,83.04,14.47L83.04,14.47L83.04,14.47z\\'/%3E %3Cpath class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' d=\\'M10.5,1.24c-5.11,0-9.25,4.15-9.25,9.25s4.15,9.25,9.25,9.25s9.25-4.15,9.25-9.25 C19.75,5.38,15.61,1.24,10.5,1.24z M14.89,12.77c-1.93,1.93-4.78,2.31-6.7,2.31c-0.7,0-1.41-0.05-2.1-0.16c0,0-1.02-5.64,2.14-8.81 c0.83-0.83,1.95-1.28,3.13-1.28c1.27,0,2.49,0.51,3.39,1.42C16.59,8.09,16.64,11,14.89,12.77z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M10.5-0.01C4.7-0.01,0,4.7,0,10.49s4.7,10.5,10.5,10.5S21,16.29,21,10.49C20.99,4.7,16.3-0.01,10.5-0.01z M10.5,19.74c-5.11,0-9.25-4.15-9.25-9.25s4.14-9.26,9.25-9.26s9.25,4.15,9.25,9.25C19.75,15.61,15.61,19.74,10.5,19.74z\\'/%3E %3Cpath class=\\'st1\\' style=\\'opacity:0.35; enable-background:new;\\' d=\\'M14.74,6.25C12.9,4.41,9.98,4.35,8.23,6.1c-3.16,3.17-2.14,8.81-2.14,8.81s5.64,1.02,8.81-2.14 C16.64,11,16.59,8.09,14.74,6.25z M12.47,10.34l-0.91,1.87l-0.9-1.87L8.8,9.43l1.86-0.9l0.9-1.87l0.91,1.87l1.86,0.9L12.47,10.34z\\'/%3E %3Cpolygon class=\\'st0\\' style=\\'opacity:0.9; fill: %23FFFFFF; enable-background: new;\\' points=\\'14.33,9.43 12.47,10.34 11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 \\'/%3E%3C/g%3E%3C/svg%3E\")'\n    },\n    'a.mapboxgl-ctrl-logo.mapboxgl-compact': {\n      width: 21,\n      height: 21,\n      backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3C?xml version=\\'1.0\\' encoding=\\'utf-8\\'?%3E %3Csvg version=\\'1.1\\' id=\\'Layer_1\\' xmlns=\\'http://www.w3.org/2000/svg\\' xmlns:xlink=\\'http://www.w3.org/1999/xlink\\' x=\\'0px\\' y=\\'0px\\' viewBox=\\'0 0 21 21\\' style=\\'enable-background:new 0 0 21 21;\\' xml:space=\\'preserve\\'%3E%3Cg transform=\\'translate(0,0.01)\\'%3E%3Cpath d=\\'m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z\\' style=\\'opacity:0.9',\n      fill: '%23ffffff',\n      enableBackground: 'new\\' class=\\'st0\\'/%3E%3C/g%3E%3C/svg%3E\")',\n      fallbacks: [{\n        enableBackground: 'new\\' class=\\'st1\\'/%3E%3Cpolygon points=\\'11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 \\' style=\\'opacity:0.9'\n      }, {\n        fill: '%23ffffff'\n      }, {\n        enableBackground: 'new\\' class=\\'st1\\'/%3E%3Cpath d=\\'M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z\\' style=\\'opacity:0.35'\n      }, {\n        enableBackground: 'new\\' class=\\'st0\\'/%3E%3Cpath d=\\'M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z\\' style=\\'opacity:0.35'\n      }]\n    },\n    '.mapboxgl-ctrl.mapboxgl-ctrl-attrib': {\n      padding: '0 5px',\n      backgroundColor: 'rgba(255, 255, 255, 0.5)',\n      margin: '0'\n    },\n    '@media screen': {\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact': {\n        minHeight: 20,\n        padding: '0',\n        margin: 10,\n        position: 'relative',\n        backgroundColor: '#fff',\n        borderRadius: '3px 12px 12px 3px'\n      },\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact:hover': {\n        padding: '2px 24px 2px 4px',\n        visibility: 'visible',\n        marginTop: 6\n      },\n      '.mapboxgl-ctrl-top-left > .mapboxgl-ctrl-attrib.mapboxgl-compact:hover, .mapboxgl-ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact:hover': {\n        padding: '2px 4px 2px 24px',\n        borderRadius: '12px 3px 3px 12px'\n      },\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner': {\n        display: 'none'\n      },\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner': {\n        display: 'block'\n      },\n      '.mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        content: '\\'\\'',\n        cursor: 'pointer',\n        position: 'absolute',\n        backgroundImage: 'url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox=\\'0 0 20 20\\' xmlns=\\'http://www.w3.org/2000/svg\\'%3E %3Cpath fill=\\'%23333333\\' fill-rule=\\'evenodd\\' d=\\'M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0\\'/%3E %3C/svg%3E\")',\n        backgroundColor: 'rgba(255, 255, 255, 0.5)',\n        width: 24,\n        height: 24,\n        boxSizing: 'border-box',\n        borderRadius: 12\n      },\n      '.mapboxgl-ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        bottom: '0',\n        right: '0'\n      },\n      '.mapboxgl-ctrl-top-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        top: '0',\n        right: '0'\n      },\n      '.mapboxgl-ctrl-top-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        top: '0',\n        left: '0'\n      },\n      '.mapboxgl-ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after': {\n        bottom: '0',\n        left: '0'\n      }\n    },\n    '.mapboxgl-ctrl-attrib a': {\n      color: 'rgba(0, 0, 0, 0.75)',\n      textDecoration: 'none'\n    },\n    '.mapboxgl-ctrl-attrib a:hover': {\n      color: 'inherit',\n      textDecoration: 'underline'\n    },\n    '.mapboxgl-ctrl-attrib .mapbox-improve-map': {\n      fontWeight: 'bold',\n      marginLeft: 2\n    },\n    '.mapboxgl-attrib-empty': {\n      display: 'none'\n    },\n    '.mapboxgl-ctrl-scale': {\n      backgroundColor: 'rgba(255, 255, 255, 0.75)',\n      fontSize: 10,\n      borderWidth: 'medium 2px 2px',\n      borderStyle: 'none solid solid',\n      borderColor: '#333',\n      padding: '0 5px',\n      color: '#333',\n      boxSizing: 'border-box'\n    },\n    '.mapboxgl-popup': {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      display: 'flex',\n      fallbacks: [{\n        display: '-webkit-flex'\n      }],\n      willChange: 'transform',\n      pointerEvents: 'none'\n    },\n    '.mapboxgl-popup-anchor-top, .mapboxgl-popup-anchor-top-left, .mapboxgl-popup-anchor-top-right': {\n      W: 'column',\n      flexDirection: 'column'\n    },\n    '.mapboxgl-popup-anchor-bottom, .mapboxgl-popup-anchor-bottom-left, .mapboxgl-popup-anchor-bottom-right': {\n      W: 'column-reverse',\n      flexDirection: 'column-reverse'\n    },\n    '.mapboxgl-popup-anchor-left': {\n      W: 'row',\n      flexDirection: 'row'\n    },\n    '.mapboxgl-popup-anchor-right': {\n      W: 'row-reverse',\n      flexDirection: 'row-reverse'\n    },\n    '.mapboxgl-popup-tip': {\n      width: '0',\n      height: '0',\n      border: '10px solid transparent',\n      zIndex: '1'\n    },\n    '.mapboxgl-popup-anchor-top .mapboxgl-popup-tip': {\n      W: 'center',\n      alignSelf: 'center',\n      borderTop: 'none',\n      borderBottomColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip': {\n      W: 'flex-start',\n      alignSelf: 'flex-start',\n      borderTop: 'none',\n      borderLeft: 'none',\n      borderBottomColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip': {\n      W: 'flex-end',\n      alignSelf: 'flex-end',\n      borderTop: 'none',\n      borderRight: 'none',\n      borderBottomColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip': {\n      W: 'center',\n      alignSelf: 'center',\n      borderBottom: 'none',\n      borderTopColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip': {\n      W: 'flex-start',\n      alignSelf: 'flex-start',\n      borderBottom: 'none',\n      borderLeft: 'none',\n      borderTopColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip': {\n      W: 'flex-end',\n      alignSelf: 'flex-end',\n      borderBottom: 'none',\n      borderRight: 'none',\n      borderTopColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-left .mapboxgl-popup-tip': {\n      W: 'center',\n      alignSelf: 'center',\n      borderLeft: 'none',\n      borderRightColor: '#fff'\n    },\n    '.mapboxgl-popup-anchor-right .mapboxgl-popup-tip': {\n      W: 'center',\n      alignSelf: 'center',\n      borderRight: 'none',\n      borderLeftColor: '#fff'\n    },\n    '.mapboxgl-popup-close-button': {\n      position: 'absolute',\n      right: '0',\n      top: '0',\n      border: '0',\n      borderRadius: '0 3px 0 0',\n      cursor: 'pointer',\n      backgroundColor: 'transparent'\n    },\n    '.mapboxgl-popup-close-button:hover': {\n      backgroundColor: 'rgba(0, 0, 0, 0.05)'\n    },\n    '.mapboxgl-popup-content': {\n      position: 'relative',\n      background: '#fff',\n      borderRadius: 3,\n      boxShadow: '0 1px 2px rgba(0, 0, 0, 0.1)',\n      padding: '10px 10px 15px',\n      pointerEvents: 'auto'\n    },\n    '.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content': {\n      borderTopLeftRadius: '0'\n    },\n    '.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content': {\n      borderTopRightRadius: '0'\n    },\n    '.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content': {\n      borderBottomLeftRadius: '0'\n    },\n    '.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content': {\n      borderBottomRightRadius: '0'\n    },\n    '.mapboxgl-marker': {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      willChange: 'transform'\n    },\n    '.mapboxgl-user-location-dot': {\n      backgroundColor: '#1da1f2',\n      width: 15,\n      height: 15,\n      borderRadius: '50%',\n      boxShadow: '0 0 2px rgba(0, 0, 0, 0.25)'\n    },\n    '.mapboxgl-user-location-dot::before': {\n      backgroundColor: '#1da1f2',\n      content: '\\'\\'',\n      width: 15,\n      height: 15,\n      borderRadius: '50%',\n      position: 'absolute',\n      W: 'mapboxgl-user-location-dot-pulse 2s infinite',\n      M: 'mapboxgl-user-location-dot-pulse 2s infinite',\n      fallbacks: [{\n        M: 'mapboxgl-user-location-dot-pulse 2s infinite'\n      }],\n      animation: 'mapboxgl-user-location-dot-pulse 2s infinite'\n    },\n    '.mapboxgl-user-location-dot::after': {\n      borderRadius: '50%',\n      border: '2px solid #fff',\n      content: '\\'\\'',\n      height: 19,\n      left: -2,\n      position: 'absolute',\n      top: -2,\n      width: 19,\n      boxSizing: 'border-box'\n    },\n    '@keyframes mapboxgl-user-location-dot-pulse': {\n      '0%': {\n        W: 'scale(1)',\n        opacity: '1',\n        M: 'scale(1)',\n        transform: 'scale(1)'\n      },\n      '70%': {\n        W: 'scale(3)',\n        opacity: '0',\n        M: 'scale(3)',\n        transform: 'scale(3)'\n      },\n      '100%': {\n        W: 'scale(1)',\n        opacity: '0',\n        M: 'scale(1)',\n        transform: 'scale(1)'\n      }\n    },\n    '.mapboxgl-user-location-dot-stale': {\n      backgroundColor: '#aaa'\n    },\n    '.mapboxgl-user-location-dot-stale::after': {\n      display: 'none'\n    },\n    '.mapboxgl-crosshair, .mapboxgl-crosshair .mapboxgl-interactive, .mapboxgl-crosshair .mapboxgl-interactive:active': {\n      cursor: 'crosshair'\n    },\n    '.mapboxgl-boxzoom': {\n      position: 'absolute',\n      top: '0',\n      left: '0',\n      width: '0',\n      height: '0',\n      background: '#fff',\n      border: '2px dotted #202020',\n      opacity: '0.5'\n    },\n    '@media print': {\n      '.mapbox-improve-map': {\n        display: 'none'\n      }\n    }\n  }\n};","export default {\n  '@global': {\n    '@font-face': {\n      fontFamily: '\\'Roboto\\'',\n      fontStyle: 'italic',\n      fontDisplay: 'swap',\n      fontWeight: '900',\n      src: 'local(\\'Roboto Black italic\\'),\\n    local(\\'Roboto-Blackitalic\\'),\\n    url(\\'./files/roboto-latin-900italic.woff2\\') format(\\'woff2\\'), \\n    url(\\'./files/roboto-latin-900italic.woff\\') format(\\'woff\\')',\n      '': undefined\n    }\n  }\n};","export default (function (theme) {\n  return {\n    '@global': {\n      '.mapboxgl-ctrl-group': {\n        position: 'absolute',\n        top: '70px',\n        left: '10px',\n        opacity: '0.8'\n      }\n    },\n    mapContainer: {\n      height: '100%',\n      width: '100%'\n    }\n  };\n});","\"use strict\";\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"FakeData\", {\n  enumerable: true,\n  get: function get() {\n    return _fakedata[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"fakePastDate\", {\n  enumerable: true,\n  get: function get() {\n    return _fakedata.fakePastDate;\n  }\n});\nObject.defineProperty(exports, \"randomLocation\", {\n  enumerable: true,\n  get: function get() {\n    return _fakedata.randomLocation;\n  }\n});\nexports.random = void 0;\n\nvar _fakedata = _interopRequireWildcard(require(\"./fakedata\"));\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nvar random = require('./random');\n\nexports.random = random;","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport localforage from 'localforage';\nimport createSeries from './mutations/createSeries';\nimport uuidv4 from 'uuid/v4';\nlocalforage.config({\n  storeName: 'MorPhoto',\n  description: 'image blobs'\n});\nexport var imgStore = localforage.createInstance({\n  name: 'imgStore'\n});\nexport var stateStore = localforage.createInstance({\n  name: 'stateStore'\n});\nvar OFFLINEMUTATIONS = 'offlineMutations';\n\nfunction getPendingPromise() {\n  return stateStore.getItem(OFFLINEMUTATIONS).then(function (mutations) {\n    console.log('offline::getPendingPromise', JSON.parse(mutations) || []);\n    return JSON.parse(mutations) || [];\n  });\n}\n\nfunction setPendingPromise(mutations) {\n  console.log('offline::setPendingPromise', mutations);\n  return stateStore.setItem(OFFLINEMUTATIONS, JSON.stringify(mutations));\n}\n\nexport function pushMutationPromise(params, mutation, context) {\n  var id = uuidv4();\n  return getPendingPromise().then(function (mutations) {\n    return mutations.concat({\n      id: id,\n      params: params,\n      mutation: mutation,\n      context: context\n    });\n  }).then(function (data) {\n    console.log('offline::pushMutationPromise', data);\n    return data;\n  }).then(setPendingPromise).then(function () {\n    return id;\n  });\n}\nexport function popMutationPromise(id) {\n  return getPendingPromise().then(function (mutations) {\n    return mutations.filter(function (pm) {\n      return pm.id !== id;\n    });\n  }).then(function (data) {\n    console.log('offline::popMutationPromise', data);\n    return data;\n  }).then(setPendingPromise);\n}\n\nfunction updateHandler(resp, context) {\n  console.log('offline::updateHandler', {\n    resp: resp,\n    context: context\n  });\n  if (resp.data.createSeries) return createSeries.updateThunk(context);else return function () {};\n}\n\nfunction proxyUpdateForId(id, context) {\n  return function (proxy, resp) {\n    updateHandler(resp, context)(proxy, resp);\n    if (!resp.data.__optimistic) return popMutationPromise(id);else return Promise.resolve();\n  };\n}\n\nexport function restoreRequests(client) {\n  return getPendingPromise().then(\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(mutations) {\n      var idx, pendingMutation, id, params, mutation, context;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              idx = 0;\n\n            case 1:\n              if (!(idx < mutations.length)) {\n                _context.next = 13;\n                break;\n              }\n\n              pendingMutation = mutations[idx];\n              console.log('offline::restoreRequests', mutations, pendingMutation);\n              id = pendingMutation.id, params = pendingMutation.params, mutation = pendingMutation.mutation, context = pendingMutation.context;\n              params.optimisticResponse.__optimistic = true;\n              params.update = proxyUpdateForId(id, context);\n              params.mutation = mutation;\n              _context.next = 10;\n              return client.mutate(params).catch(function (err) {\n                console.error('Error replaying mutation', err);\n              });\n\n            case 10:\n              idx++;\n              _context.next = 1;\n              break;\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles } from '@material-ui/core/styles';\nimport PlaceIcon from '@material-ui/icons/Place';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      textAlign: 'center'\n    },\n    placeAvatar: {\n      color: theme.palette.primary.contrastText,\n      border: \"2px solid \".concat(theme.palette.primary.contrastText),\n      background: theme.palette.text.primary,\n      margin: 'auto'\n    },\n    placeIcon: {}\n  };\n});\n\nvar FindOnMapButton = function FindOnMapButton(_ref) {\n  var _onClick = _ref.onClick;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(Avatar, {\n    className: classes.placeAvatar\n  }, React.createElement(IconButton, {\n    color: \"inherit\",\n    onClick: function onClick(e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      _onClick();\n    }\n  }, React.createElement(PlaceIcon, {\n    color: \"inherit\"\n  }))));\n};\n\nFindOnMapButton.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\nexport default FindOnMapButton;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport Button from '@material-ui/core/Button';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { makeStyles } from '@material-ui/core/styles';\nimport EmailIcon from '@material-ui/icons/Email';\nimport { RawSVG } from '@morphoto/icons/dist/AppLogo';\nimport { config } from '@morphoto/client-common';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    dialogContent: {\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden',\n      height: '100%'\n    },\n    iconContainer: {\n      flex: '1 1 10%',\n      textAlign: 'center',\n      padding: theme.spacing(1, 0, 1, 0)\n    },\n    icon: {\n      height: 200,\n      margin: '0 auto',\n      border: \"1px solid \".concat(theme.palette.grey[100]),\n      background: theme.palette.grey[100],\n      borderRadius: '50%',\n      '& path': {\n        fill: 'url(#my-cool-gradient) #447799;'\n      }\n    },\n    title: {\n      textAlign: 'center'\n    },\n    stop1: {\n      stopColor: theme.palette.rose.main\n    },\n    stop2: {\n      stopColor: theme.palette.redorange.main\n    },\n    spacer: {\n      flex: '1 1'\n    },\n    buttonIcon: {\n      marginRight: theme.spacing(1)\n    },\n    scrollText: {\n      flex: '1 1 60%',\n      overflowX: 'hidden',\n      overflowY: 'scroll',\n      whiteSpace: 'pre-line',\n      paddingBottom: theme.spacing(1)\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar AboutApp = function AboutApp(_ref) {\n  var onClose = _ref.onClose,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    className: classes.root,\n    onClose: onClose,\n    fullWidth: true,\n    open: open,\n    PaperProps: {\n      style: {}\n    },\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogContent, {\n    className: classes.dialogContent\n  }, React.createElement(Container, {\n    maxWidth: \"xs\"\n  }, React.createElement(\"div\", {\n    className: classes.iconContainer\n  }, React.createElement(\"svg\", {\n    className: classes.icon,\n    focusable: \"false\",\n    viewBox: \"0 0 24 24\",\n    \"aria-hidden\": \"true\",\n    role: \"presentation\"\n  }, RawSVG), React.createElement(\"svg\", {\n    style: {\n      width: 0,\n      height: 0,\n      position: 'absolute'\n    },\n    \"aria-hidden\": \"true\",\n    focusable: \"false\"\n  }, React.createElement(\"linearGradient\", {\n    id: \"my-cool-gradient\",\n    x2: \"1\",\n    y2: \"1\"\n  }, React.createElement(\"stop\", {\n    offset: \"0%\",\n    stopColor: \"#447799\",\n    className: classes.stop1\n  }), React.createElement(\"stop\", {\n    offset: \"100%\",\n    stopColor: \"#112266\",\n    className: classes.stop2\n  })))), React.createElement(\"div\", {\n    className: classes.title\n  }, React.createElement(Typography, {\n    component: \"div\",\n    variant: \"h5\"\n  }, \"MorPhoto\"), React.createElement(Typography, {\n    component: \"div\",\n    variant: \"caption\"\n  }, \"Version:  \", config.version, \" \", React.createElement(\"em\", null, \"BETA\"))), React.createElement(Typography, {\n    className: classes.scrollText,\n    component: \"div\",\n    variant: \"caption\"\n  }), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Button, {\n    fullWidth: true,\n    href: \"mailto:\".concat(config.contact),\n    color: \"primary\",\n    variant: \"outlined\"\n  }, React.createElement(EmailIcon, {\n    className: classes.buttonIcon\n  }), \"Get in touch\"))), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: onClose,\n    color: \"inherit\"\n  }, \"Close\")));\n};\n\nAboutApp.propTypes = {\n  open: PropTypes.bool,\n  onClose: PropTypes.func.isRequired\n};\nexport default AboutApp;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport AppBar from '@material-ui/core/AppBar';\nimport List from '@material-ui/core/List';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport IconButton from '@material-ui/core/IconButton';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport SettingsBackupRestore from '@material-ui/icons/SettingsBackupRestore';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport { DeleteDialog } from '@morphoto/modals';\nimport { AppContext } from '@morphoto/client-common';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    nuclear: {\n      color: 'red'\n    }\n  };\n});\n\nvar AppSettings = function AppSettings(_ref) {\n  var onMenuBack = _ref.onMenuBack;\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      deleteOpen = _useState2[0],\n      setDeleteOpen = _useState2[1];\n\n  var _useContext = useContext(AppContext),\n      globalActions = _useContext.globalActions;\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Offline data manager\"))), React.createElement(\"div\", {\n    className: classes.mapWrapper\n  }, React.createElement(List, null, React.createElement(ListItem, {\n    button: true,\n    onClick: function onClick() {\n      return setDeleteOpen({\n        action: globalActions.resetAllState,\n        title: 'Reset App State',\n        message: 'Might resolve a temporary glitch. Unfortunately this will wipe your upload queue.'\n      });\n    }\n  }, React.createElement(ListItemIcon, null, React.createElement(SettingsBackupRestore, null)), React.createElement(ListItemText, {\n    primary: 'Reset app state',\n    secondary: 'Might resolve a temporary glitch.'\n  })), React.createElement(ListItem, {\n    button: true,\n    className: classes.nuclear,\n    onClick: function onClick() {\n      return setDeleteOpen({\n        action: globalActions.resetApp,\n        title: 'RESET ALL LOCAL DATA',\n        message: 'All local images and data will be reset and you will be logged out. BE VERY SURE ABOUT THIS'\n      });\n    }\n  }, React.createElement(ListItemIcon, {\n    color: \"inherit\"\n  }, React.createElement(WarningIcon, {\n    color: \"inherit\"\n  })), React.createElement(ListItemText, {\n    primary: 'RESET ALL LOCAL DATA',\n    secondary: 'All local images and data will be reset and you will be logged out'\n  })))), deleteOpen && React.createElement(DeleteDialog, {\n    open: !!deleteOpen,\n    title: deleteOpen && deleteOpen.title,\n    message: deleteOpen && deleteOpen.message,\n    onConfirm: function onConfirm(confirmed) {\n      if (confirmed) deleteOpen.action();\n      setDeleteOpen(null);\n    }\n  }));\n};\n\nAppSettings.propTypes = {\n  onMenuBack: PropTypes.func.isRequired\n};\nexport default AppSettings;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useRef, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Fab from '@material-ui/core/Fab';\nimport Modal from '@material-ui/core/Modal';\nimport Zoom from '@material-ui/core/Zoom';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport AddCameraIcon from '@material-ui/icons/AddAPhoto';\nimport AddIcon from '@material-ui/icons/Add';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppContext } from '@morphoto/client-common';\nvar useStyles = makeStyles(function (theme) {\n  var pulseCol = fade(theme.palette.secondary.light, 0.4);\n  return {\n    root: {},\n    fab: {\n      background: theme.palette.secondary.main,\n      color: theme.palette.secondary.contrastText,\n      '&::before': {\n        content: '\"  \"',\n        display: 'block',\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        borderRadius: 'inherit',\n        boxShadow: \"0 0 0 0 \".concat(pulseCol),\n        animation: '$fabPulse 4s',\n        animationIterationCount: 5,\n        animationTimingFunction: 'linear'\n      }\n    },\n    '@keyframes fabPulse': {\n      '0%': {\n        boxShadow: \"0 0 0 0px \".concat(pulseCol)\n      },\n      '90%': {\n        boxShadow: \"0 0 0 0px \".concat(pulseCol)\n      },\n      '100%': {\n        boxShadow: \"0 0 0 10px transparent\"\n      }\n    },\n    directionUp: {},\n    actionsClosed: {\n      display: 'none'\n    },\n    modalContainer: {\n      position: 'absolute',\n      bottom: '0%',\n      left: '50%',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    subFabContainer: {\n      padding: theme.spacing(2)\n    },\n    subFab: {},\n    subFabIcon: {\n      margin: theme.spacing(1)\n    }\n  };\n});\n\nvar AddFab = function AddFab(_ref) {\n  var className = _ref.className,\n      children = _ref.children,\n      onCameraClick = _ref.onCameraClick,\n      onLibraryClick = _ref.onLibraryClick;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      down = _useState4[0],\n      setDown = _useState4[1];\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device,\n      other = _objectWithoutProperties(_useContext, [\"device\"]);\n\n  var timerRef = useRef();\n  var classes = useStyles();\n  var downRef = useRef(down);\n  var elRef = useRef();\n  downRef.current = down;\n  var realChildren = children || (device.cameraAccess ? React.createElement(AddIcon, null) : React.createElement(PhotoLibraryIcon, null));\n  useEffect(function () {\n    return function () {\n      timerRef.current = null;\n      downRef.current = null;\n    };\n  }, []);\n\n  var startTimer = function startTimer(el) {\n    if (device.ios) return;\n    if (!elRef.current) return;\n    setDown(true);\n\n    if (!open && !timerRef.current) {\n      timerRef.current = setTimeout(function () {\n        if (downRef.current) setOpen(true);\n        timerRef.current = null;\n      }, 300);\n    }\n  };\n\n  var onDown = function onDown(e) {\n    startTimer(e.currentTarget);\n  };\n\n  var block = function block(e) {\n    if (e && e.stopPropagation) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  };\n\n  var cameraAction = function cameraAction(e) {\n    setOpen(false);\n    setDown(false);\n    onCameraClick();\n    block(e);\n  };\n\n  var libraryAction = function libraryAction(e) {\n    setOpen(false);\n    setDown(false);\n    onLibraryClick();\n    block(e);\n  };\n\n  return React.createElement(\"div\", {\n    className: classNames(classes.rootContainer, className),\n    ref: elRef\n  }, React.createElement(Fab, {\n    className: classes.fab,\n    onMouseDown: onDown,\n    onTouchStart: onDown,\n    onClick: function onClick(e) {\n      block(e);\n      setDown(false);\n\n      if (!open) {\n        if (device.cameraAccess) onCameraClick();else onLibraryClick();\n      }\n    },\n    disableFocusRipple: true,\n    disableTouchRipple: true,\n    disableRipple: true,\n    size: \"large\",\n    color: \"secondary\",\n    \"aria-label\": \"Add\"\n  }, realChildren), React.createElement(Modal, {\n    \"aria-labelledby\": \"simple-modal-title\",\n    \"aria-describedby\": \"simple-modal-description\",\n    open: open,\n    onClose: function onClose() {\n      return setOpen(false);\n    }\n  }, React.createElement(\"div\", {\n    className: classes.modalContainer\n  }, React.createElement(Zoom, {\n    in: open,\n    timeout: 500,\n    unmountOnExit: true\n  }, React.createElement(\"div\", {\n    className: classes.subFabContainer\n  }, React.createElement(Fab, {\n    className: classes.subFab,\n    disableFocusRipple: true,\n    variant: \"extended\",\n    size: \"large\",\n    color: \"secondary\",\n    \"aria-label\": \"Add\",\n    onClick: function onClick() {\n      setOpen(false);\n      libraryAction();\n    }\n  }, React.createElement(PhotoLibraryIcon, {\n    color: \"inherit\",\n    className: classes.subFabIcon\n  }), \"Library\"))), React.createElement(Zoom, {\n    in: open,\n    timeout: 250,\n    unmountOnExit: true\n  }, React.createElement(\"div\", {\n    className: classes.subFabContainer\n  }, React.createElement(Fab, {\n    className: classes.subFab,\n    disableFocusRipple: true,\n    variant: \"extended\",\n    size: \"large\",\n    disabled: !device.cameraAccess,\n    color: \"secondary\",\n    \"aria-label\": \"Add\",\n    onClick: function onClick() {\n      setOpen(false);\n      cameraAction();\n    }\n  }, React.createElement(AddCameraIcon, {\n    color: \"inherit\",\n    className: classes.subFabIcon\n  }), \"Camera\"))))));\n};\n\nAddFab.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.any,\n  onCameraClick: PropTypes.func.isRequired,\n  onLibraryClick: PropTypes.func.isRequired\n};\nexport default AddFab;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Divider from '@material-ui/core/Divider';\n\nvar ContextMenu = function ContextMenu(_ref) {\n  var anchorEl = _ref.anchorEl,\n      onClose = _ref.onClose,\n      menuItems = _ref.menuItems;\n  return React.createElement(Menu, {\n    anchorEl: anchorEl,\n    open: !!anchorEl,\n    onClose: onClose\n  }, menuItems.map(function (_ref2, idx) {\n    var icon = _ref2.icon,\n        color = _ref2.color,\n        text = _ref2.text,\n        hide = _ref2.hide,\n        disabled = _ref2.disabled,\n        action = _ref2.action,\n        divider = _ref2.divider;\n    var Icon = icon || null;\n    if (hide) return null;\n    if (divider) return React.createElement(Divider, {\n      key: \"contextMenu-\".concat(idx)\n    });\n    return React.createElement(MenuItem, {\n      button: true,\n      key: \"contextMenu-\".concat(idx),\n      disabled: disabled,\n      onClick: function onClick() {\n        onClose();\n        action();\n      }\n    }, Icon && React.createElement(ListItemIcon, null, React.createElement(Icon, {\n      color: disabled ? 'disabled' : color\n    })), React.createElement(ListItemText, {\n      primary: text,\n      primaryTypographyProps: {\n        color: color\n      }\n    }));\n  }));\n};\n\nContextMenu.propTypes = {\n  anchorEl: PropTypes.object,\n  onClose: PropTypes.func,\n  menuItems: PropTypes.arrayOf(PropTypes.shape({\n    text: PropTypes.string,\n    icon: PropTypes.any,\n    divider: PropTypes.any,\n    hide: PropTypes.bool,\n    disabled: PropTypes.bool,\n    color: PropTypes.string,\n    action: PropTypes.func\n  }))\n};\nexport default ContextMenu;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport CameraAltIcon from '@material-ui/icons/CameraAlt';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport { useFileInput } from '@morphoto/client-common';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      textAlign: 'center',\n      color: theme.palette.grey[600],\n      border: \"20px solid \".concat(theme.palette.grey[400])\n    },\n    icon: {\n      color: theme.palette.grey[600],\n      margin: 'auto',\n      flex: '1 1 50%',\n      height: '70%',\n      width: '70%'\n    },\n    button: {\n      margin: theme.spacing(2)\n    }\n  };\n});\n\nvar LibraryFilePicker = function LibraryFilePicker(_ref) {\n  var onLibraryAdd = _ref.onLibraryAdd,\n      onCancel = _ref.onCancel,\n      cameraPicker = _ref.cameraPicker;\n  var classes = useStyles();\n\n  var _useFileInput = useFileInput(onLibraryAdd, cameraPicker),\n      fileClickEl = _useFileInput.fileClickEl,\n      forceClick = _useFileInput.forceClick;\n\n  var cameraWords = 'Library';\n  var PlaceIcon = PhotoLibraryIcon;\n\n  if (cameraPicker) {\n    cameraWords = 'Camera';\n    PlaceIcon = CameraAltIcon;\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, fileClickEl, React.createElement(PlaceIcon, {\n    className: classes.icon,\n    color: \"inherit\",\n    onClick: forceClick\n  }), React.createElement(Button, {\n    variant: \"contained\",\n    className: classes.button,\n    color: \"primary\",\n    onClick: forceClick\n  }, \"Import from \", cameraWords), React.createElement(Button, {\n    variant: \"outlined\",\n    className: classes.button,\n    color: \"secondary\",\n    onClick: onCancel\n  }, \"Cancel\"));\n};\n\nLibraryFilePicker.propTypes = {\n  onLibraryAdd: PropTypes.func.isRequired,\n  cameraPicker: PropTypes.bool,\n  onCancel: PropTypes.func.isRequired\n};\nexport default LibraryFilePicker;","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      position: 'relative',\n      display: 'block',\n      overflow: 'hidden',\n      whiteSpace: 'pre-line',\n      '&::before': {\n        content: '\"  \"',\n        display: 'block',\n        position: 'absolute',\n        bottom: 0,\n        width: '100%',\n        height: 100,\n        background: \"linear-gradient(180deg, rgba(255,255,255,0) 0%, \".concat(theme.palette.background.paper, \" 100%)\")\n      },\n      placeholder: {\n        color: theme.palette.text.secondary\n      }\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar ShortLongText = function ShortLongText(_ref) {\n  var label = _ref.label,\n      text = _ref.text,\n      height = _ref.height,\n      onClick = _ref.onClick,\n      placeholder = _ref.placeholder;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    onClick: onClick\n  }, label && React.createElement(FormLabel, {\n    className: classes.formLabel\n  }, label), !text && React.createElement(Typography, {\n    component: \"div\",\n    variant: \"caption\",\n    color: \"inherit\",\n    style: {\n      height: height\n    },\n    className: classNames(classes.placeholder)\n  }, placeholder || 'none'), text && React.createElement(Typography, {\n    component: \"div\",\n    variant: \"body1\",\n    color: \"inherit\",\n    style: {\n      height: height\n    },\n    className: classNames(classes.root)\n  }, text));\n};\n\nShortLongText.propTypes = {\n  label: PropTypes.string,\n  text: PropTypes.string,\n  placeholder: PropTypes.string,\n  height: PropTypes.number,\n  onClick: PropTypes.func\n};\nShortLongText.defaultProps = {\n  height: 100\n};\nexport default ShortLongText;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport AddCameraIcon from '@material-ui/icons/AddAPhoto';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar useNewImageMenu = function useNewImageMenu(cameraClick, libraryClick) {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      menuEl = _useState2[0],\n      setMenuEl = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      series = _useState4[0],\n      setSeries = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      down = _useState6[0],\n      setDown = _useState6[1];\n\n  var downRef = useRef(down);\n  downRef.current = down;\n\n  var startTimer = function startTimer(el) {\n    setDown(true);\n    setTimeout(function () {\n      if (downRef && downRef.current) setMenuEl(el);\n    }, 300);\n  };\n\n  var onDownThunk = function onDownThunk(series) {\n    return function (e) {\n      setSeries(series);\n      startTimer(e.currentTarget);\n    };\n  };\n\n  var onUpThunk = function onUpThunk(series) {\n    return function (e) {\n      setSeries(series);\n      setDown(false);\n      cameraClick(series);\n    };\n  };\n\n  var onCamera = function onCamera(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    cameraClick(series);\n    setMenuEl(null);\n  };\n\n  var onLibrary = function onLibrary(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    libraryClick(series);\n    setMenuEl(null);\n  };\n\n  var onClose = function onClose(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    setMenuEl(null);\n  };\n\n  var onBlock = function onBlock(e) {\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  return {\n    onDownThunk: onDownThunk,\n    onUpThunk: onUpThunk,\n    onBlock: onBlock,\n    menu: React.createElement(CameraPopup, {\n      menuEl: menuEl,\n      onCamera: onCamera,\n      onLibrary: onLibrary,\n      onClose: onClose\n    })\n  };\n};\n\nexport default useNewImageMenu;\n\nvar CameraPopupUnstyled = function CameraPopupUnstyled(_ref) {\n  var menuEl = _ref.menuEl,\n      onCamera = _ref.onCamera,\n      onLibrary = _ref.onLibrary,\n      onClose = _ref.onClose;\n  var classes = useStyles();\n  return React.createElement(Menu, {\n    id: \"simple-menu\",\n    anchorEl: menuEl,\n    open: Boolean(menuEl),\n    className: classes.root,\n    onClose: onClose\n  }, React.createElement(MenuItem, {\n    onMouseUp: onCamera,\n    onTouchEnd: onCamera\n  }, React.createElement(AddCameraIcon, null), \"Add from camera\"), React.createElement(MenuItem, {\n    onMouseUp: onLibrary,\n    onTouchEnd: onLibrary\n  }, React.createElement(PhotoLibraryIcon, null), \" Add from Library\"));\n};\n\nCameraPopupUnstyled.propTypes = {\n  menuEl: PropTypes.object,\n  onCamera: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onLibrary: PropTypes.func.isRequired\n};\n\nvar style = function style(theme) {\n  return {\n    root: {}\n  };\n};\n\nvar useStyles = makeStyles(style);\nexport var CameraPopup = CameraPopupUnstyled;","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Paper from '@material-ui/core/Paper';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    bar: {\n      height: theme.spacing(2)\n    },\n    message: {},\n    msgText: {\n      color: theme.palette.jet ? theme.palette.jet.main : 'inherit',\n      zIndex: 3,\n      position: 'absolute',\n      display: 'flex',\n      width: '100%'\n    },\n    spacer: {\n      flexGrow: 1\n    },\n    messageInner: {}\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar UploadControlUnstyled = function UploadControlUnstyled(_ref) {\n  var className = _ref.className,\n      text = _ref.text,\n      progress = _ref.progress;\n  var classes = useStyles();\n  var finalProgress = progress > 0 ? progress : 0;\n  if (!text) return null;\n  var message = \"Uploading: \".concat(text);\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(\"div\", {\n    className: classes.messageInner\n  }, React.createElement(\"div\", {\n    className: classNames(classes.msgText, finalProgress > 50)\n  }, React.createElement(Typography, {\n    color: \"inherit\",\n    variant: \"caption\"\n  }, message), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(Typography, {\n    color: \"inherit\",\n    variant: \"caption\"\n  }, finalProgress, \"%\")), React.createElement(LinearProgress, {\n    className: classes.bar,\n    color: \"primary\",\n    variant: \"determinate\",\n    value: finalProgress\n  })));\n};\n\nUploadControlUnstyled.propTypes = {\n  className: PropTypes.string,\n  text: PropTypes.string,\n  progress: PropTypes.number\n};\nvar UploadControl = UploadControlUnstyled;\nexport default UploadControl;\nexport var UploadControlCOSMOSWrapper = function UploadControlCOSMOSWrapper(_ref2) {\n  var text = _ref2.text,\n      progress = _ref2.progress;\n  var classes = useWrapperStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(Paper, {\n    className: classes.paper\n  }, React.createElement(Typography, {\n    variant: \"h5\"\n  }, \"This is a dummy component.\")), React.createElement(UploadControl, {\n    text: text,\n    progress: progress\n  }));\n};\nUploadControlCOSMOSWrapper.propTypes = {\n  text: PropTypes.string,\n  progress: PropTypes.number\n};\n\nvar wrapperStyle = function wrapperStyle(theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    paper: {\n      flexGrow: 1\n    }\n  };\n};\n\nvar useWrapperStyles = makeStyles(wrapperStyle);\nUploadControlCOSMOSWrapper.displayName = UploadControl.displayName;\nexport var UploadControlTest = UploadControlCOSMOSWrapper;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { TextField, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { dates } from '@morphoto/common';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    rootEdit: {},\n    formControl: {\n      width: '100%'\n    },\n    textBody: {\n      whiteSpace: 'pre-line'\n    },\n    actionButtons: {\n      textAlign: 'right'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar DateControl = function DateControl(_ref) {\n  var label = _ref.label,\n      value = _ref.value,\n      hint = _ref.hint,\n      _onChange = _ref.onChange,\n      className = _ref.className;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    variant: \"overline\",\n    className: classes.fieldTitle\n  }, label), React.createElement(TextField, {\n    type: \"datetime-local\",\n    fullWidth: true,\n    value: dates.timestampToHTML5Input(value),\n    className: classes.textField,\n    onChange: function onChange(e) {\n      return _onChange(dates.HTML5InputToTimestamp(e.target.value));\n    }\n  }), hint && React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.hint\n  }, hint));\n};\n\nDateControl.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  hint: PropTypes.string,\n  value: PropTypes.string,\n  onChange: PropTypes.func.isRequired\n};\nexport default DateControl;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { dates } from '@morphoto/common';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    rootEdit: {},\n    formControl: {\n      width: '100%'\n    },\n    textBody: {\n      whiteSpace: 'pre-line'\n    },\n    actionButtons: {\n      textAlign: 'right'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar DateView = function DateView(_ref) {\n  var label = _ref.label,\n      value = _ref.value,\n      className = _ref.className;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    variant: \"overline\",\n    className: classes.fieldTitle\n  }, label), React.createElement(Typography, {\n    variant: \"body1\",\n    className: classes.hint\n  }, value ? dates.formatDate(value) : ''));\n};\n\nDateView.propTypes = {\n  className: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string\n};\nexport default DateView;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport { ThemeProvider } from '@material-ui/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport TextField from '@material-ui/core/TextField';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport BugReportIcon from '@material-ui/icons/BugReport';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppContext } from '@morphoto/client-common';\nimport themes from '@morphoto/themes';\nexport var ERROR_SEND_STATES = {\n  UNSENT: 'UNSENT',\n  SENDING: 'SENDING',\n  SENT: 'SENT',\n  ERROR: 'ERROR'\n};\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      overflow: 'hidden',\n      padding: theme.spacing(1),\n      display: 'flex',\n      flexDirection: 'column',\n      textAlign: 'center',\n      color: theme.palette.text.primary,\n      border: \"20px solid \".concat(theme.palette.text.secondary)\n    },\n    button: {},\n    icon: {\n      opacity: 0.5,\n      margin: 'auto',\n      flex: '0 1 10%',\n      width: '50%'\n    },\n    text: {},\n    spacer: {\n      flexGrow: 1\n    },\n    stack: {\n      padding: theme.spacing(2),\n      marginBottom: theme.spacing(2),\n      fontSize: '8px',\n      flexGrow: 1,\n      textAlign: 'left',\n      whiteSpace: 'pre-wrap',\n      overflow: 'scroll',\n      color: theme.palette.error.main,\n      fontFamily: 'Consolas, monaco, monospace'\n    }\n  };\n});\n\nvar ErrorScreen = function ErrorScreen(_ref) {\n  var error = _ref.error,\n      sendState = _ref.sendState,\n      reportError = _ref.reportError;\n  var classes = useStyles();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      dlgOpen = _useState2[0],\n      setDialogOpen = _useState2[1];\n\n  var _useContext = useContext(AppContext),\n      globalActions = _useContext.globalActions;\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      note = _useState4[0],\n      setNote = _useState4[1];\n\n  console.log('ERRORCOJNTEXT', {\n    reportError: reportError\n  });\n  var stackEl = React.createElement(\"div\", {\n    className: classes.spacer\n  });\n\n  try {\n    if (process.env.NODE_ENV === 'development') {\n      stackEl = React.createElement(Typography, {\n        className: classes.stack\n      }, error.stack);\n    }\n  } catch (e) {}\n\n  var buttonText = 'Report this bug';\n  var disabled = false;\n  var color = 'primary';\n\n  switch (sendState) {\n    case ERROR_SEND_STATES.UNSENT:\n      buttonText = 'Report this bug';\n      break;\n\n    case ERROR_SEND_STATES.SENDING:\n      disabled = true;\n      color = 'default';\n      buttonText = 'Sending...';\n      break;\n\n    case ERROR_SEND_STATES.SENT:\n      color = 'default';\n      disabled = true;\n      buttonText = 'Thank you for your feedback';\n      break;\n\n    case ERROR_SEND_STATES.ERROR:\n      color = 'secondary';\n      disabled = true;\n      buttonText = 'ERROR SENDING BUG REPORT';\n      break;\n\n    default:\n      break;\n  }\n\n  return React.createElement(ThemeProvider, {\n    theme: themes.home\n  }, React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(ErrorIcon, {\n    className: classes.icon,\n    color: \"error\"\n  }), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    className: classes.text,\n    color: \"inherit\"\n  }, \"Something went wrong\"), error && error.message && React.createElement(Typography, {\n    variant: \"body1\",\n    className: classes.text,\n    color: \"inherit\"\n  }, error.message), React.createElement(Button, {\n    className: classes.button,\n    variant: \"contained\",\n    disabled: disabled,\n    color: color,\n    onClick: function onClick() {\n      return setDialogOpen(true);\n    }\n  }, React.createElement(BugReportIcon, null), buttonText), stackEl, React.createElement(Button, {\n    className: classes.button,\n    variant: \"contained\",\n    color: \"secondary\",\n    onClick: globalActions.resetApp\n  }, React.createElement(DeleteIcon, null), \"RESET APP\"), React.createElement(Typography, {\n    variant: \"caption\",\n    color: \"inherit\"\n  }, \"Unfortunately you will lose any data (and Photos) that haven't already been uploaded\"), React.createElement(Dialog, {\n    open: dlgOpen,\n    fullScreen: true,\n    onClose: function onClose() {\n      return setDialogOpen(false);\n    },\n    \"aria-labelledby\": \"form-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"form-dialog-title\"\n  }, \"Report a bug\"), React.createElement(DialogContent, null, React.createElement(DialogContentText, null, \"What were you trying to do when the error happened? (optional)\"), React.createElement(TextField, {\n    autoFocus: true,\n    margin: \"dense\",\n    multiline: true,\n    onChange: function onChange(e) {\n      return setNote(e.target.value);\n    },\n    rows: \"3\",\n    rowsMax: \"6\",\n    id: \"note\",\n    placeholder: \"I tried to X and then Y happened...\",\n    label: \"My report\",\n    fullWidth: true\n  })), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return setDialogOpen(false);\n    },\n    color: \"primary\"\n  }, \"Cancel\"), React.createElement(Button, {\n    onClick: function onClick() {\n      reportError(note);\n      setDialogOpen(false);\n    },\n    color: \"primary\"\n  }, \"Send\")))));\n};\n\nErrorScreen.propTypes = {\n  error: PropTypes.object,\n  sendState: PropTypes.string,\n  reportError: PropTypes.func.isRequired\n};\nexport default ErrorScreen;","export { default as FindOnMapButton } from './FindOnMapButton';\nexport { default as AboutApp } from './AboutApp';\nexport { default as AppSettings } from './AppSettings';\nexport { default as AddFab } from './AddFab';\nexport { default as ContextMenu } from './ContextMenu';\nexport { default as LibraryFilePicker } from './LibraryFilePicker';\nexport { default as ShortLongText } from './ShortLongText';\nexport { default as useNewImageMenu } from './useNewImageMenu';\nexport { default as UploadControl } from './UploadControl';\nexport { default as DateControl } from './DateControl';\nexport { default as DateView } from './DateView';\nexport { default as ErrorScreen, ERROR_SEND_STATES } from './ErrorScreen';","import _taggedTemplateLiteral from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\nfragment userFragment on User {\\n  id\\n  username\\n  gravatar\\n  watching\\n  gravatarProfile\\n  meta\\n  createdOn\\n  updatedOn\\n  __typename\\n}\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\nfragment photoFragment on Photo {\\n  id\\n  meta\\n  createdOn\\n  takenOn\\n  updatedOn\\n  coords\\n  note\\n  seriesId\\n  seriesCreatedBy\\n  createdBy\\n  updatedBy\\n  uploadToken\\n  createdUser {\\n    ...userSummaryFragment\\n  }\\n  updatedUser {\\n    ...userSummaryFragment\\n  }\\n  tags {\\n    label\\n    typeId\\n    coords {\\n      x\\n      y\\n      __typename\\n    }\\n    __typename\\n  }\\n  paths {\\n    base\\n    large\\n    thumb\\n    medium\\n    __typename\\n  }\\n  __typename\\n}\\n\", \"\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\nfragment seriesFragment on Series {\\n  id\\n  name\\n  access\\n  note\\n  meta\\n  watchers\\n  seriesStatus\\n  createdOn\\n  updatedOn\\n  createdUser {\\n    ...userSummaryFragment\\n  }\\n  updatedUser {\\n    ...userSummaryFragment\\n  }\\n  coords\\n  direction\\n  photoCount\\n  featured {\\n    ...photoSummaryFragment\\n  }\\n  latest {\\n    ...photoSummaryFragment\\n  }\\n  __typename\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\nfragment seriesSummaryFragment on SeriesSummary {\\n  id\\n  name\\n  access\\n  createdUser {\\n    ...userSummaryFragment\\n  }\\n  seriesStatus\\n  updatedOn\\n  createdOn\\n  photoCount\\n  coords\\n  direction\\n  watchers\\n  featured {\\n    ...photoSummaryFragment\\n  }\\n  latest {\\n    ...photoSummaryFragment\\n  }\\n  __typename\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\nfragment userSummaryFragment on UserSummary {\\n  id\\n  gravatar\\n  gravatarProfile\\n  username\\n  __typename\\n}\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\nfragment photoSummaryFragment on PhotoSummary {\\n  id\\n  takenOn\\n  seriesCreatedBy\\n  updatedOn\\n  createdOn\\n  seriesId\\n  createdUser {\\n    ...userSummaryFragment\\n  }\\n  paths {\\n    base\\n    thumb\\n    medium\\n    large\\n    __typename\\n  }\\n  __typename\\n}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport gql from 'graphql-tag';\nexport var photoSummaryFragment = gql(_templateObject());\nexport var photoSummaryKeys = ['id', 'takenOn', 'seriesCreatedBy', 'updatedOn', 'createdOn', 'seriesId', 'createdUser', 'paths'];\nexport var userSummaryFragment = gql(_templateObject2());\nexport var userSummaryKeys = ['id', 'gravatar', 'gravatarProfile', 'username'];\nexport var seriesSummaryFragment = gql(_templateObject3(), photoSummaryFragment, userSummaryFragment);\nexport var seriesSummaryKeys = ['id', 'name', 'access', 'createdUser', 'seriesStatus', 'updatedOn', 'createdOn', 'photoCount', 'coords', 'direction', 'watchers', 'featured', 'latest'];\nexport var seriesFragment = gql(_templateObject4(), photoSummaryFragment, userSummaryFragment);\nexport var seriesKeys = ['id', 'name', 'access', 'note', 'meta', 'watchers', 'seriesStatus', 'createdOn', 'updatedOn', 'createdUser', 'updatedUser', 'coords', 'direction', 'photoCount', 'featured', 'latest'];\nexport var photoFragment = gql(_templateObject5(), userSummaryFragment);\nexport var photoKeys = ['id', 'meta', 'createdOn', 'takenOn', 'updatedOn', 'note', 'coords', 'seriesId', 'seriesCreatedBy', 'createdBy', 'updatedBy', 'uploadToken', 'createdUser', 'updatedUser', 'tags', 'paths'];\nexport var userFragment = gql(_templateObject6());\nexport var userKeys = ['id', 'username', 'gravatar', 'watching', 'gravatarProfile', 'meta', 'createdOn', 'updatedOn'];","import _taggedTemplateLiteral from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n        fragment watchers on SeriesSummary {\\n          watchers\\n        }\\n      \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { getWholeSeries, allSeries, userSeries, getMyFeed, getUser } from '../queries';\nimport { seriesKeys, seriesSummaryKeys, photoSummaryKeys, seriesSummaryFragment } from '../fragments';\nimport gql from 'graphql-tag';\nimport _ from 'lodash';\nexport var getWholeSeriesUpdate = function getWholeSeriesUpdate(store, series) {\n  var variables = {\n    id: series.id\n  };\n  var query = getWholeSeries;\n  var newData = {\n    series: {}\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query,\n      variables: variables\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {}\n\n  try {\n    newData.series = _objectSpread({}, newData.series, {}, series);\n    store.writeQuery({\n      query: query,\n      variables: variables,\n      data: newData\n    });\n    console.log('updateQueries::getWholeSeriesUpdate DONE');\n  } catch (e) {\n    console.error('updateQueries::getWholeSeriesUpdate writeQuery failed', {\n      newData: newData,\n      series: series\n    });\n    console.error('updateQueries::getWholeSeriesUpdate', e);\n  }\n};\nexport var getWholeSeriesPhotoUpdate = function getWholeSeriesPhotoUpdate(store, photo) {\n  var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var variables = {\n    id: photo.seriesId\n  };\n  var query = getWholeSeries;\n\n  try {\n    var qVal = store.readQuery({\n      query: query,\n      variables: variables\n    });\n\n    var newData = _.cloneDeep(qVal);\n\n    if (remove) {\n      newData.series.photos = newData.series.photos.filter(function (ph) {\n        return ph.id !== photo.id;\n      });\n    } else {\n      var idx = newData.series.photos.findIndex(function (ph) {\n        return ph.id === photo.id;\n      });\n\n      if (idx > -1) {\n        newData.series.photos = _toConsumableArray(newData.series.photos);\n        newData.series.photos[idx] = photo;\n      } else {\n        newData.series.photos = [].concat(_toConsumableArray(newData.series.photos), [photo]);\n      }\n    }\n\n    store.writeQuery({\n      query: query,\n      variables: variables,\n      data: newData\n    });\n    console.log('updateQueries::getWholeSeriesPhotoUpdate DONE');\n  } catch (e) {\n    console.error('updateQueries::getWholeSeriesPhotoUpdate WriteQuery failed', {\n      photo: photo,\n      remove: remove\n    });\n    console.error('updateQueries::getWholeSeriesPhotoUpdate', e);\n  }\n};\n\nfunction updateSeriesSummaries(origArr, series) {\n  var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var newArr = [];\n\n  if (remove) {\n    newArr = origArr.filter(function (s) {\n      return s.id !== series.id;\n    });\n  } else {\n    var seriesIndex = origArr.findIndex(function (s) {\n      return s.id === series.id;\n    });\n\n    var newAllSeriesEntry = _objectSpread({}, _.pick(series, seriesKeys), {\n      seriesStatus: null,\n      __typename: 'SeriesSummary'\n    });\n\n    if (seriesIndex > -1) {\n      newArr = origArr.map(function (s) {\n        return s.id === series.id ? newAllSeriesEntry : s;\n      });\n    } else {\n      newArr = [].concat(_toConsumableArray(newArr), [newAllSeriesEntry]);\n    }\n  }\n\n  console.log('updateQueries::updateSeriesSummaries HELPER', {\n    origArr: origArr,\n    series: series,\n    newArr: newArr,\n    remove: remove\n  });\n  return newArr;\n}\n\nfunction updateFeedList(origArr, series, photo) {\n  var remove = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var newArr = [];\n\n  if (remove) {\n    newArr = origArr.filter(function (fItem) {\n      if (photo) {\n        return fItem.photo.id !== photo.id;\n      } else {\n        return fItem.series.id === series.id;\n      }\n    });\n  } else {\n    var idx = origArr.findIndex(function (fitem) {\n      return fitem._id === photo.id;\n    });\n\n    var newSeriesSummary = _.pick(series, seriesSummaryKeys);\n\n    newSeriesSummary.__typename = 'SeriesSummary';\n\n    var newPhotoSummary = _.pick(photo, photoSummaryKeys);\n\n    newPhotoSummary.__typename = 'PhotoSummary';\n\n    if (idx > -1) {\n      newArr = _toConsumableArray(origArr);\n      newArr[idx].photo = newPhotoSummary;\n    } else {\n      newArr = [].concat(_toConsumableArray(origArr), [{\n        _id: newPhotoSummary.id,\n        series: newSeriesSummary,\n        photo: newPhotoSummary,\n        relation: 'OWNED',\n        __typename: 'MyFeedResultItem'\n      }]);\n    }\n  }\n\n  console.log('updateQueries::updateFeedList HELPER', {\n    origArr: origArr,\n    series: series,\n    photo: photo,\n    newArr: newArr\n  });\n  return newArr;\n}\n\nexport var allSeriesUpdate = function allSeriesUpdate(store, series) {\n  var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var variables = {\n    limit: 100\n  };\n  var query = allSeries;\n  var newData = {\n    allSeries: {\n      seriesSummaries: [],\n      nextToken: null,\n      __typename: 'PaginatedSeries'\n    }\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query,\n      variables: variables\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {\n    if (series) {\n      var newSeriesSummary = _.pick(series, seriesSummaryKeys);\n\n      newSeriesSummary.__typename = 'SeriesSummary';\n      newData.allSeries.seriesSummaries = [newSeriesSummary];\n    } else return;\n  }\n\n  try {\n    newData.allSeries.seriesSummaries = updateSeriesSummaries(newData.allSeries.seriesSummaries, series, remove);\n    store.writeQuery({\n      query: query,\n      variables: variables,\n      data: newData\n    });\n    console.log('updateQueries::allSeriesUpdate DONE');\n  } catch (e) {\n    console.error('updateQueries::allSeriesUpdate writeQuery failed', {\n      series: series,\n      remove: remove,\n      newData: newData\n    });\n    console.error('updateQueries::allSeriesUpdate', e);\n  }\n};\nexport var allSeriesPhotoUpdate = function allSeriesPhotoUpdate(store, series, photo) {\n  var remove = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var query = allSeries;\n  var newData = {\n    allSeries: {\n      seriesSummaries: [],\n      nextToken: null,\n      __typename: 'PaginatedSeries'\n    }\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query,\n      variables: {\n        limit: 100\n      }\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {\n    if (series) {\n      var newSeriesSummary = _.pick(series, seriesSummaryKeys);\n\n      newSeriesSummary.__typename = 'SeriesSummary';\n      newData.allSeries.seriesSummaries = [newSeriesSummary];\n    } else return;\n  }\n\n  try {\n    newData.allSeries.seriesSummaries = newData.allSeries.seriesSummaries.map(function (s) {\n      if (s.id !== photo.seriesId) return s;else {\n        var newS = _.cloneDeep(s);\n\n        var photoIndex = series.photos.findIndex(function (ph) {\n          return ph.id === photo.id;\n        });\n\n        if (remove && series) {\n          if (newS.latest.id === photo.id) {\n            newS.latest = series.photos[series.photos.length - 1];\n          }\n\n          if (newS.featured.id === photo.id) {\n            newS.featured = series.photos[series.photos.length - 1];\n          }\n\n          newS.photoCount -= 1;\n        } else if (photoIndex === -1) {\n          var photoSummary = _.pick(photo, photoSummaryKeys);\n\n          photoSummary.__typename = 'PhotoSummary';\n          newS.latest = photoSummary;\n          newS.photoCount += 1;\n        } else {}\n\n        return newS;\n      }\n    });\n    store.writeQuery({\n      query: query,\n      data: newData\n    });\n    console.log('updateQueries::allSeriesPhotoUpdate DONE');\n  } catch (e) {\n    console.error('updateQueries::createPhotoMutation:: allSeries read or write ERROR', {\n      series: series,\n      photo: photo,\n      remove: remove\n    });\n    console.error('updateQueries::createPhotoMutation', e);\n  }\n};\nexport var userSeriesUpdate = function userSeriesUpdate(store, series) {\n  var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var query = userSeries;\n  var newData = {\n    userSeries: {\n      seriesSummaries: [],\n      nextToken: null,\n      __typename: 'PaginatedSeries'\n    }\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {}\n\n  try {\n    newData.userSeries.seriesSummaries = updateSeriesSummaries(newData.userSeries.seriesSummaries, series, remove);\n    store.writeQuery({\n      query: query,\n      data: newData\n    });\n    console.log('updateQueries::userSeriesUpdate DONE');\n  } catch (e) {\n    console.error('updateQueries::userSeriesUpdate writeQuery failed', {\n      series: series,\n      remove: remove,\n      newData: newData\n    });\n    console.error('updateQueries::userSeriesUpdate', e);\n  }\n};\nexport var feedUpdate = function feedUpdate(store, series, photo) {\n  var remove = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var query = getMyFeed;\n  var newData = {\n    myFeed: {\n      feed: [],\n      window: null,\n      __typename: 'PaginatedSeries'\n    }\n  };\n\n  try {\n    var qVal = store.readQuery({\n      query: query\n    });\n    newData = _.cloneDeep(qVal);\n  } catch (e) {}\n\n  try {\n    newData.myFeed.feed = updateFeedList(newData.myFeed.feed, series, photo, remove);\n    store.writeQuery({\n      query: query,\n      data: newData\n    });\n    console.log('updateQueries::feedUpdate DONE');\n  } catch (e) {\n    console.error('updateQueries::feedUpdate writeQuery failed', {\n      series: series,\n      photo: photo,\n      remove: remove,\n      newData: newData\n    });\n    console.error('updateQueries::feedUpdate', e);\n  }\n};\nexport var watchUpdate = function watchUpdate(store, seriesId) {\n  var remove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  try {\n    var seriesFrag = store.readFragment({\n      id: seriesId,\n      fragment: seriesSummaryFragment\n    });\n    console.log('updateQueries::watchUpdate watchers', {\n      seriesFrag: seriesFrag\n    });\n    store.writeFragment({\n      id: '5',\n      fragment: gql(_templateObject()),\n      data: {\n        watchers: seriesFrag.watchers + (remove ? -1 : 1)\n      }\n    });\n  } catch (e) {\n    console.error('updateQueries::watchUpdate counter update failed', {\n      seriesId: seriesId,\n      remove: remove\n    });\n    console.error('updateQueries::watchUpdate', e);\n  }\n\n  var query = getUser;\n\n  try {\n    var qVal = store.readQuery({\n      query: query\n    });\n\n    var newData = _.cloneDeep(qVal);\n\n    if (remove) {\n      newData.user.watching = newData.user.watching.filter(function (sid) {\n        return sid !== seriesId;\n      });\n    } else {\n      newData.user.watching = _toConsumableArray(new Set([].concat(_toConsumableArray(newData.user.watching || []), [seriesId])));\n    }\n\n    store.writeQuery({\n      query: query,\n      data: newData\n    });\n    console.log('updateQueries::watchUpdate DONE', remove ? 'unwatch' : 'watch');\n  } catch (e) {\n    console.error('updateQueries::watchUpdate read/write failed', {\n      seriesId: seriesId,\n      remove: remove\n    });\n    console.error('updateQueries::watchUpdate', e);\n  }\n};","import _taggedTemplateLiteral from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\nmutation reportBug($reportJSON: String!) {\\n  reportBug(reportJSON: $reportJSON)\\n}\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\nmutation unWatch($seriesId: ID) {\\n  unWatchSeries(seriesId: $seriesId)\\n}\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\nmutation watch($seriesId: ID) {\\n  watchSeries(seriesId: $seriesId)\\n}\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\nmutation createSeries($series: NewSeriesInput, $photo: NewPhotoInput!, $ext: String!) {\\n  createSeries(series: $series, photo: $photo, ext: $ext) {\\n    series {\\n      ...seriesFragment\\n      photos {\\n        ...photoFragment\\n      }\\n    }\\n    preAuth\\n    __typename\\n  }\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\nmutation createPhoto($photo: NewPhotoInput!, $ext: String!) {\\n  createPhoto(photo: $photo, ext: $ext) {\\n    photo {\\n      ...photoFragment\\n    }\\n    preAuth\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\nmutation updatePhoto($photo: UpdatePhotoInput!) {\\n  updatePhoto(photo: $photo){\\n    ...photoFragment\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\nmutation updateSeries($series: UpdateSeriesInput!) {\\n  updateSeries(series: $series){\\n    ...seriesFragment\\n  }\\n\\n}\\n\", \"\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\nmutation deleteSeries($id: ID!) {\\n  deleteSeries(id: $id)\\n}\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\nmutation deletePhoto($seriesId: ID!, $photoId: ID!) {\\n  deletePhoto(seriesId: $seriesId, photoId: $photoId)\\n}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport gql from 'graphql-tag';\nimport { photoFragment, seriesFragment } from './fragments';\nexport var deletePhoto = gql(_templateObject());\nexport var deleteSeries = gql(_templateObject2());\nexport var updateSeries = gql(_templateObject3(), seriesFragment);\nexport var updateSeriesKeys = ['id', 'access', 'name', 'note', 'coords', 'direction'];\nexport var updatePhoto = gql(_templateObject4(), photoFragment);\nexport var updatePhotoKeys = ['id', 'seriesId', 'takenOn', 'tags', 'note'];\nexport var createPhoto = gql(_templateObject5(), photoFragment);\nexport var newPhotoKeys = ['seriesId', 'takenOn', 'meta', 'rawData', 'coords', 'tags', 'note', 'uploadToken'];\nexport var createSeries = gql(_templateObject6(), seriesFragment, photoFragment);\nexport var newSeriesKeys = ['access', 'name', 'note', 'coords', 'direction', 'meta'];\nexport var watchSeries = gql(_templateObject7());\nexport var unWatchSeries = gql(_templateObject8());\nexport var reportBug = gql(_templateObject9());","export var Actions = {\n  HOME_CHANGE_STATE: 'HOME_CHANGE_STATE',\n  HOME_CHANGE_ACTIVE_SERIES: 'HOME_CHANGE_ACTIVE_SERIES',\n  HOME_STATE_BACK: 'HOME_STATE_BACK',\n  MAP_HISTORY_POP: 'MAP_HISTORY_POP',\n  MAP_HISTORY_PUSH: 'MAP_HISTORY_PUSH',\n  MAP_HISTORY_CLEAR: 'MAP_HISTORY_CLEAR',\n  UPLOADER_QUEUE: 'UPLOADER_QUEUE',\n  UPLOADER_COMPLETE: 'UPLOADER_COMPLETE',\n  UPLOADER_UPDATE_PROGRESS: 'UPLOADER_UPDATE_PROGRESS',\n  UPLOADER_SET_UPLOADING: 'UPLOADER_SET_UPLOADING',\n  UPLOADER_SET_ONLINE: 'UPLOADER_SET_ONLINE',\n  OFFLINE_VIEWPORT_SAVE: 'OFFLINE_VIEWPORT_SAVE',\n  OFFLINE_SET_STATUS: 'OFFLINE_SET_STATUS',\n  SETFLAG: 'SETFLAG',\n  RESET_ALL_STATE: 'RESET_ALL_STATE'\n};\nexport default {\n  setHomeState: function setHomeState(newDomain, params) {\n    return {\n      type: Actions.HOME_CHANGE_STATE,\n      data: {\n        newDomain: newDomain,\n        params: params\n      }\n    };\n  },\n  homeStateBack: function homeStateBack() {\n    return {\n      type: Actions.HOME_STATE_BACK\n    };\n  },\n  setActiveSeries: function setActiveSeries(activeSeries, initialPhoto) {\n    return {\n      type: Actions.HOME_CHANGE_ACTIVE_SERIES,\n      data: {\n        activeSeries: activeSeries,\n        initialPhoto: initialPhoto\n      }\n    };\n  },\n  setFlag: function setFlag(flagName, flagVal) {\n    return {\n      type: Actions.SETFLAG,\n      data: {\n        flagName: flagName,\n        flagVal: flagVal\n      }\n    };\n  },\n  setOfflineViewport: function setOfflineViewport(viewport) {\n    return {\n      type: Actions.OFFLINE_VIEWPORT_SAVE,\n      data: viewport\n    };\n  },\n  setOfflineCompleted: function setOfflineCompleted(bVal) {\n    return {\n      type: Actions.OFFLINE_SET_STATUS,\n      data: bVal\n    };\n  },\n  popMapHistory: function popMapHistory() {\n    return {\n      type: Actions.MAP_HISTORY_POP\n    };\n  },\n  pushMapHistory: function pushMapHistory(viewportSave) {\n    return {\n      type: Actions.MAP_HISTORY_PUSH,\n      data: viewportSave\n    };\n  },\n  clearMapHistory: function clearMapHistory() {\n    return {\n      type: Actions.MAP_HISTORY_CLEAR\n    };\n  },\n  resetAllState: function resetAllState() {\n    return {\n      type: Actions.RESET_ALL_STATE\n    };\n  },\n  queueUpload: function queueUpload(uploadObj) {\n    return {\n      type: Actions.UPLOADER_QUEUE,\n      data: uploadObj\n    };\n  },\n  setUploaderOnline: function setUploaderOnline(bOnline) {\n    return {\n      type: Actions.UPLOADER_SET_ONLINE,\n      data: bOnline\n    };\n  },\n  updateUploadProgress: function updateUploadProgress(newProgress) {\n    return {\n      type: Actions.UPLOADER_UPDATE_PROGRESS,\n      data: newProgress\n    };\n  }\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Tags = function Tags(tagConfig, tags) {\n  var _this = this;\n\n  _classCallCheck(this, Tags);\n\n  _defineProperty(this, \"findTagByLabel\", function (typeId, tagLabel) {\n    return _this.getTagType(typeId).values.find(function (tt) {\n      return tt.label === tagLabel;\n    });\n  });\n\n  _defineProperty(this, \"getXYTags\", function () {\n    var xyTagLabels = _this.getXYTagTypes().map(function (tt) {\n      return tt.label;\n    });\n\n    return _this.tags.filter(function (tag) {\n      return xyTagLabels.indexOf(tag.typeId) > -1 && tag.coords && tag.coords.x;\n    });\n  });\n\n  _defineProperty(this, \"getNonXYTags\", function () {\n    var NonXYTagLabels = _this.getNonXYTagTypes().map(function (tt) {\n      return tt.label;\n    });\n\n    return _this.tags.filter(function (tag) {\n      return NonXYTagLabels.indexOf(tag.typeId) > -1;\n    });\n  });\n\n  _defineProperty(this, \"createNewTagObj\", function (label, typeId) {\n    return {\n      label: label,\n      typeId: typeId\n    };\n  });\n\n  _defineProperty(this, \"createExistingTagObj\", function (label, typeId) {\n    return _objectSpread({}, _this.findTagByLabel(typeId, label), {\n      typeId: typeId\n    });\n  });\n\n  _defineProperty(this, \"createNewXYTagObj\", function (label, typeId, coords) {\n    return {\n      label: label,\n      typeId: typeId,\n      coords: coords\n    };\n  });\n\n  _defineProperty(this, \"createExistingXYTagObj\", function (label, typeId, coords) {\n    return _objectSpread({}, _this.findTagByLabel(typeId, label), {\n      typeId: typeId,\n      coords: coords\n    });\n  });\n\n  _defineProperty(this, \"getTagType\", function (typeId) {\n    return _this.tagConfig.find(function (tt) {\n      return tt.id === typeId;\n    });\n  });\n\n  _defineProperty(this, \"getTagTypeIndex\", function (typeId) {\n    return _this.tagConfig.findIndex(function (tt) {\n      return tt.id === typeId;\n    });\n  });\n\n  _defineProperty(this, \"getXYTagTypes\", function () {\n    return _this.tagConfig.filter(function (tt) {\n      return tt.allowXY;\n    });\n  });\n\n  _defineProperty(this, \"getNonXYTagTypes\", function () {\n    return _this.tagConfig.filter(function (tt) {\n      return tt.allowNonXY;\n    });\n  });\n\n  _defineProperty(this, \"getRelXYTags\", function (multiplier) {\n    return _this.getXYTags().map(function (tag) {\n      return _objectSpread({}, tag, {\n        group: _this.getTagTypeIndex(tag.typeId),\n        relCoords: {\n          x: tag.coords.x * multiplier,\n          y: tag.coords.y * multiplier\n        }\n      });\n    });\n  });\n\n  this.tags = tags;\n  this.tagConfig = tagConfig;\n};\n\nvar _default = Tags;\nexports[\"default\"] = _default;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getExif = void 0;\n\nvar _exifParser = _interopRequireDefault(require(\"exif-parser\"));\n\nvar _common = require(\"@morphoto/common\");\n\nvar _dates = require(\"./dates\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar getExif = function getExif(data) {\n  var exif, exifDateTime, exifGPS, blobParser, find, foundIdx, newData, parser;\n  return _regeneratorRuntime.async(function getExif$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          console.log('onLibraryAdd Buffered', data);\n          exif = null;\n          exifDateTime = null;\n          exifGPS = null;\n\n          if (!(data instanceof Blob)) {\n            _context.next = 14;\n            break;\n          }\n\n          _context.t0 = _exifParser[\"default\"];\n          _context.next = 8;\n          return _regeneratorRuntime.awrap(new Response(data).arrayBuffer());\n\n        case 8:\n          _context.t1 = _context.sent;\n          blobParser = _context.t0.create.call(_context.t0, _context.t1);\n          exif = blobParser.parse();\n          console.log('got EXIF', exif);\n          _context.next = 15;\n          break;\n\n        case 14:\n          try {\n            find = 'base64,';\n            foundIdx = data.indexOf(find) + find.length;\n            newData = data.slice(foundIdx);\n            parser = _exifParser[\"default\"].create(Buffer.from(newData, 'base64'));\n            exif = parser.parse();\n            console.log('got EXIF', exif);\n          } catch (err) {\n            console.log('EXIF ERROR', err);\n          }\n\n        case 15:\n          if (exif && exif.tags) {\n            try {\n              if (exif.tags && exif.tags.DateTimeOriginal && String(exif.tags.DateTimeOriginal)) {\n                exifDateTime = (0, _dates.fixParseDate)(exif.tags.DateTimeOriginal, false);\n              }\n            } catch (err) {\n              console.log('ERROR GETTING TIMESTAMP', {\n                err: err,\n                exif: exif\n              });\n            }\n\n            try {\n              if (exif.tags.GPSLatitude && _common.util.isNumeric(exif.tags.GPSLatitude) && exif.tags.GPSLongitude && _common.util.isNumeric(exif.tags.GPSLongitude)) {\n                exifGPS = [exif.tags.GPSLongitude, exif.tags.GPSLatitude];\n              }\n            } catch (e) {\n              console.error('GPS Longitude and Latitude could not be determined');\n            }\n          }\n\n          return _context.abrupt(\"return\", {\n            exif: exif,\n            exifDateTime: exifDateTime,\n            exifGPS: exifGPS\n          });\n\n        case 17:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nexports.getExif = getExif;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _v = _interopRequireDefault(require(\"uuid/v4\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Series = function Series(metaConfig, series) {\n  var _this = this;\n\n  _classCallCheck(this, Series);\n\n  _defineProperty(this, \"getSeriesMeta\", function () {\n    return Object.keys(_this.metaConfig).filter(function (key) {\n      return _this.metaConfig[key].type === 'SERIES';\n    }).reduce(function (acc, key) {\n      return _objectSpread({}, acc, _defineProperty({}, key, _this.series.meta[key][\"default\"]));\n    }, {});\n  });\n\n  _defineProperty(this, \"setMeta\", function () {\n    _this.series.meta = JSON.stringify(_this.getSeriesMeta());\n  });\n\n  _defineProperty(this, \"newSeries\", function () {\n    return {\n      id: \"L-\".concat((0, _v[\"default\"])()),\n      meta: JSON.stringify(_this.getSeriesMeta()),\n      photos: []\n    };\n  });\n\n  this.metaConfig = metaConfig;\n  if (series) this.series = series;else {\n    this.series = this.newSeries();\n  }\n};\n\nvar _default = Series;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _v = _interopRequireDefault(require(\"uuid/v4\"));\n\nvar _common = require(\"@morphoto/common\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar Photo = function Photo(metaConfig, photo) {\n  var _this = this;\n\n  _classCallCheck(this, Photo);\n\n  _defineProperty(this, \"setMeta\", function () {\n    _this.photo.meta = JSON.stringify(_this.getPhotoMeta());\n  });\n\n  _defineProperty(this, \"getPhotoMeta\", function () {\n    return Object.keys(_this.metaConfig).filter(function (key) {\n      return _this.metaConfig[key].type === 'PHOTO';\n    }).reduce(function (acc, key) {\n      return _objectSpread({}, acc, _defineProperty({}, key, _this.photo.meta[key][\"default\"]));\n    }, {});\n  });\n\n  _defineProperty(this, \"newPhoto\", function () {\n    return {\n      id: \"L-\".concat((0, _v[\"default\"])()),\n      uploadToken: (0, _v[\"default\"])(),\n      takenOn: _common.dates.convertJSDatetoTimestamp(new Date()),\n      meta: JSON.stringify(_this.getPhotoMeta()),\n      tags: []\n    };\n  });\n\n  this.metaConfig = metaConfig;\n  if (photo) this.photo = photo;else {\n    this.photo = this.newPhoto();\n  }\n};\n\nvar _default = Photo;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _accesscontrol = _interopRequireDefault(require(\"accesscontrol\"));\n\nvar _permissions = _interopRequireDefault(require(\"./permissions\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar AccessHelper = function () {\n  function AccessHelper(userSub, role) {\n    var _this = this;\n\n    var permissionObj = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _permissions[\"default\"];\n\n    _classCallCheck(this, AccessHelper);\n\n    _defineProperty(this, \"ownOrAny\", function (obj) {\n      if (!obj || !obj.createdUser || !obj.createdUser.id) throw new Error(\"No Created user found\");\n\n      try {\n        return obj.createdUser.id === _this.userSub ? 'Own' : 'Any';\n      } catch (e) {\n        return 'Any';\n      }\n    });\n\n    _defineProperty(this, \"isOwner\", function (obj) {\n      if (!obj || !obj.createdUser || !obj.createdUser.id) throw new Error(\"No Created user found\");\n\n      try {\n        return obj.createdUser.id === _this.userSub;\n      } catch (e) {\n        return false;\n      }\n    });\n\n    _defineProperty(this, \"canUser\", function (action, obj, type, attrs) {\n      if (['series', 'photo'].indexOf(type) < 0) throw new Error(\"canUser: type not supported \".concat(type));\n\n      try {\n        var ownAny = _this.ownOrAny(obj);\n\n        var perm = _this.ac.can(_this.role)[\"\".concat(action).concat(ownAny)](type);\n\n        var otherPerm = null;\n\n        if (type === 'series') {\n          if (obj.access === 'PUBLIC') otherPerm = _this.ac.can(_this.role)[\"\".concat(action).concat(ownAny)]('series_public');else if (obj.access === 'OPEN') otherPerm = _this.ac.can(_this.role)[\"\".concat(action).concat(ownAny)]('series_open');\n        }\n\n        if (attrs) {\n          if (otherPerm) {\n            return !!perm.attributes.find(function (p) {\n              return p === '*' || attrs.indexOf(p) > -1;\n            }) || !!otherPerm.attributes.find(function (p) {\n              return p === '*' || attrs.indexOf(p) > -1;\n            });\n          } else return !!perm.attributes.find(function (p) {\n            return p === '*' || attrs.indexOf(p) > -1;\n          });\n        } else {\n          if (otherPerm) return perm.granted || otherPerm.granted;else return perm.granted;\n        }\n      } catch (e) {\n        console.error(e);\n        return false;\n      }\n    });\n\n    this.userSub = userSub;\n    this.role = role;\n    this.permissionObj = permissionObj;\n    this.ac = new _accesscontrol[\"default\"](permissionObj);\n  }\n\n  _createClass(AccessHelper, [{\n    key: \"toString\",\n    value: function toString() {\n      console.log('AccessHelper:', {\n        sub: this.userSub,\n        role: this.role\n      });\n    }\n  }]);\n\n  return AccessHelper;\n}();\n\nvar _default = AccessHelper;\nexports[\"default\"] = _default;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport BrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      padding: theme.spacing(2),\n      display: 'flex',\n      flexDirection: 'column',\n      overflow: 'hidden',\n      opacity: 0.3,\n      textAlign: 'center',\n      color: theme.palette.getContrastText(theme.palette.text.primary),\n      background: theme.palette.text.primary\n    },\n    spacer: {\n      flexGrow: 1\n    },\n    icon: {\n      width: '100%',\n      flex: '1 1 40%',\n      opacity: 0.5\n    },\n    circularProgress: {\n      margin: '0 auto'\n    },\n    primary: {\n      textAlign: 'center',\n      width: '100%'\n    },\n    secondary: {\n      flex: '1 1 30%',\n      width: '100%'\n    }\n  };\n});\n\nvar BrokenImg = function BrokenImg(_ref) {\n  var loading = _ref.loading,\n      className = _ref.className,\n      props = _objectWithoutProperties(_ref, [\"loading\", \"className\"]);\n\n  var classes = useStyles();\n  return React.createElement(\"div\", _extends({\n    className: classNames(classes.root, className)\n  }, props), React.createElement(\"div\", {\n    className: classes.spacer\n  }), loading ? React.createElement(CircularProgress, {\n    color: \"inherit\",\n    className: classes.circularProgress\n  }) : React.createElement(BrokenImageIcon, {\n    className: classes.icon,\n    color: \"inherit\"\n  }), React.createElement(Typography, {\n    className: classes.primary,\n    color: \"inherit\"\n  }, loading ? 'Loading' : 'Photo not found'), React.createElement(\"div\", {\n    className: classes.spacer\n  }));\n};\n\nBrokenImg.propTypes = {\n  loading: PropTypes.bool,\n  className: PropTypes.string\n};\nexport default BrokenImg;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useEffect, useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppContext } from '@morphoto/client-common';\nimport BrokenImg from './BrokenImg';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      position: 'relative',\n      display: 'block',\n      height: '100%',\n      width: '100%'\n    },\n    img: {\n      display: 'block',\n      height: '100%',\n      width: '100%'\n    },\n    imgBroken: {\n      display: 'none'\n    }\n  };\n});\nexport var RawImage = function RawImage(_ref) {\n  var className = _ref.className,\n      sizePriority = _ref.sizePriority,\n      dataUrl = _ref.dataUrl,\n      photo = _ref.photo,\n      imgRef = _ref.imgRef,\n      cover = _ref.cover,\n      style = _ref.style,\n      props = _objectWithoutProperties(_ref, [\"className\", \"sizePriority\", \"dataUrl\", \"photo\", \"imgRef\", \"cover\", \"style\"]);\n\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      imgUrls = _useState2[0],\n      setImgUrls = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      retry = _useState4[0],\n      setRetries = _useState4[1];\n\n  var altImgRef = useRef();\n\n  var _useContext = useContext(AppContext),\n      getPhotoUrls = _useContext.getPhotoUrls;\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      altIndex = _useState6[0],\n      setAltIndex = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      broken = _useState8[0],\n      setBroken = _useState8[1];\n\n  useEffect(function () {\n    if (!dataUrl) {\n      if (!getPhotoUrls || !photo) {\n        setBroken(true);\n      } else {\n        getPhotoUrls(photo, ['large', 'medium']).then(function (data) {\n          if (altImgRef.current) setImgUrls(data);\n        }).catch(function () {\n          if (altImgRef.current) setBroken(true);\n        });\n      }\n    }\n  }, [photo]);\n  var finalURL = '';\n  if (dataUrl) finalURL = dataUrl;else if (imgUrls && imgUrls[altIndex]) finalURL = imgUrls[altIndex];\n  var img = null;\n\n  if (broken) {\n    img = React.createElement(BrokenImg, _extends({\n      className: className\n    }, props));\n  } else if (!dataUrl && (!imgUrls || imgUrls.length === 0)) {\n    img = React.createElement(BrokenImg, _extends({\n      className: className\n    }, props));\n  } else {\n    img = React.createElement(\"img\", _extends({\n      ref: imgRef,\n      className: classNames(className, broken ? classes.imgBroken : classes.img),\n      alt: sizePriority[altIndex],\n      style: _objectSpread({}, style, {\n        objectFit: cover ? 'cover' : 'contain'\n      }),\n      onError: function onError() {\n        if (!dataUrl && imgUrls[altIndex + 1]) {\n          console.warn('RawImage::Setting Alternate image', altIndex + 1);\n          setAltIndex(altIndex + 1);\n        } else {\n          if (imgUrls.length > 0 && retry < 5) {\n            console.log('RawImage::retry', retry);\n            setTimeout(function () {\n              setRetries(retry + 1);\n              setAltIndex(0);\n            }, 2000);\n          } else {\n            console.warn('RawImage::Image Fail', {\n              photoId: photo.id\n            });\n            setBroken(true);\n          }\n        }\n      },\n      src: finalURL\n    }, props));\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    ref: altImgRef,\n    style: {\n      height: 0,\n      width: 0\n    }\n  }), img);\n};\nRawImage.propTypes = {\n  className: PropTypes.string,\n  sizePriority: PropTypes.arrayOf(PropTypes.string),\n  imgRef: PropTypes.any,\n  getPhotoUrls: PropTypes.func,\n  cover: PropTypes.bool,\n  dataUrl: PropTypes.string,\n  photo: PropTypes.object,\n  style: PropTypes.object\n};\nRawImage.defaultProps = {\n  sizePriority: ['large', 'medium']\n};\nexport default RawImage;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useRef, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useComponentSize } from '@morphoto/client-common';\nimport { XYTagChip, useXYTags } from '@morphoto/tags';\nimport RawImage from './RawImage';\nimport style from './Photo.style';\nvar useStyles = makeStyles(style);\n\nvar Photo = function Photo(_ref) {\n  var photo = _ref.photo,\n      opacity = _ref.opacity,\n      edit = _ref.edit,\n      showTags = _ref.showTags,\n      dataUrl = _ref.dataUrl,\n      transition = _ref.transition,\n      onChange = _ref.onChange,\n      className = _ref.className;\n  var classes = useStyles();\n  var refImgWrap = useRef();\n  var imgRef = useRef();\n\n  var _useState = useState({\n    multiplier: 1\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      newSize = _useState2[0],\n      setNewSize = _useState2[1];\n\n  var _useComponentSize = useComponentSize(refImgWrap),\n      _useComponentSize$siz = _useComponentSize.size,\n      height = _useComponentSize$siz.height,\n      width = _useComponentSize$siz.width,\n      setResizeActive = _useComponentSize.setResizeActive;\n\n  var _useXYTags = useXYTags(photo, {\n    height: height,\n    width: width\n  }, onChange, setResizeActive),\n      onAddTagTrigger = _useXYTags.onAddTagTrigger,\n      TagChooser = _useXYTags.TagChooser,\n      getRelXYTags = _useXYTags.getRelXYTags,\n      onTagDragOver = _useXYTags.onTagDragOver,\n      onTagDragStop = _useXYTags.onTagDragStop,\n      onTagDelete = _useXYTags.onTagDelete;\n\n  var handleNewSize = function handleNewSize() {\n    var _imgRef$current = imgRef.current,\n        naturalHeight = _imgRef$current.naturalHeight,\n        naturalWidth = _imgRef$current.naturalWidth;\n    var multiplier = Math.min(height / naturalHeight, width / naturalWidth);\n    var newWidth = multiplier * naturalWidth;\n    var newHeight = multiplier * naturalHeight;\n    setNewSize({\n      newWidth: newWidth,\n      newHeight: newHeight,\n      naturalWidth: naturalWidth,\n      naturalHeight: naturalHeight,\n      multiplier: multiplier\n    });\n  };\n\n  useLayoutEffect(function () {\n    if (imgRef.current) handleNewSize();\n  }, [width, height]);\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className),\n    style: {\n      opacity: opacity !== null ? opacity : 1\n    },\n    ref: refImgWrap\n  }, React.createElement(\"div\", {\n    className: classes.inner,\n    style: {\n      height: newSize ? newSize.newHeight : 1,\n      width: newSize ? newSize.newWidth : 1\n    },\n    onClick: onAddTagTrigger\n  }, showTags || edit ? React.createElement(\"div\", {\n    className: classes.xyTags\n  }, getRelXYTags(newSize.multiplier).map(function (tag, idx) {\n    return React.createElement(XYTagChip, _extends({\n      key: \"xytag-\".concat(idx),\n      color: tag.color\n    }, {\n      edit: edit,\n      newSize: newSize,\n      tag: tag,\n      onTagDragOver: onTagDragOver,\n      onTagDragStop: onTagDragStop,\n      onTagDelete: onTagDelete\n    }));\n  })) : null, React.createElement(RawImage, {\n    className: classes.rawImage,\n    sizePriority: ['large', 'medium', 'thumb'],\n    photo: photo,\n    imgRef: imgRef,\n    dataUrl: dataUrl,\n    style: {\n      height: newSize.newHeight,\n      width: newSize.newWidth\n    }\n  })), edit && React.createElement(TagChooser, null));\n};\n\nPhoto.propTypes = {\n  className: PropTypes.string,\n  opacity: PropTypes.number,\n  photo: PropTypes.object.isRequired,\n  dataUrl: PropTypes.string,\n  edit: PropTypes.bool,\n  showTags: PropTypes.bool,\n  transition: PropTypes.string,\n  onChange: PropTypes.func\n};\nexport default Photo;","export default (function (theme) {\n  return {\n    root: {\n      display: 'block',\n      position: 'relative',\n      width: '100%',\n      height: '100%',\n      background: 'black',\n      overflow: 'hidden'\n    },\n    inner: {\n      width: '100%',\n      height: '100%',\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    xyTags: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      height: '100%',\n      width: '100%'\n    },\n    img: {\n      display: 'block'\n    },\n    brokenImg: {\n      display: 'none'\n    },\n    formControl: {\n      width: '100%'\n    }\n  };\n});","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Button from '@material-ui/core/Button';\nimport Fab from '@material-ui/core/Fab';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport { RawImage } from './RawImage';\nimport style from './PhotoGrid.style';\nimport { AppContext } from '@morphoto/client-common';\nimport { DeleteDialog } from '@morphoto/modals';\nimport { dates } from '@morphoto/common';\nvar useStyles = makeStyles(style);\n\nvar PhotoGrid = function PhotoGrid(_ref) {\n  var photos = _ref.photos,\n      columns = _ref.columns,\n      multiSelect = _ref.multiSelect,\n      onDelete = _ref.onDelete,\n      onTileClick = _ref.onTileClick,\n      allowDelete = _ref.allowDelete;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectMode = _useState2[0],\n      setSelectMode = _useState2[1];\n\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      getPhotoUrls = _useContext.getPhotoUrls;\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedItems = _useState4[0],\n      setSelectedItems = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      urls = _useState6[0],\n      setUrls = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      deleteConfirm = _useState8[0],\n      setDeleteConfirm = _useState8[1];\n\n  var handleAddToSelection = function handleAddToSelection(e, id) {\n    e.preventDefault();\n    e.stopPropagation();\n    setSelectMode(true);\n    toggleListItem(id);\n  };\n\n  var handleCancelSelection = function handleCancelSelection() {\n    setSelectMode(false);\n    setSelectedItems([]);\n  };\n\n  var onDeleteConfirm = function onDeleteConfirm(confirmation) {\n    setDeleteConfirm(false);\n    if (confirmation === true && selectedItems.length < photos.length) onDelete(selectedItems);\n    handleCancelSelection();\n  };\n\n  var toggleListItem = function toggleListItem(id) {\n    var index = selectedItems.indexOf(id);\n    if (index < 0) setSelectedItems([].concat(_toConsumableArray(selectedItems), [id]));else {\n      var remaining = selectedItems.filter(function (arrId) {\n        return arrId !== id;\n      });\n      if (remaining.length === 0) handleCancelSelection();\n      setSelectedItems(remaining);\n    }\n  };\n\n  useEffect(function () {\n    photos.forEach(\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(ph) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.t0 = setUrls;\n                _context.t1 = _objectSpread;\n                _context.t2 = {};\n                _context.t3 = urls;\n                _context.t4 = _defineProperty;\n                _context.t5 = {};\n                _context.t6 = ph.id;\n                _context.next = 9;\n                return getPhotoUrls(ph, ['thumb', 'medium']);\n\n              case 9:\n                _context.t7 = _context.sent;\n                _context.t8 = (0, _context.t4)(_context.t5, _context.t6, _context.t7);\n                _context.t9 = (0, _context.t1)(_context.t2, _context.t3, _context.t8);\n                (0, _context.t0)(_context.t9);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n  }, [photos]);\n\n  var handlePhotoTap = function handlePhotoTap(e, photo) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (allowDelete && selectMode) toggleListItem(photo.id);else onTileClick(photo.id);\n  };\n\n  return React.createElement(\"div\", null, React.createElement(GridList, {\n    cols: columns,\n    cellHeight: 200,\n    className: classes.root\n  }, photos.map(function (photo, idx) {\n    var selected = selectedItems.indexOf(photo.id) > -1;\n    return React.createElement(GridListTile, {\n      key: \"gridTile\".concat(idx),\n      onClick: function onClick(e) {\n        return handlePhotoTap(e, photo);\n      },\n      className: classNames(classes.tile, selectMode && !allowDelete && classes.notDeleteable, selectMode && allowDelete && !selected && classes.unSelectedTile, selectMode && selected && classes.selectedTile)\n    }, React.createElement(RawImage, {\n      photo: photo,\n      sizePriority: ['medium', 'thumb', 'large'],\n      cover: true,\n      className: classes.img\n    }), allowDelete && multiSelect && React.createElement(Fab, {\n      size: \"small\",\n      \"aria-label\": \"Add\",\n      className: classes.addFab,\n      onClick: function onClick(e) {\n        return handleAddToSelection(e, photo.id);\n      }\n    }, !selectMode || !selected ? React.createElement(AddIcon, null) : React.createElement(RemoveIcon, null)), React.createElement(GridListTileBar, {\n      title: React.createElement(\"span\", null, dates.formatDate(photo.takenOn, 'll LT'))\n    }));\n  })), React.createElement(Snackbar, {\n    open: selectMode,\n    autoHideDuration: null,\n    ContentProps: {\n      'aria-describedby': 'snackbar-fab-message-id',\n      className: classes.snackbarContent\n    },\n    message: React.createElement(\"span\", {\n      id: \"snackbar-fab-message-id\"\n    }, selectedItems.length >= photos.length ? 'You can\\'t delete all the photos. delete the series instead.' : \"\".concat(selectedItems.length, \" Photos selected\")),\n    action: React.createElement(\"div\", null, React.createElement(Button, {\n      color: \"inherit\",\n      disabled: selectedItems.length >= photos.length,\n      size: \"small\",\n      onClick: function onClick() {\n        return setDeleteConfirm(true);\n      }\n    }, \"Delete\"), React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: function onClick() {\n        return handleCancelSelection();\n      }\n    }, \"Cancel\")),\n    className: classes.snackbar\n  }), React.createElement(DeleteDialog, {\n    open: deleteConfirm,\n    onConfirm: onDeleteConfirm,\n    title: \"Delete \".concat(selectedItems.length, \" Photos\"),\n    message: \"Are you sure you want to delete these photos?\"\n  }));\n};\n\nPhotoGrid.propTypes = {\n  photos: PropTypes.array.isRequired,\n  columns: PropTypes.number,\n  multiSelect: PropTypes.bool,\n  allowDelete: PropTypes.bool,\n  onDelete: PropTypes.func,\n  onTileClick: PropTypes.func.isRequired\n};\nPhotoGrid.defaultProps = {\n  multiSelect: true,\n  columns: 2\n};\nexport default PhotoGrid;","import { red } from '@material-ui/core/colors';\nexport default (function (theme) {\n  return {\n    root: {},\n    tile: {},\n    addFab: {\n      position: 'absolute',\n      zIndex: 10,\n      top: theme.spacing(1),\n      left: theme.spacing(1),\n      opacity: 0.3\n    },\n    notDeleteable: {\n      background: theme.palette.primary.dark,\n      opacity: 0.1\n    },\n    unSelectedTile: {\n      '& img': {\n        opacity: 0.7\n      }\n    },\n    selectedTile: {\n      padding: \"\".concat(theme.spacing(2), \"px!important\"),\n      '& img': {\n        opacity: 1\n      }\n    },\n    img: {},\n    snackbarContent: {\n      backgroundColor: red[700]\n    },\n    snackbar: {}\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      color: 'white',\n      zIndex: 10,\n      display: 'flex',\n      flexDirection: 'column',\n      position: 'absolute',\n      left: '0'\n    },\n    sliderLabel: {\n      display: 'block',\n      flexGrow: 1,\n      textAlign: 'center',\n      padding: theme.spacing(3, 0, 3, 0),\n      textShadow: '0 0 5px black, 0 0 5px black'\n    },\n    vertical: {\n      padding: '0px 31px!important',\n      width: '4px!important'\n    },\n    rail: {\n      width: \"4px!important\",\n      background: theme.palette.primary.dark,\n      boxShadow: '0 0 10px 5px black'\n    },\n    track: {\n      width: \"4px!important\",\n      background: theme.palette.primary.main\n    },\n    thumb: {\n      background: theme.palette.primary.main,\n      border: \"1px solid \".concat(theme.palette.primary.dark),\n      marginLeft: '-8px !important',\n      width: 20,\n      height: 20\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar PhotoFadeSlider = function PhotoFadeSlider(_ref) {\n  var defaultValue = _ref.defaultValue,\n      onChange = _ref.onChange,\n      className = _ref.className;\n  var classes = useStyles();\n\n  var _useState = useState(defaultValue),\n      _useState2 = _slicedToArray(_useState, 2),\n      slider = _useState2[0],\n      setSlider = _useState2[1];\n\n  var onSliderMove = function onSliderMove(event, value) {\n    setSlider(value);\n    onChange(value);\n  };\n\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, className)\n  }, React.createElement(Typography, {\n    className: classes.sliderLabel,\n    color: \"inherit\",\n    variant: \"caption\"\n  }, \"New\"), React.createElement(Slider, {\n    classes: {\n      vertical: classes.vertical,\n      rail: classes.rail,\n      track: classes.track,\n      thumb: classes.thumb\n    },\n    value: slider,\n    \"aria-labelledby\": \"label\",\n    onChange: onSliderMove,\n    orientation: \"vertical\"\n  }), React.createElement(Typography, {\n    className: classes.sliderLabel,\n    color: \"inherit\",\n    variant: \"caption\"\n  }, \"Reference\"));\n};\n\nPhotoFadeSlider.propTypes = {\n  defaultValue: PropTypes.number,\n  className: PropTypes.string,\n  onChange: PropTypes.func\n};\nPhotoFadeSlider.defaultProps = {\n  defaultValue: 100,\n  onChange: function onChange() {}\n};\nexport default PhotoFadeSlider;","export { default as RawImage } from './RawImage';\nexport { default as Photo } from './Photo';\nexport { default as BrokenImg } from './BrokenImg';\nexport { default as PhotoGrid } from './PhotoGrid';\nexport { default as PhotoFadeSlider } from './PhotoFadeSlider';","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { graphql } from 'react-apollo';\nimport { getWholeSeriesPhotoUpdate, allSeriesPhotoUpdate, feedUpdate } from './updateQueries';\nimport { createPhoto, newPhotoKeys } from '../mutations';\nimport { pushMutationPromise, popMutationPromise } from '../offline';\nimport _ from 'lodash';\nvar withMutation = graphql(createPhoto, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      createPhotoMutation: function () {\n        var _createPhotoMutation = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(series, newPhoto, ext) {\n          var newPhotoInput, _ownProps$currentUser, id, gravatar, gravatarProfile, username, meUserSummary, variables, optimisticResponse, mutationStackId;\n\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  newPhotoInput = _.cloneDeep(newPhoto);\n\n                  if (!newPhotoInput.seriesId && ownProps.activeSeries) {\n                    newPhotoInput.seriesId = ownProps.activeSeries;\n                  }\n\n                  _ownProps$currentUser = ownProps.currentUser, id = _ownProps$currentUser.id, gravatar = _ownProps$currentUser.gravatar, gravatarProfile = _ownProps$currentUser.gravatarProfile, username = _ownProps$currentUser.username;\n                  meUserSummary = {\n                    id: id,\n                    gravatar: gravatar,\n                    gravatarProfile: gravatarProfile,\n                    username: username,\n                    __typename: 'UserSummary'\n                  };\n                  variables = {\n                    photo: _.pick(newPhotoInput, newPhotoKeys),\n                    ext: ext\n                  };\n                  optimisticResponse = createOptimisticResponse({\n                    meUserSummary: meUserSummary,\n                    series: series,\n                    newPhoto: newPhoto,\n                    ext: ext\n                  });\n                  _context.next = 8;\n                  return pushMutationPromise({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse\n                  }, createPhoto);\n\n                case 8:\n                  mutationStackId = _context.sent;\n                  return _context.abrupt(\"return\", mutate({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse,\n                    update: updateThunk({\n                      series: series\n                    }, ownProps.doneCreatingPhoto)\n                  }).then(function (data) {\n                    console.log('createPhotoMutation:: done', data);\n                    popMutationPromise(mutationStackId);\n                    return data;\n                  }));\n\n                case 10:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function createPhotoMutation(_x, _x2, _x3) {\n          return _createPhotoMutation.apply(this, arguments);\n        }\n\n        return createPhotoMutation;\n      }()\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    console.log('updateThunk', {\n      context: context,\n      data: data\n    });\n    getWholeSeriesPhotoUpdate(store, data.createPhoto.photo);\n    allSeriesPhotoUpdate(store, context.series, data.createPhoto.photo);\n    feedUpdate(store, context.series, data.createPhoto.photo);\n    if (cb) cb(data.createPhoto.photo.id);\n  };\n};\n\nvar createOptimisticResponse = function createOptimisticResponse(_ref3) {\n  var meUserSummary = _ref3.meUserSummary,\n      series = _ref3.series,\n      newPhoto = _ref3.newPhoto,\n      ext = _ref3.ext;\n  return {\n    createPhoto: {\n      photo: {\n        id: newPhoto.id,\n        meta: newPhoto.meta || null,\n        seriesId: series.id,\n        note: newPhoto.note || '',\n        createdOn: Date.now().toString(),\n        createdUser: meUserSummary,\n        updatedUser: meUserSummary,\n        createdBy: meUserSummary.id,\n        updatedBy: meUserSummary.id,\n        uploadToken: newPhoto.uploadToken,\n        updatedOn: Date.now().toString(),\n        seriesCreatedBy: series.createdUser.id,\n        takenOn: newPhoto.takenOn,\n        coords: newPhoto.coords || null,\n        tags: newPhoto.tags || [],\n        paths: {\n          base: null,\n          large: null,\n          orig: null,\n          thumb: null,\n          medium: null,\n          __typename: 'Paths'\n        },\n        __typename: 'Photo'\n      },\n      preAuth: null,\n      __typename: 'NewPhoto'\n    }\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { graphql } from 'react-apollo';\nimport { allSeriesPhotoUpdate, feedUpdate, getWholeSeriesPhotoUpdate } from './updateQueries';\nimport { deletePhoto } from '../mutations';\nimport { pushMutationPromise, popMutationPromise } from '../offline';\nvar withMutation = graphql(deletePhoto, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      deletePhotoMutation: function () {\n        var _deletePhotoMutation = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(photoId) {\n          var variables, optimisticResponse, mutationStackId;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  variables = {\n                    seriesId: ownProps.series.id,\n                    photoId: photoId\n                  };\n                  optimisticResponse = {\n                    deletePhoto: photoId\n                  };\n                  _context.next = 4;\n                  return pushMutationPromise({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse\n                  }, deletePhoto);\n\n                case 4:\n                  mutationStackId = _context.sent;\n                  return _context.abrupt(\"return\", mutate({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse,\n                    update: updateThunk({\n                      series: ownProps.series\n                    })\n                  }).then(function (data) {\n                    console.log('deletePhotoMutation:: done', data);\n                    popMutationPromise(mutationStackId);\n                    return data;\n                  }));\n\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function deletePhotoMutation(_x) {\n          return _deletePhotoMutation.apply(this, arguments);\n        }\n\n        return deletePhotoMutation;\n      }()\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    console.log('updateThunk', {\n      context: context,\n      data: data\n    });\n    allSeriesPhotoUpdate(store, null, {\n      id: data.deletePhoto\n    }, true);\n    getWholeSeriesPhotoUpdate(store, {\n      id: data.deletePhoto,\n      seriesId: context.series.id\n    }, true);\n    feedUpdate(store, context.series, {\n      id: data.deletePhoto,\n      seriesId: context.series.id\n    }, true);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { graphql } from 'react-apollo';\nimport { allSeriesUpdate, feedUpdate, userSeriesUpdate } from './updateQueries';\nimport { deleteSeries } from '../mutations';\nimport { allSeries, userSeries, getMyFeed } from '../queries';\nimport { pushMutationPromise, popMutationPromise } from '../offline';\nvar withMutation = graphql(deleteSeries, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      deleteSeriesMutation: function () {\n        var _deleteSeriesMutation = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee() {\n          var variables, optimisticResponse, mutationStackId;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  variables = {\n                    id: ownProps.activeSeries\n                  };\n                  optimisticResponse = {\n                    deleteSeries: ownProps.activeSeries\n                  };\n                  _context.next = 4;\n                  return pushMutationPromise({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse\n                  }, deleteSeries);\n\n                case 4:\n                  mutationStackId = _context.sent;\n                  return _context.abrupt(\"return\", mutate({\n                    variables: variables,\n                    refetchQueries: [{\n                      query: allSeries,\n                      variables: {\n                        limit: 100\n                      }\n                    }, {\n                      query: userSeries\n                    }, {\n                      query: getMyFeed\n                    }],\n                    optimisticResponse: optimisticResponse,\n                    update: updateThunk()\n                  }).then(function (data) {\n                    console.log('deleteSeriesMutation:: done', {\n                      data: data,\n                      mutationStackId: mutationStackId\n                    });\n                    popMutationPromise(mutationStackId);\n                    return data;\n                  }));\n\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function deleteSeriesMutation() {\n          return _deleteSeriesMutation.apply(this, arguments);\n        }\n\n        return deleteSeriesMutation;\n      }()\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    console.log('deleteSeriesMutation::updateThunk', {\n      data: data\n    });\n    userSeriesUpdate(store, data.deleteSeries, true);\n    allSeriesUpdate(store, {\n      id: data.deleteSeries\n    }, true);\n    feedUpdate(store, {\n      id: data.deleteSeries\n    }, null, true);\n    if (cb) cb(data.createSeries.series.id);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { graphql } from 'react-apollo';\nimport { watchUpdate } from './updateQueries';\nimport { unWatchSeries } from '../mutations';\nimport { pushMutationPromise, popMutationPromise } from '../offline';\nvar withMutation = graphql(unWatchSeries, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      unWatchSeriesMutation: function () {\n        var _unWatchSeriesMutation = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee() {\n          var variables, optimisticResponse, mutationStackId;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  variables = {\n                    seriesId: ownProps.activeSeries\n                  };\n                  optimisticResponse = {\n                    unWatchSeries: ownProps.activeSeries\n                  };\n                  _context.next = 4;\n                  return pushMutationPromise({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse\n                  }, unWatchSeries);\n\n                case 4:\n                  mutationStackId = _context.sent;\n                  return _context.abrupt(\"return\", mutate({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse,\n                    update: updateThunk()\n                  }).then(function (data) {\n                    console.log('unWatchSeriesMutation:: done', data);\n                    popMutationPromise(mutationStackId);\n                    return data;\n                  }));\n\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function unWatchSeriesMutation() {\n          return _unWatchSeriesMutation.apply(this, arguments);\n        }\n\n        return unWatchSeriesMutation;\n      }()\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    watchUpdate(store, data.unWatchSeries, true);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { graphql } from 'react-apollo';\nimport { getWholeSeriesPhotoUpdate, allSeriesPhotoUpdate, feedUpdate } from './updateQueries';\nimport { updatePhoto, updatePhotoKeys } from '../mutations';\nimport { pushMutationPromise, popMutationPromise } from '../offline';\nimport _ from 'lodash';\nvar withMutation = graphql(updatePhoto, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      updatePhotoMutation: function () {\n        var _updatePhotoMutation = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(series, photo, photoDelta) {\n          var newUpdatePhoto, _ownProps$currentUser, id, gravatar, gravatarProfile, username, meUserSummary, variables, optimisticResponse, mutationStackId;\n\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  newUpdatePhoto = _.pick(photoDelta, updatePhotoKeys);\n\n                  if (newUpdatePhoto.tags && newUpdatePhoto.tags.length > 0) {\n                    newUpdatePhoto.tags = newUpdatePhoto.tags.map(function (t) {\n                      var newT = _.pick(t, ['label', 'typeId', 'coords']);\n\n                      if (newT.coords) newT.coords = _.pick(newT.coords, ['x', 'y']);\n                      return newT;\n                    });\n                  }\n\n                  _ownProps$currentUser = ownProps.currentUser, id = _ownProps$currentUser.id, gravatar = _ownProps$currentUser.gravatar, gravatarProfile = _ownProps$currentUser.gravatarProfile, username = _ownProps$currentUser.username;\n                  meUserSummary = {\n                    id: id,\n                    gravatar: gravatar,\n                    gravatarProfile: gravatarProfile,\n                    username: username,\n                    __typename: 'UserSummary'\n                  };\n                  variables = {\n                    photo: newUpdatePhoto\n                  };\n                  optimisticResponse = createOptimisticResponse({\n                    meUserSummary: meUserSummary,\n                    newUpdatePhoto: newUpdatePhoto,\n                    photoDelta: photoDelta\n                  });\n                  _context.next = 8;\n                  return pushMutationPromise({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse\n                  }, updatePhoto);\n\n                case 8:\n                  mutationStackId = _context.sent;\n                  console.log('optimisticresponse', optimisticResponse);\n                  return _context.abrupt(\"return\", mutate({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse,\n                    update: updateThunk({\n                      photo: photo,\n                      series: series\n                    })\n                  }).then(function (data) {\n                    console.log('updatePhotoMutation:: done', data);\n                    popMutationPromise(mutationStackId);\n                    return data;\n                  }));\n\n                case 11:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function updatePhotoMutation(_x, _x2, _x3) {\n          return _updatePhotoMutation.apply(this, arguments);\n        }\n\n        return updatePhotoMutation;\n      }()\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    console.log('updateThunk', {\n      context: context,\n      data: data\n    });\n    getWholeSeriesPhotoUpdate(store, _objectSpread({}, context.photo, {}, data.updatePhoto));\n    allSeriesPhotoUpdate(store, context.series, _objectSpread({}, context.photo, {}, data.updatePhoto));\n    feedUpdate(store, context.series, _objectSpread({}, context.photo, {}, data.updatePhoto));\n    if (cb) cb(data.createSeries.series.id);\n  };\n};\n\nvar createOptimisticResponse = function createOptimisticResponse(_ref3) {\n  var meUserSummary = _ref3.meUserSummary,\n      photo = _ref3.photo,\n      photoDelta = _ref3.photoDelta;\n  return {\n    updatePhoto: _objectSpread({}, photo, {}, photoDelta, {\n      updatedUser: meUserSummary,\n      updatedBy: meUserSummary.id,\n      __typename: 'Photo'\n    })\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { graphql } from 'react-apollo';\nimport { getWholeSeriesUpdate, allSeriesUpdate, feedUpdate } from './updateQueries';\nimport { updateSeries, updateSeriesKeys } from '../mutations';\nimport { pushMutationPromise, popMutationPromise } from '../offline';\nimport _ from 'lodash';\nexport var withMutation = graphql(updateSeries, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      updateSeriesMutation: function () {\n        var _updateSeriesMutation = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(series, seriesDelta) {\n          var _ownProps$currentUser, id, gravatar, gravatarProfile, username, meUserSummary, variables, optimisticResponse, mutationStackId;\n\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _ownProps$currentUser = ownProps.currentUser, id = _ownProps$currentUser.id, gravatar = _ownProps$currentUser.gravatar, gravatarProfile = _ownProps$currentUser.gravatarProfile, username = _ownProps$currentUser.username;\n                  meUserSummary = {\n                    id: id,\n                    gravatar: gravatar,\n                    gravatarProfile: gravatarProfile,\n                    username: username,\n                    __typename: 'UserSummary'\n                  };\n                  variables = {\n                    series: _.pick(seriesDelta, updateSeriesKeys)\n                  };\n                  optimisticResponse = createOptimisticResponse({\n                    meUserSummary: meUserSummary,\n                    series: series,\n                    seriesDelta: seriesDelta\n                  });\n                  _context.next = 6;\n                  return pushMutationPromise({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse\n                  }, updateSeries);\n\n                case 6:\n                  mutationStackId = _context.sent;\n                  return _context.abrupt(\"return\", mutate({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse,\n                    update: updateThunk({\n                      series: series\n                    })\n                  }).then(function (data) {\n                    console.log('updateSeriesMutation:: done', data);\n                    popMutationPromise(mutationStackId);\n                    return data;\n                  }));\n\n                case 8:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function updateSeriesMutation(_x, _x2) {\n          return _updateSeriesMutation.apply(this, arguments);\n        }\n\n        return updateSeriesMutation;\n      }()\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    console.log('updateThunk', {\n      context: context,\n      data: data\n    });\n    getWholeSeriesUpdate(store, data.updateSeries);\n    allSeriesUpdate(store, data.updateSeries);\n    feedUpdate(store, data.updateSeries.series, context.series.photos[0]);\n  };\n};\n\nvar createOptimisticResponse = function createOptimisticResponse(_ref3) {\n  var meUserSummary = _ref3.meUserSummary,\n      series = _ref3.series,\n      seriesDelta = _ref3.seriesDelta;\n  return {\n    updateSeries: _objectSpread({}, series, {}, seriesDelta, {\n      updatedUser: meUserSummary,\n      updatedBy: meUserSummary.id,\n      __typename: 'Series'\n    })\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { graphql } from 'react-apollo';\nimport { watchUpdate } from './updateQueries';\nimport { watchSeries } from '../mutations';\nimport { pushMutationPromise, popMutationPromise } from '../offline';\nvar withMutation = graphql(watchSeries, {\n  props: function props(_ref) {\n    var mutate = _ref.mutate,\n        ownProps = _ref.ownProps;\n    return {\n      watchSeriesMutation: function () {\n        var _watchSeriesMutation = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee() {\n          var variables, optimisticResponse, mutationStackId;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  variables = {\n                    seriesId: ownProps.activeSeries\n                  };\n                  optimisticResponse = {\n                    watchSeries: ownProps.activeSeries\n                  };\n                  _context.next = 4;\n                  return pushMutationPromise({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse\n                  }, watchSeries);\n\n                case 4:\n                  mutationStackId = _context.sent;\n                  return _context.abrupt(\"return\", mutate({\n                    variables: variables,\n                    optimisticResponse: optimisticResponse,\n                    update: updateThunk()\n                  }).then(function (data) {\n                    console.log('watchSeriesMutation:: done', data);\n                    popMutationPromise(mutationStackId);\n                    return data;\n                  }));\n\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function watchSeriesMutation() {\n          return _watchSeriesMutation.apply(this, arguments);\n        }\n\n        return watchSeriesMutation;\n      }()\n    };\n  }\n});\n\nvar updateThunk = function updateThunk(context, cb) {\n  return function (store, _ref2) {\n    var data = _ref2.data;\n    watchUpdate(store, data.watchSeries);\n  };\n};\n\nexport default {\n  withMutation: withMutation,\n  updateThunk: updateThunk\n};","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { fade, lighten } from '@material-ui/core/styles/colorManipulator';\nimport { config } from '@morphoto/client-common';\nvar typography = {\n  useNextVariants: true\n};\nvar overrides = {\n  MuiDialog: {\n    paper: {\n      '@media (max-width:321px)': {\n        margin: 10\n      }\n    },\n    paperFullWidth: {\n      '@media (max-width:321px)': {\n        width: 'calc(100% - 20px)'\n      }\n    }\n  }\n};\nvar colors = {\n  jet: '#3a3335',\n  rose: '#d81e5b',\n  redorange: '#f0544f',\n  papayawhip: '#FDF0D5',\n  cblue: '#C6D8D3'\n};\nvar home = {\n  palette: {\n    jet: {\n      main: '#3a3335'\n    },\n    rose: {\n      main: '#d81e5b'\n    },\n    redorange: {\n      main: '#f0544f'\n    },\n    papayawhip: {\n      main: '#FDF0D5'\n    },\n    cblue: {\n      main: '#C6D8D3'\n    },\n    primary: {\n      main: colors.redorange\n    },\n    secondary: {\n      main: colors.rose\n    },\n    text: {\n      primary: colors.jet,\n      secondary: fade(colors.jet, 0.7)\n    }\n  },\n  typography: typography,\n  overrides: overrides\n};\nvar homeTheme = createMuiTheme(home);\nvar access = Object.keys(config.ACCESS).reduce(function (acc, key) {\n  var accessObj = config.ACCESS[key];\n  var contrastText = homeTheme.palette.getContrastText(accessObj.color);\n  return _objectSpread({}, acc, _defineProperty({}, key, createMuiTheme({\n    palette: {\n      primary: {\n        main: accessObj.color\n      },\n      background: {\n        default: accessObj.color,\n        paper: accessObj.color\n      },\n      text: {\n        primary: contrastText,\n        secondary: fade(contrastText, 0.7)\n      }\n    }\n  })));\n}, {});\nvar series = {\n  palette: {\n    primary: {\n      main: lighten(colors.jet, 0.1)\n    },\n    secondary: {\n      main: colors.rose\n    },\n    text: {\n      primary: colors.jet,\n      secondary: fade(colors.jet, 0.7)\n    }\n  },\n  typography: typography,\n  overrides: overrides\n};\nvar login = {\n  palette: {\n    primary: {\n      main: colors.redorange\n    },\n    secondary: {\n      main: colors.rose\n    },\n    text: {\n      primary: colors.papayawhip,\n      secondary: fade(colors.papayawhip, 0.7)\n    },\n    background: {\n      default: colors.jet,\n      paper: colors.jet\n    }\n  },\n  typography: typography,\n  overrides: overrides\n};\nexport default {\n  home: homeTheme,\n  login: createMuiTheme(login),\n  series: createMuiTheme(series),\n  access: access\n};","export default {\n  '@global': {\n    'body, #root': {\n      height: '100%'\n    },\n    'html, body': {\n      overflow: 'hidden',\n      position: 'fixed',\n      fallbacks: [{\n        overflow: 'hidden'\n      }],\n      overscrollBehavior: 'contain',\n      height: '100%',\n      width: '100%'\n    },\n    '.Section__container___3YYTG': {\n      height: '100%'\n    },\n    ':not(input):not(textarea), :not(input):not(textarea)::after, :not(input):not(textarea)::before': {\n      W: 'none',\n      userSelect: 'none',\n      cursor: 'default'\n    },\n    'input, button, textarea, :focus': {\n      outline: 'none'\n    }\n  }\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nvar style = {\n  background: 'black',\n  height: '100%',\n  position: 'relative'\n};\n\nvar CosmosBlackBackground = function CosmosBlackBackground(_ref) {\n  var children = _ref.children;\n  return React.createElement(\"div\", {\n    style: style\n  }, children);\n};\n\nCosmosBlackBackground.propTypes = {\n  children: PropTypes.any.isRequired\n};\nexport default CosmosBlackBackground;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { makeStyles } from '@material-ui/core/styles';\nimport themes, { globalStyle } from '@morphoto/themes';\nimport { AppContextProvider } from '@morphoto/client-common';\nimport { FakeData } from '@morphoto/mock';\nimport { fakeGlobalActions } from './utils';\n\nvar style = function style(theme) {\n  return {\n    '@global': _objectSpread({}, globalStyle['@global'], {\n      'html, body, #root': {\n        minHeight: '10px',\n        minWidth: '10px',\n        height: '100%'\n      }\n    })\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar MaterialUIWrap = function MaterialUIWrap(_ref) {\n  var children = _ref.children,\n      context = _ref.context,\n      theme = _ref.theme,\n      outerTheme = _ref.outerTheme,\n      iOS = _ref.iOS,\n      noTheme = _ref.noTheme;\n  var innerTheme = theme || themes.home;\n  useStyles();\n  var deviceOverride = context && context.device ? _objectSpread({}, context.device) : {};\n  if (iOS !== null) deviceOverride.ios = iOS;\n\n  var contextValue = _objectSpread({}, FakeData.fakeAppContext(), {\n    globalActions: fakeGlobalActions,\n    signedIn: true\n  }, context, {\n    device: deviceOverride\n  });\n\n  if (noTheme) {\n    return React.createElement(AppContextProvider, {\n      value: contextValue\n    }, children);\n  }\n\n  return React.createElement(AppContextProvider, {\n    value: contextValue\n  }, React.createElement(ThemeProvider, {\n    theme: outerTheme || innerTheme\n  }, React.createElement(CssBaseline, null), React.createElement(ThemeProvider, {\n    theme: innerTheme\n  }, children)));\n};\n\nMaterialUIWrap.propTypes = {\n  children: PropTypes.any.isRequired,\n  noTheme: PropTypes.bool,\n  theme: PropTypes.object,\n  iOS: PropTypes.bool,\n  outerTheme: PropTypes.object,\n  context: PropTypes.object\n};\nexport default MaterialUIWrap;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.randomLocation = exports.fakePastDate = void 0;\n\nvar _random = require(\"./random\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _turf = require(\"@turf/turf\");\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _faker = _interopRequireDefault(require(\"faker\"));\n\nvar _v = _interopRequireDefault(require(\"uuid/v4\"));\n\nvar _random2 = require(\"../dist/random\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar tagColors = ['#418CF0', '#FCB441', '#E0400A', '#056492', '#BFBFBF', '#1A3B69', '#FFE382', '#129CDD', '#CA6B4B', '#005CDB', '#F3D288', '#506381', '#F1B9A8', '#E0830A', '#7893BE'];\nvar EVENT_RELATIONS = ['OWNED', 'CONTRIBUTED', 'WATCHING'];\n\nvar fakePastDate = function fakePastDate() {\n  return _moment[\"default\"].utc(_faker[\"default\"].date.past()).format('x');\n};\n\nexports.fakePastDate = fakePastDate;\n\nvar randomLocation = function randomLocation(latLngsAarr) {\n  var coords = null;\n\n  if (latLngsAarr && latLngsAarr.length > 0) {\n    coords = (0, _random.randomArrayEl)(latLngsAarr);\n  } else {\n    coords = [_lodash[\"default\"].random(-180, 179, true), _lodash[\"default\"].random(-85, 85, true)];\n  }\n\n  var newPoint = (0, _turf.transformTranslate)((0, _turf.point)(coords), _lodash[\"default\"].random(0, 2, true), _lodash[\"default\"].random(0, 360, true), {\n    units: 'kilometers'\n  });\n  return newPoint.geometry.coordinates;\n};\n\nexports.randomLocation = randomLocation;\n\nvar FakeData = function FakeData(userPool, metaConfig, tagConfig) {\n  var _this = this;\n\n  _classCallCheck(this, FakeData);\n\n  _defineProperty(this, \"basicObj\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var createdUser = FakeData.userSummary(attribs.createdUser || (0, _random.randomArrayEl)(_this.userPool));\n    var updatedUser = FakeData.userSummary(attribs.updatedUser || createdUser);\n    return {\n      id: attribs.id || (0, _v[\"default\"])(),\n      createdBy: createdUser.id,\n      updatedBy: updatedUser.id,\n      createdUser: createdUser,\n      updatedUser: updatedUser,\n      createdOn: attribs.createdOn || fakePastDate(),\n      updatedOn: attribs.updatedOn || fakePastDate()\n    };\n  });\n\n  _defineProperty(this, \"getUser\", function (id) {\n    return _this.userPool.find(function (user) {\n      return user.id === id;\n    });\n  });\n\n  _defineProperty(this, \"series\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var basicAttribs = _this.basicObj(attribs);\n\n    var fakeWidth = 800 + _lodash[\"default\"].random(-3, 3);\n\n    var fakeHeight = 600 + _lodash[\"default\"].random(-3, 3);\n\n    var photoPlaceholderArr = attribs.numPhotos ? (0, _random2.filledArray)(attribs.numPhotos) : (0, _random.randomMap)(1, 10, function (val, idx) {\n      return idx;\n    });\n\n    var whichHighlight = _lodash[\"default\"].random(0, photoPlaceholderArr.length - 1);\n\n    var access = attribs.access || (0, _random.randomArrayEl)(['PRIVATE', 'OPEN', 'PUBLIC']);\n    var photos = attribs.photos || photoPlaceholderArr.map(function (val, idx) {\n      return _this.photo({\n        width: fakeWidth,\n        height: fakeHeight,\n        createdUser: access === 'OPEN' ? null : basicAttribs.createdUser,\n        updatedUser: access === 'OPEN' ? null : basicAttribs.updatedUser,\n        featured: idx === whichHighlight,\n        hasPaths: attribs.hasPaths !== false\n      });\n    });\n    photos.forEach(function (ph) {\n      ph.seriesId = basicAttribs.id;\n      ph.seriesCreatedBy = basicAttribs.createdBy;\n    });\n    var featured = attribs.featured;\n\n    if (!featured && photos && photos.length > 0) {\n      featured = !photos ? null : FakeData.photoSummary((0, _random.randomArrayEl)(photos));\n    }\n\n    var latest = attribs.featured;\n\n    if (!latest && photos && photos.length > 0) {\n      latest = !photos ? null : FakeData.photoSummary((0, _random.randomArrayEl)(photos));\n    }\n\n    return _objectSpread({}, basicAttribs, {\n      featured: featured,\n      latest: latest,\n      name: attribs.name || _faker[\"default\"].name.title(),\n      objType: 'SERIES',\n      access: access,\n      meta: JSON.stringify(attribs.meta || {\n        project: '926ff265-e22b-400d-ae00-a817d69d5042',\n        reach: '4f310e81-e1f8-45e7-9341-859e7f4e2208'\n      }),\n      watchers: 0,\n      note: attribs.nite || _faker[\"default\"].lorem.paragraphs(_lodash[\"default\"].random(3, 4)).replace('\\n', '\\n\\n'),\n      coords: attribs.coords || [-120.333379, 44.629701],\n      direction: attribs.direction || (0, _random.randomChance)(1, 2) ? _lodash[\"default\"].random(0, 359) : null,\n      photos: photos,\n      photoCount: photos.length\n    });\n  });\n\n  _defineProperty(this, \"event\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var _ref = attribs.series || _this.series(),\n        photos = _ref.photos,\n        series = _objectWithoutProperties(_ref, [\"photos\"]);\n\n    var photo = (0, _random.randomArrayEl)(photos);\n    return {\n      series: FakeData.seriesSummary(series),\n      photo: FakeData.photoSummary(photo),\n      relation: (0, _random.randomArrayEl)(EVENT_RELATIONS)\n    };\n  });\n\n  _defineProperty(this, \"photo\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var basic = _this.basicObj(attribs);\n\n    var templateObj = _objectSpread({}, basic, {\n      takenOn: basic.createdOn,\n      objType: 'PHOTO',\n      base64: null,\n      seriesId: attribs.seriesId || null,\n      seriesCreatedBy: attribs.seriesCreatedBy || null,\n      coords: attribs.coords || [-120.333379, 44.629701],\n      rawData: attribs.rawData || {\n        a: 1,\n        b: 2\n      },\n      note: attribs.note || _faker[\"default\"].lorem.paragraphs(_lodash[\"default\"].random(1, 4)),\n      meta: JSON.stringify(attribs.meta || {\n        user: '926ff265-e22b-400d-ae00-a817d69d5042'\n      }),\n      tags: attribs.tags || _this.tags({\n        width: attribs.width,\n        height: attribs.height\n      })\n    });\n\n    if (attribs.hasPaths) templateObj.paths = _this.getImagePaths(attribs.width || 800, attribs.height || 600);\n    return templateObj;\n  });\n\n  _defineProperty(this, \"getImagePaths\", function () {\n    var width = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 800;\n    var height = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 600;\n    var strict = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var newHeight = strict ? height : _lodash[\"default\"].random(-3, 3) + height;\n    var newWidth = strict ? width : _lodash[\"default\"].random(-3, 3) + width;\n    return {\n      base: \"https://placeimg.com/\".concat(newWidth, \"/\").concat(newHeight, \"/\"),\n      thumb: \"nature\",\n      medium: \"nature\",\n      large: \"nature\",\n      orig: \"nature\"\n    };\n  });\n\n  _defineProperty(this, \"tags\", function () {\n    var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return _this.appContext.tagConfig.reduce(function (acc, tagType) {\n      var pool = _lodash[\"default\"].shuffle(_toConsumableArray(tagType.values));\n\n      var newItems = (0, _random.randomMap)(1, pool.length, function (num, idt) {\n        return FakeData.tag({\n          label: pool[idt].label,\n          id: pool[idt].id,\n          typeId: tagType.id,\n          width: attribs.width,\n          height: attribs.height\n        });\n      });\n      return [].concat(_toConsumableArray(acc), _toConsumableArray(newItems));\n    }, []);\n  });\n\n  this.userPool = userPool || (0, _random.randomMap)(1, 10, function () {\n    return FakeData.user();\n  });\n  this.appContext = FakeData.fakeAppContext(metaConfig, tagConfig, this.userPool);\n};\n\n_defineProperty(FakeData, \"fakeAppContext\", function (metaConfig, tagConfig, userPool) {\n  var sampleUser = (0, _random.randomArrayEl)(userPool);\n  return {\n    metaConfig: metaConfig || {\n      user: {\n        objType: 'PHOTO',\n        label: 'User',\n        \"default\": sampleUser,\n        render: function render(key) {\n          return \"User 1: \".concat(sampleUser ? sampleUser.username : 'User 1');\n        }\n      }\n    },\n    currentUser: sampleUser,\n    getPhotoUrls: FakeData.getPhotoUrls,\n    onAvatarClick: function onAvatarClick(username) {\n      return console.log('onAvatarClick', username);\n    },\n    tagConfig: tagConfig || [FakeData.freeBothTags, FakeData.structureTags, FakeData.treeTags, FakeData.emotionTags, FakeData.seasonTags]\n  };\n});\n\n_defineProperty(FakeData, \"getPhotoUrls\", function _callee(photo, sizePriority) {\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n\n          if (!(!photo.paths || photo.paths.length === 0)) {\n            _context.next = 3;\n            break;\n          }\n\n          return _context.abrupt(\"return\", Promise.reject(new Error('No Photos Found')));\n\n        case 3:\n          console.log('FAKEDATA: resolving image');\n          return _context.abrupt(\"return\", sizePriority.map(function (sp) {\n            return \"\".concat(photo.paths.base).concat(photo.paths[sp]);\n          }));\n\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](0);\n          return _context.abrupt(\"return\", Promise.reject(_context.t0));\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 7]]);\n});\n\n_defineProperty(FakeData, \"photoSummary\", function (_ref2) {\n  var id = _ref2.id,\n      createdUser = _ref2.createdUser,\n      takenOn = _ref2.takenOn,\n      updatedOn = _ref2.updatedOn,\n      createdOn = _ref2.createdOn,\n      psid = _ref2.seriesId,\n      seriesCreatedBy = _ref2.seriesCreatedBy,\n      paths = _ref2.paths;\n  var templateObj = {\n    id: id,\n    createdUser: createdUser,\n    takenOn: takenOn,\n    updatedOn: updatedOn,\n    createdOn: createdOn,\n    seriesId: psid,\n    seriesCreatedBy: seriesCreatedBy,\n    paths: paths\n  };\n  return templateObj;\n});\n\n_defineProperty(FakeData, \"seriesSummary\", function (_ref3) {\n  var id = _ref3.id,\n      name = _ref3.name,\n      createdUser = _ref3.createdUser,\n      access = _ref3.access,\n      updatedOn = _ref3.updatedOn,\n      createdOn = _ref3.createdOn,\n      coords = _ref3.coords,\n      watchers = _ref3.watchers,\n      featured = _ref3.featured,\n      latest = _ref3.latest,\n      photoCount = _ref3.photoCount,\n      seriesStatus = _ref3.seriesStatus,\n      direction = _ref3.direction;\n  var templateObj = {\n    id: id,\n    name: name,\n    createdUser: createdUser,\n    access: access,\n    updatedOn: updatedOn,\n    createdOn: createdOn,\n    coords: coords,\n    watchers: watchers,\n    featured: featured,\n    latest: latest,\n    photoCount: photoCount,\n    seriesStatus: seriesStatus,\n    direction: direction\n  };\n  return templateObj;\n});\n\n_defineProperty(FakeData, \"userSummary\", function (_ref4) {\n  var id = _ref4.id,\n      gravatar = _ref4.gravatar,\n      gravatarProfile = _ref4.gravatarProfile,\n      username = _ref4.username;\n  return {\n    id: id,\n    gravatar: gravatar,\n    gravatarProfile: gravatarProfile,\n    username: username\n  };\n});\n\n_defineProperty(FakeData, \"tag\", function () {\n  var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    label: attribs.label,\n    id: attribs.id || (0, _v[\"default\"])(),\n    typeId: attribs.typeId,\n    xyCoords: attribs.width && attribs.height ? {\n      x: _lodash[\"default\"].random(20, attribs.width - 20),\n      y: _lodash[\"default\"].random(20, attribs.height - 20)\n    } : null\n  };\n});\n\n_defineProperty(FakeData, \"user\", function () {\n  var attribs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    id: (0, _v[\"default\"])(),\n    objType: 'USER',\n    createdOn: attribs.createdOn || fakePastDate(),\n    updatedOn: attribs.updatedOn || fakePastDate(),\n    username: attribs.username || \"\".concat(_faker[\"default\"].name.firstName(), \" \").concat(_faker[\"default\"].name.lastName()),\n    gravatar: attribs.avatarSrc || \"https://placeimg.com/\".concat(_lodash[\"default\"].random(80, 100), \"/\").concat(_lodash[\"default\"].random(80, 100), \"/people\"),\n    gravatarProfile: 'https://s.gravatar.com/b65e93508e1b7eae0af790ec9c65093b.json',\n    watching: [],\n    meta: JSON.stringify(attribs.meta || {})\n  };\n});\n\n_defineProperty(FakeData, \"_freeBothTagsValues\", ['Groovy', 'Elbow', 'Boat', 'Anchovy', 'Garden', 'Sunday', 'Green#$@324', 'Beaver Stuff', '234Little Things', 'Spaceship', 'SAG', '(  Am I Right?    )', '{{{{\"\\'STEREO\\'\"}}}}}', 'mytag', 'XYTAGS', 'Generation', 'Frogs', 'randomTag', 'Januarry 2005', '2018'].map(function (label, idx) {\n  return {\n    label: label,\n    id: (0, _v[\"default\"])(),\n    count: idx * 31 + _lodash[\"default\"].random(1, 20)\n  };\n}));\n\n_defineProperty(FakeData, \"freeBothTags\", {\n  id: 'freeBothType',\n  label: 'Anything Goes Tag',\n  color: tagColors[8],\n  allowXY: true,\n  allowNonXY: true,\n  allowAdditions: true,\n  values: FakeData._freeBothTagsValues\n});\n\n_defineProperty(FakeData, \"treeTags\", {\n  id: 'treetypes',\n  label: 'Tree Types',\n  color: tagColors[1],\n  allowXY: true,\n  allowNonXY: false,\n  allowAdditions: true,\n  values: ['Elm', 'Birch', 'Palm', 'Cottonwood', 'Oak'].map(function (label, idx) {\n    return {\n      label: label,\n      id: (0, _v[\"default\"])()\n    };\n  })\n});\n\n_defineProperty(FakeData, \"structureTags\", {\n  id: 'structures',\n  label: 'Structures',\n  color: tagColors[2],\n  allowXY: true,\n  allowNonXY: false,\n  allowAdditions: false,\n  values: (0, _random.randomMap)(10, 15, function (val, idx) {\n    return {\n      label: \"Structure-\".concat(idx),\n      id: (0, _v[\"default\"])()\n    };\n  })\n});\n\n_defineProperty(FakeData, \"emotionTags\", {\n  id: 'emotions',\n  label: 'Emotions',\n  color: tagColors[3],\n  allowXY: false,\n  allowNonXY: true,\n  allowAdditions: true,\n  values: ['Indignation', 'Anger', 'Confusion', 'Ambivalence', 'Cautious'].map(function (label, idx) {\n    return {\n      label: label,\n      id: (0, _v[\"default\"])()\n    };\n  })\n});\n\n_defineProperty(FakeData, \"seasonTags\", {\n  id: 'season',\n  label: 'Season',\n  color: tagColors[5],\n  allowXY: false,\n  allowNonXY: true,\n  allowAdditions: false,\n  values: ['Winter', 'Spring', 'Summer', 'Fall'].map(function (label, idx) {\n    return {\n      label: label,\n      id: (0, _v[\"default\"])()\n    };\n  })\n});\n\nvar _default = FakeData;\nexports[\"default\"] = _default;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nexport default require('./themes').default;\nexport var mapbox = require('./jss/mapbox.css').default;\nexport var roboto = require('./jss/typeface-roboto.css').default;\nexport var baseline = require('./jss/baseline.css').default;\nexport var globalStyle = {\n  '@global': _objectSpread({}, require('./jss/mapbox.css')['@global'], {}, require('./jss/typeface-roboto.css')['@global'])\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {};\n};\n\nvar useStyles = makeStyles(style);\n\nvar DeleteDialog = function DeleteDialog(_ref) {\n  var title = _ref.title,\n      message = _ref.message,\n      onConfirm = _ref.onConfirm,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    className: classes.root,\n    disableBackdropClick: true,\n    open: open,\n    disableEscapeKeyDown: true,\n    fullWidth: true,\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"confirmation-dialog-title\"\n  }, title), React.createElement(DialogContent, null, React.createElement(Typography, null, message)), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return onConfirm(false);\n    },\n    color: \"primary\"\n  }, \"No\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return onConfirm(true);\n    },\n    color: \"primary\"\n  }, \"Yes\")));\n};\n\nDeleteDialog.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  message: PropTypes.string.isRequired,\n  onConfirm: PropTypes.func.isRequired\n};\nexport default DeleteDialog;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {};\n};\n\nvar useStyles = makeStyles(style);\n\nvar CancelConfirm = function CancelConfirm(_ref) {\n  var title = _ref.title,\n      message = _ref.message,\n      onConfirm = _ref.onConfirm,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    className: classes.root,\n    disableBackdropClick: true,\n    fullWidth: true,\n    open: open,\n    disableEscapeKeyDown: true,\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"confirmation-dialog-title\"\n  }, title), React.createElement(DialogContent, null, React.createElement(Typography, null, message)), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return onConfirm(false);\n    },\n    color: \"primary\"\n  }, \"No\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return onConfirm(true);\n    },\n    color: \"secondary\"\n  }, \"Yes\")));\n};\n\nCancelConfirm.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  message: PropTypes.string.isRequired,\n  onConfirm: PropTypes.func.isRequired\n};\nexport default CancelConfirm;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Apple as AppleIcon } from '@morphoto/icons';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    icon: {\n      height: 50,\n      width: '100%',\n      margin: '0 auto',\n      color: theme.palette.error.main\n    },\n    title: {}\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar FeatureDisabled = function FeatureDisabled(_ref) {\n  var title = _ref.title,\n      message = _ref.message,\n      onClose = _ref.onClose,\n      open = _ref.open,\n      icon = _ref.icon;\n  var classes = useStyles();\n  var IconComp = icon || AppleIcon;\n  return React.createElement(Dialog, {\n    className: classes.root,\n    fullWidth: true,\n    open: open,\n    PaperProps: {\n      style: {\n        maxWidth: 'none'\n      }\n    },\n    onClose: onClose,\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    id: \"confirmation-dialog-title\",\n    className: classes.title\n  }, title), React.createElement(DialogContent, null, React.createElement(IconComp, {\n    className: classes.icon\n  }), React.createElement(Typography, {\n    component: \"div\"\n  }, message)), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: onClose,\n    color: \"primary\"\n  }, \"Ok\")));\n};\n\nFeatureDisabled.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  icon: PropTypes.any,\n  message: PropTypes.any,\n  onClose: PropTypes.func.isRequired\n};\nexport default FeatureDisabled;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport IconButton from '@material-ui/core/IconButton';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    body: {\n      overflow: 'hidden',\n      whiteSpace: 'pre-line',\n      paddingBottom: theme.spacing(1)\n    },\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      alignSelf: 'flex-start',\n      width: '100%',\n      margin: 0,\n      display: 'flex',\n      padding: theme.spacing(2)\n    },\n    dlgTitle: {\n      flexGrow: 1\n    },\n    closeButton: {\n      padding: 0,\n      alignSelf: 'flex-start'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar BigText = function BigText(_ref) {\n  var open = _ref.open,\n      onClose = _ref.onClose,\n      title = _ref.title,\n      body = _ref.body;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    scroll: \"paper\",\n    open: open,\n    fullWidth: true,\n    maxWidth: \"xl\",\n    onClose: onClose,\n    \"aria-labelledby\": \"simple-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    className: classes.title,\n    disableTypography: true\n  }, React.createElement(Typography, {\n    className: classes.dlgTitle\n  }, title), React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classes.closeButton,\n    onClick: onClose\n  }, React.createElement(CloseIcon, {\n    color: \"inherit\"\n  }))), React.createElement(DialogContent, null, React.createElement(Typography, {\n    variant: \"body2\",\n    className: classes.body\n  }, body)));\n};\n\nBigText.propTypes = {\n  open: PropTypes.bool,\n  onClose: PropTypes.func,\n  title: PropTypes.string,\n  body: PropTypes.string\n};\nexport default BigText;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    body: {},\n    textArea: {\n      whiteSpace: 'pre-line',\n      padding: theme.spacing(1),\n      border: \"1px solid \".concat(theme.palette.grey[200]),\n      background: theme.palette.grey[100]\n    },\n    dlgContent: {\n      overflow: 'hidden'\n    },\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      alignSelf: 'flex-start',\n      width: '100%',\n      margin: 0,\n      display: 'flex',\n      padding: theme.spacing(2)\n    },\n    closeButton: {\n      padding: 0,\n      alignSelf: 'flex-start'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar BigTextEdit = function BigTextEdit(_ref) {\n  var open = _ref.open,\n      onOk = _ref.onOk,\n      title = _ref.title,\n      body = _ref.body,\n      multiline = _ref.multiline;\n  var classes = useStyles();\n\n  var _useState = useState(body || ''),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  return React.createElement(Dialog, {\n    scroll: \"paper\",\n    open: open,\n    fullWidth: true,\n    maxWidth: \"xl\",\n    onClose: function onClose() {\n      return onOk(value);\n    }\n  }, React.createElement(DialogTitle, {\n    className: classes.title\n  }, title), React.createElement(DialogContent, {\n    className: classes.dlgContent\n  }, React.createElement(TextField, {\n    className: classes.body,\n    multiline: multiline,\n    inputProps: {\n      className: classes.textArea\n    },\n    autoFocus: true,\n    fullWidth: true,\n    rows: 6,\n    rowsMax: 6,\n    onChange: function onChange(e) {\n      return setValue(e.target.value);\n    },\n    defaultValue: body\n  })), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk(body);\n    }\n  }, \"Cancel\"), React.createElement(\"div\", {\n    style: {\n      flexGrow: 1\n    }\n  }), React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk(value);\n    }\n  }, \"Ok\")));\n};\n\nBigTextEdit.propTypes = {\n  open: PropTypes.bool,\n  multiline: PropTypes.bool,\n  onOk: PropTypes.func,\n  title: PropTypes.string,\n  body: PropTypes.string\n};\nexport default BigTextEdit;","export { default as DeleteDialog } from './DeleteDialog';\nexport { default as CancelConfirm } from './CancelConfirm';\nexport { default as FeatureDisabled } from './FeatureDisabled';\nexport { default as BigText } from './BigText';\nexport { default as BigTextEdit } from './BigTextEdit';","import _taggedTemplateLiteral from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject17() {\n  var data = _taggedTemplateLiteral([\"\\n  query s3Credentials($seriesId: ID!, $photoId: ID!, $ext: String!)  {\\n    s3Credentials(seriesId: $seriesId, photoId: $photoId, ext: $ext)\\n  }\\n\"]);\n\n  _templateObject17 = function _templateObject17() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject16() {\n  var data = _taggedTemplateLiteral([\"\\nquery getWholeSeries($id: ID!) {\\n  series(id: $id) {\\n    ...seriesFragment\\n    photos {\\n      ...photoFragment\\n    }\\n  }\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject16 = function _templateObject16() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject15() {\n  var data = _taggedTemplateLiteral([\"\\nquery userSearch($searchStr: String!, $limit: Int) {\\n  userSearch(searchStr: $searchStr, limit: $limit ){\\n    ...userFragment\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject15 = function _templateObject15() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject14() {\n  var data = _taggedTemplateLiteral([\"\\nquery myFeed($start: String, $end: String, $limit: Int) {\\n  myFeed(start: $start, end: $end, limit: $limit) @connection(key: \\\"myFeed\\\"){\\n    feed {\\n      _id\\n      series {\\n        ...seriesSummaryFragment\\n      }\\n      photo {\\n        ...photoSummaryFragment\\n      }\\n      relation\\n      __typename\\n    }\\n    window\\n    __typename\\n  }\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject14 = function _templateObject14() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject13() {\n  var data = _taggedTemplateLiteral([\"\\nquery geocode($search: String!) {\\n  geocoder(search: $search) {\\n    relevance\\n    text\\n    placeName\\n    bbox\\n    center\\n    # geoType\\n    # context\\n    __typename\\n  }\\n}\\n\"]);\n\n  _templateObject13 = function _templateObject13() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject12() {\n  var data = _taggedTemplateLiteral([\"\\nquery getUser($userId: ID) {\\n  user(id: $userId){\\n    ...userFragment\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject12 = function _templateObject12() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject11() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesInGeoBoundsIdOnly($bounds: [Float], $limit: Int, $nextToken: String) {\\n  seriesInGeoBounds(bounds: $bounds, limit: $limit, nextToken: $nextToken) @connection(key: \\\"seriesInGeoBoundsSHORT\\\", filter: [\\\"bounds\\\"]){\\n    seriesSummaries {\\n      id\\n      name\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\"]);\n\n  _templateObject11 = function _templateObject11() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesInGeoBounds($bounds: [Float], $limit: Int, $nextToken: String) {\\n  seriesInGeoBounds(bounds: $bounds, limit: $limit, nextToken: $nextToken) @connection(key: \\\"seriesInGeoBounds\\\", filter: [\\\"bounds\\\"]){\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\nquery tagSearch($limit: Int, $tag: String, $nextToken:  String) {\\n  tags(limit: $limit, tag: $tag, nextToken: $nextToken ){\\n    _id\\n    name\\n    count\\n    __typename\\n  }\\n}\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesWithTag($tag: String!, $limit: Int, $nextToken: String){\\n  tagSeries(tag: $tag, limit: $limit, nextToken: $nextToken)  @connection(key: \\\"tagSeries\\\", filter: [\\\"tag\\\"]){\\n    seriesSummaries{\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesFromList($seriesList: [ID]) {\\n  arraySeries(seriesIds: $seriesList) {\\n    ...seriesFragment\\n    photos {\\n      ...photoFragment\\n    }\\n  }\\n}\\n\", \"\\n\", \"\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\nquery seriesFromList($seriesList: [ID]) {\\n  arraySeries(seriesIds: $seriesList) {\\n    ...seriesSummaryFragment\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\nquery keywordSearch($searchStr: String, $limit: Int, $nextToken: String) {\\n  keywordSearch(searchStr: $searchStr, limit: $limit, nextToken: $nextToken) {\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\nquery userSeries($createdBy: ID) {\\n  userSeries(createdBy: $createdBy ) {\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\nquery pollQuery($lastCheck: String!, $limit: Int, $nextToken: String) {\\n  changedSeries(lastCheck: $lastCheck, limit: $limit, nextToken: $nextToken) @connection(key: \\\"changedSeries\\\"){\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\nquery allSeries($limit: Int, $nextToken: String) {\\n  allSeries(limit: $limit, nextToken: $nextToken) @connection(key: \\\"allSeries\\\"){\\n    seriesSummaries {\\n      ...seriesSummaryFragment\\n    }\\n    nextToken\\n    __typename\\n  }\\n}\\n\", \"\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\nquery init {\\n  init\\n}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport gql from 'graphql-tag';\nimport { photoSummaryFragment, photoFragment, seriesSummaryFragment, seriesFragment, userFragment } from './fragments';\nexport var initQuery = gql(_templateObject());\nexport var allSeries = gql(_templateObject2(), seriesSummaryFragment);\nexport var pollQuery = gql(_templateObject3(), seriesSummaryFragment);\nexport var userSeries = gql(_templateObject4(), seriesSummaryFragment);\nexport var keywordSearch = gql(_templateObject5(), seriesSummaryFragment);\nexport var seriesSummaryFromList = gql(_templateObject6(), seriesSummaryFragment);\nexport var seriesFromList = gql(_templateObject7(), seriesFragment, photoFragment);\nexport var seriesWithTag = gql(_templateObject8(), seriesSummaryFragment);\nexport var tagSearch = gql(_templateObject9());\nexport var geoSeries = gql(_templateObject10(), seriesSummaryFragment);\nexport var geoSeriesIdOnly = gql(_templateObject11());\nexport var getUser = gql(_templateObject12(), userFragment);\nexport var geocode = gql(_templateObject13());\nexport var getMyFeed = gql(_templateObject14(), seriesSummaryFragment, photoSummaryFragment);\nexport var userSearch = gql(_templateObject15(), userFragment);\nexport var getWholeSeries = gql(_templateObject16(), seriesFragment, photoFragment);\nexport var getNewS3Credentials = gql(_templateObject17());","import Satellite from './Satellite.json';\nimport TopoMap from './TopoMap.json';\nimport { Satellite as SatIcon, SatelliteOutlined, Terrain, TerrainOutlined } from '@material-ui/icons';\nexport default [{\n  toolTip: 'Sat',\n  Icon: SatelliteOutlined,\n  ActiveIcon: SatIcon,\n  color: 'green',\n  style: Satellite\n}, {\n  toolTip: 'Topo',\n  Icon: TerrainOutlined,\n  ActiveIcon: Terrain,\n  color: 'blue',\n  style: TopoMap\n}];","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      width: 1,\n      height: 1,\n      zIndex: 1\n    },\n    svgDot: {\n      width: 20,\n      height: 20,\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    svgAccuracyDot: {\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar MyLocation = function MyLocation(_ref) {\n  var position = _ref.position,\n      projection = _ref.projection;\n  var classes = useStyles();\n  var accuracy = 20;\n  var accHeight = projection.pixelsPerMeter[0] * accuracy;\n  var accWidth = projection.pixelsPerMeter[1] * accuracy;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"svg\", {\n    style: {\n      height: accHeight,\n      width: accWidth\n    },\n    className: classes.svgAccuracyDot,\n    version: \"1.1\",\n    viewBox: \"0, 0, 100, 100\"\n  }, React.createElement(\"circle\", {\n    cx: \"50\",\n    cy: \"50\",\n    r: 49,\n    stroke: \"#8888FF\",\n    fillOpacity: \"0.4\",\n    strokeWidth: \"1\",\n    fill: \"#AAAAFF\"\n  })), React.createElement(\"svg\", {\n    className: classes.svgDot,\n    version: \"1.1\",\n    viewBox: \"0, 0, 10, 10\"\n  }, React.createElement(\"circle\", {\n    cx: \"5\",\n    cy: \"5\",\n    r: \"4\",\n    stroke: \"#FFFFFF\",\n    strokeWidth: \"1\",\n    fill: \"#4444FF\"\n  })));\n};\n\nMyLocation.propTypes = {\n  position: PropTypes.object,\n  projection: PropTypes.object\n};\nexport default MyLocation;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport SpeedDial from '@material-ui/lab/SpeedDial';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      zIndex: 10,\n      position: 'absolute'\n    },\n    speedDialFab: {\n      border: '2px solid',\n      background: theme.palette.text.primary,\n      color: theme.palette.primary.contrastText,\n      width: 40,\n      height: 40\n    },\n    speedDialAction: {},\n    speedDialIcon: {},\n    speedDialLabel: {\n      background: 'black',\n      color: 'white'\n    },\n    actionsClosed: {\n      display: 'none'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar StyleButtons = function StyleButtons(_ref) {\n  var controlPadding = _ref.controlPadding,\n      currStyle = _ref.currStyle,\n      mapStyles = _ref.mapStyles,\n      setCurrStyle = _ref.setCurrStyle;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var noEventSetOpen = function noEventSetOpen(e, state) {\n    console.log('noEventSetOpen', e, state);\n    e.preventDefault();\n    e.stopPropagation();\n    setOpen(state);\n  };\n\n  if (!mapStyles || !Array.isArray(mapStyles) || mapStyles.length < 2 || !mapStyles[currStyle]) return null;\n  var currStyleObj = mapStyles[currStyle];\n  var ActiveIcon = currStyleObj.ActiveIcon;\n  return React.createElement(\"div\", {\n    className: classes.root,\n    style: {\n      top: controlPadding.top ? controlPadding.top : theme.spacing(2),\n      right: controlPadding.right ? controlPadding.right : theme.spacing(2)\n    }\n  }, mapStyles.length > 1 && React.createElement(SpeedDial, {\n    ariaLabel: \"SpeedDial\",\n    className: classes.speedDial,\n    classes: {\n      fab: classes.speedDialFab,\n      actionsClosed: classes.actionsClosed\n    },\n    icon: React.createElement(ActiveIcon, {\n      className: classes.icon\n    }),\n    onClick: function onClick(e) {\n      return noEventSetOpen(e, !open);\n    },\n    onClose: function onClose(e) {\n      return noEventSetOpen(e, false);\n    },\n    open: open,\n    direction: \"left\"\n  }, mapStyles.map(function (_ref2, idx) {\n    var Icon = _ref2.Icon,\n        ActiveIcon = _ref2.ActiveIcon,\n        toolTip = _ref2.toolTip;\n    return React.createElement(SpeedDialAction, {\n      key: \"stylebutton\".concat(idx),\n      icon: React.createElement(Icon, {\n        className: classes.speedDialIcon\n      }),\n      tooltipOpen: false,\n      tooltipPlacement: \"bottom\",\n      tooltipTitle: toolTip,\n      onClick: function onClick() {\n        setCurrStyle(idx);\n        setOpen(false);\n      }\n    });\n  })));\n};\n\nStyleButtons.propTypes = {\n  controlPadding: PropTypes.object,\n  currStyle: PropTypes.number,\n  mapStyles: PropTypes.array,\n  setCurrStyle: PropTypes.func\n};\nStyleButtons.defaultProps = {\n  controlPadding: {}\n};\nexport default StyleButtons;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Fab from '@material-ui/core/Fab';\nimport MyLocationIcon from '@material-ui/icons/MyLocation';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      border: '1px solid',\n      background: theme.palette.grey[100],\n      color: 'black',\n      width: 40,\n      height: 40,\n      zIndex: 10,\n      position: 'absolute'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar MyLocationButton = function MyLocationButton(_ref) {\n  var onClick = _ref.onClick,\n      controlPadding = _ref.controlPadding,\n      disabled = _ref.disabled;\n  var classes = useStyles();\n  var theme = useTheme();\n  return React.createElement(Fab, {\n    disabled: disabled,\n    style: {\n      top: 56 + (controlPadding.top ? controlPadding.top : theme.spacing(2)),\n      right: controlPadding.right ? controlPadding.right : theme.spacing(2)\n    },\n    \"aria-label\": \"myLocation\",\n    className: classes.root,\n    onClick: onClick\n  }, React.createElement(MyLocationIcon, null));\n};\n\nMyLocationButton.propTypes = {\n  controlPadding: PropTypes.object,\n  onClick: PropTypes.func.isRequired,\n  disabled: PropTypes.bool\n};\nexport default MyLocationButton;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useRef, useMemo, useEffect } from 'react';\nimport ReactMapGL, { NavigationControl, Marker, FlyToInterpolator } from 'react-map-gl';\nimport PropTypes from 'prop-types';\nimport { easeCubic } from 'd3-ease';\nimport WebMercatorViewport, { getDistanceScales } from 'viewport-mercator-project';\nimport mapStyles from './mapStyles';\nimport MyLocation from './markers/MyLocation';\nimport StyleButtons from './controls/StyleButtons';\nimport MyLocationButton from './controls/MyLocationButton';\nimport { useGeolocation, useComponentSize, config } from '@morphoto/client-common';\nimport { makeStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nvar useStyles = makeStyles(require('./BaseMap.style').default);\n\nvar BaseMap = function BaseMap(props) {\n  var classes = useStyles();\n\n  var showMe = props.showMe,\n      children = props.children,\n      mapStyles = props.mapStyles,\n      controlPadding = props.controlPadding,\n      initViewport = props.viewport,\n      bounds = props.bounds,\n      lockToBounds = props.lockToBounds,\n      lockPan = props.lockPan,\n      initStyle = props.initStyle,\n      incomingOnViewportChange = props.onViewportChange,\n      incomingOnTransitionStart = props.onTransitionStart,\n      incomingOnTransitionEnd = props.onTransitionEnd,\n      transitions = props.transitions,\n      onMapDataEvent = props.onMapDataEvent,\n      stylechooser = props.stylechooser,\n      passthroughProps = _objectWithoutProperties(props, [\"showMe\", \"children\", \"mapStyles\", \"controlPadding\", \"viewport\", \"bounds\", \"lockToBounds\", \"lockPan\", \"initStyle\", \"onViewportChange\", \"onTransitionStart\", \"onTransitionEnd\", \"transitions\", \"onMapDataEvent\", \"stylechooser\"]);\n\n  var mapContainerRef = useRef(null);\n  var mapBoxRef = useRef(null);\n  var innerTransitionsRef = useRef(null);\n\n  var _useComponentSize = useComponentSize(mapContainerRef),\n      size = _useComponentSize.size;\n\n  var _useState = useState(initStyle),\n      _useState2 = _slicedToArray(_useState, 2),\n      currStyle = _useState2[0],\n      setCurrStyle = _useState2[1];\n\n  var _useState3 = useState(_objectSpread({}, defaultViewVals, {}, initViewport)),\n      _useState4 = _slicedToArray(_useState3, 2),\n      viewport = _useState4[0],\n      setViewport = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isTransitioning = _useState6[0],\n      setIsTransitioning = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      projection = _useState8[0],\n      setProjection = _useState8[1];\n\n  var myPosition = {};\n  myPosition = useGeolocation();\n  var geoMarker = myPosition.latitude && myPosition.longitude ? React.createElement(Marker, {\n    key: \"myPos\",\n    className: \"myPosMarker\",\n    captureDrag: false,\n    latitude: myPosition.latitude,\n    longitude: myPosition.longitude,\n    style: {\n      zIndex: 1\n    }\n  }, React.createElement(MyLocation, {\n    position: myPosition,\n    projection: projection\n  })) : null;\n  useMemo(function () {\n    if (!size || size.width < 10 || size.height < 10) return;\n    if (mapStyles.length <= currStyle) setCurrStyle(initStyle);\n\n    try {\n      var _projection = getDistanceScales(viewport);\n\n      console.log('recalcProjection', {\n        projection: _projection,\n        size: size\n      });\n      setProjection(_projection);\n    } catch (e) {\n      console.error(e);\n    }\n  }, [viewport.zoom, size]);\n\n  var flyToMe = function flyToMe() {\n    if (!myPosition.latitude || !myPosition.longitude) return;\n    var transitionTime = 2000;\n    innerTransitionsRef.current = {\n      transitionDuration: transitionTime,\n      transitionInterpolator: new FlyToInterpolator(),\n      transitionEasing: easeCubic\n    };\n    setTimeout(function () {\n      if (innerTransitionsRef.current) innerTransitionsRef.current = null;\n    }, transitionTime);\n    setViewport(_objectSpread({}, viewport, {\n      latitude: myPosition.latitude,\n      longitude: myPosition.longitude,\n      zoom: viewport.zoom > 10 ? viewport.zoom : 12\n    }));\n  };\n\n  var _onViewportChange = function onViewportChange(viewportChange) {\n    var newViewport = _objectSpread({}, viewportChange);\n\n    if (bounds && lockToBounds) {\n      if (newViewport.longitude < bounds[0]) newViewport.longitude = bounds[0];else if (newViewport.longitude > bounds[2]) newViewport.longitude = bounds[2];\n      if (newViewport.latitude < bounds[1]) newViewport.latitude = bounds[1];else if (newViewport.latitude > bounds[3]) newViewport.latitude = bounds[3];\n    }\n\n    if (lockPan) {\n      newViewport.latitude = viewport.latitude;\n      newViewport.longitude = viewport.longitude;\n    }\n\n    if (!isTransitioning && typeof incomingOnViewportChange === 'function') {\n      incomingOnViewportChange({\n        viewport: newViewport,\n        size: size,\n        projection: projection,\n        map: mapBoxRef.current && mapBoxRef.current.getMap()\n      });\n    }\n\n    setViewport(newViewport);\n  };\n\n  var recalcZoomBounds = function recalcZoomBounds() {\n    if (!bounds || !size || size.width < 10 || size.height < 10 || isTransitioning) return;\n\n    var _bounds = _slicedToArray(bounds, 4),\n        minlng = _bounds[0],\n        minlat = _bounds[1],\n        maxlng = _bounds[2],\n        maxlat = _bounds[3];\n\n    try {\n      var _fitBounds = new WebMercatorViewport(_objectSpread({}, size, {}, viewport)).fitBounds([[minlng, minlat], [maxlng, maxlat]], {\n        padding: 40,\n        offset: [0, 0]\n      }),\n          longitude = _fitBounds.longitude,\n          latitude = _fitBounds.latitude,\n          zoom = _fitBounds.zoom;\n\n      setViewport(_objectSpread({}, viewport, {\n        longitude: longitude,\n        latitude: latitude,\n        zoom: zoom\n      }));\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  var handleTransitionStart = function handleTransitionStart() {\n    setIsTransitioning(true);\n    if (typeof incomingOnTransitionStart === 'function') incomingOnTransitionStart();\n  };\n\n  var handleTransitionEnd = function handleTransitionEnd() {\n    setIsTransitioning(false);\n    innerTransitionsRef.current = null;\n    if (incomingOnTransitionEnd) incomingOnTransitionEnd();\n\n    if (typeof incomingOnViewportChange === 'function') {\n      incomingOnViewportChange({\n        viewport: viewport,\n        size: size,\n        projection: projection,\n        map: mapBoxRef.current && mapBoxRef.current.getMap()\n      });\n    }\n  };\n\n  useMemo(recalcZoomBounds, [size, bounds]);\n  useEffect(function () {\n    setViewport(_objectSpread({}, viewport, {}, initViewport));\n  }, [initViewport]);\n  return React.createElement(\"div\", {\n    className: classNames(classes.mapContainer, props.className),\n    ref: mapContainerRef\n  }, size.height > 0 && size.width > 0 && React.createElement(ReactMapGL, _extends({}, viewport, innerTransitionsRef.current || transitions, {\n    ref: function ref(map) {\n      mapBoxRef.current = map;\n    },\n    height: size.height,\n    width: size.width,\n    mapStyle: currStyle < mapStyles.length ? mapStyles[currStyle].style : mapStyles[0].style,\n    onData: onMapDataEvent,\n    onTransitionStart: handleTransitionStart,\n    onTransitionEnd: handleTransitionEnd,\n    dragPan: !lockPan,\n    onViewportChange: _onViewportChange,\n    mapboxApiAccessToken: config.mapConfig.mapBoxToken\n  }, passthroughProps), children && Array.isArray(children) ? children.map(function (c, idx) {\n    return c ? React.cloneElement(handleChild(c, viewport, size.height, size.width, projection), {\n      key: \"mapChild-\".concat(idx)\n    }) : null;\n  }) : handleChild(children, viewport, size.height, size.width, projection), stylechooser && React.createElement(StyleButtons, {\n    controlPadding: controlPadding,\n    currStyle: currStyle,\n    mapStyles: mapStyles,\n    setCurrStyle: setCurrStyle\n  }), !props.hideNavControls && React.createElement(NavigationControl, {\n    onViewportChange: function onViewportChange(viewport) {\n      return _onViewportChange(_objectSpread({}, viewport, {}, size));\n    },\n    showZoom: !props.touchZoom === false && !props.scrollZoom === false,\n    showCompass: !props.touchRotate === false && !props.dragRotate === false\n  }), showMe && !lockPan && React.createElement(React.Fragment, null, geoMarker, React.createElement(MyLocationButton, {\n    disabled: !myPosition || !myPosition.latitude,\n    controlPadding: controlPadding,\n    onClick: flyToMe\n  }))));\n};\n\nBaseMap.propTypes = {\n  children: PropTypes.any,\n  data: PropTypes.array,\n  controlPadding: PropTypes.object,\n  showMe: PropTypes.bool,\n  className: PropTypes.string,\n  touchZoom: PropTypes.bool,\n  scrollZoom: PropTypes.bool,\n  touchRotate: PropTypes.bool,\n  dragRotate: PropTypes.bool,\n  transitions: PropTypes.object,\n  viewport: PropTypes.object,\n  initStyle: PropTypes.number,\n  stylechooser: PropTypes.bool,\n  lockPan: PropTypes.bool,\n  lockRotation: PropTypes.bool,\n  lockZoom: PropTypes.bool,\n  lockToBounds: PropTypes.bool,\n  hideNavControls: PropTypes.bool,\n  bounds: PropTypes.array,\n  mapStyles: PropTypes.array,\n  onMapDataEvent: PropTypes.func,\n  onViewportChange: PropTypes.func,\n  onTransitionStart: PropTypes.func,\n  onTransitionEnd: PropTypes.func\n};\nBaseMap.defaultProps = {\n  controlPadding: {},\n  stylechooser: true,\n  initStyle: 0,\n  lockToBounds: false,\n  mapStyles: mapStyles\n};\nexport default BaseMap;\nvar defaultViewVals = {\n  latitude: 49.3050394,\n  longitude: -123.1398254,\n  bearing: 0,\n  pitch: 0,\n  zoom: 12\n};\n\nfunction handleChild(child, viewport, height, width, projection) {\n  return typeof child === 'function' ? child(viewport, height, width, projection) : child;\n}","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect, useCallback } from 'react';\nimport uuid from 'uuid/v4';\nimport WebMercatorViewport from 'viewport-mercator-project';\nimport rbush from 'rbush';\nimport { point, centroid, featureCollection } from '@turf/turf';\nimport { util } from '@morphoto/common';\n\nvar useClusteredData = function useClusteredData(data, filterBounds, currentZoom, viewport, sizeScale, queryVersion, isTransitioning) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      clusteredData = _useState2[0],\n      setClusteredData = _useState2[1];\n\n  var _useState3 = useState({\n    single: [],\n    cluster: []\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      filteredData = _useState4[0],\n      setFilteredData = _useState4[1];\n\n  var updateDataDebounce = useCallback(util.debounce(\n  /*#__PURE__*/\n  _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var updatedData,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return updateData.apply(void 0, _args);\n\n          case 2:\n            updatedData = _context.sent;\n            setClusteredData(updatedData);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), 1000), []);\n  var filterDataDebounce = useCallback(util.debounce(\n  /*#__PURE__*/\n  _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    var filtered,\n        _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return filterData.apply(void 0, _args2);\n\n          case 2:\n            filtered = _context2.sent;\n            setFilteredData(filtered);\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })), 300), []);\n  useEffect(function () {\n    updateDataDebounce(data, sizeScale, viewport);\n  }, [data.length, queryVersion]);\n  useEffect(function () {\n    if (!isTransitioning) filterDataDebounce(clusteredData, filteredData, filterBounds, currentZoom);\n  }, [clusteredData, currentZoom, filterBounds, queryVersion, isTransitioning]);\n  return {\n    filteredClusteredData: filteredData\n  };\n};\n\nexport default useClusteredData;\n\nvar updateData = function updateData(data, sizeScale, viewport) {\n  if (!data) {\n    return [];\n  }\n\n  var tree = rbush(9, ['.x', '.y', '.x', '.y']);\n  var transform = new WebMercatorViewport(_objectSpread({}, viewport, {\n    zoom: 0\n  }));\n  var newData = data.map(function (p) {\n    var screenCoords = [0, 0];\n\n    try {\n      screenCoords = transform.project(p.coords);\n    } catch (e) {\n      console.error(e);\n    }\n\n    var longitude = p.longitude,\n        latitude = p.latitude,\n        properties = _objectWithoutProperties(p, [\"longitude\", \"latitude\"]);\n\n    return {\n      x: screenCoords[0],\n      y: screenCoords[1],\n      photoCount: properties.photoCount,\n      zoomLevels: [],\n      geoJSON: p.coords ? point(p.coords, _objectSpread({}, properties)) : null\n    };\n  });\n  tree.clear();\n  tree.load(newData);\n\n  var _loop = function _loop(z) {\n    var radius = sizeScale / Math.sqrt(2) / Math.pow(2, z);\n    newData.forEach(function (p) {\n      if (p.zoomLevels[z] === undefined) {\n        var x = p.x,\n            y = p.y;\n        var neighbors = tree.search({\n          minX: x - radius,\n          minY: y - radius,\n          maxX: x + radius,\n          maxY: y + radius\n        }).filter(function (neighbor) {\n          return neighbor.zoomLevels[z] === undefined;\n        });\n        neighbors.forEach(function (neighbor) {\n          if (neighbor === p) {\n            var newGeoJSON = neighbors.length === 1 ? p.geoJSON : centroid(featureCollection(neighbors.map(function (n) {\n              return n.geoJSON;\n            })));\n            newGeoJSON.properties = _objectSpread({}, newGeoJSON.properties, {\n              id: newGeoJSON.properties.id || uuid(),\n              count: neighbors.length,\n              reducedPhotoCount: neighbors.reduce(function (acc, _ref4) {\n                var photoCount = _ref4.photoCount;\n                return photoCount ? acc + photoCount : acc;\n              }, 0),\n              points: neighbors.map(function (n) {\n                return n.geoJSON;\n              })\n            });\n            p.zoomLevels[z] = newGeoJSON;\n          } else {\n            neighbor.zoomLevels[z] = null;\n          }\n        });\n      }\n    });\n  };\n\n  for (var z = 0; z <= 20; z++) {\n    _loop(z);\n  }\n\n  return newData.map(function (_ref3) {\n    var zoomLevels = _ref3.zoomLevels;\n    return zoomLevels;\n  });\n};\n\nfunction filterData(clusteredData, filteredData, filterBounds, newZ) {\n  return clusteredData.filter(function (d) {\n    return !!d[newZ];\n  }).reduce(function (acc, zoomLevels) {\n    var geoJSON = zoomLevels[newZ];\n    var coords = geoJSON.geometry.coordinates;\n    var count = geoJSON.properties.count;\n\n    if (!filterBounds || filterBounds.length < 4 || filterBounds[0] < coords[0] && filterBounds[1] < coords[1] && filterBounds[2] > coords[0] && filterBounds[3] > coords[1]) {\n      if (count > 1) acc.cluster.push(geoJSON);else acc.single.push(geoJSON);\n    }\n\n    return acc;\n  }, {\n    single: [],\n    cluster: []\n  });\n}","export default (function (theme) {\n  return {\n    root: {\n      position: 'relative',\n      height: '100%',\n      '& .myPosMarker': {\n        zIndex: 1\n      },\n      '& .singleMarker': {\n        zIndex: 3\n      },\n      '& .clusterMarker': {\n        zIndex: 2\n      }\n    },\n    fab: {\n      background: theme.palette.secondary.main,\n      color: theme.palette.secondary.contrastText\n    },\n    topBar: {\n      position: 'absolute',\n      zIndex: 100,\n      top: 0\n    },\n    loadingWrapper: {\n      position: 'absolute',\n      color: theme.palette.text.primary,\n      opacity: 0.5,\n      zIndex: 90,\n      textAlign: 'center',\n      top: '50%',\n      left: '50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    zoomOutFab: {\n      margin: theme.spacing(0.5),\n      padding: theme.spacing(0.5),\n      border: '2px solid',\n      borderRadius: theme.spacing(1),\n      background: theme.palette.common.white,\n      fontSize: 20,\n      position: 'absolute',\n      zIndex: 80,\n      bottom: theme.spacing(2),\n      right: theme.spacing(10)\n    },\n    selectedPopup: {\n      width: '90%',\n      maxWidth: 400,\n      zIndex: 100,\n      position: 'absolute',\n      bottom: theme.spacing(1),\n      left: '50%',\n      transformOrigin: '0% 50%',\n      transform: 'translateY(0%) translateX(-50%)'\n    }\n  };\n});","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ZoomOutMapIcon from '@material-ui/icons/ZoomOutMap';\nimport ViewListIcon from '@material-ui/icons/ViewList';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    listItemText: {\n      textAlign: 'center'\n    },\n    iconButton: {\n      background: theme.palette.grey[200]\n    },\n    compoundButton: {\n      textAlign: 'center'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar ClusterSelected = function ClusterSelected(_ref) {\n  var seriesCount = _ref.seriesCount,\n      reducedPhotoCount = _ref.reducedPhotoCount,\n      actions = _ref.actions;\n  var classes = useStyles();\n  console.log('cluster selected', {\n    seriesCount: seriesCount,\n    reducedPhotoCount: reducedPhotoCount\n  });\n  return React.createElement(List, null, React.createElement(ListItem, {\n    className: classes.root\n  }, React.createElement(ListItemIcon, null, React.createElement(\"div\", {\n    className: classes.compoundButton\n  }, React.createElement(IconButton, {\n    onClick: actions.onZoomTo,\n    className: classes.iconButton\n  }, React.createElement(ZoomOutMapIcon, null)), React.createElement(Typography, {\n    variant: \"caption\",\n    component: \"div\"\n  }, \"Zoom In\"))), React.createElement(ListItemText, {\n    className: classes.listItemText,\n    onClick: actions.onZoomTo,\n    primary: \"\".concat(seriesCount, \" Photo series\"),\n    secondary: \"containing \".concat(reducedPhotoCount, \" individual photo\").concat(reducedPhotoCount === 1 ? '' : 's')\n  }), React.createElement(ListItemIcon, null, React.createElement(\"div\", {\n    className: classes.compoundButton\n  }, React.createElement(IconButton, {\n    onClick: actions.onViewList,\n    className: classes.iconButton\n  }, React.createElement(ViewListIcon, null)), React.createElement(Typography, {\n    variant: \"caption\",\n    component: \"div\"\n  }, \"List\")))));\n};\n\nClusterSelected.propTypes = {\n  seriesCount: PropTypes.number.isRequired,\n  reducedPhotoCount: PropTypes.number.isRequired,\n  actions: PropTypes.shape({\n    onZoomTo: PropTypes.func.isRequired,\n    onViewList: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired\n  })\n};\nexport default ClusterSelected;","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Badge from '@material-ui/core/Badge';\nimport Avatar from '@material-ui/core/Avatar';\nimport Camera from '@material-ui/icons/Camera';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      color: theme.palette.primary.main,\n      width: 150,\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    rootActive: {\n      zIndex: 60\n    },\n    icon: {},\n    avatar: {\n      position: 'relative',\n      margin: '0 auto',\n      border: \"2px solid \".concat(theme.palette.text.primary),\n      height: 40,\n      width: 40,\n      zIndex: 61,\n      background: theme.palette.background.default,\n      color: theme.palette.text.primary\n    },\n    avatarActive: {\n      background: '#FFFF00',\n      color: 'black',\n      border: \"2px solid black\"\n    },\n    badge: {\n      zIndex: 62,\n      color: theme.palette.secondary.contrastText,\n      background: theme.palette.secondary.main,\n      transform: 'scale(1) translate(30%, -30%)'\n    },\n    badgeActive: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.main\n    },\n    directionIndicator: {\n      position: 'absolute',\n      top: 20,\n      left: '50%',\n      zIndex: 59\n    },\n    name: {\n      color: 'white',\n      fontWeight: 'bold',\n      textShadow: \"\\n        0px 0px 4px #000000, \\n        0px 0px 4px #000000 \\n    \",\n      zIndex: 60,\n      position: 'relative'\n    },\n    nameActive: {\n      color: 'black',\n      textShadow: \"\\n    0px 0px 2px #FFFFFF, \\n    0px 0px 2px #FFFFFF,\\n    0px 0px 4px #FFFFFF \\n\"\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar Single = function Single(_ref) {\n  var name = _ref.name,\n      onClick = _ref.onClick,\n      active = _ref.active,\n      photoCount = _ref.photoCount,\n      direction = _ref.direction;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classNames(classes.root, active ? classes.rootActive : null)\n  }, React.createElement(Badge, {\n    classes: {\n      badge: classNames(classes.badge, active ? classes.badgeActive : null)\n    },\n    badgeContent: photoCount\n  }, React.createElement(Avatar, {\n    className: classNames(classes.avatar, active ? classes.avatarActive : null),\n    onClick: onClick\n  }, React.createElement(Camera, {\n    className: classes.icon,\n    color: \"inherit\"\n  }))), direction && direction >= 0 ? React.createElement(\"div\", {\n    className: classes.directionIndicator\n  }, React.createElement(\"svg\", {\n    className: classes.svgArc,\n    version: \"1.1\",\n    width: \"100\",\n    height: \"100\",\n    viewBox: \"0, 0, 100, 100\",\n    style: {\n      transform: \"translateY(-50%) translateX(-50%) rotateZ(\".concat(direction, \"deg)\")\n    }\n  }, React.createElement(\"path\", {\n    d: \"M50,0 C60.946,0.151 72.136,3.514 80.675,10.56 L50,50 L19.325,10.56 C27.938,3.461 39,0.278 50,0 z\",\n    fill: \"#009DC1\",\n    fillOpacity: \"0.444\",\n    strokeWidth: \"1\",\n    strokeOpacity: \"0.6\",\n    stroke: \"#FFFFFF\"\n  }))) : null, React.createElement(Typography, {\n    variant: \"body1\",\n    className: classNames(classes.name, active ? classes.nameActive : null)\n  }, name));\n};\n\nSingle.propTypes = {\n  name: PropTypes.string,\n  photoCount: PropTypes.number,\n  onClick: PropTypes.func.isRequired,\n  direction: PropTypes.number,\n  active: PropTypes.bool\n};\nexport default Single;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Avatar from '@material-ui/core/Avatar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport numeral from 'numeral';\n\nvar style = function style(theme) {\n  return {\n    avatar: {\n      background: theme.palette.grey[900],\n      border: \"2px solid \".concat(theme.palette.grey[100]),\n      color: theme.palette.grey[100]\n    },\n    avatarActive: {\n      background: '#FFFF00',\n      border: \"2px solid black\",\n      color: 'black',\n      zIndex: 50\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar Cluster = function Cluster(_ref) {\n  var seriesCount = _ref.seriesCount,\n      active = _ref.active,\n      onClick = _ref.onClick;\n  var classes = useStyles();\n  return React.createElement(Avatar, {\n    onClick: onClick,\n    className: classNames(classes.avatar, active ? classes.avatarActive : null)\n  }, numeral(seriesCount).format('0,0'));\n};\n\nCluster.propTypes = {\n  seriesCount: PropTypes.number,\n  onClick: PropTypes.func.isRequired,\n  active: PropTypes.bool\n};\nexport default Cluster;","import _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useMemo, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { FlyToInterpolator, LinearInterpolator, Marker } from 'react-map-gl';\nimport { easeCubic } from 'd3-ease';\nimport { bbox, featureCollection, buffer, point } from '@turf/turf';\nimport Paper from '@material-ui/core/Paper';\nimport { CircularProgress } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { TopBarWrapper } from '@morphoto/navigation';\nimport { SearchInput } from '@morphoto/Search';\nimport { SeriesListItem, ViewListDialog } from '@morphoto/photoseries';\nimport BaseMap from './BaseMap';\nimport MapStyles from './mapStyles';\nimport useClusteredData from './lib/useClusteredData';\nimport style from './HomeMap.style';\nimport ClusterSelected from './ClusterSelected';\nimport SingleMarker from './markers/Single';\nimport ClusterMarker from './markers/Cluster';\nimport themes from '@morphoto/themes';\nvar useStyles = makeStyles(style);\nvar defaultView = {\n  zoom: 4,\n  latitude: 44.629701,\n  longitude: -120.333379\n};\nvar SIZESCALE = 80;\n\nvar HomeMap = function HomeMap(_ref) {\n  var seriesList = _ref.seriesList,\n      initViewport = _ref.initViewport,\n      loading = _ref.loading,\n      initialActiveSeries = _ref.initialActiveSeries,\n      queryVersion = _ref.queryVersion,\n      actions = _ref.actions;\n\n  var _useState = useState({\n    viewport: _objectSpread({}, defaultView, {}, initViewport.viewport),\n    bounds: initViewport.bounds,\n    filterBounds: null\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      mapViewObj = _useState2[0],\n      setMapViewObj = _useState2[1];\n\n  var classes = useStyles();\n  var mapViewRef = useRef();\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isTransitioning = _useState4[0],\n      setIsTransitioning = _useState4[1];\n\n  var homeMapContainerRef = useRef();\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentZoom = _useState6[0],\n      setCurrentZoom = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      showViewList = _useState8[0],\n      setShowViewList = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      transitions = _useState10[0],\n      setTransitions = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      selectedItem = _useState12[0],\n      setSelectedItem = _useState12[1];\n\n  var _useClusteredData = useClusteredData(seriesList || [], mapViewObj.filterBounds, currentZoom, mapViewObj.viewport, SIZESCALE, queryVersion, isTransitioning),\n      filteredClusteredData = _useClusteredData.filteredClusteredData;\n\n  useEffect(function () {\n    if (!initialActiveSeries || !seriesList || selectedItem) return;\n\n    try {\n      var selected = seriesList.find(function (s) {\n        return s.id === initialActiveSeries;\n      });\n\n      if (selected && selected.coords) {\n        var bufferPts = buffer(point(selected.coords), 10, {\n          units: 'meters'\n        });\n        var bounds = bbox(bufferPts);\n        setMapViewObj(_objectSpread({}, mapViewObj, {\n          bounds: bounds\n        }));\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }, [seriesList]);\n  useEffect(function () {\n    if (!initialActiveSeries || !filteredClusteredData.single || selectedItem) return;\n\n    try {\n      var selected = filteredClusteredData.single.find(function (s) {\n        return s.properties.id === initialActiveSeries;\n      });\n      if (selected && homeMapContainerRef.current) setSelectedItem(selected);\n    } catch (e) {\n      console.error(e);\n    }\n  }, [filteredClusteredData.single]);\n\n  var saveMap = function saveMap(delay) {\n    var _ref2 = mapViewRef.current ? mapViewRef.current : mapViewObj.viewport,\n        transitionDuration = _ref2.transitionDuration,\n        transitionInterpolator = _ref2.transitionInterpolator,\n        transitionInterruption = _ref2.transitionInterruption,\n        maxZoom = _ref2.maxZoom,\n        minZoom = _ref2.minZoom,\n        maxPitch = _ref2.maxPitch,\n        minPitch = _ref2.minPitch,\n        newView = _objectWithoutProperties(_ref2, [\"transitionDuration\", \"transitionInterpolator\", \"transitionInterruption\", \"maxZoom\", \"minZoom\", \"maxPitch\", \"minPitch\"]);\n\n    var saveObj = {\n      viewport: newView\n    };\n    if (!delay) actions.pushMapHistory(saveObj);else {\n      setTimeout(function () {\n        return actions.pushMapHistory(saveObj);\n      }, delay);\n    }\n  };\n\n  var updateSelectedItem = function updateSelectedItem(item) {\n    setSelectedItem(item);\n    if (item && item.properties.count === 1) actions.onSeriesMapSelect(item.properties.id);else actions.onSeriesMapSelect();\n    saveMap();\n  };\n\n  var _onZoomTo = function onZoomTo(object) {\n    try {\n      var pts = featureCollection(object.properties.points);\n      var bounds = bbox(pts);\n\n      if (bounds[0] === bounds[2] && bounds[1] === bounds[3]) {\n        var paddedPoint = buffer(point([bounds[0], bounds[1]]), 10, {\n          units: 'meters'\n        });\n        bounds = bbox(paddedPoint);\n      }\n\n      var lngBuff = (bounds[2] - bounds[0]) * 0.2;\n      var latBuff = (bounds[3] - bounds[1]) * 0.2;\n      var buffBounds = [bounds[0] - lngBuff, bounds[1] - latBuff, bounds[2] + lngBuff, bounds[3] + latBuff];\n      setTransitions({\n        transitionDuration: 2000,\n        transitionInterpolator: new FlyToInterpolator(),\n        transitionEasing: easeCubic\n      });\n      setMapViewObj(_objectSpread({}, mapViewObj, {\n        bounds: buffBounds\n      }));\n      if (object.properties.count > 1) setTimeout(function () {\n        return updateSelectedItem(null);\n      }, 2000);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  var onViewportChange = function onViewportChange(_ref3) {\n    var viewport = _ref3.viewport,\n        map = _ref3.map;\n    mapViewRef.current = viewport;\n    var viewZoom = Math.floor(viewport.zoom);\n\n    if (!isTransitioning && map && map.getBounds) {\n      var _map$getBounds = map.getBounds(),\n          _map$getBounds$_sw = _map$getBounds._sw,\n          minLng = _map$getBounds$_sw.lng,\n          minLat = _map$getBounds$_sw.lat,\n          _map$getBounds$_ne = _map$getBounds._ne,\n          maxLng = _map$getBounds$_ne.lng,\n          maxLat = _map$getBounds$_ne.lat;\n\n      var _ref4 = mapViewObj.filterBounds || [minLng, minLat, maxLng, maxLat],\n          _ref5 = _slicedToArray(_ref4, 4),\n          oldMinLng = _ref5[0],\n          oldMinLat = _ref5[1],\n          oldMaxLng = _ref5[2],\n          oldMaxLat = _ref5[3];\n\n      if (viewZoom !== currentZoom || oldMinLng >= minLng || oldMinLat >= minLat || oldMaxLng <= maxLng || oldMaxLat <= maxLat) {\n        var filterBounds = [minLng - (maxLng - minLng) / 2, minLat - (maxLat - minLat) / 2, maxLng + (maxLng - minLng) / 2, maxLat + (maxLat - minLat) / 2];\n        setMapViewObj(_objectSpread({}, mapViewObj, {\n          filterBounds: filterBounds\n        }));\n      }\n    }\n\n    if (viewZoom !== currentZoom) {\n      setCurrentZoom(viewZoom);\n    }\n  };\n\n  var lock = {};\n\n  var onMarkerClick = function onMarkerClick(obj) {\n    if (selectedItem && selectedItem.properties.id === obj.properties.id) {\n      _onZoomTo(selectedItem);\n    } else {\n      setTransitions({\n        transitionDuration: 500,\n        transitionInterpolator: new LinearInterpolator(),\n        transitionEasing: easeCubic\n      });\n      setMapViewObj({\n        viewport: {\n          longitude: obj.geometry.coordinates[0],\n          latitude: obj.geometry.coordinates[1]\n        }\n      });\n    }\n\n    updateSelectedItem(obj);\n  };\n\n  var markersRendered = useMemo(function () {\n    return [].concat(_toConsumableArray(filteredClusteredData.single.filter(function (obj) {\n      return !isTransitioning || selectedItem && selectedItem.properties.id === obj.properties.id;\n    }).map(function (obj) {\n      return React.createElement(Marker, {\n        className: 'singleMarker',\n        key: \"single-\".concat(obj.properties.id),\n        latitude: obj.geometry.coordinates[1],\n        longitude: obj.geometry.coordinates[0],\n        offsetLeft: 0,\n        offsetTop: -20\n      }, React.createElement(ThemeProvider, {\n        theme: themes.access[obj.properties.access]\n      }, React.createElement(SingleMarker, {\n        name: obj.properties.name,\n        photoCount: obj.properties.photoCount,\n        onClick: function onClick() {\n          return onMarkerClick(obj);\n        },\n        direction: currentZoom > 10 && obj.properties.direction ? obj.properties.direction : null,\n        active: selectedItem && selectedItem.properties.id === obj.properties.id\n      })));\n    })), _toConsumableArray(filteredClusteredData.cluster.filter(function (obj) {\n      return !isTransitioning || selectedItem && selectedItem.properties.id === obj.properties.id && selectedItem.properties.count === obj.properties.count;\n    }).map(function (obj) {\n      return React.createElement(Marker, {\n        className: \"clusterMarker\",\n        key: \"cluster-\".concat(obj.properties.id),\n        latitude: obj.geometry.coordinates[1],\n        longitude: obj.geometry.coordinates[0],\n        offsetLeft: -20,\n        offsetTop: -20\n      }, React.createElement(ClusterMarker, {\n        seriesCount: obj.properties.count,\n        photoCount: obj.properties.reducedPhotoCount,\n        onClick: function onClick() {\n          return onMarkerClick(obj);\n        },\n        active: selectedItem && selectedItem.properties.id === obj.properties.id && selectedItem.properties.count === obj.properties.count\n      }));\n    })));\n  }, [filteredClusteredData, selectedItem, isTransitioning]);\n  var selectedItemRender = useMemo(function () {\n    return !!selectedItem && React.createElement(Paper, {\n      className: classes.selectedPopup\n    }, selectedItem.properties.count === 1 ? React.createElement(SeriesListItem, {\n      series: selectedItem.properties,\n      showCreatedOn: true,\n      showLastPhoto: true,\n      onClick: function onClick() {\n        return actions.onSeriesNavigate(selectedItem.properties.id);\n      }\n    }) : React.createElement(ClusterSelected, {\n      seriesCount: selectedItem.properties.count,\n      reducedPhotoCount: selectedItem.properties.reducedPhotoCount,\n      actions: {\n        onViewList: function onViewList() {\n          return setShowViewList(true);\n        },\n        onClose: function onClose() {\n          return updateSelectedItem(null);\n        },\n        onZoomTo: function onZoomTo() {\n          return _onZoomTo(selectedItem);\n        }\n      }\n    }));\n  }, [selectedItem]);\n  return React.createElement(\"div\", {\n    className: classes.root,\n    ref: homeMapContainerRef\n  }, React.createElement(TopBarWrapper, {\n    isTransparent: true\n  }, React.createElement(SearchInput, {\n    isTransparent: true,\n    onClick: actions.onSearchClick,\n    defaultValue: ''\n  })), loading && React.createElement(\"div\", {\n    className: classes.loadingWrapper\n  }, React.createElement(CircularProgress, {\n    size: 80,\n    thickness: 7,\n    color: \"inherit\"\n  })), React.createElement(BaseMap, _extends({\n    showMe: true,\n    viewport: mapViewObj.viewport,\n    transitions: transitions,\n    mapStyles: MapStyles,\n    controlPadding: {\n      top: 56\n    },\n    initStyle: MapStyles.length > 1 ? 1 : 0\n  }, lock, {\n    onTransitionStart: function onTransitionStart() {\n      setIsTransitioning(true);\n    },\n    onTransitionEnd: function onTransitionEnd() {\n      setIsTransitioning(false);\n      setTransitions(null);\n    },\n    bounds: mapViewObj.bounds,\n    maxZoom: 20,\n    minZoom: 1,\n    onViewportChange: onViewportChange,\n    onNativeClick: function onNativeClick() {\n      if (selectedItem) updateSelectedItem(null);\n    }\n  }), markersRendered), selectedItem && selectedItem.properties.count > 1 && React.createElement(ViewListDialog, {\n    open: showViewList,\n    title: \"\".concat(selectedItem.properties.count, \" Series\"),\n    onClose: function onClose() {\n      return setShowViewList(false);\n    },\n    onSelect: actions.onSeriesNavigate,\n    seriesList: selectedItem.properties.points.map(function (p) {\n      return p.properties;\n    })\n  }), selectedItemRender);\n};\n\nHomeMap.propTypes = {\n  seriesList: PropTypes.array,\n  queryVersion: PropTypes.number,\n  initialActiveSeries: PropTypes.string,\n  initViewport: PropTypes.object,\n  loading: PropTypes.bool,\n  actions: PropTypes.shape({\n    onSearchClick: PropTypes.func,\n    onSeriesNavigate: PropTypes.func,\n    onSeriesMapSelect: PropTypes.func,\n    popMapHistory: PropTypes.func,\n    pushMapHistory: PropTypes.func,\n    clearMapHistory: PropTypes.func\n  })\n};\nexport default HomeMap;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useState, useRef, useMemo } from 'react';\nimport { StaticMap } from 'react-map-gl';\nimport PropTypes from 'prop-types';\nimport { getDistanceScales } from 'viewport-mercator-project';\nimport StyleButtons from './controls/StyleButtons';\nimport { useComponentSize, config } from '@morphoto/client-common';\nimport { makeStyles } from '@material-ui/core/styles';\nimport mapStyles from './mapStyles';\nimport classNames from 'classnames';\nvar useStyles = makeStyles(require('./BaseMap.style'));\n\nvar BaseStaticMap = function BaseStaticMap(props) {\n  var classes = useStyles();\n\n  var className = props.className,\n      controlPadding = props.controlPadding,\n      viewport = props.viewport,\n      children = props.children,\n      mapStyles = props.mapStyles,\n      onMapDataEvent = props.onMapDataEvent,\n      passthroughProps = _objectWithoutProperties(props, [\"className\", \"controlPadding\", \"viewport\", \"children\", \"mapStyles\", \"onMapDataEvent\"]);\n\n  var mapRef = useRef(null);\n  var mapBoxRef = useRef();\n\n  var _useComponentSize = useComponentSize(mapRef, {\n    width: 100,\n    height: 50\n  }),\n      size = _useComponentSize.size;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      currStyle = _useState2[0],\n      setCurrStyle = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      projection = _useState4[0],\n      setProjection = _useState4[1];\n\n  var recalcProjection = function recalcProjection() {\n    if (!size || size.width < 10 || size.height < 10) return;\n\n    try {\n      var _projection = getDistanceScales(viewport);\n\n      setProjection(_projection);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  if (!projection) recalcProjection();\n  useMemo(recalcProjection, [size]);\n  return React.createElement(\"div\", {\n    className: classNames(classes.baseStaticMap, className),\n    ref: mapRef,\n    style: {\n      height: '100%',\n      width: '100%'\n    }\n  }, React.createElement(StaticMap, _extends({}, viewport, {\n    height: size.height,\n    width: size.width,\n    mapStyle: mapStyles[currStyle].style,\n    onData: onMapDataEvent,\n    mapboxApiAccessToken: config.mapConfig.mapBoxToken\n  }, passthroughProps, {\n    ref: function ref(map) {\n      mapBoxRef.current = map;\n    }\n  }), mapStyles && mapStyles.length > 1 ? React.createElement(StyleButtons, {\n    controlPadding: controlPadding,\n    currStyle: currStyle,\n    mapStyles: mapStyles,\n    setCurrStyle: setCurrStyle\n  }) : null, children && Array.isArray(children) ? children.map(function (c) {\n    return handleChild(c, mapBoxRef, size.height, size.width, projection);\n  }) : handleChild(children, mapBoxRef, size.height, size.width, projection)));\n};\n\nfunction handleChild(child, mapBoxRef, height, width, projection) {\n  var viewport = {};\n  return typeof child === 'function' ? child(viewport, height, width, projection) : child;\n}\n\nBaseStaticMap.propTypes = {\n  children: PropTypes.any,\n  deckelements: PropTypes.array,\n  data: PropTypes.array,\n  controlPadding: PropTypes.object,\n  minPitch: PropTypes.number,\n  maxPitch: PropTypes.number,\n  pitch: PropTypes.number,\n  className: PropTypes.string,\n  viewport: PropTypes.object,\n  bounds: PropTypes.array,\n  zoomBounds: PropTypes.array,\n  InnerBounds: PropTypes.array,\n  mapStyles: PropTypes.array,\n  latitude: PropTypes.number,\n  longitude: PropTypes.number,\n  zoom: PropTypes.number,\n  onMapDataEvent: PropTypes.func\n};\nBaseStaticMap.defaultProps = {\n  controlPadding: {},\n  stylechooser: true,\n  initStyle: 0,\n  mapStyles: mapStyles\n};\nexport default BaseStaticMap;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      color: theme.palette.primary.main,\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)',\n      zIndex: 1\n    },\n    rootActive: {\n      zIndex: 60\n    },\n    svgDot: {\n      zIndex: 61,\n      width: 20,\n      height: 20,\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transformOrigin: '50% 50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    dot: {\n      stroke: theme.palette.secondary.contrastText,\n      strokeWidth: '1',\n      fill: theme.palette.secondary.main\n    },\n    directionIndicator: {\n      position: 'absolute',\n      left: '50%',\n      zIndex: 59\n    },\n    name: {\n      color: 'white',\n      fontWeight: 'bold',\n      textShadow: \"\\n        0px 0px 4px #000000, \\n        0px 0px 4px #000000 \\n    \",\n      zIndex: 60,\n      position: 'relative'\n    },\n    nameActive: {\n      color: theme.palette.secondary.dark,\n      textShadow: \"\\n    0px 0px 2px #FFFFFF, \\n    0px 0px 2px #FFFFFF,\\n    0px 0px 4px #FFFFFF \\n\"\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar Single = function Single(_ref) {\n  var direction = _ref.direction;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"svg\", {\n    className: classes.svgDot,\n    version: \"1.1\",\n    viewBox: \"0, 0, 10, 10\"\n  }, React.createElement(\"circle\", {\n    cx: \"5\",\n    cy: \"5\",\n    r: \"4\",\n    className: classes.dot\n  })), direction && direction >= 0 ? React.createElement(\"div\", {\n    className: classes.directionIndicator\n  }, React.createElement(\"svg\", {\n    className: classes.svgArc,\n    version: \"1.1\",\n    width: \"100\",\n    height: \"100\",\n    viewBox: \"0, 0, 100, 100\",\n    style: {\n      transform: \"translateY(-50%) translateX(-50%) rotateZ(\".concat(direction, \"deg)\")\n    }\n  }, React.createElement(\"path\", {\n    d: \"M50,0 C60.946,0.151 72.136,3.514 80.675,10.56 L50,50 L19.325,10.56 C27.938,3.461 39,0.278 50,0 z\",\n    fill: \"#009DC1\",\n    fillOpacity: \"0.444\",\n    strokeWidth: \"0.5\",\n    strokeOpacity: \"0.6\",\n    stroke: \"#FFFFFF\"\n  }))) : null);\n};\n\nSingle.propTypes = {\n  direction: PropTypes.number\n};\nexport default Single;","import _objectWithoutProperties from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Marker } from 'react-map-gl';\nimport BaseMap from './BaseMap';\nimport Dot from './markers/Dot';\nimport BaseStaticMap from './BaseStaticMap';\n\nvar MapDot = function MapDot(_ref) {\n  var staticMap = _ref.staticMap,\n      editable = _ref.editable,\n      latitude = _ref.latitude,\n      longitude = _ref.longitude,\n      onChange = _ref.onChange,\n      direction = _ref.direction,\n      props = _objectWithoutProperties(_ref, [\"staticMap\", \"editable\", \"latitude\", \"longitude\", \"onChange\", \"direction\"]);\n\n  var Map = staticMap ? BaseStaticMap : BaseMap;\n  var mapProps = staticMap ? {} : {\n    touchRotate: false,\n    dragRotate: false,\n    showMe: editable,\n    lockPan: !editable,\n    onViewportChange: onChange\n  };\n  return React.createElement(Map, _extends({}, mapProps, props), latitude && longitude ? React.createElement(Marker, {\n    className: 'singleMarker',\n    latitude: latitude,\n    longitude: longitude\n  }, React.createElement(Dot, {\n    direction: direction\n  })) : React.createElement(Dot, {\n    direction: direction\n  }));\n};\n\nMapDot.propTypes = {\n  direction: PropTypes.number,\n  latitude: PropTypes.number,\n  longitude: PropTypes.number,\n  editable: PropTypes.bool,\n  staticMap: PropTypes.bool,\n  onChange: PropTypes.func\n};\nexport default MapDot;","import { makeStyles } from '@material-ui/core/styles';\nexport default makeStyles(function (theme) {\n  return {\n    root: {\n      height: '100%',\n      display: 'flex',\n      overflow: 'hidden',\n      flexDirection: 'column'\n    },\n    rectContents: {\n      color: theme.palette.common.white,\n      textShadow: \"5px 6px 6px \".concat(theme.palette.common.black),\n      position: 'absolute',\n      padding: theme.spacing(2),\n      top: '50%',\n      left: '50%',\n      textAlign: 'center',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    areaLabel: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      width: '100%',\n      transform: 'translateY(-110%)'\n    },\n    rectContentsDownloading: {\n      textShadow: 'none',\n      color: theme.palette.primary.contrastText\n    },\n    rectIcon: {\n      position: 'absolute',\n      opacity: 0.4,\n      width: '50%',\n      height: '50%',\n      top: '50%',\n      left: '50%',\n      transform: 'translateY(-50%) translateX(-50%)'\n    },\n    tooBig: {\n      color: theme.palette.error.contrastText\n    },\n    tickText: {},\n    svgRect: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      zIndex: -1,\n      height: '100%',\n      width: '100%'\n    },\n    svgCutout: {\n      stroke: 'none',\n      fill: '#00000099'\n    },\n    svgBorder: {\n      fill: 'none',\n      stroke: 'none'\n    },\n    svgBorderNavigating: {\n      stroke: '#44444499'\n    },\n    svgBorderLocked: {\n      fill: '#66666666',\n      stroke: '#44444499'\n    },\n    svgBorderTooBig: {\n      opacity: 0.5,\n      fill: theme.palette.error.main,\n      stroke: theme.palette.error.dark\n    },\n    svgBorderDownloading: {\n      opacity: 0.7,\n      fill: theme.palette.primary.main,\n      stroke: '#44444499'\n    },\n    downloadingProgress: {},\n    downloadingProgressCircle: {\n      margin: theme.spacing(2)\n    },\n    snackError: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    mapWrapper: {\n      flex: '1 1',\n      overflow: 'hidden',\n      position: 'relative'\n    }\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useRef, useState, useCallback, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport AppBar from '@material-ui/core/AppBar';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport IconButton from '@material-ui/core/IconButton';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport LockIcon from '@material-ui/icons/Lock';\nimport SignalWifiOffIcon from '@material-ui/icons/SignalWifiOff';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { Button } from '@material-ui/core';\nimport { config } from '@morphoto/client-common';\nimport numeral from 'numeral';\nimport { util } from '@morphoto/common';\nimport BaseMap from './BaseMap';\nimport useStyles from './OfflineMap.style';\nexport var OFFLINE_STATES = {\n  LOCKED: 'Locked',\n  OFFLINE: 'Offline',\n  NAVIGATING: 'Navigating',\n  ERROR: 'Error',\n  DOWNLOADING: 'Downloading',\n  CANCELED: 'Canceled'\n};\n\nvar OfflineMap = function OfflineMap(_ref) {\n  var initViewport = _ref.initViewport,\n      progress = _ref.progress,\n      toolState = _ref.toolState,\n      actions = _ref.actions;\n  var classes = useStyles();\n  var mapWrapperRef = useRef();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      bounds = _useState2[0],\n      setBounds = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      viewState = _useState4[0],\n      setViewport = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      area = _useState6[0],\n      setArea = _useState6[1];\n\n  var tooBig = area > config.home.Offline.maxMapTileArea;\n\n  var classWithState = function classWithState(name) {\n    if (!toolState) return classes[name];else return classNames(classes[name], classes[\"\".concat(name).concat(toolState)], tooBig ? classes[\"\".concat(name, \"TooBig\")] : null);\n  };\n\n  var setGeoState = useCallback(util.debounce(function (newViewport, projection, rectSide) {\n    var longitude = newViewport.longitude,\n        latitude = newViewport.latitude;\n    var newArea = projection ? Math.abs(projection.metersPerPixel[0] * rectSide * projection.metersPerPixel[1] * rectSide / (1000 * 1000)) : 0;\n    var dx = rectSide / 2 * projection.degreesPerPixel[0];\n    var dy = rectSide / 2 * projection.degreesPerPixel[1];\n    var newBounds = [longitude - dx, latitude - dy, longitude + dx, latitude + dy];\n    if (newArea !== area) setArea(newArea);\n    if (newBounds !== bounds) setBounds(newBounds);\n    setViewport(newViewport);\n  }, 500), []);\n  var snack = null;\n\n  var onSnackClose = function onSnackClose() {};\n\n  var snackTimeout = null;\n\n  switch (toolState) {\n    case OFFLINE_STATES.NAVIGATING:\n      snack = tooBig ? null : React.createElement(SnackbarContent, {\n        className: classes.snack,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'Place the square around the area you wish to download for later use',\n        action: [React.createElement(Button, {\n          key: \"action1\",\n          color: \"inherit\",\n          disabled: area > config.home.Offline.maxMapTileArea,\n          onClick: function onClick() {\n            return actions.onStartDownload(bounds, viewState);\n          }\n        }, \"Start Download\")]\n      });\n      break;\n\n    case OFFLINE_STATES.DOWNLOADING:\n      snack = React.createElement(SnackbarContent, {\n        className: classes.snack,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'Downloading...',\n        action: [React.createElement(Button, {\n          key: \"action1\",\n          color: \"inherit\",\n          onClick: actions.onCancel\n        }, \"Cancel\")]\n      });\n      break;\n\n    case OFFLINE_STATES.LOCKED:\n      snack = React.createElement(SnackbarContent, {\n        className: classes.snack,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'This is the area you downloaded last',\n        action: [React.createElement(Button, {\n          key: \"action1\",\n          color: \"secondary\",\n          onClick: actions.onUnlock\n        }, \"Download a new Area\")]\n      });\n      break;\n\n    case OFFLINE_STATES.OFFLINE:\n      snack = React.createElement(SnackbarContent, {\n        className: classes.snack,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'You cannot download content when you are offline.'\n      });\n      break;\n\n    case OFFLINE_STATES.CANCELED:\n      snack = React.createElement(SnackbarContent, {\n        className: classes.snackError,\n        \"aria-describedby\": \"client-snackbar\",\n        message: 'Cancelling...'\n      });\n      onSnackClose = actions.onCancelComplete;\n      snackTimeout = 2000;\n      break;\n\n    default:\n      break;\n  }\n\n  var unlocked = toolState === OFFLINE_STATES.NAVIGATING;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: actions.onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Offline data manager\"))), React.createElement(\"div\", {\n    className: classes.mapWrapper,\n    ref: mapWrapperRef\n  }, React.createElement(BaseMap, {\n    hideNavControls: true,\n    showMe: unlocked,\n    dragPan: unlocked,\n    dragRotate: false,\n    scrollZoom: unlocked,\n    doubleClickZoom: false,\n    touchZoom: unlocked,\n    touchRotate: false,\n    viewport: initViewport\n  }, function (viewport, height, width, projection) {\n    var rectSide = Math.min(height, width) * 0.6;\n    var rectStyle = {\n      height: rectSide,\n      width: rectSide\n    };\n    var boxCorners = {\n      x: width / 2 - rectSide / 2,\n      y: height / 2 - rectSide / 2\n    };\n    var totalProgress = progress.tileTick && progress.seriesTick && progress.seriesPhotoTick ? [progress.tileTick[0] + progress.seriesTick[0] + progress.seriesPhotoTick[0], progress.tileTick[1] + progress.seriesTick[1] + progress.seriesPhotoTick[1]] : [0, 1];\n    if (totalProgress[1] === 0) totalProgress[1] = 1;\n    setGeoState(viewport, projection, rectSide);\n    return React.createElement(\"div\", {\n      style: {\n        height: height,\n        width: width\n      }\n    }, React.createElement(\"div\", {\n      className: classWithState('rectContents'),\n      style: rectStyle\n    }, toolState !== OFFLINE_STATES.DOWNLOADING && React.createElement(Typography, {\n      className: classNames(classes.areaLabel, tooBig ? classes.tooBig : null),\n      color: \"inherit\",\n      variant: \"h5\",\n      component: \"div\"\n    }, numeral(area).format('0,0'), \" km\\xB2\"), toolState === OFFLINE_STATES.NAVIGATING && !tooBig && React.createElement(CheckCircleOutlineIcon, {\n      className: classes.rectIcon,\n      color: \"inherit\",\n      onClick: function onClick() {\n        return actions.onStartDownload(bounds, viewState);\n      }\n    }), toolState === OFFLINE_STATES.NAVIGATING && tooBig ? React.createElement(\"div\", null, React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body1\",\n      component: \"div\"\n    }, \"> \", config.home.Offline.maxMapTileArea, \" km\\xB2\"), React.createElement(ErrorIcon, {\n      className: classes.rectIcon,\n      color: \"inherit\"\n    }), React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body2\",\n      component: \"div\"\n    }, \"Window too big. Try zooming in.\")) : null, toolState === OFFLINE_STATES.DOWNLOADING && React.createElement(\"div\", {\n      className: classes.downloadingProgress\n    }, React.createElement(Typography, {\n      className: \"areaLabel\",\n      color: \"inherit\",\n      variant: \"h5\"\n    }, \"Downloading...\"), React.createElement(CircularProgress, {\n      className: classes.downloadingProgressCircle,\n      variant: \"determinate\",\n      size: rectSide * 0.4,\n      thickness: rectSide * 0.013,\n      value: Math.floor(100 * totalProgress[0] / totalProgress[1]),\n      color: \"inherit\"\n    }), progress.tileTick && React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body1\",\n      component: \"div\"\n    }, \"Map Tiles: \", progress.tileTick[0], \" of \", progress.tileTick[1]), progress.seriesTick && React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body1\",\n      component: \"div\"\n    }, \"Series: \", progress.seriesTick[0], \" of \", progress.seriesTick[1]), progress.seriesPhotoTick && React.createElement(Typography, {\n      color: \"inherit\",\n      variant: \"body1\",\n      component: \"div\"\n    }, \"Series Photos: \", progress.seriesPhotoTick[0], \" of \", progress.seriesPhotoTick[1])), toolState === OFFLINE_STATES.LOCKED && React.createElement(\"div\", null, React.createElement(LockIcon, {\n      className: classes.rectIcon,\n      color: \"inherit\"\n    })), toolState === OFFLINE_STATES.OFFLINE && React.createElement(\"div\", null, React.createElement(SignalWifiOffIcon, {\n      className: classes.rectIcon,\n      color: \"inherit\"\n    }))), React.createElement(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      style: {\n        height: height,\n        width: width\n      }\n    }, React.createElement(\"defs\", null, React.createElement(\"path\", {\n      id: \"Triangle\",\n      d: \"M 16,0 L -8,9 v-18 z\",\n      fill: \"black\",\n      stroke: \"none\"\n    })), React.createElement(\"g\", {\n      fillRule: \"evenodd\",\n      className: classWithState('svgCutout')\n    }, React.createElement(\"path\", {\n      d: \"\\n                            M 0 0 L \".concat(width, \" \", 0, \" L \").concat(width, \" \").concat(height, \"  L \", 0, \" \").concat(height, \" Z\\n                             M \").concat(boxCorners.x, \" \").concat(boxCorners.y, \" \\n                             L \").concat(width - boxCorners.x, \" \").concat(boxCorners.y, \"\\n                             L \").concat(width - boxCorners.x, \" \").concat(height - boxCorners.y, \" \\n                             L \").concat(boxCorners.x, \" \").concat(height - boxCorners.y, \" Z\\n                             \")\n    })), React.createElement(\"g\", {\n      fillRule: \"evenodd\",\n      className: classWithState('svgBorder')\n    }, React.createElement(\"path\", {\n      d: \"\\n                             M \".concat(boxCorners.x, \" \").concat(boxCorners.y, \" \\n                             L \").concat(width - boxCorners.x, \" \").concat(boxCorners.y, \"\\n                             L \").concat(width - boxCorners.x, \" \").concat(height - boxCorners.y, \" \\n                             L \").concat(boxCorners.x, \" \").concat(height - boxCorners.y, \" Z\\n                             \")\n    }))));\n  }), snack && React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    open: true,\n    onClose: onSnackClose,\n    autoHideDuration: snackTimeout\n  }, snack)));\n};\n\nOfflineMap.propTypes = {\n  toolState: PropTypes.oneOf(Object.values(OFFLINE_STATES)),\n  initViewport: PropTypes.object,\n  progress: PropTypes.shape({\n    tileTick: PropTypes.array,\n    seriesTick: PropTypes.array,\n    seriesPhotoTick: PropTypes.array\n  }),\n  actions: PropTypes.shape({\n    onMenuBack: PropTypes.func.isRequired,\n    onStartDownload: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onCancelComplete: PropTypes.func.isRequired,\n    onUnlock: PropTypes.func.isRequired\n  })\n};\nexport default OfflineMap;","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Slider from '@material-ui/core/Slider';\nimport MapDot from './MapDot';\nimport { makeStyles } from '@material-ui/core/styles';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    dlgContent: {\n      display: 'flex',\n      flexDirection: 'column',\n      padding: 0\n    },\n    mapWrapper: {\n      flexGrow: 1\n    },\n    sliderWrapper: {\n      padding: '20px'\n    },\n    slider: {},\n    sliderRoot: {},\n    body: {\n      overflow: 'hidden',\n      whiteSpace: 'pre-line',\n      paddingBottom: theme.spacing(1)\n    },\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      margin: 0,\n      padding: theme.spacing(2)\n    },\n    closeButton: {\n      position: 'absolute',\n      right: theme.spacing(1),\n      top: theme.spacing(1),\n      color: theme.palette.grey[500]\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar MapDirPicker = function MapDirPicker(_ref) {\n  var open = _ref.open,\n      onOk = _ref.onOk,\n      onCancel = _ref.onCancel,\n      title = _ref.title,\n      initLat = _ref.latitude,\n      initLong = _ref.longitude,\n      initDir = _ref.direction;\n  var classes = useStyles();\n\n  var _useState = useState({\n    longitude: initLong,\n    latitude: initLat\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      _useState2$ = _useState2[0],\n      longitude = _useState2$.longitude,\n      latitude = _useState2$.latitude,\n      setCoords = _useState2[1];\n\n  var _useState3 = useState(initDir),\n      _useState4 = _slicedToArray(_useState3, 2),\n      direction = _useState4[0],\n      setRotation = _useState4[1];\n\n  var initViewport = useMemo(function () {\n    return {\n      zoom: 18,\n      latitude: initLat,\n      longitude: initLong\n    };\n  }, [initLat, initLong]);\n\n  var mapChange = function mapChange(_ref2) {\n    var _ref2$viewport = _ref2.viewport,\n        longitude = _ref2$viewport.longitude,\n        latitude = _ref2$viewport.latitude;\n    return setCoords({\n      longitude: longitude,\n      latitude: latitude\n    });\n  };\n\n  return React.createElement(Dialog, {\n    scroll: \"paper\",\n    open: open,\n    fullWidth: true,\n    fullScreen: true,\n    onClose: onCancel\n  }, React.createElement(DialogTitle, {\n    className: classes.title,\n    disableTypography: true\n  }, React.createElement(Typography, {\n    color: \"inherit\"\n  }, title)), React.createElement(DialogContent, {\n    className: classes.dlgContent\n  }, React.createElement(\"div\", {\n    className: classes.mapWrapper\n  }, React.createElement(MapDot, {\n    editable: true,\n    className: classes.map,\n    direction: direction > 0 ? direction : null,\n    viewport: initViewport,\n    onChange: mapChange\n  })), React.createElement(\"div\", {\n    className: classes.sliderWrapper\n  }, React.createElement(FormLabel, {\n    className: classes.mapFormLabel\n  }, \"Direction \", direction > -1 ? '' : '(off)'), React.createElement(Slider, {\n    classes: {\n      root: classes.sliderRoot\n    },\n    value: direction || -1,\n    min: -1,\n    max: 360,\n    step: 1,\n    onChange: function onChange(e, value) {\n      return setRotation(value);\n    }\n  }))), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: onCancel\n  }, \"Cancel\"), React.createElement(\"div\", {\n    style: {\n      flexGrow: 1\n    }\n  }), React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk({\n        coords: [longitude, latitude],\n        direction: direction\n      });\n    }\n  }, \"Ok\")));\n};\n\nMapDirPicker.propTypes = {\n  open: PropTypes.bool,\n  latitude: PropTypes.number,\n  longitude: PropTypes.number,\n  direction: PropTypes.number,\n  onOk: PropTypes.func,\n  onCancel: PropTypes.func,\n  title: PropTypes.string\n};\nexport default MapDirPicker;","export { default as HomeMap } from './HomeMap';\nexport { default as BaseMap } from './BaseMap';\nexport { default as BaseStaticMap } from './BaseStaticMap';\nexport { default as MapDot } from './MapDot';\nexport { default as OfflineMap, OFFLINE_STATES } from './OfflineMap';\nexport { default as MapDirPicker } from './MapDirPicker';\nexport { default as ClusterSelected } from './ClusterSelected';","export default require('./Slideshow').default;","export default require('./SwipeShow').default;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    imgContainer: {},\n    gravatarImg: {\n      objectFit: 'cover',\n      height: '100%',\n      width: '100%'\n    }\n  };\n});\n\nvar UserListItem = function UserListItem(_ref) {\n  var user = _ref.user,\n      loading = _ref.loading,\n      onAvatarClick = _ref.onAvatarClick,\n      secondary = _ref.secondary;\n  var classes = useStyles();\n  if (loading || !user) return 'LOADING...';\n  return React.createElement(ListItem, {\n    className: classes.root,\n    button: !!onAvatarClick,\n    onClick: onAvatarClick\n  }, React.createElement(ListItemAvatar, {\n    className: classes.imgContainer\n  }, React.createElement(Avatar, null, React.createElement(\"img\", {\n    alt: \"profile\",\n    className: classes.gravatarImg,\n    src: user.gravatar\n  }))), React.createElement(ListItemText, {\n    primary: user.username,\n    secondary: secondary\n  }));\n};\n\nUserListItem.propTypes = {\n  user: PropTypes.object,\n  loading: PropTypes.bool,\n  secondary: PropTypes.string,\n  onAvatarClick: PropTypes.func\n};\nexport default UserListItem;","import React from 'react';\nexport var SeriesContext = React.createContext({});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport classNames from 'classnames';\nimport { ThemeProvider } from '@material-ui/styles';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\nimport Paper from '@material-ui/core/Paper';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport { makeStyles } from '@material-ui/core/styles';\nimport themes from '@morphoto/themes';\nimport { TagChip } from '@morphoto/tags';\nimport { ShortLongText } from '@morphoto/ui';\nimport { BigText } from '@morphoto/modals';\nimport { dates, Tags as TagClass } from '@morphoto/common';\nimport { AppContext, config } from '@morphoto/client-common';\nimport UserListItem from '../UserListItem';\nimport { SeriesContext } from '../contexts';\nimport style from './SeriesInfo.style';\nvar useStyles = makeStyles(style);\nvar DIALOGS = {\n  NOTEVIEW: 'NOTEVIEW'\n};\n\nvar SeriesInfo = function SeriesInfo() {\n  var classes = useStyles();\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series;\n\n  var _useContext2 = useContext(AppContext),\n      tagConfig = _useContext2.tagConfig,\n      globalActions = _useContext2.globalActions;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      activeDialog = _useState2[0],\n      setActiveDialog = _useState2[1];\n\n  var tagInst = new TagClass(tagConfig);\n  var newTags = series.photos.reduce(function (acc, _ref) {\n    var tags = _ref.tags;\n    tags.forEach(function (tag) {\n      if (!acc[tag.typeId]) {\n        acc[tag.typeId] = _defineProperty({}, tag.label, _objectSpread({}, tag, {\n          count: 1\n        }));\n      } else if (acc[tag.typeId][tag.label]) {\n        var existing = acc[tag.typeId][tag.label];\n        acc[tag.typeId][tag.label] = _objectSpread({}, existing, {\n          count: existing.count + 1\n        });\n      } else acc[tag.typeId][tag.label] = _objectSpread({}, tag, {\n        count: 1\n      });\n    });\n    return acc;\n  }, {});\n  var metaKeys = [];\n\n  try {\n    metaKeys = series.meta ? Object.keys(JSON.parse(series.meta)) : [];\n  } catch (e) {\n    console.error(e);\n  }\n\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(\"div\", {\n    className: classes.field\n  }, React.createElement(FormLabel, {\n    className: classes.formLabel\n  }, \"Series Name\"), React.createElement(Typography, {\n    variant: \"body1\",\n    color: \"inherit\"\n  }, series.name)), series.note && React.createElement(ShortLongText, {\n    label: \"Series Note\",\n    text: series.note,\n    onClick: function onClick() {\n      return setActiveDialog(DIALOGS.NOTEVIEW);\n    }\n  }), React.createElement(Typography, {\n    className: classes.heading,\n    variant: \"subtitle1\"\n  }, \"Series Summary\"), React.createElement(Divider, null), React.createElement(ThemeProvider, {\n    theme: themes.access[series.access]\n  }, React.createElement(Paper, {\n    className: classNames(classes.access)\n  }, React.createElement(Typography, {\n    variant: \"subtitle1\"\n  }, \"Series is \".concat(config.ACCESS[series.access].label)), React.createElement(Typography, {\n    variant: \"caption\"\n  }, config.ACCESS[series.access].description))), React.createElement(List, {\n    className: classes.list,\n    dense: true\n  }, series.createdUser && React.createElement(UserListItem, {\n    user: series.createdUser,\n    onAvatarClick: function onAvatarClick() {\n      return globalActions.onAvatarClick(series.createdUser.username);\n    },\n    secondary: \"created this series\"\n  }), React.createElement(ListItem, null, React.createElement(ListItemAvatar, null, React.createElement(Avatar, {\n    className: classes.numPhotos\n  }, series.photos.length)), React.createElement(ListItemText, {\n    primary: series.photos.length > 1 ? 'Photos' : 'Photo',\n    secondary: series.photos.length > 0 && React.createElement(\"span\", null, dates.formatDate(series.photos[0].takenOn, 'LL'), React.createElement(\"span\", null, \"\\xA0\\xA0\"), \"to\", React.createElement(\"span\", null, \"\\xA0\\xA0\"), dates.formatDate(series.photos[series.photos.length - 1].takenOn, 'LL'))\n  })), React.createElement(ListItem, null, React.createElement(ListItemAvatar, null, React.createElement(Avatar, {\n    className: classes.watchers\n  }, series.watchers || '0')), React.createElement(ListItemText, {\n    primary: \"Users Watching\"\n  })), React.createElement(ListItem, null, React.createElement(ListItemText, null, React.createElement(FormLabel, {\n    className: classes.formLabel\n  }, \"Tags in use (across all photos)\"), React.createElement(Divider, null), Object.keys(newTags).length === 0 && React.createElement(Typography, {\n    variant: \"caption\"\n  }, \"No photos in this series have tags\"), Object.keys(newTags).map(function (tagKey, idtk) {\n    return React.createElement(\"div\", {\n      key: \"tagchipkey\".concat(idtk),\n      className: classes.tagListItem\n    }, React.createElement(Typography, {\n      className: classes.subheading,\n      variant: \"overline\"\n    }, tagInst.getTagType(tagKey).label), React.createElement(Divider, null), Object.values(newTags[tagKey]).length > 0 ? Object.values(newTags[tagKey]).map(function (tag, idx) {\n      return React.createElement(TagChip, {\n        key: \"tagchip-\".concat(idtk, \"-\").concat(idx),\n        tag: tag,\n        color: tagInst.getTagType(tagKey).color\n      });\n    }) : React.createElement(Typography, {\n      variant: \"caption\"\n    }, \"No photos in this series have tags\"));\n  })))), series.meta && metaKeys.length > 0 && Object.keys(series.meta).length > 0 && React.createElement(React.Fragment, null, React.createElement(FormLabel, {\n    className: classes.formLabel\n  }, \"Metadata\"), React.createElement(Divider, null), React.createElement(List, {\n    className: classes.list\n  }, metaKeys.map(function (key, idx) {\n    return series.meta[key] ? React.createElement(ListItem, {\n      key: \"metadata\".concat(idx)\n    }, React.createElement(ListItemText, {\n      primary: series.meta[key].label,\n      secondary: series.meta[key].render(series.meta[key])\n    })) : null;\n  }))), activeDialog === DIALOGS.NOTEVIEW && React.createElement(BigText, {\n    open: true,\n    multiline: true,\n    onClose: function onClose() {\n      return setActiveDialog(null);\n    },\n    title: \"Series Note\",\n    body: series.note\n  }));\n};\n\nSeriesInfo.propTypes = {};\nexport default SeriesInfo;","export default (function (theme) {\n  return {\n    root: {\n      margin: theme.spacing(1),\n      backgroundColor: theme.palette.background.paper,\n      paddingBottom: 60\n    },\n    field: {\n      marginBottom: theme.spacing(1)\n    },\n    list: {\n      padding: theme.spacing(1)\n    },\n    heading: {\n      marginTop: theme.spacing(1)\n    },\n    watchers: {},\n    numPhotos: {\n      backgroundColor: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    tagListItem: {\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(2)\n    },\n    chip: {\n      margin: theme.spacing(0.5)\n    },\n    access: {\n      padding: theme.spacing(1, 2)\n    }\n  };\n});","export default (function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      height: '100%',\n      flexDirection: 'column',\n      overflow: 'hidden'\n    },\n    appBar: {\n      flexGrow: 0\n    },\n    inner: {\n      position: 'relative',\n      flexGrow: 1,\n      overflowY: 'scroll',\n      '-webkit-overflow-scrolling': 'touch'\n    },\n    tabMenu: {\n      marginTop: theme.spacing(7)\n    },\n    mapWrap: {\n      position: 'absolute',\n      height: '100%',\n      width: '100%',\n      top: 0,\n      left: 0\n    },\n    toolbarTitle: {\n      flexGrow: 1,\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden'\n    },\n    AddFab: {\n      position: 'absolute',\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n      zIndex: 500\n    },\n    grow: {\n      flexGrow: 1\n    },\n    gridList: {\n      flexWrap: 'nowrap',\n      transform: 'translateZ(0)'\n    },\n    titleBar: {\n      display: 'flex',\n      padding: theme.spacing(1)\n    },\n    menuButton: {},\n    placeholderInner: {\n      position: 'relative',\n      flexGrow: 1,\n      overflow: 'hidden',\n      textAlign: 'center',\n      display: 'flex',\n      height: '100%',\n      flexDirection: 'column'\n    },\n    progressWrapper: {\n      textAlign: 'center',\n      marginBottom: theme.spacing(4)\n    },\n    placeholderText: {\n      opacity: 0.4\n    },\n    placeholder: {},\n    progress: {\n      color: theme.palette.grey[300]\n    }\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport AddCameraIcon from '@material-ui/icons/AddAPhoto';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport AddAlertIcon from '@material-ui/icons/AddAlert';\nimport SlideshowIcon from '@material-ui/icons/Slideshow';\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport PlaceIcon from '@material-ui/icons/Place';\nimport ShareIcon from '@material-ui/icons/Share';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { QRDisplay } from '@morphoto/camera';\nimport { PhotoGrid } from '@morphoto/photos';\nimport { DeleteDialog } from '@morphoto/modals';\nimport { AddFab, ContextMenu } from '@morphoto/ui';\nimport SwipeShow from '@morphoto/swipeshow';\nimport SeriesInfo from './SeriesInfo';\nimport { SeriesContext } from '../contexts';\nimport style from '../SeriesView.style';\nvar useStyles = makeStyles(style);\n\nvar SeriesView = function SeriesView(_ref) {\n  var onSlideshowStart = _ref.onSlideshowStart,\n      onChange = _ref.onChange,\n      onEditSeries = _ref.onEditSeries,\n      onDeletePhotos = _ref.onDeletePhotos,\n      onCameraAdd = _ref.onCameraAdd,\n      onDeleteSeries = _ref.onDeleteSeries,\n      onLibraryAdd = _ref.onLibraryAdd,\n      onTileClick = _ref.onTileClick,\n      onMenuBack = _ref.onMenuBack,\n      onWatch = _ref.onWatch,\n      onUnWatch = _ref.onUnWatch,\n      initialPhoto = _ref.initialPhoto,\n      onFindOnMap = _ref.onFindOnMap,\n      watching = _ref.watching,\n      owned = _ref.owned;\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      contextEl = _useState2[0],\n      setContextEl = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showQR = _useState4[0],\n      setShowQR = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      deleteConfirm = _useState6[0],\n      setDeleteConfirm = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      listTypeTab = _useState8[0],\n      setListTypeTab = _useState8[1];\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series,\n      ac = _useContext.ac;\n\n  var _useState9 = useState(initialPhoto),\n      _useState10 = _slicedToArray(_useState9, 2),\n      activePhotoId = _useState10[0],\n      setActivePhotoId = _useState10[1];\n\n  var onDeleteConfirm = function onDeleteConfirm(confirmation) {\n    setDeleteConfirm(false);\n    if (confirmation === true) onDeleteSeries(series.id);\n  };\n\n  var viewport = {\n    zoom: 16\n  };\n\n  if (series && series.coords && series.coords.length === 2) {\n    viewport.longitude = series.coords[0];\n    viewport.latitude = series.coords[1];\n  }\n\n  useEffect(function () {\n    if (series.photos.length > 0 && !series.photos.find(function (p) {\n      return p.id === activePhotoId;\n    })) setActivePhotoId(series.photos[series.photos.length - 1].id);\n  }, [series.photos]);\n  var activePhoto = series.photos && series.photos.find(function (p) {\n    return p.id === activePhotoId;\n  });\n  var can = {\n    update: ac.canUser('update', series, 'series', '*'),\n    delete: ac.canUser('delete', series, 'series', '*'),\n    contribute: ac.canUser('update', series, 'series', ['photos'])\n  };\n  var dialogOpen = deleteConfirm || showQR;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, series.name || 'Series'), React.createElement(IconButton, {\n    \"aria-haspopup\": \"true\",\n    color: \"inherit\",\n    onClick: function onClick(event) {\n      return setContextEl(event.currentTarget);\n    }\n  }, React.createElement(MoreIcon, null)), React.createElement(ContextMenu, {\n    anchorEl: contextEl,\n    onClose: function onClose() {\n      return setContextEl(null);\n    },\n    menuItems: [{\n      text: 'Find on map',\n      icon: PlaceIcon,\n      hide: !onFindOnMap,\n      action: onFindOnMap\n    }, {\n      text: 'Watch Series',\n      icon: AddAlertIcon,\n      hide: !onWatch || owned || watching,\n      action: onWatch\n    }, {\n      text: 'Unwatch Series',\n      icon: AddAlertIcon,\n      hide: !onUnWatch || owned || !watching,\n      action: onUnWatch\n    }, {\n      text: 'Share series',\n      icon: ShareIcon,\n      action: function action() {\n        return setShowQR(true);\n      }\n    }, {\n      text: 'Start Slideshow',\n      icon: SlideshowIcon,\n      hide: !onSlideshowStart,\n      action: onSlideshowStart\n    }, {\n      divider: true\n    }, {\n      text: 'Edit Series',\n      icon: EditIcon,\n      hide: !onEditSeries || !can.update,\n      action: onEditSeries\n    }, {\n      text: 'Delete Series',\n      icon: DeleteIcon,\n      hide: !setDeleteConfirm || !can.delete,\n      color: 'error',\n      action: function action() {\n        return setDeleteConfirm(true);\n      }\n    }]\n  })), React.createElement(Tabs, {\n    variant: \"fullWidth\",\n    value: listTypeTab,\n    onChange: function onChange(e, value) {\n      return setListTypeTab(value);\n    }\n  }, React.createElement(Tab, {\n    label: \"Series\"\n  }), React.createElement(Tab, {\n    label: \"Photos\"\n  }))), React.createElement(\"div\", {\n    className: classes.inner\n  }, listTypeTab === 0 && React.createElement(React.Fragment, null, series.photos && series.photos.length > 0 && React.createElement(SwipeShow, {\n    photos: series.photos,\n    activePhotoId: activePhotoId,\n    setActivePhotoId: setActivePhotoId,\n    onImageSelect: onTileClick\n  }), React.createElement(SeriesInfo, {\n    onChange: onChange\n  })), series.photos && listTypeTab === 1 && React.createElement(PhotoGrid, {\n    photos: series.photos,\n    onTileClick: onTileClick,\n    onDelete: onDeletePhotos,\n    allowDelete: can.delete\n  })), listTypeTab === 0 && can.contribute && React.createElement(AddFab, {\n    className: classes.AddFab,\n    disabled: !dialogOpen,\n    onCameraClick: onCameraAdd,\n    onLibraryClick: onLibraryAdd\n  }, React.createElement(AddCameraIcon, null)), activePhoto && React.createElement(QRDisplay, {\n    open: showQR,\n    onClose: function onClose() {\n      return setShowQR(false);\n    },\n    series: series,\n    photoId: activePhoto.id\n  }), React.createElement(DeleteDialog, {\n    open: deleteConfirm,\n    onConfirm: onDeleteConfirm,\n    title: \"Delete Series\",\n    message: \"Are you sure you want to delete this series? The record and all images associated with it will be gone forever.\"\n  }));\n};\n\nSeriesView.propTypes = {\n  initialPhoto: PropTypes.string,\n  watching: PropTypes.bool,\n  owned: PropTypes.bool,\n  onSlideshowStart: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onFindOnMap: PropTypes.func.isRequired,\n  onDeletePhotos: PropTypes.func.isRequired,\n  onDeleteSeries: PropTypes.func.isRequired,\n  onCameraAdd: PropTypes.func.isRequired,\n  onEditSeries: PropTypes.func.isRequired,\n  onLibraryAdd: PropTypes.func.isRequired,\n  onTileClick: PropTypes.func.isRequired,\n  onMenuBack: PropTypes.func.isRequired,\n  onWatch: PropTypes.func,\n  onUnWatch: PropTypes.func\n};\nexport default SeriesView;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport Typography from '@material-ui/core/Typography';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { MapDirPicker, MapDot } from '@morphoto/maps';\nimport { BigTextEdit } from '@morphoto/modals';\nimport { ShortLongText } from '@morphoto/ui';\nimport { config } from '@morphoto/client-common';\nimport style from './SeriesEditInner.style';\nvar useStyles = makeStyles(style);\nvar DIALOGS = {\n  MAPPICK: 'mapPicker',\n  NOTEEDIT: 'noteEdit'\n};\n\nvar SeriesEditInner = function SeriesEditInner(_ref) {\n  var series = _ref.series,\n      delta = _ref.delta,\n      _onChange = _ref.onChange;\n  var classes = useStyles();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      activeDialog = _useState2[0],\n      setActiveDialog = _useState2[1];\n\n  var viewport = {\n    zoom: 18\n  };\n  viewport.longitude = series.coords[0];\n  viewport.latitude = series.coords[1];\n\n  if (delta.coords && delta.coords.length === 2) {\n    viewport.longitude = delta.coords[0];\n    viewport.latitude = delta.coords[1];\n  }\n\n  var access = delta.access || series.access || 'PRIVATE';\n  var name = typeof delta.name === 'string' ? delta.name : series.name || '';\n  var note = typeof delta.note === 'string' ? delta.note : series.note || '';\n  var nameError = !name || name.length < 3;\n  return React.createElement(\"div\", null, React.createElement(TextField, {\n    label: \"Series Name \".concat(nameError ? '(Required)' : ''),\n    fullWidth: true,\n    error: nameError,\n    placeholder: \"New Series\",\n    className: classes.field,\n    value: name,\n    onChange: function onChange(e) {\n      return _onChange(_objectSpread({}, delta, {\n        name: e.target.value\n      }));\n    }\n  }), React.createElement(\"div\", {\n    className: classes.mapWrapper,\n    onClick: function onClick() {\n      return setActiveDialog(DIALOGS.MAPPICK);\n    }\n  }, React.createElement(FormLabel, {\n    className: classes.mapFormLabel\n  }, \"Location\"), React.createElement(\"div\", {\n    className: classes.mapInnerWrap\n  }, React.createElement(MapDot, {\n    staticMap: true,\n    className: classes.map,\n    direction: delta.direction || series.direction,\n    viewport: viewport\n  }))), React.createElement(\"div\", {\n    className: classes.field\n  }, React.createElement(FormLabel, null, \"Series Access\"), React.createElement(\"div\", {\n    className: classes.access\n  }, React.createElement(FormControlLabel, {\n    className: classes.accessRadio,\n    control: React.createElement(Switch, {\n      checked: ['OPEN', 'PUBLIC'].indexOf(access) > -1,\n      onChange: function onChange(e) {\n        _onChange(_objectSpread({}, delta, {\n          access: e.target.checked ? 'PUBLIC' : 'PRIVATE'\n        }));\n      },\n      value: 'PUBLIC'\n    }),\n    label: React.createElement(\"div\", null, React.createElement(Typography, {\n      variant: \"body2\",\n      component: \"div\"\n    }, config.ACCESS.PUBLIC.label), React.createElement(Typography, {\n      variant: \"caption\",\n      color: \"textSecondary\",\n      component: \"div\"\n    }, config.ACCESS.PUBLIC.description))\n  }), React.createElement(FormControlLabel, {\n    className: classes.accessRadio,\n    disabled: ['PRIVATE'].indexOf(access) > -1,\n    control: React.createElement(Switch, {\n      checked: ['OPEN'].indexOf(access) > -1,\n      onChange: function onChange(e) {\n        return _onChange(_objectSpread({}, delta, {\n          access: e.target.checked ? 'OPEN' : 'PUBLIC'\n        }));\n      },\n      value: 'OPEN'\n    }),\n    label: React.createElement(\"div\", null, React.createElement(Typography, {\n      variant: \"body2\",\n      component: \"div\"\n    }, config.ACCESS.OPEN.label), React.createElement(Typography, {\n      variant: \"caption\",\n      color: \"textSecondary\",\n      component: \"div\"\n    }, config.ACCESS.OPEN.description))\n  }))), React.createElement(ShortLongText, {\n    onClick: function onClick() {\n      return setActiveDialog(DIALOGS.NOTEEDIT);\n    },\n    className: classes.field,\n    label: \"Series Note\",\n    placeholder: 'Click to edit',\n    text: note\n  }), activeDialog === DIALOGS.MAPPICK && React.createElement(MapDirPicker, {\n    open: true,\n    title: \"Series Location & Direction\",\n    latitude: delta.latitude || series.coords[1],\n    longitude: delta.longitude || series.coords[0],\n    direction: delta.direction || series.direction,\n    onOk: function onOk(data) {\n      _onChange(_objectSpread({}, delta, {}, data));\n\n      setActiveDialog(null);\n    },\n    onCancel: function onCancel() {\n      return setActiveDialog(null);\n    }\n  }), activeDialog === DIALOGS.NOTEEDIT && React.createElement(BigTextEdit, {\n    open: true,\n    title: \"Series Note\",\n    body: note,\n    multiline: true,\n    onOk: function onOk(newNote) {\n      _onChange(_objectSpread({}, delta, {\n        note: newNote\n      }));\n\n      setActiveDialog(null);\n    },\n    onCancel: function onCancel() {\n      return setActiveDialog(null);\n    }\n  }));\n};\n\nSeriesEditInner.propTypes = {\n  series: PropTypes.object.isRequired,\n  delta: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nexport default SeriesEditInner;","export default (function (theme) {\n  return {\n    root: {},\n    inner: {\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    dlgTitle: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    access: {\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    accessRadio: {\n      margin: theme.spacing(2, 1)\n    },\n    grow: {\n      flexGrow: 1\n    },\n    field: {\n      flexGrow: 0,\n      marginBottom: theme.spacing(1) * 2\n    },\n    slider: {\n      paddingLeft: theme.spacing(1),\n      paddingRight: theme.spacing(1)\n    },\n    textField: {\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n      width: '100%'\n    },\n    formLabel: {\n      display: 'block',\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1)\n    },\n    mapFormLabel: {\n      display: 'block',\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1)\n    },\n    mapInnerWrap: {\n      flexGrow: 1,\n      height: '200px',\n      minHeight: '200px'\n    },\n    mapWrapper: {\n      flexGrow: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      paddingBottom: theme.spacing(1) * 2\n    },\n    formControl: {\n      margin: theme.spacing(1),\n      minWidth: 120\n    },\n    chips: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    }\n  };\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { SeriesContext } from '../contexts';\nimport style from './SeriesEdit.style';\nimport SeriesEditInner from './SeriesEditInner';\nvar useStyles = makeStyles(style);\n\nvar SeriesEdit = function SeriesEdit(_ref) {\n  var onOk = _ref.onOk,\n      onCancel = _ref.onCancel;\n  var classes = useStyles();\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      delta = _useState2[0],\n      setDelta = _useState2[1];\n\n  return React.createElement(Dialog, {\n    scroll: \"paper\",\n    className: classes.root,\n    fullScreen: true,\n    open: true,\n    onClose: onCancel\n  }, React.createElement(CssBaseline, null), React.createElement(DialogTitle, {\n    disableTypography: true,\n    className: classes.dlgTitle\n  }, React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.grow\n  }, \"Edit Series Details\")), React.createElement(DialogContent, {\n    className: classes.inner\n  }, React.createElement(SeriesEditInner, {\n    series: series,\n    delta: delta,\n    onChange: setDelta\n  })), React.createElement(DialogActions, null, React.createElement(Button, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: function onClick() {\n      return setDelta({});\n    },\n    \"aria-label\": \"Menu\"\n  }, \"Reset\"), React.createElement(Button, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onCancel,\n    \"aria-label\": \"Menu\"\n  }, \"Cancel\"), React.createElement(Button, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: function onClick() {\n      return onOk(_objectSpread({\n        id: series.id\n      }, delta));\n    },\n    \"aria-label\": \"Menu\"\n  }, \"Ok\")));\n};\n\nSeriesEdit.propTypes = {\n  onOk: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired\n};\nexport default SeriesEdit;","export default (function (theme) {\n  return {\n    root: {},\n    inner: {\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    dlgTitle: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText\n    },\n    grow: {\n      flexGrow: 1\n    },\n    field: {\n      flexGrow: 0,\n      marginBottom: theme.spacing(2)\n    },\n    slider: {\n      paddingLeft: theme.spacing(1),\n      paddingRight: theme.spacing(1)\n    },\n    textField: {\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n      width: '100%'\n    },\n    formLabel: {\n      display: 'block',\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1)\n    },\n    mapFormLabel: {\n      display: 'block',\n      marginTop: theme.spacing(1),\n      marginBottom: theme.spacing(1)\n    },\n    mapInnerWrap: {\n      flexGrow: 1\n    },\n    mapWrapper: {\n      flexGrow: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      paddingBottom: theme.spacing(2)\n    },\n    formControl: {\n      margin: theme.spacing(1),\n      minWidth: 120\n    },\n    chips: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    }\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useContext, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { TagView, TagEdit } from '@morphoto/tags';\nimport { DateControl, DateView, ShortLongText } from '@morphoto/ui';\nimport { Tags as TagClass } from '@morphoto/common';\nimport { AppContext } from '@morphoto/client-common';\nimport { BigTextEdit, BigText } from '@morphoto/modals';\nimport UserListItem from '../UserListItem';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      height: '90%',\n      width: '85%'\n    },\n    dlgTitleContainer: {\n      display: 'flex',\n      padding: 0\n    },\n    catTagTitle: {\n      marginTop: theme.spacing(2)\n    },\n    dlgTitle: {\n      flexGrow: 1,\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(1),\n      paddingLeft: theme.spacing(3)\n    },\n    field: {\n      marginBottom: theme.spacing(2)\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\nvar DIALOGS = {\n  NOTEEDIT: 'noteEdit',\n  NOTEVIEW: 'noteView',\n  PHOTOTAKEN: 'taken',\n  TAGEDIT: 'tag',\n  CANCEL: 'cancel'\n};\n\nvar PhotoInfo = function PhotoInfo(_ref) {\n  var canEdit = _ref.canEdit,\n      photo = _ref.photo,\n      delta = _ref.delta,\n      _onChange = _ref.onChange,\n      hideUser = _ref.hideUser;\n  var classes = useStyles();\n\n  var _useContext = useContext(AppContext),\n      tagConfig = _useContext.tagConfig;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      _useState2$ = _useState2[0],\n      activeDialog = _useState2$.activeDialog,\n      activeDialogContext = _useState2$.activeDialogContext,\n      setActiveDialog = _useState2[1];\n\n  var note = typeof delta.note === 'string' ? delta.note : photo.note || '';\n  var tagInst = new TagClass(tagConfig, delta.tags || photo.tags);\n  var metaKeys = [];\n\n  try {\n    metaKeys = photo.meta ? Object.keys(JSON.parse(photo.meta)) : [];\n  } catch (e) {\n    console.error(e);\n  }\n\n  return React.createElement(\"div\", null, !hideUser && photo.createdUser && React.createElement(React.Fragment, null, React.createElement(UserListItem, {\n    user: photo.createdUser,\n    secondary: \"uploaded this photo\"\n  }), React.createElement(Divider, null)), canEdit ? React.createElement(DateControl, {\n    className: classes.field,\n    label: \"Photo taken on\",\n    value: delta.takenOn || photo.takenOn,\n    onChange: function onChange(takenOn) {\n      return _onChange({\n        takenOn: takenOn\n      });\n    },\n    canEdit: canEdit\n  }) : React.createElement(DateView, {\n    label: \"Photo taken on\",\n    value: delta.takenOn || photo.takenOn\n  }), (canEdit || photo.note) && React.createElement(ShortLongText, {\n    label: \"Photo Note\",\n    placeholder: canEdit ? 'Click to edit' : 'None',\n    text: note,\n    onClick: function onClick() {\n      if (canEdit) setActiveDialog({\n        activeDialog: DIALOGS.NOTEEDIT\n      });else setActiveDialog({\n        activeDialog: DIALOGS.NOTEVIEW\n      });\n    }\n  }), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    className: classes.catTagTitle\n  }, \"Category tags\"), React.createElement(Divider, null), tagInst.getNonXYTagTypes().map(function (tt, idx) {\n    return React.createElement(\"div\", {\n      key: \"tagtype-\".concat(idx),\n      onClick: function onClick() {\n        return canEdit ? setActiveDialog({\n          activeDialog: DIALOGS.TAGEDIT,\n          activeDialogContext: tt\n        }) : null;\n      }\n    }, React.createElement(TagView, {\n      className: classes.field,\n      label: tt.label,\n      tags: delta.tags || photo.tags,\n      tagConfig: tt\n    }));\n  }), metaKeys.length > 0 && Object.keys(photo.meta).length > 0 && React.createElement(React.Fragment, null, React.createElement(Typography, {\n    className: classes.heading\n  }, \"Metadata\"), React.createElement(Divider, null), React.createElement(List, {\n    className: classes.list\n  }, metaKeys.map(function (key, idx) {\n    return photo.meta[key] ? React.createElement(ListItem, {\n      key: \"metadata\".concat(idx)\n    }, React.createElement(ListItemText, {\n      primary: photo.meta[key].label,\n      secondary: photo.meta[key].render(photo.meta[key])\n    })) : null;\n  }))), activeDialog && activeDialog === DIALOGS.NOTEEDIT && React.createElement(BigTextEdit, {\n    open: true,\n    multiline: true,\n    onOk: function onOk(note) {\n      _onChange({\n        note: note\n      });\n\n      setActiveDialog({});\n    },\n    title: \"Edit Photo Note\",\n    body: note\n  }), activeDialog && activeDialog === DIALOGS.NOTEVIEW && React.createElement(BigText, {\n    open: true,\n    multiline: true,\n    onClose: function onClose() {\n      return setActiveDialog({});\n    },\n    title: \"Photo Note\",\n    body: note\n  }), activeDialog && activeDialog === DIALOGS.TAGEDIT && React.createElement(TagEdit, {\n    open: true,\n    title: \"Edit Tags: \".concat(activeDialogContext.label),\n    onOk: function onOk(tags) {\n      setActiveDialog({});\n\n      _onChange({\n        tags: tags\n      });\n    },\n    onCancel: function onCancel() {\n      return setActiveDialog({});\n    },\n    tags: delta.tags || photo.tags,\n    tagConfig: activeDialogContext\n  }));\n};\n\nPhotoInfo.propTypes = {\n  canEdit: PropTypes.bool,\n  onChange: PropTypes.func.isRequired,\n  hideUser: PropTypes.bool,\n  photo: PropTypes.object.isRequired,\n  delta: PropTypes.object.isRequired\n};\nexport default PhotoInfo;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport IconButton from '@material-ui/core/IconButton';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Typography from '@material-ui/core/Typography';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { CancelConfirm } from '@morphoto/modals';\nimport PhotoInfoInner from './PhotoInfoInner';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      height: '90%',\n      width: '85%'\n    },\n    dlgTitleContainer: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.main,\n      display: 'flex',\n      padding: 0\n    },\n    dlgTitle: {\n      flexGrow: 1,\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(1),\n      paddingLeft: theme.spacing(3)\n    },\n    field: {\n      marginBottom: theme.spacing(2)\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\nvar DIALOGS = {\n  NOTEEDIT: 'noteEdit',\n  NOTEVIEW: 'noteView',\n  PHOTOTAKEN: 'taken',\n  TAGEDIT: 'tag',\n  CANCEL: 'cancel'\n};\n\nvar PhotoInfo = function PhotoInfo(_ref) {\n  var canEdit = _ref.canEdit,\n      photo = _ref.photo,\n      onCancel = _ref.onCancel,\n      onOk = _ref.onOk,\n      open = _ref.open;\n  var classes = useStyles();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      activeDialog = _useState2[0],\n      setActiveDialog = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      delta = _useState4[0],\n      setDelta = _useState4[1];\n\n  var dirty = delta && Object.keys(delta).length > 0;\n  return React.createElement(Dialog, {\n    fullScreen: true,\n    onClose: function onClose() {\n      if (dirty) setActiveDialog(DIALOGS.CANCEL);else onCancel();\n    },\n    \"aria-labelledby\": \"customized-dialog-title\",\n    open: open\n  }, React.createElement(DialogTitle, {\n    disableTypography: true,\n    className: classes.dlgTitleContainer\n  }, React.createElement(Typography, {\n    variant: \"h5\",\n    className: classes.dlgTitle\n  }, \"Photo Properties\"), React.createElement(IconButton, {\n    onClick: onCancel,\n    color: \"inherit\"\n  }, React.createElement(CloseIcon, null))), React.createElement(DialogContent, null, React.createElement(PhotoInfoInner, {\n    photo: photo,\n    delta: delta,\n    onChange: function onChange(newDelta) {\n      return setDelta(_objectSpread({}, delta, {}, newDelta));\n    },\n    canEdit: canEdit\n  })), React.createElement(DialogActions, null, !canEdit && React.createElement(Button, {\n    onClick: onCancel,\n    color: \"primary\"\n  }, \"Ok\"), canEdit && !dirty && React.createElement(Button, {\n    onClick: onCancel,\n    color: \"primary\"\n  }, \"Back\"), canEdit && dirty && React.createElement(React.Fragment, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return setActiveDialog(DIALOGS.CANCEL);\n    },\n    color: \"primary\"\n  }, \"Cancel\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return setDelta({});\n    },\n    color: \"primary\"\n  }, \"Reset\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return onOk(delta);\n    },\n    color: \"primary\"\n  }, \"Ok\"))), activeDialog && activeDialog === DIALOGS.CANCEL && React.createElement(CancelConfirm, {\n    open: true,\n    title: \"Lose unsaved changes?\",\n    message: \"You will lose any changes you made to this form\",\n    onConfirm: function onConfirm(confirm) {\n      setActiveDialog(null);\n      if (confirm) onCancel();\n    }\n  }));\n};\n\nPhotoInfo.propTypes = {\n  canEdit: PropTypes.bool,\n  onCancel: PropTypes.func.isRequired,\n  onOk: PropTypes.func.isRequired,\n  open: PropTypes.bool,\n  photo: PropTypes.object.isRequired\n};\nexport default PhotoInfo;","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport SwipeableViews from 'react-swipeable-views';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Button from '@material-ui/core/Button';\nimport MobileStepper from '@material-ui/core/MobileStepper';\nimport Typography from '@material-ui/core/Typography';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Badge from '@material-ui/core/Badge';\nimport Chip from '@material-ui/core/Chip';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport InfoIcon from '@material-ui/icons/Info';\nimport LabelIcon from '@material-ui/icons/Label';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport PhotoInfo from './PhotoInfo';\nimport { SeriesContext } from '../contexts';\nimport { Photo } from '@morphoto/photos';\nimport { AppContext } from '@morphoto/client-common';\nimport { dates, Tags as TagClass } from '@morphoto/common';\nimport style from './PhotoViewTool.style';\nvar useStyles = makeStyles(style);\nvar STATES = {\n  VIEWPIC: 0,\n  SHOWINFO: 1,\n  SHOWTAGS: 2,\n  EDITTAGS: 3,\n  FIRSTAGEDIT: 4\n};\n\nvar PhotoViewTool = function PhotoViewTool(_ref) {\n  var photoId = _ref.photoId,\n      photos = _ref.photos,\n      onMenuBack = _ref.onMenuBack,\n      onUpdatePhoto = _ref.onUpdatePhoto,\n      newPhoto = _ref.newPhoto;\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series,\n      ac = _useContext.ac;\n\n  var _useState = useState(photoId ? photos.findIndex(function (p) {\n    return p.id === photoId;\n  }) : 0),\n      _useState2 = _slicedToArray(_useState, 2),\n      activePhoto = _useState2[0],\n      setActivePhoto = _useState2[1];\n\n  var photo = photos[activePhoto];\n\n  var _useState3 = useState(newPhoto ? photo : {}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      delta = _useState4[0],\n      setDelta = _useState4[1];\n\n  var _useState5 = useState({\n    current: newPhoto ? STATES.FIRSTAGEDIT : STATES.VIEWPIC,\n    last: null\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      mode = _useState6[0],\n      setMode = _useState6[1];\n\n  var _useContext2 = useContext(AppContext),\n      tagConfig = _useContext2.tagConfig;\n\n  if (!photo) return null;\n  var tagsClass = new TagClass(tagConfig, delta.tags || photo.tags || []);\n\n  var changeMode = function changeMode(desired) {\n    setMode({\n      current: desired,\n      last: mode.current\n    });\n  };\n\n  var onCommitTags = function onCommitTags() {\n    changeMode(STATES.SHOWTAGS);\n    onUpdatePhoto(photo, _objectSpread({\n      id: photo.id\n    }, delta));\n  };\n\n  var onCommitTagsFirst = function onCommitTagsFirst() {\n    onUpdatePhoto(photo, _objectSpread({\n      id: photo.id\n    }, delta));\n    onMenuBack();\n  };\n\n  var onCancelTagEdit = function onCancelTagEdit() {\n    changeMode(STATES.SHOWTAGS);\n    setDelta(photo);\n  };\n\n  var photoClick = function photoClick(e) {\n    if (mode.current === STATES.VIEWPIC) {\n      e.preventDefault();\n      e.stopPropagation();\n      changeMode(STATES.SHOWINFO);\n    }\n  };\n\n  var can = {\n    update: ac.canUser('update', series, 'series') || ac.canUser('update', photo, 'photo')\n  };\n  if (!photo) return null;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(AppBar, {\n    position: \"static\",\n    className: classNames(classes.appBar, mode.current !== STATES.VIEWPIC ? classes.appBarEdit : null)\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, mode.current !== STATES.FIRSTAGEDIT && React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    \"aria-label\": \"Menu\",\n    onClick: function onClick() {\n      return onMenuBack();\n    }\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(\"div\", {\n    className: classes.grow\n  }, React.createElement(Typography, {\n    variant: \"subtitle2\",\n    color: \"inherit\"\n  }, newPhoto ? 'Add Tags' : \"Photo View (\".concat(activePhoto + 1, \"/\").concat(photos.length, \")\")), React.createElement(Typography, {\n    variant: \"subtitle2\",\n    color: \"inherit\"\n  }, dates.formatDate(photo.takenOn, 'lll'))), mode.current === STATES.EDITTAGS && React.createElement(Button, {\n    color: \"inherit\",\n    onClick: onCancelTagEdit\n  }, \"Cancel\"), mode.current === STATES.EDITTAGS && React.createElement(Button, {\n    color: \"inherit\",\n    onClick: onCommitTags\n  }, \"Save\"), mode.current === STATES.FIRSTAGEDIT && React.createElement(Button, {\n    color: \"inherit\",\n    onClick: onCommitTagsFirst\n  }, \"Next\"), can.update && mode.current === STATES.SHOWTAGS && React.createElement(Button, {\n    color: \"inherit\",\n    onClick: function onClick() {\n      return changeMode(STATES.EDITTAGS);\n    }\n  }, \"Edit\"), mode.current !== STATES.EDITTAGS && mode.current !== STATES.FIRSTAGEDIT && React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classNames(classes.tagButton, mode.current === STATES.SHOWTAGS && classes.activeButton),\n    onClick: function onClick() {\n      return changeMode(mode.current === STATES.SHOWTAGS ? STATES.VIEWPIC : STATES.SHOWTAGS);\n    }\n  }, React.createElement(Badge, {\n    className: classes.margin,\n    badgeContent: tagsClass.getXYTags().length,\n    color: \"primary\"\n  }, React.createElement(LabelIcon, {\n    color: \"inherit\"\n  }))), mode.current !== STATES.EDITTAGS && mode.current !== STATES.FIRSTAGEDIT && React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classNames(classes.infoButton, mode.current === STATES.SHOWINFO && classes.activeButton),\n    onClick: function onClick() {\n      return changeMode(mode.current === STATES.SHOWINFO ? STATES.VIEWPIC : STATES.SHOWINFO);\n    }\n  }, React.createElement(InfoIcon, null)))), React.createElement(\"div\", {\n    className: classes.inner\n  }, React.createElement(SwipeableViews, {\n    axis: theme.direction === 'rtl' ? 'x-reverse' : 'x',\n    index: activePhoto,\n    containerStyle: {\n      height: '100%'\n    },\n    style: {\n      height: '100%'\n    },\n    disabled: mode.current !== STATES.VIEWPIC,\n    onChangeIndex: function onChangeIndex(val) {\n      return setActivePhoto(val);\n    },\n    enableMouseEvents: true\n  }, photos.map(function (photoidx, idx) {\n    return React.createElement(\"div\", {\n      className: classes.photoWrapper,\n      key: \"swipeshowpic-\".concat(idx)\n    }, React.createElement(Photo, {\n      showTags: mode.current === STATES.SHOWTAGS,\n      photo: _objectSpread({}, photoidx, {}, delta),\n      edit: can.update && (mode.current === STATES.EDITTAGS || mode.current === STATES.FIRSTAGEDIT),\n      onChange: setDelta,\n      onCommitTags: onCommitTags\n    }));\n  })), mode.current === STATES.VIEWPIC && React.createElement(MobileStepper, {\n    steps: photos.length,\n    position: \"bottom\",\n    activeStep: activePhoto,\n    classes: {\n      root: classes.mobileStepper,\n      dots: classes.dots,\n      dot: classes.dot,\n      dotActive: classes.dotActive\n    }\n  })), React.createElement(PhotoInfo, {\n    open: mode.current === STATES.SHOWINFO,\n    photo: photo,\n    canEdit: can.update,\n    onOk: function onOk(newDelta) {\n      onUpdatePhoto(photo, _objectSpread({\n        id: photo.id\n      }, newDelta));\n      changeMode(mode.last);\n    },\n    onCancel: function onCancel() {\n      return changeMode(mode.last);\n    }\n  }), (mode.current === STATES.EDITTAGS || mode.current === STATES.FIRSTAGEDIT) && React.createElement(Chip, {\n    label: \"Tap to tag features...\",\n    onClick: function onClick() {},\n    className: classes.tipChip\n  }));\n};\n\nPhotoViewTool.propTypes = {\n  photoId: PropTypes.string.isRequired,\n  photos: PropTypes.array.isRequired,\n  newPhoto: PropTypes.bool,\n  onMenuBack: PropTypes.func.isRequired,\n  onUpdatePhoto: PropTypes.func.isRequired\n};\nexport default PhotoViewTool;","export default (function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      height: '100%',\n      flexDirection: 'column',\n      overflow: 'hidden'\n    },\n    appBar: {\n      flexGrow: 0\n    },\n    appBarEdit: {\n      color: theme.palette.secondary.contrastText,\n      background: theme.palette.secondary.main\n    },\n    grow: {\n      flexGrow: 1\n    },\n    photoWrapper: {\n      height: '100%'\n    },\n    inner: {\n      flex: '1 1',\n      position: 'relative'\n    },\n    tabMenu: {\n      marginTop: theme.spacing(7)\n    },\n    tipChip: {\n      position: 'absolute',\n      zIndex: 11,\n      bottom: 20,\n      left: '50%',\n      opacity: 0.6,\n      transform: 'translateX(-50%)'\n    },\n    mobileStepper: {\n      background: 'none'\n    },\n    dots: {\n      margin: '0 auto'\n    },\n    dot: {\n      border: '1px solid #FFFFFF77'\n    },\n    dotActive: {\n      background: theme.palette.secondary.main\n    },\n    activeButton: {\n      color: theme.palette.primary.main,\n      opacity: 1\n    }\n  };\n});","import _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Dialog from '@material-ui/core/Dialog';\nimport Divider from '@material-ui/core/Divider';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SeriesEditInner from './SeriesEditInner';\nimport PhotoInfoInner from './PhotoInfoInner';\nimport style from './NewPhotoInfo.style';\nvar useStyles = makeStyles(style);\n\nvar NewPhotoInfo = function NewPhotoInfo(_ref) {\n  var photo = _ref.photo,\n      newSeries = _ref.newSeries,\n      actions = _ref.actions;\n  var classes = useStyles();\n\n  var _useState = useState(newSeries || {}),\n      _useState2 = _slicedToArray(_useState, 2),\n      seriesDelta = _useState2[0],\n      setSeriesDelta = _useState2[1];\n\n  var _useState3 = useState(photo),\n      _useState4 = _slicedToArray(_useState3, 2),\n      photoDelta = _useState4[0],\n      setPhotoDelta = _useState4[1];\n\n  var validName = !newSeries || seriesDelta.name && seriesDelta.name.length >= 3;\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), \" \", React.createElement(Dialog, {\n    fullScreen: true,\n    scroll: \"paper\",\n    disableBackdropClick: true,\n    disableEscapeKeyDown: true,\n    onClose: actions.onCancel,\n    \"aria-labelledby\": \"customized-dialog-title\",\n    open: true\n  }, React.createElement(DialogTitle, {\n    disableTypography: true,\n    className: classes.dlgTitleContainer\n  }, React.createElement(Typography, {\n    variant: \"h5\",\n    className: classes.dlgTitle\n  }, newSeries ? 'New Series Details' : 'New Photo Details')), React.createElement(DialogContent, null, !!newSeries && React.createElement(SeriesEditInner, {\n    series: newSeries,\n    delta: seriesDelta,\n    onChange: setSeriesDelta\n  }), !!newSeries && React.createElement(\"div\", null, React.createElement(Typography, {\n    variant: \"h5\",\n    className: classes.photoTitle\n  }, \"New photo details\"), React.createElement(Divider, null)), React.createElement(PhotoInfoInner, {\n    photo: photo,\n    canEdit: true,\n    hideUser: true,\n    delta: photoDelta,\n    onChange: function onChange(newAttr) {\n      return setPhotoDelta(_objectSpread({}, photoDelta, {}, newAttr));\n    }\n  })), React.createElement(DialogActions, null, React.createElement(Button, {\n    onClick: actions.onCancel,\n    color: \"primary\"\n  }, \"Cancel\"), React.createElement(Button, {\n    onClick: function onClick() {\n      return actions.onSave(seriesDelta, photoDelta);\n    },\n    disabled: !validName,\n    color: \"primary\"\n  }, \"Next\"))));\n};\n\nNewPhotoInfo.propTypes = {\n  photo: PropTypes.object.isRequired,\n  newSeries: PropTypes.object,\n  actions: PropTypes.shape({\n    onCancel: PropTypes.func.isRequired,\n    onSave: PropTypes.func\n  })\n};\nexport default NewPhotoInfo;","export default (function (theme) {\n  return {\n    root: {},\n    formLabel: {\n      color: theme.palette.text.secondary\n    },\n    dlgTitleContainer: {\n      color: theme.palette.primary.contrastText,\n      background: theme.palette.primary.main\n    },\n    mapFormLabel: {\n      marginTop: theme.spacing(2),\n      marginBottom: theme.spacing(1),\n      color: theme.palette.text.secondary\n    },\n    map: {\n      marginBottom: theme.spacing(2)\n    },\n    mapWrapper: {\n      marginBottom: theme.spacing(2)\n    },\n    field: {\n      marginBottom: theme.spacing(2)\n    }\n  };\n});","import _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Button from '@material-ui/core/Button';\nimport Fab from '@material-ui/core/Fab';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport { makeStyles } from '@material-ui/core/styles';\nimport PhotoLibraryIcon from '@material-ui/icons/PhotoLibrary';\nimport { RawImage, PhotoGrid, PhotoFadeSlider } from '@morphoto/photos';\nimport { SeriesContext } from '../contexts';\nimport style from './PhotoReviewTool.style';\nvar useStyles = makeStyles(style);\n\nvar PhotoReviewTool = function PhotoReviewTool(_ref) {\n  var captured = _ref.captured,\n      defaultRefPhotoId = _ref.defaultRefPhotoId,\n      onConfirm = _ref.onConfirm,\n      onCancel = _ref.onCancel,\n      onRetry = _ref.onRetry,\n      dataUrl = _ref.dataUrl;\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series;\n\n  var photos = series && series.photos ? series.photos : null;\n  var classes = useStyles();\n  var newRefPhoto = defaultRefPhotoId ? photos.find(function (p) {\n    return p.id === defaultRefPhotoId;\n  }) : photos && photos.length > 0 ? photos[0] : null;\n\n  var _useState = useState(newRefPhoto),\n      _useState2 = _slicedToArray(_useState, 2),\n      refPhoto = _useState2[0],\n      setRefPhoto = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      drawerOpen = _useState4[0],\n      setDrawerOpen = _useState4[1];\n\n  var _useState5 = useState(100),\n      _useState6 = _slicedToArray(_useState5, 2),\n      slider = _useState6[0],\n      setSlider = _useState6[1];\n\n  var handleTileClick = function handleTileClick(id) {\n    setRefPhoto(series.photos.find(function (p) {\n      return p.id === id;\n    }));\n    setDrawerOpen(false);\n  };\n\n  if (!captured) return 'Loading...';\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), Boolean(refPhoto) && React.createElement(PhotoFadeSlider, {\n    className: classes.slider,\n    defaultValue: 100,\n    onChange: setSlider\n  }), React.createElement(\"div\", {\n    className: classes.captured\n  }, React.createElement(RawImage, {\n    sizePriority: ['large', 'medium', 'thumb'],\n    style: {\n      opacity: slider / 100\n    },\n    dataUrl: dataUrl,\n    photo: captured\n  })), Boolean(refPhoto) && React.createElement(\"div\", {\n    className: classes.reference\n  }, React.createElement(RawImage, {\n    sizePriority: ['large', 'medium', 'thumb'],\n    photo: refPhoto\n  })), React.createElement(Snackbar, {\n    open: true,\n    autoHideDuration: null,\n    ContentProps: {\n      'aria-describedby': 'snackbar-fab-message-id',\n      className: classes.snackbarContent\n    },\n    message: React.createElement(\"span\", {\n      id: \"snackbar-fab-message-id\"\n    }, \"Keep this photo?\"),\n    action: React.createElement(\"div\", null, React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: onCancel\n    }, \"Cancel\"), Boolean(onRetry) && React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: onRetry\n    }, \"Retry\"), React.createElement(Button, {\n      color: \"inherit\",\n      size: \"small\",\n      onClick: onConfirm\n    }, \"Keep\")),\n    className: classes.snackbar\n  }), series && series.photos && React.createElement(Fab, {\n    \"aria-label\": \"library\",\n    className: classNames(classes.libraryFab, classes.buttonFab),\n    classes: {\n      disabled: classes.disabledFab\n    },\n    disabled: !series || !series.photos || series.photos.length === 0,\n    onClick: function onClick() {\n      return setDrawerOpen(true);\n    }\n  }, React.createElement(PhotoLibraryIcon, {\n    className: classes.libraryIcon\n  })), series && series.photos && React.createElement(SwipeableDrawer, {\n    anchor: \"left\",\n    open: drawerOpen,\n    classes: {\n      paperAnchorLeft: classes.swipeDrawer\n    },\n    onClose: function onClose() {\n      return setDrawerOpen(false);\n    },\n    onOpen: function onOpen() {\n      return setDrawerOpen(true);\n    }\n  }, React.createElement(\"div\", {\n    tabIndex: 0,\n    className: classes.swipeDrawerContainer,\n    role: \"button\",\n    onClick: function onClick() {\n      return setDrawerOpen(false);\n    },\n    onKeyDown: function onKeyDown() {\n      return setDrawerOpen(false);\n    }\n  }, React.createElement(PhotoGrid, {\n    multiSelect: false,\n    columns: 1,\n    photos: series.photos,\n    onTileClick: handleTileClick\n  }))));\n};\n\nPhotoReviewTool.propTypes = {\n  defaultRefPhotoId: PropTypes.string,\n  captured: PropTypes.object,\n  dataUrl: PropTypes.string.isRequired,\n  onConfirm: PropTypes.func.isRequired,\n  onCancel: PropTypes.func.isRequired,\n  onRetry: PropTypes.func\n};\nexport default PhotoReviewTool;","export default (function (theme) {\n  return {\n    root: {\n      background: 'rgb(150,150, 150)',\n      height: '100%',\n      width: '100%'\n    },\n    captured: {\n      zIndex: 3,\n      position: 'absolute',\n      height: '100%',\n      width: '100%'\n    },\n    reference: {\n      zIndex: 2,\n      position: 'absolute',\n      height: '100%',\n      width: '100%'\n    },\n    libraryFab: {\n      position: 'absolute',\n      zIndex: 10,\n      '@media (orientation: landscape)': {\n        left: '15px',\n        top: '15px',\n        height: '15vh',\n        width: '15vh'\n      },\n      '@media (orientation: portrait)': {\n        left: '15px',\n        top: '15px',\n        height: '15vw',\n        width: '15vw'\n      }\n    },\n    slider: {\n      '@media (orientation: landscape)': {\n        position: 'absolute',\n        left: '0',\n        height: '79%',\n        top: '20%'\n      },\n      '@media (orientation: portrait)': {\n        position: 'absolute',\n        left: '0',\n        transform: 'translateY(-50%)',\n        height: '50%',\n        top: '45%'\n      }\n    },\n    swipeDrawer: {\n      width: '50%'\n    },\n    referenceTextContainer: {\n      width: '100%',\n      display: 'flex',\n      color: 'white',\n      background: 'rgba(0,0,0,0.5)',\n      padding: theme.spacing(3),\n      position: 'absolute',\n      zIndex: 4,\n      top: 0\n    },\n    newText: {\n      flexGrow: 1,\n      color: 'white',\n      textShadow: '1 1 1 black',\n      textAlign: 'right'\n    },\n    refText: {\n      flexGrow: 1,\n      color: 'white',\n      textShadow: '1 1 1 black'\n    }\n  };\n});","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { Series as SeriesClass, Photo as PhotoClass } from '@morphoto/common';\nimport { CameraTool } from '@morphoto/camera';\nimport NewPhotoInfo from './NewPhotoInfo';\nimport PhotoReviewTool from './PhotoReviewTool';\nimport { LibraryFilePicker } from '@morphoto/ui';\nimport { SeriesContext } from '../contexts';\nimport { AppContext, useDeviceOrientation, useGeolocation } from '@morphoto/client-common';\nexport var NEW_PHOTO_MODES = {\n  CAMERA: 'camera',\n  FILEPICKER: 'library',\n  PHOTOREVIEW: 'photoreview',\n  PHOTOINFOEDIT: 'photoinfoedit'\n};\n\nvar NewPhoto = function NewPhoto(_ref) {\n  var inputMethod = _ref.inputMethod,\n      isNewSeries = _ref.isNewSeries,\n      actions = _ref.actions;\n\n  var _useContext = useContext(SeriesContext),\n      series = _useContext.series,\n      device = _useContext.device;\n\n  var geoRef = useRef();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      newPhotoData = _useState2[0],\n      setNewPhotoData = _useState2[1];\n\n  var _useContext2 = useContext(AppContext),\n      metaConfig = _useContext2.metaConfig;\n\n  var _useState3 = useState(isNewSeries ? new SeriesClass(metaConfig).series : series),\n      _useState4 = _slicedToArray(_useState3, 2),\n      newSeries = _useState4[0],\n      setNewSeries = _useState4[1];\n\n  var _useState5 = useState(new PhotoClass(metaConfig).photo),\n      _useState6 = _slicedToArray(_useState5, 2),\n      newPhoto = _useState6[0],\n      setNewPhoto = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      photoRefId = _useState8[0],\n      setPhotoRefId = _useState8[1];\n\n  var _useState9 = useState({\n    current: inputMethod,\n    history: []\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      mode = _useState10[0],\n      _changeMode = _useState10[1];\n\n  var orientation = useDeviceOrientation();\n  var geo = useGeolocation();\n  geoRef.current = geo;\n  var photos = !isNewSeries && series && series.photos ? series.photos : [];\n\n  var changeMode = function changeMode(newModeName) {\n    console.log('NEWPHOTO changeMode', mode, newModeName);\n\n    _changeMode({\n      current: newModeName,\n      history: [].concat(_toConsumableArray(mode.history), [mode.current])\n    });\n  };\n\n  var lastMode = function lastMode() {\n    if (mode.history.length > 0) {\n      var oldHistory = _toConsumableArray(mode.history);\n\n      var oldMode = oldHistory.pop();\n\n      _changeMode({\n        current: oldMode,\n        history: oldHistory\n      });\n    } else {\n      actions.onCancel();\n    }\n  };\n\n  var onLibraryAdd =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(data) {\n      var _data$exif, exif, exifDateTime, exifGPS, coords, date, _geoRef$current, latitude, longitude, _newPhoto;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log('onLibraryAdd Debug GOT DATA', {\n                data: data,\n                isNewSeries: isNewSeries\n              });\n              setNewPhotoData(data);\n              _data$exif = data.exif, exif = _data$exif.exif, exifDateTime = _data$exif.exifDateTime, exifGPS = _data$exif.exifGPS;\n              coords = exifGPS;\n              console.log('EXIF Debug', {\n                exif: exif,\n                exifDateTime: exifDateTime,\n                exifGPS: exifGPS\n              });\n              date = exifDateTime || String(Date.now());\n\n              if (!coords) {\n                if (geoRef.current && geoRef.current.latitude && geoRef.current.longitude) {\n                  _geoRef$current = geoRef.current, latitude = _geoRef$current.latitude, longitude = _geoRef$current.longitude;\n                  coords = [longitude, latitude];\n                } else {\n                  coords = [-123.1398254, 49.3050394];\n                }\n              }\n\n              if (isNewSeries) setNewSeries(_objectSpread({}, newSeries, {\n                coords: coords\n              }));\n              _newPhoto = _objectSpread({}, newPhoto, {\n                takenOn: date,\n                coords: coords,\n                rawData: JSON.stringify({\n                  exif: exif,\n                  sensors: {\n                    orientation: orientation,\n                    geo: geo\n                  }\n                })\n              });\n              setNewPhoto(_newPhoto);\n              console.log('onLibraryAdd', _newPhoto);\n              changeMode(NEW_PHOTO_MODES.PHOTOREVIEW);\n              console.log('onLibraryAdd FINISHED', _newPhoto);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onLibraryAdd(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onShutter =\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(data, refId) {\n      var _data$exif2, exif, exifGPS, date, coords, _geoRef$current2, latitude, longitude, _newPhoto;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log('onShutter Debug GOT DATA', {\n                data: data\n              });\n              setNewPhotoData(data);\n              _data$exif2 = data.exif, exif = _data$exif2.exif, exifGPS = _data$exif2.exifGPS;\n              date = String(Date.now());\n              coords = [-123.1398254, 49.3050394];\n\n              if (geoRef.current && geoRef.current.latitude && geoRef.current.longitude) {\n                _geoRef$current2 = geoRef.current, latitude = _geoRef$current2.latitude, longitude = _geoRef$current2.longitude;\n                coords = [longitude, latitude];\n              } else if (exifGPS) {\n                coords = exifGPS;\n              }\n\n              if (isNewSeries) setNewSeries(_objectSpread({}, newSeries, {\n                coords: coords\n              }));\n              _newPhoto = _objectSpread({}, newPhoto, {\n                takenOn: date,\n                coords: coords,\n                rawData: JSON.stringify({\n                  exif: exif,\n                  sensors: {\n                    orientation: orientation,\n                    geo: geo\n                  }\n                })\n              });\n              setNewPhoto(_newPhoto);\n              console.log('onShutter', {\n                _newPhoto: _newPhoto,\n                newSeries: _objectSpread({}, newSeries, {\n                  coords: coords\n                })\n              });\n              setPhotoRefId(refId);\n              changeMode(NEW_PHOTO_MODES.PHOTOREVIEW);\n\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function onShutter(_x2, _x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var onFinalCreate = function onFinalCreate(seriesDelta, photoDelta) {\n    return actions.onCreate(seriesDelta, photoDelta, newPhotoData);\n  };\n\n  var component = null;\n\n  switch (mode.current) {\n    case NEW_PHOTO_MODES.CAMERA:\n      component = device.ios ? React.createElement(LibraryFilePicker, {\n        onCancel: actions.onCancel,\n        cameraPicker: true,\n        onLibraryAdd: onLibraryAdd\n      }) : React.createElement(CameraTool, {\n        photos: photos,\n        onShutter: onShutter,\n        onCancel: actions.onCancel\n      });\n      break;\n\n    case NEW_PHOTO_MODES.FILEPICKER:\n      component = React.createElement(LibraryFilePicker, {\n        onCancel: actions.onCancel,\n        onLibraryAdd: onLibraryAdd\n      });\n      break;\n\n    case NEW_PHOTO_MODES.PHOTOREVIEW:\n      var urlCreator = window.URL || window.webkitURL;\n      var imageUrl = urlCreator.createObjectURL(newPhotoData.file);\n      component = React.createElement(PhotoReviewTool, {\n        defaultRefPhotoId: photoRefId,\n        photos: photos,\n        captured: newPhoto,\n        dataUrl: imageUrl,\n        onConfirm: function onConfirm() {\n          return changeMode(NEW_PHOTO_MODES.PHOTOINFOEDIT);\n        },\n        onCancel: actions.onCancel,\n        onRetry: lastMode\n      });\n      break;\n\n    case NEW_PHOTO_MODES.PHOTOINFOEDIT:\n      component = React.createElement(NewPhotoInfo, {\n        photo: newPhoto,\n        newSeries: isNewSeries ? newSeries : null,\n        actions: {\n          onSave: onFinalCreate,\n          onCancel: actions.onCancel\n        }\n      });\n      break;\n\n    default:\n      console.log('NEWPHOTO: default state. you should NEVER see this', mode);\n      actions.onCancel();\n  }\n\n  return component;\n};\n\nNewPhoto.propTypes = {\n  inputMethod: PropTypes.oneOf(['camera', 'library']),\n  isNewSeries: PropTypes.bool,\n  photos: PropTypes.array,\n  actions: PropTypes.shape({\n    onCreate: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired\n  })\n};\nexport default NewPhoto;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './SeriesView.style';\nvar useStyles = makeStyles(style);\n\nvar SeriesNotFound = function SeriesNotFound(_ref) {\n  var onMenuBack = _ref.onMenuBack;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Series\"))), React.createElement(\"div\", {\n    className: classes.placeholderInner\n  }, React.createElement(\"div\", {\n    className: classes.grow\n  }), React.createElement(Typography, {\n    className: classes.placeholderText,\n    variant: \"h3\"\n  }, \"Series not found\"), React.createElement(\"div\", {\n    className: classes.grow\n  })));\n};\n\nSeriesNotFound.propTypes = {\n  onMenuBack: PropTypes.func.isRequired\n};\nexport default SeriesNotFound;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './SeriesView.style';\nvar useStyles = makeStyles(style);\n\nvar SeriesLoading = function SeriesLoading(_ref) {\n  var onMenuBack = _ref.onMenuBack;\n  var classes = useStyles();\n  return React.createElement(\"div\", {\n    className: classes.root\n  }, React.createElement(CssBaseline, null), React.createElement(AppBar, {\n    position: \"static\",\n    className: classes.appBar\n  }, React.createElement(Toolbar, {\n    disableGutters: true\n  }, React.createElement(IconButton, {\n    className: classes.menuButton,\n    color: \"inherit\",\n    onClick: onMenuBack,\n    \"aria-label\": \"Menu\"\n  }, React.createElement(ArrowBackIcon, null)), React.createElement(Typography, {\n    variant: \"subtitle1\",\n    color: \"inherit\",\n    className: classes.toolbarTitle\n  }, \"Series\"))), React.createElement(\"div\", {\n    className: classes.placeholderInner\n  }, React.createElement(\"div\", {\n    className: classes.grow\n  }), React.createElement(\"div\", {\n    className: classes.progressWrapper\n  }, React.createElement(CircularProgress, {\n    className: classes.progress,\n    color: \"inherit\",\n    size: 150,\n    thickness: 5\n  })), React.createElement(Typography, {\n    className: classes.placeholderText,\n    variant: \"h4\"\n  }, \"Loading...\"), React.createElement(\"div\", {\n    className: classes.grow\n  })));\n};\n\nSeriesLoading.propTypes = {\n  onMenuBack: PropTypes.func.isRequired\n};\nexport default SeriesLoading;","import _regeneratorRuntime from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/matt/Work/Git/PBR/PhotoMonitoring/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport Slideshow from '@morphoto/slideshow';\nimport { AccessHelper } from '@morphoto/common';\nimport { AppContext } from '@morphoto/client-common';\nimport SeriesView from './views/SeriesView';\nimport SeriesEdit from './views/SeriesEdit';\nimport PhotoViewTool from './views/PhotoViewTool';\nimport NewPhoto from './views/NewPhoto';\nimport SeriesNotFound from './SeriesNotFound';\nimport SeriesLoading from './SeriesLoading';\nimport { SeriesContext } from './contexts';\nexport var SERIES_MODES = {\n  SERIES_VIEW: 'series',\n  SERIES_EDIT: 'editseries',\n  NEWPHOTO: 'newphoto',\n  NEWSERIES: 'newseries',\n  REVIEW: 'review',\n  PHOTO_VIEW: 'photoviewer',\n  PHOTO_VIEW_NEW: 'newphotoviewer',\n  SLIDESHOW: 'slideshow'\n};\nvar VIEW_ONLY_MODES = [SERIES_MODES.SERIES_VIEW, SERIES_MODES.PHOTO_VIEW, SERIES_MODES.SLIDESHOW];\nvar VALID_STARTMODES = [SERIES_MODES.SERIES_VIEW, SERIES_MODES.NEWPHOTO, SERIES_MODES.NEWSERIES, SERIES_MODES.PHOTO_REVIEW, SERIES_MODES.PHOTO_VIEW];\n\nvar RepeatablePhotos = function RepeatablePhotos(_ref) {\n  var modeName = _ref.modeName,\n      series = _ref.series,\n      inputMethodINIT = _ref.inputMethod,\n      currentUserId = _ref.currentUserId,\n      currentUserRole = _ref.currentUserRole,\n      initialPhoto = _ref.initialPhoto,\n      loading = _ref.loading,\n      watching = _ref.watching,\n      owned = _ref.owned,\n      actions = _ref.actions;\n\n  var _useContext = useContext(AppContext),\n      device = _useContext.device;\n\n  var _useState = useState({\n    series: series,\n    device: device,\n    ac: new AccessHelper(currentUserId, currentUserRole)\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      seriesContextState = _useState2[0],\n      setSeriesContextState = _useState2[1];\n\n  var _useState3 = useState({\n    current: {\n      name: modeName || SERIES_MODES.SERIES_VIEW,\n      pid: initialPhoto,\n      inputMethod: inputMethodINIT\n    },\n    history: []\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      mode = _useState4[0],\n      setMode = _useState4[1];\n\n  useEffect(function () {\n    setSeriesContextState(_objectSpread({}, seriesContextState, {\n      series: series\n    }));\n\n    if (series && seriesContextState.series && series.id !== seriesContextState.series.id) {\n      setMode({\n        current: {\n          name: modeName || SERIES_MODES.SERIES_VIEW,\n          pid: initialPhoto,\n          inputMethod: inputMethodINIT\n        },\n        history: []\n      });\n    } else if (mode.current.pid !== initialPhoto) {\n      setMode(_objectSpread({}, mode, {\n        current: _objectSpread({}, mode.current, {\n          name: modeName || SERIES_MODES.SERIES_VIEW,\n          pid: initialPhoto\n        })\n      }));\n    }\n  }, [series, initialPhoto, inputMethodINIT, modeName]);\n\n  var onUpdatePhoto = function onUpdatePhoto(photo, photoDelta) {\n    var newSeries = _objectSpread({}, seriesContextState.series);\n\n    newSeries.photos = newSeries.photos.map(function (ph) {\n      return ph.id === photoDelta.id ? _objectSpread({}, ph, {}, photoDelta) : ph;\n    });\n    actions.onChangePhoto(photo, _objectSpread({}, photoDelta, {\n      seriesId: newSeries.id\n    }));\n  };\n\n  var onApprovePhoto =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(newSeries, newPhoto, newPhotoData) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log('RepeatablePhotos: waiting for photo ID', {\n                newSeries: newSeries,\n                newPhoto: newPhoto,\n                newPhotoData: newPhotoData\n              });\n              _context.next = 3;\n              return actions.onNewPhoto(newPhoto, newPhotoData);\n\n            case 3:\n              setSeriesContextState(_objectSpread({}, seriesContextState, {\n                series: _objectSpread({}, series, {\n                  photos: [].concat(_toConsumableArray(series.photos), [newPhoto])\n                })\n              }));\n              changeMode(SERIES_MODES.PHOTO_VIEW_NEW, newPhoto.id);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onApprovePhoto(_x, _x2, _x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var onDeletePhotos = function onDeletePhotos(photoIdArr) {\n    series.photos.filter(function (sp) {\n      return photoIdArr.indexOf(sp.id) > -1;\n    }).forEach(function (p) {\n      return actions.onDeletePhoto(p);\n    });\n  };\n\n  var changeMode = function changeMode(newModeName, newPid, newInputMethod) {\n    var canUpdate = seriesContextState.ac.canUser('update', series, 'series');\n    if (seriesContextState === null) actions.onClose();\n\n    if (!canUpdate && VIEW_ONLY_MODES.indexOf(newModeName) < 0) {\n      console.error('ILLEGAL MODE CHANGE!!!!!', {\n        from: mode.current,\n        to: newModeName,\n        canUpdate: canUpdate\n      });\n    } else {\n      setMode({\n        current: {\n          name: newModeName,\n          pid: newPid,\n          inputMethod: newInputMethod\n        },\n        history: [].concat(_toConsumableArray(mode.history), [mode.current])\n      });\n    }\n  };\n\n  var lastMode = function lastMode() {\n    if (mode.history.length > 0) {\n      var oldHistory = _toConsumableArray(mode.history);\n\n      var oldMode = oldHistory.pop();\n      setMode({\n        current: oldMode,\n        history: oldHistory\n      });\n    } else {\n      actions.onClose();\n    }\n  };\n\n  var viewPhoto = function viewPhoto(pid) {\n    changeMode(SERIES_MODES.PHOTO_VIEW, pid);\n  };\n\n  var component = null;\n  if (loading) return React.createElement(SeriesLoading, {\n    onMenuBack: actions.onClose\n  });else if (!seriesContextState.series && mode.current.name !== SERIES_MODES.NEWSERIES) return React.createElement(SeriesNotFound, {\n    onMenuBack: actions.onClose\n  });\n\n  switch (mode.current.name) {\n    case SERIES_MODES.SERIES_VIEW:\n      component = React.createElement(SeriesView, {\n        onSlideshowStart: function onSlideshowStart() {\n          return changeMode(SERIES_MODES.SLIDESHOW);\n        },\n        onChange: function onChange() {\n          console.log('onChange NOT IMPLEMENTED');\n        },\n        watching: watching,\n        owned: owned,\n        initialPhoto: initialPhoto,\n        onDeletePhotos: onDeletePhotos,\n        onDeleteSeries: actions.onDelete,\n        onFindOnMap: actions.onFindOnMap,\n        onCameraAdd: function onCameraAdd() {\n          return changeMode(SERIES_MODES.NEWPHOTO, null, 'camera');\n        },\n        onEditSeries: function onEditSeries() {\n          return changeMode(SERIES_MODES.SERIES_EDIT);\n        },\n        onLibraryAdd: function onLibraryAdd() {\n          return changeMode(SERIES_MODES.NEWPHOTO, null, 'library');\n        },\n        onTileClick: viewPhoto,\n        onMenuBack: actions.onClose,\n        onWatch: actions.onWatch,\n        onUnWatch: actions.onUnWatch\n      });\n      break;\n\n    case SERIES_MODES.SERIES_EDIT:\n      component = React.createElement(SeriesEdit, {\n        onCancel: function onCancel() {\n          return changeMode(SERIES_MODES.SERIES_VIEW);\n        },\n        onOk: function onOk(seriesDelta) {\n          actions.onChange(series, _objectSpread({}, seriesDelta, {\n            id: series.id\n          }));\n          changeMode(SERIES_MODES.SERIES_VIEW);\n        }\n      });\n      break;\n\n    case SERIES_MODES.PHOTO_VIEW:\n      component = React.createElement(PhotoViewTool, {\n        photoId: mode.current.pid,\n        photos: series.photos,\n        onMenuBack: lastMode,\n        onUpdatePhoto: onUpdatePhoto\n      });\n      break;\n\n    case SERIES_MODES.PHOTO_VIEW_NEW:\n      component = React.createElement(PhotoViewTool, {\n        photoId: initialPhoto,\n        photos: series.photos,\n        newPhoto: true,\n        onMenuBack: function onMenuBack() {\n          return changeMode(SERIES_MODES.SERIES_VIEW);\n        },\n        onUpdatePhoto: onUpdatePhoto\n      });\n      break;\n\n    case SERIES_MODES.SLIDESHOW:\n      component = React.createElement(Slideshow, {\n        photos: seriesContextState.series.photos,\n        onCancel: lastMode\n      });\n      break;\n\n    case SERIES_MODES.NEWPHOTO:\n      component = React.createElement(NewPhoto, {\n        inputMethod: mode.current.inputMethod,\n        photos: series ? series.photos : null,\n        actions: {\n          onCreate: onApprovePhoto,\n          onCancel: lastMode\n        }\n      });\n      break;\n\n    case SERIES_MODES.NEWSERIES:\n      component = React.createElement(NewPhoto, {\n        inputMethod: mode.current.inputMethod,\n        isNewSeries: true,\n        actions: {\n          onCreate: actions.onNewSeries,\n          onCancel: lastMode\n        }\n      });\n      break;\n\n    default:\n      console.log('REPEATABLEPHOTO: default state. you should NEVER see this', seriesContextState);\n      component = null;\n  }\n\n  return React.createElement(SeriesContext.Provider, {\n    value: seriesContextState\n  }, component);\n};\n\nRepeatablePhotos.propTypes = {\n  modeName: PropTypes.oneOf(VALID_STARTMODES),\n  watching: PropTypes.bool,\n  owned: PropTypes.bool,\n  currentUserId: PropTypes.string,\n  currentUserRole: PropTypes.string,\n  inputMethod: PropTypes.oneOf(['camera', 'library']),\n  series: PropTypes.object,\n  initialPhoto: PropTypes.string,\n  loading: PropTypes.bool,\n  actions: PropTypes.shape({\n    onChange: PropTypes.func.isRequired,\n    onFindOnMap: PropTypes.func.isRequired,\n    onChangePhoto: PropTypes.func.isRequired,\n    onDeletePhoto: PropTypes.func.isRequired,\n    onNewPhoto: PropTypes.func.isRequired,\n    onNewSeries: PropTypes.func.isRequired,\n    onDelete: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onWatch: PropTypes.func,\n    onUnWatch: PropTypes.func\n  })\n};\nRepeatablePhotos.defaultProps = {\n  mode: SERIES_MODES.SERIES_VIEW\n};\nexport default RepeatablePhotos;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport Fab from '@material-ui/core/Fab';\nimport AddCameraIcon from '@material-ui/icons/AddAPhoto';\nimport { makeStyles } from '@material-ui/core/styles';\nimport style from './SeriesList.style';\nimport { dates } from '@morphoto/common';\nimport { RawImage } from '@morphoto/photos';\nimport { useNewImageMenu } from '@morphoto/ui';\nvar useStyles = makeStyles(style);\n\nvar SeriesList = function SeriesList(_ref) {\n  var seriesList = _ref.seriesList,\n      canEdit = _ref.canEdit,\n      tileClick = _ref.tileClick,\n      columns = _ref.columns,\n      cameraClick = _ref.cameraClick,\n      libraryClick = _ref.libraryClick;\n  var classes = useStyles();\n\n  var _useNewImageMenu = useNewImageMenu(cameraClick, libraryClick),\n      onDownThunk = _useNewImageMenu.onDownThunk,\n      onUpThunk = _useNewImageMenu.onUpThunk,\n      onBlock = _useNewImageMenu.onBlock,\n      menu = _useNewImageMenu.menu;\n\n  return React.createElement(GridList, {\n    cols: columns || 1,\n    cellHeight: 200,\n    className: classes.root\n  }, seriesList.map(function (seriesItem, idx) {\n    var photo = seriesItem.photos[0];\n    return React.createElement(GridListTile, {\n      key: \"gridTile\".concat(idx),\n      onClick: function onClick() {\n        return tileClick(seriesItem);\n      }\n    }, photo && React.createElement(RawImage, {\n      sizePriority: ['medium', 'thumb', 'large'],\n      photo: photo\n    }), canEdit && React.createElement(Fab, {\n      onClick: onBlock,\n      onMouseDown: onDownThunk(seriesItem),\n      onMouseUp: onUpThunk(seriesItem),\n      onTouchStart: onDownThunk(seriesItem),\n      onTouchEnd: onUpThunk(seriesItem),\n      color: \"secondary\",\n      className: classes.fab\n    }, React.createElement(AddCameraIcon, null)), menu, React.createElement(GridListTileBar, {\n      title: seriesItem.name,\n      subtitle: React.createElement(\"span\", null, seriesItem.photos.length, \" photos \", React.createElement(\"strong\", null, \"Last Photo\"), \": \", dates.formatDate(seriesItem.photos[0].takenOn, 'llll'))\n    }));\n  }));\n};\n\nSeriesList.propTypes = {\n  seriesList: PropTypes.array.isRequired,\n  columns: PropTypes.number,\n  canEdit: PropTypes.bool,\n  tileClick: PropTypes.func.isRequired,\n  cameraClick: PropTypes.func.isRequired,\n  libraryClick: PropTypes.func.isRequired\n};\nexport default SeriesList;","export default (function (theme) {\n  return {\n    root: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      justifyContent: 'space-around',\n      overflow: 'hidden',\n      backgroundColor: theme.palette.background.paper\n    },\n    fab: {\n      position: 'absolute',\n      top: 10,\n      right: 10,\n      height: theme.spacing(5),\n      width: theme.spacing(5)\n    },\n    fab2: {\n      position: 'absolute',\n      top: 10,\n      left: 10,\n      height: theme.spacing(5),\n      width: theme.spacing(5)\n    }\n  };\n});","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { ThemeProvider } from '@material-ui/styles';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport List from '@material-ui/core/List';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { RawImage } from '@morphoto/photos';\nimport { dates } from '@morphoto/common';\nimport { config } from '@morphoto/client-common';\nimport themes from '@morphoto/themes';\n\nvar style = function style(theme) {\n  return {\n    root: {\n      margin: 0,\n      padding: theme.spacing(1)\n    },\n    chipContainer: {\n      display: 'flex',\n      width: '100%'\n    },\n    grow: {\n      flexGrow: 1\n    },\n    accessLabel: {\n      padding: theme.spacing(0.5, 0.5)\n    },\n    img: {\n      verticalAlign: 'top',\n      objectFit: 'cover',\n      height: '100%',\n      width: '100%'\n    },\n    text: {\n      height: '115px',\n      margin: 0,\n      padding: theme.spacing(0, 1),\n      alignSelf: 'flex-start',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    textSm: {\n      height: '75px',\n      margin: 0,\n      padding: theme.spacing(0, 1),\n      alignSelf: 'flex-start',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    titleText: {\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden'\n    },\n    dateContainer: {\n      display: 'flex'\n    },\n    dateLabel: {\n      fontWeight: 'bold',\n      flex: '1 1 50px'\n    },\n    dateText: {},\n    imgFiller: {\n      flexGrow: 1,\n      background: theme.palette.text.primary,\n      overflow: 'hidden'\n    },\n    imgContainer: {\n      flex: '0 0 115px',\n      alignSelf: 'flex-start',\n      height: 115,\n      overflow: 'hidden',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    imgContainerSm: {\n      flex: '0 0 75px',\n      alignSelf: 'flex-start',\n      height: 75,\n      overflow: 'hidden',\n      display: 'flex',\n      flexDirection: 'column'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar SeriesListItem = function SeriesListItem(_ref) {\n  var series = _ref.series,\n      loading = _ref.loading,\n      onClick = _ref.onClick,\n      children = _ref.children,\n      showCreatedOn = _ref.showCreatedOn,\n      showLastPhoto = _ref.showLastPhoto,\n      small = _ref.small;\n  var classes = useStyles();\n  if (loading || !series) return 'LOADING...';\n  var accessLabel = config.ACCESS.PRIVATE.label;\n  accessLabel = series.access ? config.ACCESS[series.access].label : config.ACCESS.PRIVATE.label;\n  return React.createElement(ListItem, {\n    className: classes.root,\n    button: true,\n    component: \"div\",\n    disableGutters: true\n  }, React.createElement(\"div\", {\n    className: small ? classes.imgContainerSm : classes.imgContainer,\n    onClick: onClick\n  }, React.createElement(\"div\", {\n    className: classes.imgFiller\n  }, React.createElement(RawImage, {\n    photo: series.featured,\n    sizePriority: ['thumb', 'medium', 'large'],\n    className: classes.img\n  })), series.access && React.createElement(ThemeProvider, {\n    theme: themes.access[series.access]\n  }, React.createElement(Typography, {\n    className: classNames(classes.accessLabel),\n    variant: \"caption\",\n    component: \"div\"\n  }, \"\".concat(series.photoCount || 0, \" Photos\"), !small && React.createElement(\"em\", null, \"(\", accessLabel, \")\")))), React.createElement(ListItemText, {\n    className: small ? classes.textSm : classes.text,\n    disableTypography: true,\n    onClick: onClick\n  }, React.createElement(Typography, {\n    variant: \"body1\",\n    component: \"div\",\n    className: classes.titleText\n  }, series.name || loading), React.createElement(Typography, {\n    variant: \"body2\",\n    component: \"div\"\n  }, React.createElement(\"strong\", null, \"Created by:\"), \" \", series.createdUser.username), React.createElement(\"div\", {\n    className: classes.grow\n  }), showCreatedOn && React.createElement(\"div\", {\n    className: classes.dateContainer\n  }, React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.dateLabel\n  }, \"Created:\"), React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.dateText\n  }, dates.formatDate(series.createdOn, 'lll'))), showLastPhoto && series.latest && React.createElement(\"div\", {\n    className: classes.dateContainer\n  }, React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.dateLabel\n  }, \"Last Photo:\"), React.createElement(Typography, {\n    variant: \"caption\",\n    className: classes.dateText\n  }, dates.formatDate(series.latest.takenOn, 'lll')))), children);\n};\n\nSeriesListItem.propTypes = {\n  series: PropTypes.object,\n  loading: PropTypes.bool,\n  small: PropTypes.bool,\n  showCreatedOn: PropTypes.bool,\n  showLastPhoto: PropTypes.bool,\n  onClick: PropTypes.func,\n  children: PropTypes.array\n};\nexport default SeriesListItem;\nexport var SeriesListItemCosmos = function SeriesListItemCosmos(props) {\n  return React.createElement(List, {\n    disablePadding: true,\n    dense: true\n  }, React.createElement(SeriesListItem, props));\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { List } from '@material-ui/core';\nimport SeriesListItem from './SeriesListItem';\n\nvar style = function style(theme) {\n  return {\n    root: {},\n    title: {\n      background: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      alignSelf: 'flex-start',\n      width: '100%',\n      margin: 0,\n      display: 'flex',\n      padding: theme.spacing(2)\n    },\n    dlgTitle: {\n      flexGrow: 1\n    },\n    closeButton: {\n      padding: 0,\n      alignSelf: 'flex-start'\n    },\n    list: {\n      overflowX: 'hidden',\n      overflowY: 'scroll'\n    }\n  };\n};\n\nvar useStyles = makeStyles(style);\n\nvar ViewListDialog = function ViewListDialog(_ref) {\n  var title = _ref.title,\n      seriesList = _ref.seriesList,\n      onSelect = _ref.onSelect,\n      onClose = _ref.onClose,\n      open = _ref.open;\n  var classes = useStyles();\n  return React.createElement(Dialog, {\n    className: classes.root,\n    fullWidth: true,\n    open: open,\n    onClose: onClose,\n    maxWidth: \"xl\",\n    \"aria-labelledby\": \"confirmation-dialog-title\"\n  }, React.createElement(DialogTitle, {\n    className: classes.title,\n    disableTypography: true\n  }, React.createElement(Typography, {\n    className: classes.dlgTitle\n  }, title), React.createElement(IconButton, {\n    color: \"inherit\",\n    className: classes.closeButton,\n    onClick: onClose\n  }, React.createElement(CloseIcon, {\n    color: \"inherit\"\n  }))), React.createElement(List, {\n    className: classes.list,\n    dense: true,\n    disablePadding: true\n  }, seriesList.map(function (series) {\n    return React.createElement(SeriesListItem, {\n      key: \"series\".concat(series.id),\n      series: series,\n      small: true,\n      onClick: function onClick() {\n        return onSelect(series.id);\n      }\n    });\n  })));\n};\n\nViewListDialog.propTypes = {\n  open: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  seriesList: PropTypes.array.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\nexport default ViewListDialog;","import PhotoSeries from './PhotoSeries';\nexport default PhotoSeries;\nexport { SERIES_MODES } from './PhotoSeries';\nexport { default as SeriesList } from './SeriesList';\nexport { default as SeriesListItem } from './SeriesListItem';\nexport { default as ViewListDialog } from './ViewListDialog';\nexport { default as PhotoReviewTool } from './views/PhotoReviewTool';\nexport { default as NewPhoto, NEW_PHOTO_MODES } from './views/NewPhoto';"],"sourceRoot":""}